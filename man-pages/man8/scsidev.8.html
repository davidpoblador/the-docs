<!DOCTYPE html>
<html lang="en">
<head>
  <link href="https://fonts.googleapis.com/css?family=Fira+Mono:400,700&effect=destruction%7Cshadow-multiple" rel="stylesheet" type="text/css">
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>scsidev: Populate /dev/scsi with device names that are persistent against scsi configuration changes.</title>
  <link href="/css/bootstrap.min.css" rel="stylesheet">
  <link href="/css/manpage.css" rel="stylesheet">
  <link rel="apple-touch-icon" sizes="57x57" href="/icons/apple-icon-57x57.png">
  <link rel="apple-touch-icon" sizes="60x60" href="/icons/apple-icon-60x60.png">
  <link rel="apple-touch-icon" sizes="72x72" href="/icons/apple-icon-72x72.png">
  <link rel="apple-touch-icon" sizes="76x76" href="/icons/apple-icon-76x76.png">
  <link rel="apple-touch-icon" sizes="114x114" href="/icons/apple-icon-114x114.png">
  <link rel="apple-touch-icon" sizes="120x120" href="/icons/apple-icon-120x120.png">
  <link rel="apple-touch-icon" sizes="144x144" href="/icons/apple-icon-144x144.png">
  <link rel="apple-touch-icon" sizes="152x152" href="/icons/apple-icon-152x152.png">
  <link rel="apple-touch-icon" sizes="180x180" href="/icons/apple-icon-180x180.png">
  <link rel="icon" type="image/png" sizes="192x192" href="/icons/android-icon-192x192.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/icons/favicon-32x32.png">
  <link rel="icon" type="image/png" sizes="96x96" href="/icons/favicon-96x96.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/icons/favicon-16x16.png">
  <link rel="manifest" href="/icons/manifest.json">
  <meta name="msapplication-TileColor" content="#ffffff">
  <meta name="msapplication-TileImage" content="/icons/ms-icon-144x144.png">
  <meta name="theme-color" content="#ffffff">
  <meta name="description" content="Populate /dev/scsi with device names that are persistent against scsi configuration changes.">
  <meta name="twitter:card" content="summary_large_image">
  <meta name="twitter:site" content="@CartaTech">
  <meta name="twitter:creator" content="@CartaTech">
  <meta name="twitter:title" content="scsidev (8) manual">
  <meta name="twitter:description" content="Populate /dev/scsi with device names that are persistent against scsi configuration changes.">
  <meta name="twitter:image" content="https://www.carta.tech/images/scsitools-scsidev-8.png">
  <meta property="og:url" content="https://www.carta.tech/man-pages/man8/scsidev.8.html" />
  <meta property="og:type" content="website" />
  <meta property="og:title" content="scsidev (8) manual" />
  <meta property="og:description" content="Populate /dev/scsi with device names that are persistent against scsi configuration changes." />
  <meta property="fb:app_id" content="1241677679199500" />
  <meta property="og:image" content="https://www.carta.tech/images/scsitools-scsidev-8.png" />
  <meta property="og:image:width" content="600" />
  <meta property="og:image:height" content="315" />
</head>
<body>
  <div class="container final">
          <div class="page-header">
        <h1 class="font-effect-destruction">scsidev<small> (8)</small></h1>
        <p class="lead">Populate /dev/scsi with device names that are persistent against scsi configuration changes.</p>
      </div>

    <ol class="breadcrumb" itemscope itemtype="http://schema.org/BreadcrumbList">
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/">
      <span itemprop="name">Carta.tech</span>
    </a>
    <meta itemprop="position" content="1" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/">
      <span itemprop="name">Man Pages</span>
    </a>
    <meta itemprop="position" content="2" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/man8/">
      <span itemprop="name">System administration commands</span>
    </a>
    <meta itemprop="position" content="3" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/man8/scsidev.8.html">
      <span itemprop="name">scsidev: Populate /dev/scsi with device names that are persistent against scsi configuration changes.</span>
    </a>
    <meta itemprop="position" content="4" />
  </li>
</ol>
<ol class="breadcrumb" itemscope itemtype="http://schema.org/BreadcrumbList">
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/">
      <span itemprop="name">Carta.tech</span>
    </a>
    <meta itemprop="position" content="1" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/packages/">
      <span itemprop="name">Packages</span>
    </a>
    <meta itemprop="position" content="2" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/packages/scsitools/">
      <span itemprop="name">scsitools</span>
    </a>
    <meta itemprop="position" content="3" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/man8/scsidev.8.html">
      <span itemprop="name">scsidev: Populate /dev/scsi with device names that are persistent against scsi configuration changes.</span>
    </a>
    <meta itemprop="position" content="4" />
  </li>
</ol>
    
      <section>
        <h2 class="font-effect-shadow-multiple">SYNOPSIS</h2>
        <div class="sectioncontent">
<p><strong>scsidev</strong> [ <strong>-f</strong> ] [ <strong>-n</strong> ] [ <strong>-d</strong> ] [ <strong>-l</strong> ] [ <strong>-L</strong> ] [ <strong>-m mode</strong> ] [ <strong>-c mxms</strong> ] [ <strong>-A aliasfile</strong> ] [ <strong>-r</strong> ] [ <strong>-M</strong> ] [ <strong>-e</strong> ] [ <strong>-o</strong> ] [ <strong>-s</strong> ] [ <strong>-v</strong> ] [ <strong>-q</strong> ] [ <strong>-h</strong> ]</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">DESCRIPTION</h2>
        <div class="sectioncontent">
<p><strong>scsidev</strong> is a utility that is used to guarantee that the same device node can be used for the same scsi device, no matter what other scsi devices are added or removed from the scsi chain.  The need for this tool arose because device numbers are assigned dynamically at boot time, and if a new disk were added to the system (or if some disk didn't spin up), then fixed device nodes would cause the wrong filesystems to be mounted, checked, etc.  This can also result in security holes, as some device nodes may have permissions that allow general users access to the raw device, and if the mappings were to change, users would be able to access different devices.</p><p><strong>scsidev</strong> is designed to be used once each time the system boots.  It will scan all of the detected devices on the system, and determine a immutable name that will represent the device.  It first checks to see if a node by this name already exists - if this is the case, then it checks to see if the major/minor numbers are correct.  If a change in the minor number is required, then a new device is created with the correct major/minor numbers, and in addition, any ownership and permissions for the old device are applied to the new device.</p><p>Once this process is complete, then <strong>scsidev</strong> will scan all of the entries in the /dev/scsi directory, and see if any of them are for devices nodes which were added for devices that are not active.  The permissions of inactive devices are stored in a .shadow. file and the device node is removed as a security precaution, since these might have permissions that would allow people to access devices that they should not be able to access.  This is the default behaviour and is considered ideal for most cases, as it preserves the ownership and permissions of the files and is secure.</p><p>The so called sanitizing can be influenced by the options <strong>-f -d -n.</strong></p><p>When you rescan the bus by using the <strong>rescan-scsi-bus.sh</strong> script or manually by using commands like</p>
<pre>
echo "scsi add-single-device C B T U" &gt;/proc/scsi/scsi
</pre>
<p>(C = Controller (host) no., B = Bus (Channel), T = Target (SCSI ID), U = Unit (SCSI LUN)) after the system is booted, then you will have to rerun scsidev so that the device nodes for the newly detected devices are properly updated.</p><p>The device nodes that <strong>scsidev</strong> creates look something like "sdh4-334c0i0l0p1".  In this case, the various components of the name represent physical attributes about the device or the host adapter to which it is connected. To begin with, the "h4" indicates that it is connected to an Adaptec 1542.  The "-334" is a means of identifying which 1542 the device is attached to (since linux supports more than one 1542 in the system at the same time) and (in this case) corresponds to the IO Port number (hex) of the controller (this is the host adapter id number). The "c0" represents the channel number (since some host adapters can drive multiple scsi busses).  The "i0l0" indicates that this device is scsi ID 0, with lun 0.  Finally the "p1" indicated partition number 1.</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">OPTIONS</h2>
        <div class="sectioncontent">

<dl class='dl-vertical'>
  <dt>
    <p><em>-f</em></p>
  </dt>
  <dd>
    <p>Flush everything from /dev/scsi prior to scanning the detected devices. This means that new device nodes will be created even if the old ones were OK.</p>
  </dd>
  <dt>
    <p><em>-d</em></p>
  </dt>
  <dd>
    <p>Sanitize by deletion. The .shadow. backup files will not be created, so you loose all non-default ownership/permissions that may have been set.</p>
  </dd>
  <dt>
    <p><em>-n</em></p>
  </dt>
  <dd>
    <p>Don't touch device nodes for non-existing SCSI devices. This might have security implications and is therefore not recommended.</p>
  </dd>
  <dt>
    <p><em>-l</em></p>
  </dt>
  <dd>
    <p>Symbolic link mode.  Instead of creating nodes, symbolic links are created which point to the older /dev/sda1 types of device nodes. When using this option, the permissions of the /dev/XXX device nodes will be changed to match the ones stored in /dev/scsi/YYY file, if present.</p>
  </dd>
  <dt>
    <p><em>-L</em></p>
  </dt>
  <dd>
    <p>Use symbolic names for the aliases assigned through the <strong>/etc/scsi.alias</strong> settings (see below).</p>
  </dd>
  <dt>
    <p><em>-m mode</em></p>
  </dt>
  <dd>
    <p>Specifies the mode (permissions) for new entries that need to be created.</p>
  </dd>
  <dt>
    <p><em>-c maxmiss</em></p>
  </dt>
  <dd>
    <p>Normally, if <strong>scsidev</strong> fails to open a generic scsi device, it finishes its scan for devices. With this option, it goes on until maxmiss missing devices were found. This is only used, if you don't have the /proc/scsi/scsi extensions for large disks.</p>
  </dd>
  <dt>
    <p><em>-A aliasfile</em></p>
  </dt>
  <dd>
    <p>Use an alternative file instead of the default /etc/scsi.alias (see below).</p>
  </dd>
  <dt>
    <p><em>-r</em></p>
  </dt>
  <dd>
    <p><strong>scsidev</strong> does first probe the generic and then -- if appropriate -- the other highlevel devices (st, sd, sr). For removable devices (sd, sr, osst), this will fail, if no medium is inserted, so <strong>scsidev</strong> can not ensure, that the device actually corresponds to the one reported by the sg interface. After the first device scan, the situation is clear and <strong>scsidev</strong> will do the right guesses. So using -r in bootup scripts is safe. After you removed devices from your SCSI config, it isn't safe any longer. This is only needed, if you don't have the /proc/scsi/scsi extensions for large disks.</p>
  </dd>
  <dt>
    <p><em>-M</em></p>
  </dt>
  <dd>
    <p>Multipath support. <strong>scsidev</strong> normally does complain if a line in scsi.alias matches more than one device and does not create an alias then. With multipatch support on, it just creates the alias for the first device found matching the description in the scsi.alias description.</p>
  </dd>
  <dt>
    <p><em>-e</em></p>
  </dt>
  <dd>
    <p>Instructs <strong>scsidev</strong> to use devfs like names, i.e. using the cbtu (controller, bus, target unit) characters instead of hcil (host, channel, scsi Id, scsi Lun) to build the device name.</p>
  </dd>
  <dt>
    <p><em>-o</em></p>
  </dt>
  <dd>
    <p>Instructs <strong>scsidev</strong> to use scd instead of sr for the old names of CD-ROM devices (relevant for symlink mode).</p>
  </dd>
  <dt>
    <p><em>-s</em></p>
  </dt>
  <dd>
    <p>Tells <strong>scsidev</strong>  to print out the device serial numbers of all detected devices on the system. This string can be useful for forming aliases. If supported, also the WWID is printed.</p>
  </dd>
  <dt>
    <p><em>-v</em></p>
  </dt>
  <dd>
    <p>Verbosity.  Mainly used for debugging purposes.  Use multiple times for more verbosity.</p>
  </dd>
  <dt>
    <p><em>-q</em></p>
  </dt>
  <dd>
    <p>Be Quiet.  Only produce output, if there are errors.</p>
  </dd>
  <dt>
    <p><em>-h</em></p>
  </dt>
  <dd>
    <p>Output short usage summary and copyright info and exit.</p>
  </dd>

</dl>

        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">ALIASES</h2>
        <div class="sectioncontent">
<p>It was intended that <strong>scsidev</strong> be useful without any configuration at all.  There are times when it is much more convenient to have symbolic names for various devices. These symbolic names should track devices as they get moved from controller to another, or even if the SCSI id number is changed.</p><p>The general idea is that there is a configuration file <strong>/etc/scsi.alias</strong> which lists the aliases that <strong>scsidev</strong> will attempt to create.  Each line represents a separate alias, and consists of a series of tokens.  Here are a couple of example entries:</p>
<pre>
serial_number="DX908FK", devtype=disk, alias=fourgig
manufacturer=WANGTEK, devtype=tape, alias=qictape
id=2, devtype=generic, alias=cdwriter
</pre>
<p>The minimum requirements are that each line have a alias and a devtype field.  The alias will be used to build the pathnames, and the devtype must be one of disk, tape, osst, cdrom or generic.</p><p>The additional qualifiers are optional, and you must specify a sufficient number of them such that the alias will match only one device.  The allowable qualifiers are:</p>
<dl class='dl-vertical'>
  <dt>
    <p><em>manufacturer=</em></p>
  </dt>
  <dd>
    <p>Specifies the name of the manufacturer.  This is the same string that is printed at boot time, and is also available through /proc/scsi.</p>
  </dd>
  <dt>
    <p><em>model=</em></p>
  </dt>
  <dd>
    <p>Specifies the model number of the device.  This is the same string that is printed at boot time, and is also available through /proc/scsi.</p>
  </dd>
  <dt>
    <p><em>rev=</em></p>
  </dt>
  <dd>
    <p>Specifies the revision string of the device. This is the same string that is printed at boot time, and is also available through /proc/scsi.</p>
  </dd>
  <dt>
    <p><em>serial_number=</em></p>
  </dt>
  <dd>
    <p>Specifies the serial number of the device.  Not all devices implement this, but for those that do it provides a convenient mechanism to uniquely identify a device no matter where it is found on the scsi chain. The serial number is the one reported in INQUIRY page 0x80 with EVPD=1. It is displayed by <strong>scsidev -s .</strong></p>
  </dd>
  <dt>
    <p><em>wwid=</em></p>
  </dt>
  <dd>
    <p>Specifies the WWID number of a device. This is a 64bit world wide unique number, which is supported by SCSI-3 devices and reported via INQUIRY page 0x83 with EVPD=1. If supported, it's displayed by <strong>scsidev -s .</strong></p>
  </dd>
  <dt>
    <p><em>id=</em></p>
  </dt>
  <dd>
    <p>Specifies the scsi id number for the device.</p>
  </dd>
  <dt>
    <p><em>lun=</em></p>
  </dt>
  <dd>
    <p>Specifies the lun for the device.  Most devices have a lun of 0, and it is only special devices such as cd changers that implement multiple lun devices.</p>
  </dd>
  <dt>
    <p><em>chan=</em></p>
  </dt>
  <dd>
    <p>Specifies which channel (i.e. which bus) for host adapters that drive multiple channels.</p>
  </dd>
  <dt>
    <p><em>partition=</em></p>
  </dt>
  <dd>
    <p>Specifies the partition number for disk drives.  If unspecified, the alias will match all partitions on the disk.</p>
  </dd>
  <dt>
    <p><em>hostid=</em></p>
  </dt>
  <dd>
    <p>Specifies the host adapter id number (0x334 part of sdh4-334c0i0l0p1 for example).</p>
  </dd>
  <dt>
    <p><em>hostnum=</em></p>
  </dt>
  <dd>
    <p>Specifies the unique number that each host adpater driver returns. Generally this number is always 0 except for cases where the driver supports more than one device of a given type on the system.</p>
  </dd>
  <dt>
    <p><em>hostname=</em></p>
  </dt>
  <dd>
    <p>Specifies the host adapter driver name. (Only the given chars need to match, so you may omit the version number.)</p>
  </dd>

</dl>
<p>Note that the specifiers which take string arguments can be quoted if the string contains whitespace.</p><p>For disks, aliases for all partitions will be created (unless partition= is specified). The names get a <strong>-pN</strong> suffix (N indicating the number of the partition. For tapes (st and osst type), the non-rewinding variant with an <strong>n</strong> prepended will be created automatically.</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">AUTHOR</h2>
        <div class="sectioncontent">

<pre>
<strong>scsidev</strong>
 ... was written by Eric Youngdale &lt;eric@aib.com&gt;
 ... was enhanced by Kurt Garloff &lt;garloff@suse.de&gt;
</pre>

        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">BUGS</h2>
        <div class="sectioncontent">
<p>Probably there are ...</p><p>The BIOS and LILO do not have the knowledge about the SCSI devices at boot time, so you still have to ensure, your kernel can be loaded when you insert a new disk.</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">COPYRIGHT</h2>
        <div class="sectioncontent">
<p>This program is free software. You can use it under the terms of the <strong>GNU GPL</strong> (General Public License) Version 2 (or any later version, at your option). Note, that the GNU GPL implies, that there is <strong>NO WARRANTY</strong> at all. Full text of the GPL can be found in /usr/share/common-licenses/GPL file.</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">AVAILABILITY</h2>
        <div class="sectioncontent">
<p><strong>scsidev</strong> is available from</p>
<pre>
<strong>http://www.suse.de/~garloff/linux/scsidev/</strong>
and
<strong>http://www.garloff.de/kurt/linux/scsidev/</strong>
and will also be put on standard anonymous ftp servers.
The old version is available from
<strong>ftp://tsx-11.mit.edu/pub/linux/BETA/scsi/</strong>
</pre>

        </div>
      </section>
<nav>
  <ul class="pager">
   <li class="previous"><a href="scsi_temperature.8.html"><span aria-hidden="true">&larr;</span> scsi_temperature.8: Fetch the temperature of a scsi device</a></li>
   <li class="next"><a href="scsiformat.8.html">scsiformat.8: Low level format an scsi disk device <span aria-hidden="true">&rarr;</span></a></li>
  </ul>
</nav>

  </div>
  <!-- jQuery (necessary for Bootstrap's JavaScript plugins) -->
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.2/jquery.min.js"></script>
  <!-- Include all compiled plugins (below), or include individual files as needed -->
  <script src="/js/bootstrap.min.js"></script>
  <script>
    (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
      (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
      m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
    })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

    ga('create', 'UA-60781387-1', 'auto');
    ga('send', 'pageview');

  </script>
</body>
</html>
