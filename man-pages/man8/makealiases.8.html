<!DOCTYPE html>
<html lang="en">
<head>
  <link href="https://fonts.googleapis.com/css?family=Fira+Mono:400,700&effect=destruction%7Cshadow-multiple" rel="stylesheet" type="text/css">
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>makealiases: Create an alias database</title>
  <link href="/css/bootstrap.min.css" rel="stylesheet">
  <link href="/css/manpage.css" rel="stylesheet">
  <link rel="apple-touch-icon" sizes="57x57" href="/icons/apple-icon-57x57.png">
  <link rel="apple-touch-icon" sizes="60x60" href="/icons/apple-icon-60x60.png">
  <link rel="apple-touch-icon" sizes="72x72" href="/icons/apple-icon-72x72.png">
  <link rel="apple-touch-icon" sizes="76x76" href="/icons/apple-icon-76x76.png">
  <link rel="apple-touch-icon" sizes="114x114" href="/icons/apple-icon-114x114.png">
  <link rel="apple-touch-icon" sizes="120x120" href="/icons/apple-icon-120x120.png">
  <link rel="apple-touch-icon" sizes="144x144" href="/icons/apple-icon-144x144.png">
  <link rel="apple-touch-icon" sizes="152x152" href="/icons/apple-icon-152x152.png">
  <link rel="apple-touch-icon" sizes="180x180" href="/icons/apple-icon-180x180.png">
  <link rel="icon" type="image/png" sizes="192x192" href="/icons/android-icon-192x192.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/icons/favicon-32x32.png">
  <link rel="icon" type="image/png" sizes="96x96" href="/icons/favicon-96x96.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/icons/favicon-16x16.png">
  <link rel="manifest" href="/icons/manifest.json">
  <meta name="msapplication-TileColor" content="#ffffff">
  <meta name="msapplication-TileImage" content="/icons/ms-icon-144x144.png">
  <meta name="theme-color" content="#ffffff">
  <meta name="description" content="Create an alias database">
  <meta name="twitter:card" content="summary_large_image">
  <meta name="twitter:site" content="@CartaTech">
  <meta name="twitter:creator" content="@CartaTech">
  <meta name="twitter:title" content="makealiases (8) manual">
  <meta name="twitter:description" content="Create an alias database">
  <meta name="twitter:image" content="https://www.carta.tech/images/courier-mta-makealiases-8.png">
  <meta property="og:url" content="https://www.carta.tech/man-pages/man8/makealiases.8.html" />
  <meta property="og:type" content="website" />
  <meta property="og:title" content="makealiases (8) manual" />
  <meta property="og:description" content="Create an alias database" />
  <meta property="fb:app_id" content="1241677679199500" />
  <meta property="og:image" content="https://www.carta.tech/images/courier-mta-makealiases-8.png" />
  <meta property="og:image:width" content="600" />
  <meta property="og:image:height" content="315" />
</head>
<body>
  <div class="container final">
          <div class="page-header">
        <h1 class="font-effect-destruction">makealiases<small> (8)</small></h1>
        <p class="lead">Create an alias database</p>
      </div>

    <ol class="breadcrumb" itemscope itemtype="http://schema.org/BreadcrumbList">
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/">
      <span itemprop="name">Carta.tech</span>
    </a>
    <meta itemprop="position" content="1" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/">
      <span itemprop="name">Man Pages</span>
    </a>
    <meta itemprop="position" content="2" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/man8/">
      <span itemprop="name">System administration commands</span>
    </a>
    <meta itemprop="position" content="3" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/man8/makealiases.8.html">
      <span itemprop="name">makealiases: Create an alias database</span>
    </a>
    <meta itemprop="position" content="4" />
  </li>
</ol>
<ol class="breadcrumb" itemscope itemtype="http://schema.org/BreadcrumbList">
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/">
      <span itemprop="name">Carta.tech</span>
    </a>
    <meta itemprop="position" content="1" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/packages/">
      <span itemprop="name">Packages</span>
    </a>
    <meta itemprop="position" content="2" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/packages/courier-mta/">
      <span itemprop="name">courier-mta</span>
    </a>
    <meta itemprop="position" content="3" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/man8/makealiases.8.html">
      <span itemprop="name">makealiases: Create an alias database</span>
    </a>
    <meta itemprop="position" content="4" />
  </li>
</ol>
    
      <section>
        <h2 class="font-effect-shadow-multiple">SYNOPSIS</h2>
        <div class="sectioncontent">
<p><strong>makealiases</strong> [-protocol=<em>protocol</em>] [-alias=<em>filename</em>] [-src=<em>pathname</em>] [-tmp=<em>filename</em>] [-chk] [-dump] [<em>module</em>]</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">DESCRIPTION</h2>
        <div class="sectioncontent">
<p>The Courier mail server&apos;s /etc/courier/aliases.dat file is a unified implementation of sendmail-style address aliasing, qmail-style virtual domains, plus several Courier mail server-style enhancements.</p><p>The term <em>aliasing</em> refers to substituting one or more addresses for another address. A one-to-one substitution results in the Courier mail server accepting mail for one address, and delivering the mail to another address. A one-to-many substitution results in the Courier mail server accepting mail for one address, and delivering a separate copy of the message to every address defined by the alias.</p><p>/etc/courier/aliases.dat is a binary database file. <strong>makealiases</strong> creates the binary database file by reading the aliases from plain text files, and <strong>makealiases</strong> creates /etc/courier/aliases.dat by default.</p><p><strong>makealiases</strong> creates /etc/courier/aliases.dat from one or more source files, which are plain text files that may be created by any text editor. The format of those source files is defined below. By default, <strong>makealiases</strong> obtains the source text from /etc/courier/aliases. If this is a text file, it is used verbatim. If this is a directory (the Courier mail server creates it as a directory by default), all the non-hidden files in this directory are concatenated together.</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">OPTIONS</h2>
        <div class="sectioncontent">
<p>-alias=<em>filename</em></p><p>Create <em>filename</em>, instead of /etc/courier/aliases.dat.</p><p>-chk</p><p>Try to search for bad addresses used in the aliases.dat file. This option takes some time to complete. It does not create an aliases.dat file, but instead tries to check every address specified by the source text file. Why is this necessary? That&apos;s because non-delivery reports will not be sent to the sender for failures in delivering mail to an aliased address. This is by design. the Courier mail server considers aliases to be private mailing lists. Because non-delivery notices are not sent, bad addresses will not be immediately detected.</p><p><strong>Note</strong></p><p>The <strong>-chk</strong> option is really effective for addresses which are local, because there is no real way to determine if a remote mail address is valid.</p><p>-dump</p><p>Do not create aliases.dat, instead display the contents of the alias database, in plain text form. The contents will be the combined contents of all the source files, with all addresses converted to canonical format, with duplicates removed and sub-aliases expanded.</p><p>-src=<em>pathname</em></p><p>Use <em>pathname</em> instead of /etc/courier/aliases as the source file. <em>pathname</em> can also refer to a directory. This concatenates every non-hidden file in the directory.</p><p>-tmp=<em>filename</em></p><p>Use <em>filename</em> as a temporary file, instead of /etc/courier/aliases.tmp. <strong>makealiases</strong> requires a temporary file for its own purposes, which is automatically removed when done. This temporary file MUST reside on the same filesystem as aliases.dat. If the <strong>-alias</strong> option specifies a file on a different filesystem, use this option to specify where to temporary place a file in the same filesystem. Because <strong>makealiases</strong> always uses the same name for a temporary file you cannot run more than one <strong>makealiases</strong> process at the same time.</p><p>-protocol=<em>protocol</em></p><p>Use an alias list that&apos;s private to messages coming from <em>protocol</em>. See below.</p><p>The optional <em>module</em> specifies the module whose rewriting rules are used to convert E-mail addresses into a canonical form. If not specified, the local module&apos;s address rewriting rules will be used.</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">PROTOCOL ALIASES</h2>
        <div class="sectioncontent">
<p>Addresses in /etc/courier/aliases.dat will be checked in every message. Use the <strong>-protocol</strong> option to create aliases that will be checked only for message that are received via a specific protocol, such as ESMTP, UUCP, or locally-generated mail. This allows you, for example, to create an alias such as "everyone", which is only avaliable to locally generated mail, and does not work for mail received via ESMTP. The argument to the <strong>-protocol</strong> option is one of: esmtp, uucp, or local.</p><p>Protocol-specific alias files are /etc/courier/aliases-<em>protocol</em>.dat, where "<em>protocol</em>" is the specific protocol, such as "local", "esmtp", or "uucp", and the source file read by <strong>makealiases</strong> would be /etc/courier/aliases-<em>protocol</em>. If the <strong>-protocol</strong> option is specified, <strong>makealiases</strong> will access these files instead of /etc/courier/aliases.dat and /etc/courier/aliases.</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">ALIAS SPECIFICATIONS</h2>
        <div class="sectioncontent">
<p>The sources file used to create the binary aliases.dat database are plain text files that may be created using any editor.</p><p>Each alias specification takes the following form:</p>
<pre>
alias: address1, address2, ...
</pre>
<p>Mail received by the Courier mail server addressed to <em>alias</em> will be delivered to the list of addresses specified. The list of addresses may be split across multiple lines, if the second and subsequent line starts with a space character.</p><p>Lines starting with the # character are ignored, they are comments.</p><p><em>alias</em> is not restricted to be a local address. It may be any valid \m[blue]<strong>RFC 2822</strong>\m[]\s-2\u[1]\d\s+2 address. All addresses do not necessary have to be in a canonical form.</p>
<pre>
alias: :include:/absolute/pathname
</pre>
<p>This notation reads the list of addresses from another file, <em>/absolute/pathname</em>. This file should contain one address per line (comma separated addresses on the same line will also work).</p><p><strong>Note</strong></p><p>If <em>alias</em> refers to a local, existing, account, this account will never get any mail. Any mail with the account listed as recipient will be redirected to all the addresses specified for that alias. To have a copy of the mail delivered to the account, define it as one of the addresses in the alias itself. For example:</p>
<pre>
larry: larry, moe, curly, shemp
</pre>
<p>Larry will still receive his mail, but copies will will also be sent to Moe, Curly, and Shemp. If Larry wasn&apos;t specified in the alias, he would never get any mail, it will all be forwarded to Moe, Curly, and Shemp.</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">DUPLICATE ADDRESSES</h2>
        <div class="sectioncontent">
<p>Alias definitions may refer to other alias definitions, and <strong>makealiases</strong> automatically incorporates addresses from other aliases. If the same address is listed in multiple aliases, and two or more of them are specified as recipients of the same message, only one copy of the message will be delivered to the address.</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">VIRTUAL DOMAINS</h2>
        <div class="sectioncontent">
<p>The following special syntax implements a virtual domain. A virtual domain redirects all mail for an entire domain to one user:</p>
<pre>
@domain: user
</pre>
<p>This special entry results in any recipient address of the form foo@domain to be rewritten as user-foo@me, where <em>me</em> is the hostname of the machine, which we expect to be a local domain.</p><p>The following examples use the alias entry "@example.com: john", and "domain.com" is in the control/me file. The address "postmaster@example.com" becomes "john-postmaster@domain.com", and "sales-info@example.com" becomes "john-sales-info@domain.com".</p><p>The intended behavior is to use an actual account named john. As a result of the virtual domain address rewriting, delivery instructions for postmaster@example.com can now be specified by john&apos;s $HOME/.courier-postmaster file, and delivery instructions for sales-info@example.com may be specified by $HOME/.courier-sales-info. john&apos;s $HOME/.courier-default may be used to specify delivery instructions for any other address in the example.com domain, which does not have an explicit .courier file.</p><p>If the alias entry was "@example.com: john-example", the corresponding files in john&apos;s $HOME directory are .courier-example-postmaster, .courier-example-sales-info, and .courier-example-default. See \m[blue]<strong></strong><a href="../man5/dot-courier.5.html"><strong>dot-courier</strong>(5)</a>\m[]\s-2\u[2]\d\s+2 for more information on .courier files.</p><p><strong>Note</strong></p><p>Virtual domain rewriting is NOT recursive, unlike regular aliases. For example:</p>
<pre>
tom: john@example.com
@example.com: larry
</pre>
<p>You should explicitly expand the alias out:</p>
<pre>
tom: larry-john
</pre>

        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">PROGRAM OR MAILBOX ALIASES</h2>
        <div class="sectioncontent">
<p>The following notation associates an address directly with a mailbox, or with a program:</p>
<pre>
info: /var/shared/info
</pre>
<p>Messages addressed to "info" will be delivered to the mailbox or maildir /var/shared/info. A full pathname must be specified.</p>
<pre>
info: | /usr/local/shared/info
</pre>
<p>Mail addressed to "info" will be delivered to the indicated program. The program receives each message on standard input.</p><p>Program/mailbox delivery notation is primarily used to support legacy sendmail aliases entries. This is considered to be a legacy feature, and new installations should create a \m[blue]<strong></strong><a href="../man5/dot-courier.5.html"><strong>dot-courier</strong>(5)</a>\m[]\s-2\u[2]\d\s+2 file with the necessary delivery instructions. In fact, aliases for programs or mailboxes is not directly supported by the Courier mail server&apos;s aliasing mechanisms. It&apos;s implemented by having the <strong>makealiases</strong> script automatically create a .courier file, and point the alias address to it.</p><p>See \m[blue]<strong></strong><a href="../man5/dot-courier.5.html"><strong>dot-courier</strong>(5)</a>\m[]\s-2\u[2]\d\s+2 for more information.</p><p><strong>Note</strong></p><p>Unlike sendmail, the Courier mail server delivers as user "daemon" (group daemon) when delivering to programs or mailboxes.</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">UUCP VIRTUAL DOMAINS</h2>
        <div class="sectioncontent">
<p>The following notation allows mail addressed to a certain domain to be forwarded via uucp:</p>
<pre>
@domain: uucp!bang!path!
</pre>
<p>The trailing ! tells the Courier mail server not to append a dash, so user@domain gets rewritten as uucp!bang!path!user, and not uucp!bang!path-user, which is probably not what you want.</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">DELIVERY STATUS NOTIFICATIONS</h2>
        <div class="sectioncontent">
<p>An alias with only one address does not affect delivery status notification attributes of an E-mail message.</p><p>An alias with multiple addresses is treated like a private mailing list, as defined by \m[blue]<strong>RFC 1894</strong>\m[]\s-2\u[3]\d\s+2. If the message requests a successful delivery notification, the Courier mail server generates a delivery status notification for the successful delivery to the aliased address, and each alias recipient address will have DSNs set to NEVER.</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">BUGS</h2>
        <div class="sectioncontent">
<p>This has nothing to do with the Courier mail server&apos;s support for a Qmail-style alias account.</p><p>owner-foo feature of sendmail&apos;s aliasing is not supported.</p><p>the Courier mail server normally tries to eliminate duplicate addresses listed as recipients for the same message. Some mail servers are not capable of delivering messages with multiple recipients, and will transmit a separate copy of the same message addressed to each recipient. The Courier mail server can&apos;t do anything in this case. Each copy of the same original text is considered an individual, separate, message.</p><p>Duplicate elimination can fail in certain rare circumstances, involving exotic features of \m[blue]<strong>RFC 2822</strong>\m[]\s-2\u[1]\d\s+2 concerning case sensitivity.</p><p>"@example.com: jack, jill" is allowed, but strongly discouraged under the penalty of law.</p><p>Because multiple-recipient aliases are treated like private mailing lists, failure DSNs are turned off, and a bad recipient address is hardly noticed by anyone.</p><p>The <strong>makealiases</strong> command may execute while the Courier mail server is running, and any changes take effect immediately. However, only one instance of <strong>makealiases</strong> is permitted to run at the same time.</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">RELATED TO makealiases&hellip;</h2>
        <div class="sectioncontent">
<p>\m[blue]<strong></strong><a href="../man8/esmtpd.8.html"><strong>esmtpd</strong>(8)</a>\m[]\s-2\u[4]\d\s+2.</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">AUTHOR</h2>
        <div class="sectioncontent">
<p><strong>Sam Varshavchik</strong></p><p>Author</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">NOTES</h2>
        <div class="sectioncontent">

<dl class='dl-vertical'>
  <dt>
     1.
  </dt>
  <dd>
    <p>RFC 2822</p><p>http://www.rfc-editor.org/rfc/rfc822.txt</p>
  </dd>
  <dt>
     2.
  </dt>
  <dd>
    <p><a href="../man5/dot-courier.5.html"><strong>dot-courier</strong>(5)</a></p><p>[set $man.base.url.for.relative.links]/dot-courier.html</p>
  </dd>
  <dt>
     3.
  </dt>
  <dd>
    <p>RFC 1894</p><p>http://www.rfc-editor.org/rfc/rfc1894.txt</p>
  </dd>
  <dt>
     4.
  </dt>
  <dd>
    <p><a href="../man8/esmtpd.8.html"><strong>esmtpd</strong>(8)</a></p><p>[set $man.base.url.for.relative.links]/esmtpd.html</p>
  </dd>

</dl>

        </div>
      </section>
<nav>
  <ul class="pager">
   <li class="previous"><a href="makeactive.8.html"><span aria-hidden="true">&larr;</span> makeactive.8: Tool to recover usenet active file.</a></li>
   <li class="next"><a href="makedbm.8.html">makedbm.8: Create or dump a ypserv database file <span aria-hidden="true">&rarr;</span></a></li>
  </ul>
</nav>

  </div>
  <!-- jQuery (necessary for Bootstrap's JavaScript plugins) -->
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.2/jquery.min.js"></script>
  <!-- Include all compiled plugins (below), or include individual files as needed -->
  <script src="/js/bootstrap.min.js"></script>
  <script>
    (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
      (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
      m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
    })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

    ga('create', 'UA-60781387-1', 'auto');
    ga('send', 'pageview');

  </script>
</body>
</html>
