<!DOCTYPE html>
<html lang="en">
<head>
  <link href="https://fonts.googleapis.com/css?family=Fira+Mono:400,700&effect=destruction%7Cshadow-multiple" rel="stylesheet" type="text/css">
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>exportfs: Maintain table of exported nfs file systems</title>
  <link href="/css/bootstrap.min.css" rel="stylesheet">
  <link href="/css/manpage.css" rel="stylesheet">
  <link rel="apple-touch-icon" sizes="57x57" href="/icons/apple-icon-57x57.png">
  <link rel="apple-touch-icon" sizes="60x60" href="/icons/apple-icon-60x60.png">
  <link rel="apple-touch-icon" sizes="72x72" href="/icons/apple-icon-72x72.png">
  <link rel="apple-touch-icon" sizes="76x76" href="/icons/apple-icon-76x76.png">
  <link rel="apple-touch-icon" sizes="114x114" href="/icons/apple-icon-114x114.png">
  <link rel="apple-touch-icon" sizes="120x120" href="/icons/apple-icon-120x120.png">
  <link rel="apple-touch-icon" sizes="144x144" href="/icons/apple-icon-144x144.png">
  <link rel="apple-touch-icon" sizes="152x152" href="/icons/apple-icon-152x152.png">
  <link rel="apple-touch-icon" sizes="180x180" href="/icons/apple-icon-180x180.png">
  <link rel="icon" type="image/png" sizes="192x192" href="/icons/android-icon-192x192.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/icons/favicon-32x32.png">
  <link rel="icon" type="image/png" sizes="96x96" href="/icons/favicon-96x96.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/icons/favicon-16x16.png">
  <link rel="manifest" href="/icons/manifest.json">
  <meta name="msapplication-TileColor" content="#ffffff">
  <meta name="msapplication-TileImage" content="/icons/ms-icon-144x144.png">
  <meta name="theme-color" content="#ffffff">
  <meta name="description" content="Maintain table of exported nfs file systems">
  <meta name="twitter:card" content="summary_large_image">
  <meta name="twitter:site" content="@CartaTech">
  <meta name="twitter:creator" content="@CartaTech">
  <meta name="twitter:title" content="exportfs (8) manual">
  <meta name="twitter:description" content="Maintain table of exported nfs file systems">
  <meta name="twitter:image" content="https://www.carta.tech/images/nfs-kernel-server-exportfs-8.png">
  <meta property="og:url" content="https://www.carta.tech/man-pages/man8/exportfs.8.html" />
  <meta property="og:type" content="website" />
  <meta property="og:title" content="exportfs (8) manual" />
  <meta property="og:description" content="Maintain table of exported nfs file systems" />
  <meta property="fb:app_id" content="1241677679199500" />
  <meta property="og:image" content="https://www.carta.tech/images/nfs-kernel-server-exportfs-8.png" />
  <meta property="og:image:width" content="600" />
  <meta property="og:image:height" content="315" />
</head>
<body>
  <div class="container final">
          <div class="page-header">
        <h1 class="font-effect-destruction">exportfs<small> (8)</small></h1>
        <p class="lead">Maintain table of exported nfs file systems</p>
      </div>

    <ol class="breadcrumb" itemscope itemtype="http://schema.org/BreadcrumbList">
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/">
      <span itemprop="name">Carta.tech</span>
    </a>
    <meta itemprop="position" content="1" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/">
      <span itemprop="name">Man Pages</span>
    </a>
    <meta itemprop="position" content="2" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/man8/">
      <span itemprop="name">System administration commands</span>
    </a>
    <meta itemprop="position" content="3" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/man8/exportfs.8.html">
      <span itemprop="name">exportfs: Maintain table of exported nfs file systems</span>
    </a>
    <meta itemprop="position" content="4" />
  </li>
</ol>
<ol class="breadcrumb" itemscope itemtype="http://schema.org/BreadcrumbList">
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/">
      <span itemprop="name">Carta.tech</span>
    </a>
    <meta itemprop="position" content="1" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/packages/">
      <span itemprop="name">Packages</span>
    </a>
    <meta itemprop="position" content="2" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/packages/nfs-kernel-server/">
      <span itemprop="name">nfs-kernel-server</span>
    </a>
    <meta itemprop="position" content="3" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/man8/exportfs.8.html">
      <span itemprop="name">exportfs: Maintain table of exported nfs file systems</span>
    </a>
    <meta itemprop="position" content="4" />
  </li>
</ol>
    
      <section>
        <h2 class="font-effect-shadow-multiple">SYNOPSIS</h2>
        <div class="sectioncontent">
<p><strong>/usr/sbin/exportfs [-avi] [-o </strong><em>options,..</em><strong>] [</strong><em>client:/path</em><strong> ..]</strong></p><p><strong>/usr/sbin/exportfs -r [-v]</strong></p><p><strong>/usr/sbin/exportfs [-av] -u [</strong><em>client:/path</em><strong> ..]</strong></p><p><strong>/usr/sbin/exportfs [-v]</strong></p><p><strong>/usr/sbin/exportfs -f</strong></p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">DESCRIPTION</h2>
        <div class="sectioncontent">
<p>An NFS server maintains a table of local physical file systems that are accessible to NFS clients. Each file system in this table is  referred to as an <em>exported file system</em>, or <em>export</em>, for short.</p><p>The <strong>exportfs</strong> command maintains the current table of exports for the NFS server. The master export table is kept in a file named <em>/var/lib/nfs/etab</em>. This file is read by <strong>rpc.mountd</strong> when a client sends an NFS MOUNT request.</p><p>Normally the master export table is initialized with the contents of <em>/etc/exports</em> and files under <em>/etc/exports.d</em> by invoking <strong>exportfs -a</strong>. However, a system administrator can choose to add or delete exports without modifying <em>/etc/exports</em> or files under <em>/etc/exports.d</em> by using the <strong>exportfs</strong> command.</p><p><strong>exportfs</strong> and its partner program <strong>rpc.mountd</strong> work in one of two modes: a legacy mode which applies to 2.4 and earlier versions of the Linux kernel, and a new mode which applies to 2.6 and later versions, providing the <strong>nfsd</strong> virtual filesystem has been mounted at <em>/proc/fs/nfsd</em> or <em>/proc/fs/nfs</em>. On 2.6 kernels, if this filesystem is not mounted, the legacy mode is used.</p><p>In the new mode, <strong>exportfs</strong> does not give any information to the kernel, but provides it only to <strong>rpc.mountd</strong> through the <em>/var/lib/nfs/etab</em> file. <strong>rpc.mountd</strong> then manages kernel requests for information about exports, as needed.</p><p>In the legacy mode, exports which identify a specific host, rather than a subnet or netgroup, are entered directly into the kernel's export table, as well as being written to <em>/var/lib/nfs/etab</em>. Further, exports listed in <em>/var/lib/nfs/rmtab</em> which match a non host-specific export request will cause an appropriate export entry for the host given in <em>rmtab</em> to be added to the kernel's export table.</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">OPTIONS</h2>
        <div class="sectioncontent">

<dl class='dl-vertical'>
  <dt>
    <p><strong>-a</strong></p>
  </dt>
  <dd>
    <p>Export or unexport all directories.</p>
  </dd>
  <dt>
    <p><strong>-o </strong><em>options,...</em></p>
  </dt>
  <dd>
    <p>Specify a list of export options in the same manner as in <a href="../man5/exports.5.html"><strong>exports</strong>(5)</a>.</p>
  </dd>
  <dt>
    <p><strong>-i</strong></p>
  </dt>
  <dd>
    <p>Ignore the <em>/etc/exports</em> file and files under <em>/etc/exports.d</em> directory.  Only default options and options given on the command line are used.</p>
  </dd>
  <dt>
    <p><strong>-r</strong></p>
  </dt>
  <dd>
    <p>Reexport all directories, synchronizing <em>/var/lib/nfs/etab</em> with <em>/etc/exports</em> and files under <em>/etc/exports.d</em>. This option removes entries in <em>/var/lib/nfs/etab</em> which have been deleted from <em>/etc/exports</em> or files under <em>/etc/exports.d</em>, and removes any entries from the kernel export table which are no longer valid.</p>
  </dd>
  <dt>
    <p><strong>-u</strong></p>
  </dt>
  <dd>
    <p>Unexport one or more directories.</p>
  </dd>
  <dt>
    <p><strong>-f</strong></p>
  </dt>
  <dd>
    <p>If <em>/proc/fs/nfsd</em> or <em>/proc/fs/nfs</em> is mounted, flush everything out of the kernel's export table. Fresh entries for active clients are added to the kernel's export table by <strong>rpc.mountd</strong> when they make their next NFS mount request.</p>
  </dd>
  <dt>
    <p><strong>-v</strong></p>
  </dt>
  <dd>
    <p>Be verbose. When exporting or unexporting, show what's going on. When displaying the current export list, also display the list of export options.</p>
  </dd>

</dl>

        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">DISCUSSION</h2>
        <div class="sectioncontent">
<h3>Exporting Directories</h3>
<p>The first synopsis shows how to invoke <strong>exportfs</strong> when adding new entries to the export table.  When using <strong>exportfs -a</strong>, all exports listed in <em>/etc/exports</em> and files under <em>/etc/exports.d</em> are added to <em>/var/lib/nfs/etab</em>. The kernel's export table is also updated as needed.</p><p>The <em>host:/path</em> argument specifies a local directory to export, along with the client or clients who are permitted to access it. See <a href="../man5/exports.5.html"><strong>exports</strong>(5)</a></strong> for a description of supported options and access list formats. To export a directory to the world, simply specify <em>:/path</em>.</p><p>The export options for a particular host/directory pair derive from several sources. The default export options are <strong>sync,ro,root_squash,wdelay</strong>. These can be overridden by entries in <em>/etc/exports</em> or files under <em>/etc/exports.d</em>.</p><p>A system administrator may override options from these sources using the <strong>-o</strong> command-line option on <strong>exportfs</strong>. This option takes a comma-separated list of options in the same fashion as one would specify them in <em>/etc/exports</em>. In this way <strong>exportfs</strong> can be used to modify the export options of an already exported directory.</p>
<h3>Unexporting Directories</h3>
<p>The third synopsis shows how to unexport a currently exported directory. When using <strong>exportfs -ua</strong>, all entries listed in <em>/var/lib/nfs/etab</em> are removed from the kernel export tables, and the file is cleared. This effectively shuts down all NFS activity.</p><p>To remove an export, specify a <em>host:/path</em> pair. This deletes the specified entry from <em>/var/lib/nfs/etab</em> and removes the corresponding kernel entry (if any).</p>
<h3>Dumping the Export Table</h3>
<p>Invoking <strong>exportfs</strong> without options shows the current list of exported file systems. Adding the <strong>-v</strong> option causes <strong>exportfs</strong> to display the export options for each export.</p>

        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">EXAMPLES</h2>
        <div class="sectioncontent">
<p>The following adds all directories listed in <em>/etc/exports</em> and files under <em>/etc/exports.d</em> to <em>/var/lib/nfs/etab</em> and pushes the resulting export entries into the kernel:</p>
<pre>
<strong># exportfs -a</strong>
</pre>
<p>To export the <em>/usr/tmp</em> directory to host <strong>django</strong>, allowing insecure file locking requests from clients:</p>
<pre>
<strong># exportfs -o insecure_locks django:/usr/tmp</strong>
</pre>
<p>To unexport the <em>/usr/tmp</em> directory:</p>
<pre>
<strong># exportfs -u django:/usr/tmp</strong>
</pre>
<p>To unexport all exports listed in <em>/etc/exports</em> and files under <em>/etc/exports.d</em>:</p>
<pre>
<strong># exportfs -au</strong>
</pre>

        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">USAGE NOTES</h2>
        <div class="sectioncontent">
<p>Exporting to IP networks or DNS and NIS domains does not enable clients from these groups to access NFS immediately. Rather, these sorts of exports are hints to <a href="../man8/rpc.mountd.8.html"><strong>rpc.mountd</strong>(8)</a> to grant any mount requests from these clients. This is usually not a problem, because any existing mounts are preserved in <em>rmtab</em> across reboots.</p><p>When unexporting a network or domain entry, any current exports to members of this group will be checked against the remaining valid exports and if they themselves are no longer valid they will be removed.</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">FILES</h2>
        <div class="sectioncontent">

<dl class='dl-vertical'>
  <dt>
    <p><em>/etc/exports</em></p>
  </dt>
  <dd>
    <p>input file listing exports, export options, and access control lists</p>
  </dd>
  <dt>
    <p><em>/etc/exports.d</em></p>
  </dt>
  <dd>
    <p>directory where extra input files are stored. <strong>Note:</strong> only files that end with <em>.exports</em> are used.</p>
  </dd>
  <dt>
    <p><em>/var/lib/nfs/etab</em></p>
  </dt>
  <dd>
    <p>master table of exports</p>
  </dd>
  <dt>
    <p><em>/var/lib/nfs/rmtab</em></p>
  </dt>
  <dd>
    <p>table of clients accessing server's exports</p>
  </dd>

</dl>

        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">RELATED TO exportfs&hellip;</h2>
        <div class="sectioncontent">
<p><a href="../man5/exports.5.html"><strong>exports</strong>(5)</a>, <a href="../man8/rpc.mountd.8.html"><strong>rpc.mountd</strong>(8)</a>, <a href="../man5/netgroup.5.html"><strong>netgroup</strong>(5)</a></p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">AUTHORS</h2>
        <div class="sectioncontent">
<p>Olaf Kirch &lt;okir@monad.swb.de&gt;</p><p>Neil Brown &lt;neilb@cse.unsw.edu.au&gt;</p>
        </div>
      </section>
<nav>
  <ul class="pager">
   <li class="previous"><a href="expirerm.8.html"><span aria-hidden="true">&larr;</span> expirerm.8: Remove articles that have been expired.</a></li>
   <li class="next"><a href="ext3grep.8.html">ext3grep.8: Ext3 file recovery tool <span aria-hidden="true">&rarr;</span></a></li>
  </ul>
</nav>

  </div>
  <!-- jQuery (necessary for Bootstrap's JavaScript plugins) -->
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.2/jquery.min.js"></script>
  <!-- Include all compiled plugins (below), or include individual files as needed -->
  <script src="/js/bootstrap.min.js"></script>
  <script>
    (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
      (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
      m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
    })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

    ga('create', 'UA-60781387-1', 'auto');
    ga('send', 'pageview');

  </script>
</body>
</html>
