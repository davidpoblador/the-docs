<!DOCTYPE html>
<html lang="en">
<head>
  <link href="https://fonts.googleapis.com/css?family=Fira+Mono:400,700&effect=destruction%7Cshadow-multiple" rel="stylesheet" type="text/css">
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>pmqtest: Start pairs of threads and measure the latency of interprocess communication with posix messages queues</title>
  <link href="/css/bootstrap.min.css" rel="stylesheet">
  <link href="/css/manpage.css" rel="stylesheet">
  <link rel="apple-touch-icon" sizes="57x57" href="/icons/apple-icon-57x57.png">
  <link rel="apple-touch-icon" sizes="60x60" href="/icons/apple-icon-60x60.png">
  <link rel="apple-touch-icon" sizes="72x72" href="/icons/apple-icon-72x72.png">
  <link rel="apple-touch-icon" sizes="76x76" href="/icons/apple-icon-76x76.png">
  <link rel="apple-touch-icon" sizes="114x114" href="/icons/apple-icon-114x114.png">
  <link rel="apple-touch-icon" sizes="120x120" href="/icons/apple-icon-120x120.png">
  <link rel="apple-touch-icon" sizes="144x144" href="/icons/apple-icon-144x144.png">
  <link rel="apple-touch-icon" sizes="152x152" href="/icons/apple-icon-152x152.png">
  <link rel="apple-touch-icon" sizes="180x180" href="/icons/apple-icon-180x180.png">
  <link rel="icon" type="image/png" sizes="192x192" href="/icons/android-icon-192x192.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/icons/favicon-32x32.png">
  <link rel="icon" type="image/png" sizes="96x96" href="/icons/favicon-96x96.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/icons/favicon-16x16.png">
  <link rel="manifest" href="/icons/manifest.json">
  <meta name="msapplication-TileColor" content="#ffffff">
  <meta name="msapplication-TileImage" content="/icons/ms-icon-144x144.png">
  <meta name="theme-color" content="#ffffff">
  <meta name="description" content="Start pairs of threads and measure the latency of interprocess communication with posix messages queues">
  <meta name="twitter:card" content="summary_large_image">
  <meta name="twitter:site" content="@CartaTech">
  <meta name="twitter:creator" content="@CartaTech">
  <meta name="twitter:title" content="pmqtest (8) manual">
  <meta name="twitter:description" content="Start pairs of threads and measure the latency of interprocess communication with posix messages queues">
  <meta name="twitter:image" content="https://www.carta.tech/images/rt-tests-pmqtest-8.png">
  <meta property="og:url" content="https://www.carta.tech/man-pages/man8/pmqtest.8.html" />
  <meta property="og:type" content="website" />
  <meta property="og:title" content="pmqtest (8) manual" />
  <meta property="og:description" content="Start pairs of threads and measure the latency of interprocess communication with posix messages queues" />
  <meta property="fb:app_id" content="1241677679199500" />
  <meta property="og:image" content="https://www.carta.tech/images/rt-tests-pmqtest-8.png" />
  <meta property="og:image:width" content="600" />
  <meta property="og:image:height" content="315" />
</head>
<body>
  <div class="container final">
          <div class="page-header">
        <h1 class="font-effect-destruction">pmqtest<small> (8)</small></h1>
        <p class="lead">Start pairs of threads and measure the latency of interprocess communication with posix messages queues</p>
      </div>

    <ol class="breadcrumb" itemscope itemtype="http://schema.org/BreadcrumbList">
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/">
      <span itemprop="name">Carta.tech</span>
    </a>
    <meta itemprop="position" content="1" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/">
      <span itemprop="name">Man Pages</span>
    </a>
    <meta itemprop="position" content="2" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/man8/">
      <span itemprop="name">System administration commands</span>
    </a>
    <meta itemprop="position" content="3" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/man8/pmqtest.8.html">
      <span itemprop="name">pmqtest: Start pairs of threads and measure the latency of interprocess communication with posix messages queues</span>
    </a>
    <meta itemprop="position" content="4" />
  </li>
</ol>
<ol class="breadcrumb" itemscope itemtype="http://schema.org/BreadcrumbList">
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/">
      <span itemprop="name">Carta.tech</span>
    </a>
    <meta itemprop="position" content="1" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/packages/">
      <span itemprop="name">Packages</span>
    </a>
    <meta itemprop="position" content="2" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/packages/rt-tests/">
      <span itemprop="name">rt-tests</span>
    </a>
    <meta itemprop="position" content="3" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/man8/pmqtest.8.html">
      <span itemprop="name">pmqtest: Start pairs of threads and measure the latency of interprocess communication with posix messages queues</span>
    </a>
    <meta itemprop="position" content="4" />
  </li>
</ol>
    
      <section>
        <h2 class="font-effect-shadow-multiple">SYNTAX</h2>
        <div class="sectioncontent">
<p>pmqtest [-a|-a PROC] [-b USEC] [-d DIST] [-i INTV] [-l loops] [-p PRIO] [-S] [-t|-t NUM] [-T TO]</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">DESCRIPTION</h2>
        <div class="sectioncontent">
<p>The program <strong>pmqtest</strong> starts pairs of threads that are synchronized via mq_send/mw_receive() and measures the latency between sending and receiving the message.</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">OPTIONS</h2>
        <div class="sectioncontent">

<dl class='dl-vertical'>
  <dt>
    <p><strong>-a, --affinity[=PROC]</strong></p>
  </dt>
  <dd>
    <p>Run on procesor number PROC. If PROC is not specified, run on current processor.</p>
  </dd>
  <dt>
    <p><strong>-b, --breaktrace=USEC</strong></p>
  </dt>
  <dd>
    <p>Send break trace command when latency &gt; USEC. This is a debugging option to control the latency tracer in the realtime preemption patch. It is useful to track down unexpected large latencies of a system.</p>
  </dd>
  <dt>
    <p><strong>-d, --distance=DIST</strong></p>
  </dt>
  <dd>
    <p>Set the distance of thread intervals in microseconds (default is 500 us). When pmqtest is called with the -t option and more than one thread is created, then this distance value is added to the interval of the threads: Interval(thread N) = Interval(thread N-1) + DIST</p>
  </dd>
  <dt>
    <p><strong>-f, --forcetimeout=TO</strong></p>
  </dt>
  <dd>
    <p>Set an artificial delay of the send function to force timeout of the receiver, requires the -T option</p>
  </dd>
  <dt>
    <p><strong>-i, --interval=INTV</strong></p>
  </dt>
  <dd>
    <p>Set the base interval of the thread(s) in microseconds (default is 1000 us). This sets the interval of the first thread. See also -d.</p>
  </dd>
  <dt>
    <p><strong>-l, --loops=LOOPS</strong></p>
  </dt>
  <dd>
    <p>Set the number of loops. The default is 0 (endless). This option is useful for automated tests with a given number of test cycles. pmqtest is stopped once the number of timer intervals has been reached.</p>
  </dd>
  <dt>
    <p><strong>-p, --prio=PRIO</strong></p>
  </dt>
  <dd>
    <p>Set the priority of the process.</p>
  </dd>
  <dt>
    <p><strong>-S, --smp</strong></p>
  </dt>
  <dd>
    <p>Test mode for symmetric multi-processing, implies -a and -t and uses the same priority on all threads.</p>
  </dd>
  <dt>
    <p><strong>-t, --threads[=NUM]</strong></p>
  </dt>
  <dd>
    <p>Set the number of test threads (default is 1, if this option is not given). If NUM is specified, create NUM test threads. If NUM is not specifed, NUM is set to the number of available CPUs.</p>
  </dd>
  <dt>
    <p><strong>-T, --timeout=TO</strong></p>
  </dt>
  <dd>
    <p>Use mq_timedreceive() instead of mq_receive() and specify timeout TO in seconds.</p>
  </dd>

</dl>

        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">EXAMPLES</h2>
        <div class="sectioncontent">
<p>The following example was running on an 8-way processor:</p>
<pre>
# pmqtest -Sp99 -i100 -d0
#0: ID10047, P99, CPU0, I100; #1: ID10048, P99, CPU0, Cycles 153695
#2: ID10049, P99, CPU1, I100; #3: ID10050, P99, CPU1, Cycles 154211
#4: ID10051, P99, CPU2, I100; #5: ID10052, P99, CPU2, Cycles 156823
#6: ID10053, P99, CPU3, I100; #7: ID10054, P99, CPU3, Cycles 158202
#8: ID10055, P99, CPU4, I100; #9: ID10056, P99, CPU4, Cycles 153399
#10: ID10057, P99, CPU5, I100; #11: ID10058, P99, CPU5, Cycles 153992
#12: ID10059, P99, CPU6, I100; #13: ID10060, P99, CPU6, Cycles 156576
#14: ID10061, P99, CPU7, I100; #15: ID10062, P99, CPU7, Cycles 157957
#1 -&gt; #0, Min    1, Cur    8, Avg    5, Max   18
#3 -&gt; #2, Min    1, Cur    4, Avg    5, Max   18
#5 -&gt; #4, Min    1, Cur    5, Avg    5, Max   19
#7 -&gt; #6, Min    1, Cur    4, Avg    4, Max   17
#9 -&gt; #8, Min    1, Cur    9, Avg    5, Max   18
#11 -&gt; #10, Min    1, Cur    8, Avg    5, Max   18
#13 -&gt; #12, Min    1, Cur    4, Avg    5, Max   29
#15 -&gt; #14, Min    1, Cur    8, Avg    4, Max   17
</pre>

        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">AUTHORS</h2>
        <div class="sectioncontent">
<p>Carsten Emde &lt;C.Emde@osadl.org&gt;</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">RELATED TO pmqtest&hellip;</h2>
        <div class="sectioncontent">
<p>mq_send(3p), mq_receive(3p)</p>
        </div>
      </section>
<nav>
  <ul class="pager">
   <li class="previous"><a href="pma-secure.8.html"><span aria-hidden="true">&larr;</span> pma-secure.8: Secures phpmyadmin installation</a></li>
   <li class="next"><a href="pmt-ehd.8.html">pmt-ehd.8: None <span aria-hidden="true">&rarr;</span></a></li>
  </ul>
</nav>

  </div>
  <!-- jQuery (necessary for Bootstrap's JavaScript plugins) -->
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.2/jquery.min.js"></script>
  <!-- Include all compiled plugins (below), or include individual files as needed -->
  <script src="/js/bootstrap.min.js"></script>
  <script>
    (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
      (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
      m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
    })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

    ga('create', 'UA-60781387-1', 'auto');
    ga('send', 'pageview');

  </script>
</body>
</html>
