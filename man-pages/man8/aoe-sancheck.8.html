<!DOCTYPE html>
<html lang="en">
<head>
  <link href="https://fonts.googleapis.com/css?family=Fira+Mono:400,700&effect=destruction%7Cshadow-multiple" rel="stylesheet" type="text/css">
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>aoe-sancheck: Verify storage network capabilities</title>
  <link href="/css/bootstrap.min.css" rel="stylesheet">
  <link href="/css/manpage.css" rel="stylesheet">
  <link rel="apple-touch-icon" sizes="57x57" href="/icons/apple-icon-57x57.png">
  <link rel="apple-touch-icon" sizes="60x60" href="/icons/apple-icon-60x60.png">
  <link rel="apple-touch-icon" sizes="72x72" href="/icons/apple-icon-72x72.png">
  <link rel="apple-touch-icon" sizes="76x76" href="/icons/apple-icon-76x76.png">
  <link rel="apple-touch-icon" sizes="114x114" href="/icons/apple-icon-114x114.png">
  <link rel="apple-touch-icon" sizes="120x120" href="/icons/apple-icon-120x120.png">
  <link rel="apple-touch-icon" sizes="144x144" href="/icons/apple-icon-144x144.png">
  <link rel="apple-touch-icon" sizes="152x152" href="/icons/apple-icon-152x152.png">
  <link rel="apple-touch-icon" sizes="180x180" href="/icons/apple-icon-180x180.png">
  <link rel="icon" type="image/png" sizes="192x192" href="/icons/android-icon-192x192.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/icons/favicon-32x32.png">
  <link rel="icon" type="image/png" sizes="96x96" href="/icons/favicon-96x96.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/icons/favicon-16x16.png">
  <link rel="manifest" href="/icons/manifest.json">
  <meta name="msapplication-TileColor" content="#ffffff">
  <meta name="msapplication-TileImage" content="/icons/ms-icon-144x144.png">
  <meta name="theme-color" content="#ffffff">
  <meta name="description" content="Verify storage network capabilities">
  <meta name="twitter:card" content="summary_large_image">
  <meta name="twitter:site" content="@CartaTech">
  <meta name="twitter:creator" content="@CartaTech">
  <meta name="twitter:title" content="aoe-sancheck (8) manual">
  <meta name="twitter:description" content="Verify storage network capabilities">
  <meta name="twitter:image" content="https://www.carta.tech/images/aoetools-aoe-sancheck-8.png">
  <meta property="og:url" content="https://www.carta.tech/man-pages/man8/aoe-sancheck.8.html" />
  <meta property="og:type" content="website" />
  <meta property="og:title" content="aoe-sancheck (8) manual" />
  <meta property="og:description" content="Verify storage network capabilities" />
  <meta property="fb:app_id" content="1241677679199500" />
  <meta property="og:image" content="https://www.carta.tech/images/aoetools-aoe-sancheck-8.png" />
  <meta property="og:image:width" content="600" />
  <meta property="og:image:height" content="315" />
</head>
<body>
  <div class="container final">
          <div class="page-header">
        <h1 class="font-effect-destruction">aoe-sancheck<small> (8)</small></h1>
        <p class="lead">Verify storage network capabilities</p>
      </div>

    <ol class="breadcrumb" itemscope itemtype="http://schema.org/BreadcrumbList">
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/">
      <span itemprop="name">Carta.tech</span>
    </a>
    <meta itemprop="position" content="1" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/">
      <span itemprop="name">Man Pages</span>
    </a>
    <meta itemprop="position" content="2" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/man8/">
      <span itemprop="name">System administration commands</span>
    </a>
    <meta itemprop="position" content="3" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/man8/aoe-sancheck.8.html">
      <span itemprop="name">aoe-sancheck: Verify storage network capabilities</span>
    </a>
    <meta itemprop="position" content="4" />
  </li>
</ol>
<ol class="breadcrumb" itemscope itemtype="http://schema.org/BreadcrumbList">
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/">
      <span itemprop="name">Carta.tech</span>
    </a>
    <meta itemprop="position" content="1" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/packages/">
      <span itemprop="name">Packages</span>
    </a>
    <meta itemprop="position" content="2" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/packages/aoetools/">
      <span itemprop="name">aoetools</span>
    </a>
    <meta itemprop="position" content="3" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/man8/aoe-sancheck.8.html">
      <span itemprop="name">aoe-sancheck: Verify storage network capabilities</span>
    </a>
    <meta itemprop="position" content="4" />
  </li>
</ol>
    
      <section>
        <h2 class="font-effect-shadow-multiple">SYNOPSIS</h2>
        <div class="sectioncontent">

<pre>
<strong>aoe-sancheck [-v]</strong>
</pre>

        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">DESCRIPTION</h2>
        <div class="sectioncontent">
<p>The <em>aoe-sancheck</em> command collects information about the local interfaces and probes the network for ATA over Ethernet devices, validating the paths for each device. It does not use the aoe kernel module but rather the bpf interface to evaluate the network.  As such, the aoe module does not need to be loaded to perform the test.</p><p>The output of the command is divided into two sections: information about the local interfaces followed by a list of detected AoE devices.  The first section displays the local interfaces, if the interface is up or down, its configured MTU, and the PCI ID for the interface.</p><p>The second section lists detected AoE devices, one per line, with the following information:</p>
<dl class='dl-vertical'>
  <dt>
    <p><strong>Device</strong></p>
  </dt>
  <dd>
    <p>The device name of the form <em>eX.Y</em> where <em>X</em> is the AoE device shelf address, and <em>Y</em> is the AoE device slot address.</p>
  </dd>
  <dt>
    <p><strong>Macs</strong></p>
  </dt>
  <dd>
    <p>The number of mac addresses detected for this device.</p>
  </dd>
  <dt>
    <p><strong>Payload</strong></p>
  </dt>
  <dd>
    <p>The number of bytes of data the device can handle in a single AoE request. This number does not represent the total frame size as it does not include bytes from ethernet or AoE headers.</p>
  </dd>
  <dt>
    <p><strong>Local Interfaces</strong></p>
  </dt>
  <dd>
    <p>The list of local interfaces from which the device is visible.</p>
  </dd>

</dl>
<h3>Options</h3>

<dl class='dl-vertical'>
  <dt>
    <p><strong>-v</strong></p>
  </dt>
  <dd>
    <p>Prints out additional raw information.</p>
  </dd>

</dl>


        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">DIAGNOSIS</h2>
        <div class="sectioncontent">
<p>For each device, <em>aoe-sancheck</em> may print out additional lines of suggestions or warnings.  The following checks are made:</p>
<dl class='dl-vertical'>
  <dt>
    <p><strong>The MTU of the local interfaces is set high enough to handle the AoE device's reported payload. </strong></p>
  </dt>
  <dd>
    <p>Depending on the host NIC's capabilities and storage network switch's capabilities, best performance may or may not be with local interface MTU set higher than a device's payload size.</p>
  </dd>
  <dt>
    <p><strong>The number of local interfaces matches the number of interfaces on the device. </strong></p>
  </dt>
  <dd>
    <p>Best performance comes from having a host and device with comparable bandwidth. <em>Aoe-sancheck</em> simply counts the number of interfaces involved and does not figure link bandwidth in its comparison.</p>
  </dd>
  <dt>
    <p><strong>All local interfaces for an AoE device have the same MTU.</strong></p>
  </dt>
  <dd>
    <p>If one interface for a device has a smaller MTU than the others, the AoE driver must use the smaller payload size for all interfaces.</p>
  </dd>
  <dt>
    <p><strong>Each path to the device is capable of the configured payload size.</strong></p>
  </dt>
  <dd>
    <p>This check detects the situation where a local interface is configured for jumbo frames and the AoE device is capable of jumbo frames, but some aspect of the network is incapable of passing frames that size, for example, a misconfigured switch.  <em>Aoe-sancheck</em> reports the maximum payload size the path is capable of if less than the configured payload size.</p>
  </dd>

</dl>

        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">BUGS</h2>
        <div class="sectioncontent">
<p>The program may sometimes display inconsistent results between runs showing that a path is capable of a smaller frame size than it actually is.  If you see this behavior, please email one of the authors with your verbose output.</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">RELATED TO aoe-sancheck&hellip;</h2>
        <div class="sectioncontent">
<p><strong>aoeping</strong>(8), <strong>aoetools</strong>(8)</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">AUTHORS</h2>
        <div class="sectioncontent">
<p>Justin Sanders (justin@coraid.com), Sam Hopkins (sah@coraid.com)</p>
        </div>
      </section>
<nav>
  <ul class="pager">
   <li class="previous"><a href="aoe-revalidate.8.html"><span aria-hidden="true">&larr;</span> aoe-revalidate.8: Revalidate the disk size of an aoe device</a></li>
   <li class="next"><a href="aoecfg.8.html">aoecfg.8: Manipulate aoe configuration strings <span aria-hidden="true">&rarr;</span></a></li>
  </ul>
</nav>

  </div>
  <!-- jQuery (necessary for Bootstrap's JavaScript plugins) -->
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.2/jquery.min.js"></script>
  <!-- Include all compiled plugins (below), or include individual files as needed -->
  <script src="/js/bootstrap.min.js"></script>
  <script>
    (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
      (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
      m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
    })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

    ga('create', 'UA-60781387-1', 'auto');
    ga('send', 'pageview');

  </script>
</body>
</html>
