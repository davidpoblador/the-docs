<!DOCTYPE html>
<html lang="en">
<head>
  <link href="https://fonts.googleapis.com/css?family=Fira+Mono:400,700&effect=destruction%7Cshadow-multiple" rel="stylesheet" type="text/css">
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>dhcrelay: Dynamic host configuration protocol relay agent</title>
  <link href="/css/bootstrap.min.css" rel="stylesheet">
  <link href="/css/manpage.css" rel="stylesheet">
  <link rel="apple-touch-icon" sizes="57x57" href="/icons/apple-icon-57x57.png">
  <link rel="apple-touch-icon" sizes="60x60" href="/icons/apple-icon-60x60.png">
  <link rel="apple-touch-icon" sizes="72x72" href="/icons/apple-icon-72x72.png">
  <link rel="apple-touch-icon" sizes="76x76" href="/icons/apple-icon-76x76.png">
  <link rel="apple-touch-icon" sizes="114x114" href="/icons/apple-icon-114x114.png">
  <link rel="apple-touch-icon" sizes="120x120" href="/icons/apple-icon-120x120.png">
  <link rel="apple-touch-icon" sizes="144x144" href="/icons/apple-icon-144x144.png">
  <link rel="apple-touch-icon" sizes="152x152" href="/icons/apple-icon-152x152.png">
  <link rel="apple-touch-icon" sizes="180x180" href="/icons/apple-icon-180x180.png">
  <link rel="icon" type="image/png" sizes="192x192" href="/icons/android-icon-192x192.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/icons/favicon-32x32.png">
  <link rel="icon" type="image/png" sizes="96x96" href="/icons/favicon-96x96.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/icons/favicon-16x16.png">
  <link rel="manifest" href="/icons/manifest.json">
  <meta name="msapplication-TileColor" content="#ffffff">
  <meta name="msapplication-TileImage" content="/icons/ms-icon-144x144.png">
  <meta name="theme-color" content="#ffffff">
  <meta name="description" content="Dynamic host configuration protocol relay agent">
  <meta name="twitter:card" content="summary_large_image">
  <meta name="twitter:site" content="@CartaTech">
  <meta name="twitter:creator" content="@CartaTech">
  <meta name="twitter:title" content="dhcrelay (8) manual">
  <meta name="twitter:description" content="Dynamic host configuration protocol relay agent">
  <meta name="twitter:image" content="https://www.carta.tech/images/isc-dhcp-relay-dhcrelay-8.png">
  <meta property="og:url" content="https://www.carta.tech/man-pages/man8/dhcrelay.8.html" />
  <meta property="og:type" content="website" />
  <meta property="og:title" content="dhcrelay (8) manual" />
  <meta property="og:description" content="Dynamic host configuration protocol relay agent" />
  <meta property="fb:app_id" content="1241677679199500" />
  <meta property="og:image" content="https://www.carta.tech/images/isc-dhcp-relay-dhcrelay-8.png" />
  <meta property="og:image:width" content="600" />
  <meta property="og:image:height" content="315" />
</head>
<body>
  <div class="container final">
          <div class="page-header">
        <h1 class="font-effect-destruction">dhcrelay<small> (8)</small></h1>
        <p class="lead">Dynamic host configuration protocol relay agent</p>
      </div>

    <ol class="breadcrumb" itemscope itemtype="http://schema.org/BreadcrumbList">
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/">
      <span itemprop="name">Carta.tech</span>
    </a>
    <meta itemprop="position" content="1" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/">
      <span itemprop="name">Man Pages</span>
    </a>
    <meta itemprop="position" content="2" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/man8/">
      <span itemprop="name">System administration commands</span>
    </a>
    <meta itemprop="position" content="3" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/man8/dhcrelay.8.html">
      <span itemprop="name">dhcrelay: Dynamic host configuration protocol relay agent</span>
    </a>
    <meta itemprop="position" content="4" />
  </li>
</ol>
<ol class="breadcrumb" itemscope itemtype="http://schema.org/BreadcrumbList">
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/">
      <span itemprop="name">Carta.tech</span>
    </a>
    <meta itemprop="position" content="1" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/packages/">
      <span itemprop="name">Packages</span>
    </a>
    <meta itemprop="position" content="2" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/packages/isc-dhcp-relay/">
      <span itemprop="name">isc-dhcp-relay</span>
    </a>
    <meta itemprop="position" content="3" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/man8/dhcrelay.8.html">
      <span itemprop="name">dhcrelay: Dynamic host configuration protocol relay agent</span>
    </a>
    <meta itemprop="position" content="4" />
  </li>
</ol>
    
      <section>
        <h2 class="font-effect-shadow-multiple">SYNOPSIS</h2>
        <div class="sectioncontent">
<p><strong>dhcrelay</strong> [ <strong>-4</strong> ] [ <strong>-dqaD</strong> ] [ <strong>-p</strong> <em>port</em> ] [ <strong>-c</strong> <em>count</em> ] [ <strong>-A</strong> <em>length</em> ] [ <strong>-pf</strong> <em>pid-file</em> ] [ <strong>--no-pid</strong> ] [ <strong>-m</strong> <em>append</em> | <em>replace</em> | <em>forward</em> | <em>discard</em> ] [ <strong>-i</strong> <em>interface0</em> [ <strong>...</strong> <strong>-i</strong> <em>interfaceN</em> ] ] <em>server0</em> [ <em>...serverN</em> ]</p><p><strong>dhcrelay -6</strong> [ <strong>-dqI</strong> ] [ <strong>-p</strong> <em>port</em> ] [ <strong>-c</strong> <em>count</em> ] [ <strong>-pf</strong> <em>pid-file</em> ] [ <strong>--no-pid</strong> ] [ <strong>-s</strong> <em>subscriber-id</em> ] <strong>-l</strong> <em>lower0</em> [ <strong>...</strong> <strong>-l</strong> <em>lowerN</em> ] <strong>-u</strong> <em>upper0</em> [ <strong>...</strong> <strong>-u</strong> <em>upperN</em> ]</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">DESCRIPTION</h2>
        <div class="sectioncontent">
<p>The Internet Systems Consortium DHCP Relay Agent, dhcrelay, provides a means for relaying DHCP and BOOTP requests from a subnet to which no DHCP server is directly connected to one or more DHCP servers on other subnets.  It supports both DHCPv4/BOOTP and DHCPv6 protocols.</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">OPERATION</h2>
        <div class="sectioncontent">
<p>The DHCP Relay Agent listens for DHCPv4 or DHCPv6 queries from clients or other relay agents on one or more interfaces, passing them along to ``upstream'' servers or relay agents as specified on the command line. When a reply is received from upstream, it is multicast or unicast back downstream to the source of the original request.</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">COMMAND LINE</h2>
        <div class="sectioncontent">
<p><em>Protocol selection options:</em></p>
<dl class='dl-vertical'>
  <dt>
    <p>-6</p>
  </dt>
  <dd>
    <p>Run dhcrelay as a DHCPv6 relay agent.  Incompatible with the <strong>-4</strong> option.</p>
  </dd>
  <dt>
    <p>-4</p>
  </dt>
  <dd>
    <p>Run dhcrelay as a DHCPv4/BOOTP relay agent.  This is the default mode of operation, so the argument is not necessary, but may be specified for clarity.  Incompatible with <strong>-6</strong>.</p>
  </dd>

</dl>
<p><em>Specifying DHCPv4/BOOTP servers</em></p><p>In DHCPv4 mode, a list of one or more server addresses must be specified on the command line, to which DHCP/BOOTP queries should be relayed.</p><p><em>Options available for both DHCPv4 and DHCPv6:</em></p>
<dl class='dl-vertical'>
  <dt>
    <p>-c COUNT</p>
  </dt>
  <dd>
    <p>Maximum hop count.  When forwarding packets, dhcrelay discards packets which have reached a hop count of COUNT.  Default is 10.  Maximum is 255.</p>
  </dd>
  <dt>
    <p>-d</p>
  </dt>
  <dd>
    <p>Force dhcrelay to run as a foreground process.  Useful when running dhcrelay under a debugger, or running out of inittab on System V systems.</p>
  </dd>
  <dt>
    <p>-p PORT</p>
  </dt>
  <dd>
    <p>Listen and transmit on port PORT.  This is mostly useful for debugging purposes.  Default is port 67 for DHCPv4/BOOTP, or port 547 for DHCPv6.</p>
  </dd>
  <dt>
    <p>-q</p>
  </dt>
  <dd>
    <p>Quiet mode.  Prevents dhcrelay6 from printing its network configuration on startup.</p>
  </dd>
  <dt>
    <p>-pf pid-file</p>
  </dt>
  <dd>
    <p>Path to alternate pid file.</p>
  </dd>
  <dt>
    <p>--no-pid</p>
  </dt>
  <dd>
    <p>Option to disable writing pid files.  By default the program will write a pid file.</p>
  </dd>

</dl>
<p><em>Options available in DHCPv4 mode only:</em></p>
<dl class='dl-vertical'>
  <dt>
    <p>-a</p>
  </dt>
  <dd>
    <p>Append an agent option field to each request before forwarding it to the server.  Agent option fields in responses sent from servers to clients will be stripped before forwarding such responses back to the client.  The agent option field will contain two agent options: the Circuit ID suboption and the Remote ID suboption.  Currently, the Circuit ID will be the printable name of the interface on which the client request was received.  The client supports inclusion of a Remote ID suboption as well, but this is not used by default.</p>
  </dd>
  <dt>
    <p>-A LENGTH</p>
  </dt>
  <dd>
    <p>Specify the maximum packet size to send to a DHCPv4/BOOTP server.  This might be done to allow sufficient space for addition of relay agent options while still fitting into the Ethernet MTU size.</p>
  </dd>
  <dt>
    <p>-D</p>
  </dt>
  <dd>
    <p>Drop packets from upstream servers if they contain Relay Agent Information options that indicate they were generated in response to a query that came via a different relay agent.  If this option is not specified, such packets will be relayed anyway.</p>
  </dd>
  <dt>
    <p>-i <em>ifname</em></p>
  </dt>
  <dd>
    <p>Listen for DHCPv4/BOOTP queries on interface <em>ifname</em>.  Multiple interfaces may be specified by using more than one <strong>-i</strong> option.  If no interfaces are specified on the command line, dhcrelay will identify all network interfaces, eliminating non-broadcast interfaces if possible, and attempt to listen on all of them.</p>
  </dd>
  <dt>
    <p>-m <em>append</em>|<em>replace</em>|<em>forward</em>|<em>discard</em></p>
  </dt>
  <dd>
    <p>Control the handling of incoming DHCPv4 packets which already contain relay agent options.  If such a packet does not have <em>giaddr</em> set in its header, the DHCP standard requires that the packet be discarded. However, if <em>giaddr</em> is set, the relay agent may handle the situation in four ways:  It may <em>append</em> its own set of relay options to the packet, leaving the supplied option field intact; it may <em>replace</em> the existing agent option field; it may <em>forward</em> the packet unchanged; or, it may <em>discard</em> it.</p><p>To use this option you must also enable the <strong>-a</strong> option.</p>
  </dd>

</dl>
<p><em>Options available in DHCPv6 mode only:</em></p>
<dl class='dl-vertical'>
  <dt>
    <p>-I</p>
  </dt>
  <dd>
    <p>Force use of the DHCPv6 Interface-ID option.  This option is automatically sent when there are two or more downstream interfaces in use, to disambiguate between them.  The <strong>-I</strong> option causes dhcrelay to send the option even if there is only one downstream interface.</p>
  </dd>
  <dt>
    <p>-s subscriber-id</p>
  </dt>
  <dd>
    <p>Add an option with the specified subscriber-id into the packet.  This feature is for testing rather than production as it will put the same subscriber-id into the packet for all clients.</p>
  </dd>
  <dt>
    <p>-l [<em>address%</em>]<em>ifname</em>[<em>#index</em>]</p>
  </dt>
  <dd>
    <p>Specifies the ``lower'' network interface for DHCPv6 relay mode: the interface on which queries will be received from clients or from other relay agents.  At least one <strong>-l</strong> option must be included in the command line when running in DHCPv6 mode.  The interface name <em>ifname</em> is a mandatory parameter.  The link address can be specified by <em>address%</em>; if it isn't, dhcrelay will use the first non-link-local address configured on the interface.  The optional <em>#index</em> parameter specifies the interface index.</p>
  </dd>
  <dt>
    <p>-u [<em>address%</em>]<em>ifname</em></p>
  </dt>
  <dd>
    <p>Specifies the ``upper'' network interface for DHCPv6 relay mode: the interface to which queries from clients and other relay agents should be forwarded.  At least one <strong>-u</strong> option must be included in the command line when running in DHCPv6 mode.  The interface name <em>ifname</em> is a mandatory parameter. The destination unicast or multicast address can be specified by <em>address%</em>; if not specified, the relay agent will forward to the DHCPv6 <em>All_DHCP_Relay_Agents_and_Servers</em> multicast address.</p>
  </dd>

</dl>
<p>It is possible to specify the same interface with different addresses more than once, and even, when the system supports it, to use the same interface as both upper and lower interfaces.</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">RELATED TO dhcrelay&hellip;</h2>
        <div class="sectioncontent">
<p><a href="../man8/dhclient.8.html"><strong>dhclient</strong>(8)</a>, <a href="../man8/dhcpd.8.html"><strong>dhcpd</strong>(8)</a>, RFC3315, RFC2132, RFC2131.</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">BUGS</h2>
        <div class="sectioncontent">
<p>Using the same interface on both upper and lower sides may cause loops, so when running this way, the maximum hop count should be set to a low value.</p><p>The loopback interface is not (yet) recognized as a valid interface.</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">AUTHOR</h2>
        <div class="sectioncontent">
<p><a href="../man8/dhcrelay.8.html"><strong>dhcrelay</strong>(8)</a></strong> To learn more about Internet Systems Consortium, see <strong>https://www.isc.org</strong></p>
        </div>
      </section>
<nav>
  <ul class="pager">
   <li class="previous"><a href="dhcpy6d.8.html"><span aria-hidden="true">&larr;</span> dhcpy6d.8: Mac address aware dhcpv6 server</a></li>
   <li class="next"><a href="dhelp_parse.8.html">dhelp_parse.8: Debian online help parser <span aria-hidden="true">&rarr;</span></a></li>
  </ul>
</nav>

  </div>
  <!-- jQuery (necessary for Bootstrap's JavaScript plugins) -->
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.2/jquery.min.js"></script>
  <!-- Include all compiled plugins (below), or include individual files as needed -->
  <script src="/js/bootstrap.min.js"></script>
  <script>
    (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
      (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
      m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
    })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

    ga('create', 'UA-60781387-1', 'auto');
    ga('send', 'pageview');

  </script>
</body>
</html>
