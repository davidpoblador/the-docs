<!DOCTYPE html>
<html lang="en">
<head>
  <link href="https://fonts.googleapis.com/css?family=Fira+Mono:400,700&effect=destruction%7Cshadow-multiple" rel="stylesheet" type="text/css">
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>yppasswdd - NIS password update daemon</title>
  <link href="/css/bootstrap.min.css" rel="stylesheet">
  <link href="/css/manpage.css" rel="stylesheet">
  <link rel="apple-touch-icon" sizes="57x57" href="/icons/apple-icon-57x57.png">
  <link rel="apple-touch-icon" sizes="60x60" href="/icons/apple-icon-60x60.png">
  <link rel="apple-touch-icon" sizes="72x72" href="/icons/apple-icon-72x72.png">
  <link rel="apple-touch-icon" sizes="76x76" href="/icons/apple-icon-76x76.png">
  <link rel="apple-touch-icon" sizes="114x114" href="/icons/apple-icon-114x114.png">
  <link rel="apple-touch-icon" sizes="120x120" href="/icons/apple-icon-120x120.png">
  <link rel="apple-touch-icon" sizes="144x144" href="/icons/apple-icon-144x144.png">
  <link rel="apple-touch-icon" sizes="152x152" href="/icons/apple-icon-152x152.png">
  <link rel="apple-touch-icon" sizes="180x180" href="/icons/apple-icon-180x180.png">
  <link rel="icon" type="image/png" sizes="192x192" href="/icons/android-icon-192x192.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/icons/favicon-32x32.png">
  <link rel="icon" type="image/png" sizes="96x96" href="/icons/favicon-96x96.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/icons/favicon-16x16.png">
  <link rel="manifest" href="/icons/manifest.json">
  <meta name="msapplication-TileColor" content="#ffffff">
  <meta name="msapplication-TileImage" content="/icons/ms-icon-144x144.png">
  <meta name="theme-color" content="#ffffff">
  <meta name="description" content="Nis password update daemon">
</head>
<body>
  <div class="container final">
          <div class="page-header">
        <h1 class="font-effect-destruction">yppasswdd<small> (8)</small></h1>
        <p class="lead">Nis password update daemon</p>
      </div>

    <ol class="breadcrumb">
	<li itemscope itemtype="http://data-vocabulary.org/Breadcrumb" itemref="breadcrumb_section">
		<a itemprop="url" href="/"><span itemprop="title">Carta.tech</span></a>
	</li>
	<li itemscope itemtype="http://data-vocabulary.org/Breadcrumb" itemref="breadcrumb_section">
		<a itemprop="url" href="https://www.carta.tech/man-pages/"><span itemprop="title">man-pages</span></a>
	</li>
	<li id="breadcrumb_section" itemscope itemtype="http://data-vocabulary.org/Breadcrumb" itemref="breadcrumb_page" itemprop="child">
		<a itemprop="url" href="https://www.carta.tech/man-pages/man8/"><span itemprop="title">System administration commands</span></a>
	</li>
	<li id="breadcrumb_page" itemscope itemtype="http://data-vocabulary.org/Breadcrumb" itemprop="child" class="active">
		<a itemprop="url" href="https://www.carta.tech/man-pages/man8/yppasswdd.8.html"><span itemprop="title">yppasswdd</span></a>
	</li>
</ol>
    
      <section>
        <h2 class="font-effect-shadow-multiple">SYNOPSIS</h2>
        <div class="sectioncontent">

<p><strong>rpc.yppasswdd [-D directory] [-e chsh|chfn] [--port number]</strong></p>
<p class='spacer'>

<p><strong>rpc.yppasswdd [-s shadow] [-p passwd] [-e chsh|chfn] [--port number]</strong></p>
<p class='spacer'>

<p><strong>rpc.yppasswdd -x program|-E program [-e chsh|chfn] [--port number]</strong></p>
<p class='spacer'>

        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">DESCRIPTION</h2>
        <div class="sectioncontent">

<p><strong>rpc.yppasswdd</strong> is the RPC server that lets users change their passwords in the presence of NIS (a.k.a. YP). It must be run on the NIS master server for that NIS domain.</p>
<p class='spacer'>

<p>When a <a href="../man1/yppasswd.1.html"><strong>yppasswd</strong>(1)</a> client contacts the server, it sends the old user password along with the new one. <strong>rpc.yppasswdd</strong> will search the system's <strong>passwd</strong> file for the specified user name, verify that the given (old) password matches, and update the entry. If the user specified does not exist, or if the password, UID or GID doesn't match the information in the password file, the update request is rejected, and an error returned to the client.</p>
<p class='spacer'>

<p>If this version of the server is compiled with the CHECKROOT=1 option, the password given is also checked against the systems root password.</p>
<p class='spacer'>

<p>After updating the <strong>passwd</strong> file and returning a success notification to the client, <strong>rpc.yppasswdd</strong> executes the <strong>pwupdate</strong> script that updates the NIS server's <strong>passwd.*</strong> and <strong>shadow.byname</strong> maps. This script assumes all NIS maps are kept in directories named <strong>/var/yp/</strong><em>nisdomain</em> that each contain a <strong>Makefile</strong> customized for that NIS domain. If no such <strong>Makefile</strong> is found, the scripts uses the generic one in <strong>/var/yp</strong>.</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">OPTIONS</h2>
        <div class="sectioncontent">

  <p>The following options are available:</p>
  <dl class='dl-vertical'>
    <dt><strong>-D</strong><em> directory</em></dt>
    <dd>
  <p>The <strong>passwd</strong> and <strong>shadow</strong> files are located under the specified directory path. <strong>rpc.yppasswdd</strong> will use this files, not <strong>/etc/passwd</strong> and <strong>/etc/shadow.</strong> This is useful if you do not want to give all users in the NIS database automatic access to your NIS server.</p>
    </dd>
    <dt><strong>-E</strong><em> program</em></dt>
    <dd>
  <p>Instead of rpc.yppasswdd editing the passwd & shadow files, the specified program will be run to do the editing. The following environment variables will be set for the program: YP_PASSWD_OLD, YP_PASSWD_NEW, YP_USER, YP_GECOS, YP_SHELL. The program should return an exit status of 0 if the change completes successfully, 1 if the change completes successfully but pwupdate should not be run, and otherwise if the change fails.</p>
    </dd>
    <dt><strong>-p</strong><em> passwdfile</em></dt>
    <dd>
  <p>This options tells <strong>rpc.yppasswdd</strong> to use a different source file instead of <strong>/etc/passwd</strong> This is useful if you do not want to give all users in the NIS database automatic access to your NIS server.</p>
    </dd>
    <dt><strong>-s</strong><em> shadowfile</em></dt>
    <dd>
  <p>This options tells <strong>rpc.yppasswdd</strong> to use a different source file instead of <strong>/etc/passwd</strong>. See below for a brief discussion of shadow support.</p>
    </dd>
    <dt><strong>-e [chsh|chfn]</strong></dt>
    <dd>
  <p>By default, <strong>rpc.yppasswdd</strong> will not allow users to change the shell or GECOS field of their <strong>passwd</strong> entry. Using the <strong>-e</strong> option, you can enable either of these. Note that when enabling support for <a href="../man1/ypchsh.1.html"><strong>ypchsh</strong>(1)</a>, you have to list all shells users are allowed to select in <strong>/etc/shells</strong>.</p>
    </dd>
    <dt><strong>-x program</strong></dt>
    <dd>
  <p>When the -x option is used, rpc.yppasswdd will not attempt to modify any files itself, but will instead run the specified program, passing to its stdin information about the requested operation(s).  There is a defined protocol used to communicate with this external program, which has total freedom in how it propagates the change request. See below for more details on this.</p>
    </dd>
    <dt><strong>-m</strong></dt>
    <dd>
  <p>Will be ignored, for compatibility with Solaris only.</p>
    </dd>
    <dt><strong>--port number</strong></dt>
    <dd>
  <p>rpc.yppasswdd will try to register itself to this port. This makes it  possible to have a router filter packets to the NIS ports.</p>
    </dd>
    <dt><strong>-v --version</strong></dt>
    <dd>
  <p>Prints the version number and if this package is compiled with the CHECKROOT option.</p>
    </dd>
  </dl>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">MISCELLANEOUS</h2>
        <div class="sectioncontent">

  <h3>Shadow Passwords</h3>
<p>Using Shadow passwords alongside NIS does not make too much sense, because the supposedly inaccesible passwords now become readable through a simple invocation of <a href="../man1/ypcat.1.html"><strong>ypcat</strong>(1)</a>.</p>
<p class='spacer'>

<p>Shadow support in <strong>rpc.yppasswdd</strong> does not mean that it offers a very clever solution to this problem, it simply means that it can read and write password entries in the system's <strong>shadow</strong> file.  You have to produce a <strong>shadow.byname</strong> NIS map to distribute password information to your NIS clients. <strong>rpc.yppasswdd</strong> will search at first in the <strong>/etc/passwd</strong> file for the user and password. If it find's the user, but the password is "x" and a <strong>/etc/shadow</strong> file exists, it will update the password in the shadow map.</p>
  <h3>Use of the -x option</h3>
<p>The program should expect to read a single line from stdin, which is formatted as follows:</p>
<p class='spacer'>

<p>&lt;username&gt; o:&lt;oldpass&gt; p:&lt;password&gt; s:&lt;shell&gt; g:&lt;gcos&gt;&#92;n</p>
<p class='spacer'>

<p>where any of the three fields [p, s, g] may or may not be present.</p>
<p class='spacer'>

<p>This program should write "OK&#92;n" to stdout if the operation succeeded.  On any other result, rpc.yppasswdd will report failure to the client.</p>
<p class='spacer'>

<p>Note that the program specified by the -x option is responsible for doing any NIS make and build, and for doing any necessary validation on the shell and gcos field information supplied.  The password passed to the client will be in UNIX crypt() format.</p>
  <h3>Logging</h3>
<p><strong>rpc.yppasswdd</strong> logs all password update requests to <strong>syslogd</strong>(8)</strong>'s auth facility. The logging information includes the originating host's IP address and the user name and UID contained in the request. The user-supplied password itself is not logged.</p>
  <h3>Security</h3>
<p>Unless I've screwed up completely (as I did with versions prior to version&nbsp;0.5), <strong>rpc.yppasswdd</strong> should be as secure or insecure as any program relying on simple password authentication.  If you feel that this is not enough, you may want to protect <strong>rpc.yppasswdd</strong> from outside access by using the `securenets' feature of the new <strong>portmap</strong>(8)</strong> version&nbsp;3.  Better still, use Kerberos.</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">COPYRIGHT</h2>
        <div class="sectioncontent">

<p><strong>rpc.yppasswdd</strong> is copyright (C) Olaf Kirch. You can use and distribute it under the GNU General Public License Version 2. Note that it does <em>not</em> contain any code from the shadow password suite.</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">FILES</h2>
        <div class="sectioncontent">

<p><strong>/usr/sbin/rpc.yppasswdd</strong></p>
<p class='spacer'>

<p><strong>/usr/lib/yp/pwupdate</strong></p>
<p class='spacer'>

<p><strong>/etc/passwd</strong></p>
<p class='spacer'>

<p><strong>/etc/shadow</strong></p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">SEE ALSO</h2>
        <div class="sectioncontent">

<p><a href="../man5/passwd.5.html"><strong>passwd</strong>(5)</a>, <a href="../man5/shadow.5.html"><strong>shadow</strong>(5)</a>, <a href="../man1/passwd.1.html"><strong>passwd</strong>(1)</a>, <a href="../man1/yppasswd.1.html"><strong>yppasswd</strong>(1)</a>, <a href="../man1/ypchsh.1.html"><strong>ypchsh</strong>(1)</a>, <a href="../man1/ypchfn.1.html"><strong>ypchfn</strong>(1)</a>, <a href="../man8/ypserv.8.html"><strong>ypserv</strong>(8)</a>, <a href="../man1/ypcat.1.html"><strong>ypcat</strong>(1)</a></p>
<p class='spacer'>

<p>The Network Information Service (\s-1NIS\s0) was formerly known as Sun Yellow Pages (\s-1YP\s0). The functionality of the two remains the same; only the name has changed. The name Yellow Pages is a registered trademark in the United Kingdom of British Telecommunications plc, and may not be used without permission.</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">AUTHOR</h2>
        <div class="sectioncontent">

<p>Olaf Kirch, &lt;okir@monad.swb.de&gt;</p>
<p class='spacer'>

<p>Thorsten Kukuk, &lt;kukuk@suse.de&gt;</p>
        </div>
      </section>
<nav>
  <ul class="pager">
   <li class="previous"><a href="ypinit.8.html"><span aria-hidden="true">&larr;</span> ypinit.8: NIS database install and build program</a></li>
   <li class="next"><a href="yppoll.8.html">yppoll.8: return version and master server of a NIS map <span aria-hidden="true">&rarr;</span></a></li>
  </ul>
</nav>

  </div>
  <!-- jQuery (necessary for Bootstrap's JavaScript plugins) -->
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.2/jquery.min.js"></script>
  <!-- Include all compiled plugins (below), or include individual files as needed -->
  <script src="/js/bootstrap.min.js"></script>
  <script>
    (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
      (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
      m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
    })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

    ga('create', 'UA-60781387-1', 'auto');
    ga('send', 'pageview');

  </script>
</body>
</html>
