<!DOCTYPE html>
<html lang="en">
<head>
  <link href="https://fonts.googleapis.com/css?family=Fira+Mono:400,700&effect=destruction%7Cshadow-multiple" rel="stylesheet" type="text/css">
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>pppoe: User-space pppoe client.</title>
  <link href="/css/bootstrap.min.css" rel="stylesheet">
  <link href="/css/manpage.css" rel="stylesheet">
  <link rel="apple-touch-icon" sizes="57x57" href="/icons/apple-icon-57x57.png">
  <link rel="apple-touch-icon" sizes="60x60" href="/icons/apple-icon-60x60.png">
  <link rel="apple-touch-icon" sizes="72x72" href="/icons/apple-icon-72x72.png">
  <link rel="apple-touch-icon" sizes="76x76" href="/icons/apple-icon-76x76.png">
  <link rel="apple-touch-icon" sizes="114x114" href="/icons/apple-icon-114x114.png">
  <link rel="apple-touch-icon" sizes="120x120" href="/icons/apple-icon-120x120.png">
  <link rel="apple-touch-icon" sizes="144x144" href="/icons/apple-icon-144x144.png">
  <link rel="apple-touch-icon" sizes="152x152" href="/icons/apple-icon-152x152.png">
  <link rel="apple-touch-icon" sizes="180x180" href="/icons/apple-icon-180x180.png">
  <link rel="icon" type="image/png" sizes="192x192" href="/icons/android-icon-192x192.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/icons/favicon-32x32.png">
  <link rel="icon" type="image/png" sizes="96x96" href="/icons/favicon-96x96.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/icons/favicon-16x16.png">
  <link rel="manifest" href="/icons/manifest.json">
  <meta name="msapplication-TileColor" content="#ffffff">
  <meta name="msapplication-TileImage" content="/icons/ms-icon-144x144.png">
  <meta name="theme-color" content="#ffffff">
  <meta name="description" content="User-space pppoe client.">
  <meta name="twitter:card" content="summary_large_image">
  <meta name="twitter:site" content="@CartaTech">
  <meta name="twitter:creator" content="@CartaTech">
  <meta name="twitter:title" content="pppoe (8) manual">
  <meta name="twitter:description" content="User-space pppoe client.">
  <meta name="twitter:image" content="https://www.carta.tech/images/pppoe-pppoe-8.png">
  <meta property="og:url" content="https://www.carta.tech/man-pages/man8/pppoe.8.html" />
  <meta property="og:type" content="website" />
  <meta property="og:title" content="pppoe (8) manual" />
  <meta property="og:description" content="User-space pppoe client." />
  <meta property="fb:app_id" content="1241677679199500" />
  <meta property="og:image" content="https://www.carta.tech/images/pppoe-pppoe-8.png" />
  <meta property="og:image:width" content="600" />
  <meta property="og:image:height" content="315" />
</head>
<body>
  <div class="container final">
          <div class="page-header">
        <h1 class="font-effect-destruction">pppoe<small> (8)</small></h1>
        <p class="lead">User-space pppoe client.</p>
      </div>

    <ol class="breadcrumb" itemscope itemtype="http://schema.org/BreadcrumbList">
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/">
      <span itemprop="name">Carta.tech</span>
    </a>
    <meta itemprop="position" content="1" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/">
      <span itemprop="name">Man Pages</span>
    </a>
    <meta itemprop="position" content="2" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/man8/">
      <span itemprop="name">System administration commands</span>
    </a>
    <meta itemprop="position" content="3" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/man8/pppoe.8.html">
      <span itemprop="name">pppoe: User-space pppoe client.</span>
    </a>
    <meta itemprop="position" content="4" />
  </li>
</ol>
<ol class="breadcrumb" itemscope itemtype="http://schema.org/BreadcrumbList">
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/">
      <span itemprop="name">Carta.tech</span>
    </a>
    <meta itemprop="position" content="1" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/packages/">
      <span itemprop="name">Packages</span>
    </a>
    <meta itemprop="position" content="2" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/packages/pppoe/">
      <span itemprop="name">pppoe</span>
    </a>
    <meta itemprop="position" content="3" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/man8/pppoe.8.html">
      <span itemprop="name">pppoe: User-space pppoe client.</span>
    </a>
    <meta itemprop="position" content="4" />
  </li>
</ol>
    
      <section>
        <h2 class="font-effect-shadow-multiple">SYNOPSIS</h2>
        <div class="sectioncontent">
<p><strong>pppd pty 'pppoe </strong>[<em>pppoe_options</em>]<strong>' </strong>[<em>pppd_options</em>]</p><p><strong>pppoe -A </strong>[<em>pppoe_options</em>]</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">DESCRIPTION</h2>
        <div class="sectioncontent">
<p><strong>pppoe</strong> is a user-space client for PPPoE (Point-to-Point Protocol over Ethernet) for Linux and other UNIX systems.  <strong>pppoe</strong> works in concert with the <strong>pppd</strong> PPP daemon to provide a PPP connection over Ethernet, as is used by many DSL service providers.</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">OPTIONS</h2>
        <div class="sectioncontent">

<dl class='dl-vertical'>
  <dt>
    <p><strong>-I </strong><em>interface</em></p>
  </dt>
  <dd>
    <p>The <strong>-I</strong> option specifies the Ethernet interface to use.  Under Linux, it is typically <em>eth0</em> or <em>eth1</em>.  The interface should be "up" before you start <strong>pppoe</strong>, but should <em>not</em> be configured to have an IP address.</p>
  </dd>
  <dt>
    <p><strong>-T </strong><em>timeout</em></p>
  </dt>
  <dd>
    <p>The <strong>-T</strong> option causes <strong>pppoe</strong> to exit if no session traffic is detected for <em>timeout</em> seconds.  I recommend that you use this option as an extra safety measure, but if you do, you should make sure that PPP generates enough traffic so the timeout will normally not be triggered.  The best way to do this is to use the <em>lcp-echo-interval</em> option to <strong>pppd</strong>.  You should set the PPPoE timeout to be about four times the LCP echo interval.</p>
  </dd>
  <dt>
    <p><strong>-D </strong><em>file_name</em></p>
  </dt>
  <dd>
    <p>The <strong>-D</strong> option causes every packet to be dumped to the specified <em>file_name</em>.  This is intended for debugging only; it produces huge amounts of output and greatly reduces performance.</p>
  </dd>
  <dt>
    <p><strong>-V</strong></p>
  </dt>
  <dd>
    <p>The <strong>-V</strong> option causes <strong>pppoe</strong> to print its version number and exit.</p>
  </dd>
  <dt>
    <p><strong>-A</strong></p>
  </dt>
  <dd>
    <p>The <strong>-A</strong> option causes <strong>pppoe</strong> to send a PADI packet and then print the names of access concentrators in each PADO packet it receives.  Do not use this option in conjunction with <strong>pppd</strong>; the <strong>-A</strong> option is meant to be used interactively to give interesting information about the access concentrator.</p>
  </dd>
  <dt>
    <p><strong>-S </strong><em>service_name</em></p>
  </dt>
  <dd>
    <p>Specifies the desired service name.  <strong>pppoe</strong> will only initiate sessions with access concentrators which can provide the specified service.  In most cases, you should <em>not</em> specify this option.  Use it only if you know that there are multiple access concentrators or know that you need a specific service name.</p>
  </dd>
  <dt>
    <p><strong>-C </strong><em>ac_name</em></p>
  </dt>
  <dd>
    <p>Specifies the desired access concentrator name.  <strong>pppoe</strong> will only initiate sessions with the specified access concentrator.  In most cases, you should <em>not</em> specify this option.  Use it only if you know that there are multiple access concentrators.  If both the <strong>-S</strong> and <strong>-C</strong> options are specified, they must <em>both</em> match for <strong>pppoe</strong> to initiate a session.</p>
  </dd>
  <dt>
    <p><strong>-U</strong></p>
  </dt>
  <dd>
    <p>Causes <strong>pppoe</strong> to use the Host-Uniq tag in its discovery packets.  This lets you run multiple <strong>pppoe</strong> daemons without having their discovery packets interfere with one another.  You must supply this option to <em>all</em> <strong>pppoe</strong> daemons if you intend to run multiple daemons simultaneously.</p>
  </dd>
  <dt>
    <p><strong>-s</strong></p>
  </dt>
  <dd>
    <p>Causes <strong>pppoe</strong> to use <em>synchronous</em> PPP encapsulation.  If you use this option, then you <em>must</em> use the <strong>sync</strong> option with <strong>pppd</strong>.  You are encouraged to use this option if it works, because it greatly reduces the CPU overhead of <strong>pppoe</strong>.  However, it MAY be unreliable on slow machines -- there is a race condition between pppd writing data and pppoe reading it.  For this reason, the default setting is asynchronous.  If you encounter bugs or crashes with Synchronous PPP, turn it off -- don't e-mail me for support!</p>
  </dd>
  <dt>
    <p><strong>-m </strong><em>MSS</em></p>
  </dt>
  <dd>
    <p>Causes <strong>pppoe</strong> to <em>clamp</em> the TCP maximum segment size at the specified value.  Because of PPPoE overhead, the maximum segment size for PPPoE is smaller than for normal Ethernet encapsulation.  This could cause problems for machines on a LAN behind a gateway using PPPoE.  If you have a LAN behind a gateway, and the gateway connects to the Internet using PPPoE, you are strongly recommended to use a <strong>-m 1412</strong> option.  This avoids having to set the MTU on all the hosts on the LAN.</p>
  </dd>
  <dt>
    <p><strong>-H </strong><em>MAC</em></p>
  </dt>
  <dd>
    <p>Causes <strong>pppoe</strong> to use the indicated Ethernet MAC address as the source address for sending packets. <em>MAC</em> must be specified in the <em>AA</em>:<em>BB</em>:<em>CC</em>:<em>DD</em>:<em>EE</em>:<em>FF</em> syntax.  If this option is specified, <strong>pppoe</strong> puts the interface into promiscuous mode.</p>
  </dd>
  <dt>
    <p><strong>-p </strong><em>file</em></p>
  </dt>
  <dd>
    <p>Causes <strong>pppoe</strong> to write its process-ID to the specified file.  This can be used to locate and kill <strong>pppoe</strong> processes.</p>
  </dd>
  <dt>
    <p><strong>-e </strong><em>sess:mac</em></p>
  </dt>
  <dd>
    <p>Causes <strong>pppoe</strong> to skip the discovery phase and move directly to the session phase.  The session is given by <em>sess</em> and the MAC address of the peer by <em>mac</em>.  This mode is <em>not</em> meant for normal use; it is designed only for <a href="../man8/pppoe-server.8.html"><strong>pppoe-server</strong>(8)</a>.</p>
  </dd>
  <dt>
    <p><strong>-n</strong></p>
  </dt>
  <dd>
    <p>Causes <strong>pppoe</strong> not to open a discovery socket.  This mode is <em>not</em> meant for normal use; it is designed only for <a href="../man8/pppoe-server.8.html"><strong>pppoe-server</strong>(8)</a>.</p>
  </dd>
  <dt>
    <p><strong>-k</strong></p>
  </dt>
  <dd>
    <p>Causes <strong>pppoe</strong> to terminate an existing session by sending a PADT frame, and then exit.  You must use the <strong>-e</strong> option in conjunction with this option to specify the session to kill.  This may be useful for killing sessions when a buggy peer does not realize the session has ended.</p>
  </dd>
  <dt>
    <p><strong>-d</strong></p>
  </dt>
  <dd>
    <p>Causes <strong>pppoe</strong> to perform discovery and then exit, after printing session information to standard output.  The session information is printed in exactly the format expected by the <strong>-e</strong> option.  This option lets you initiate a PPPoE discovery, perform some other work, and then start the actual PPP session.  <em>Be careful</em>; if you use this option in a loop, you can create many sessions, which may annoy your peer.</p>
  </dd>
  <dt>
    <p><strong>-f disc:sess</strong></p>
  </dt>
  <dd>
    <p>The <strong>-f</strong> option sets the Ethernet frame types for PPPoE discovery and session frames.  The types are specified as hexadecimal numbers separated by a colon.  Standard PPPoE uses frame types 8863:8864. <em>You should not use this option</em> unless you are absolutely sure the peer you are dealing with uses non-standard frame types.  If your ISP uses non-standard frame types, complain!</p>
  </dd>
  <dt>
    <p><strong>-h</strong></p>
  </dt>
  <dd>
    <p>The <strong>-h</strong> option causes <strong>pppoe</strong> to print usage information and exit.</p>
  </dd>

</dl>

        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">PPPOE BACKGROUND</h2>
        <div class="sectioncontent">
<p>PPPoE (Point-to-Point Protocol over Ethernet) is described in RFC 2516 and is a protocol which allows the session abstraction to be maintained over bridged Ethernet networks.</p><p>PPPoE works by encapsulating PPP frames in Ethernet frames.  The protocol has two distinct stages:  The <em>discovery</em> and the <em>session</em> stage.</p><p>In the discovery stage, the host broadcasts a special PADI (PPPoE Active Discovery Initiation) frame to discover any <em>access</em> concentrators.  The access concentrators (typically, only one access concentrator) reply with PADO (PPPoE Active Discovery Offer) packets, announcing their presence and the services they offer.  The host picks one of the access concentrators and transmits a PADR (PPPoE Active Discovery Request) packet, asking for a session.  The access concentrator replies with a PADS (PPPoE Active Discovery Session-Confirmation) packet.  The protocol then moves to the session stage.</p><p>In the session stage, the host and access concentrator exchange PPP frames embedded in Ethernet frames.  The normal Ethernet MTU is 1500 bytes, but the PPPoE overhead plus two bytes of overhead for the encapsulated PPP frame mean that the MTU of the PPP interface is at most 1492 bytes. This causes <em>all kinds of problems</em> if you are using a Linux machine as a firewall and interfaces behind the firewall have an MTU greater than 1492.  In fact, to be safe, I recommend setting the MTU of machines behind the firewall to 1412, to allow for worst-case TCP and IP options in their respective headers.</p><p>Normally, PPP uses the Link Control Protocol (LCP) to shut down a PPP link.  However, the PPPoE specification allows the link to be shut down with a special PADT (PPPoE Active Discovery Terminate) packet.  This client recognizes this packet and will correctly terminate if a terminate request is received for the PPP session.</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">DESIGN GOALS</h2>
        <div class="sectioncontent">
<p>My design goals for this PPPoE client were as follows, in descending order of importance:</p>
<dl class='dl-vertical'>
  <dt>
    <p><strong>o</strong></p>
  </dt>
  <dd>
    <p>It must work.</p>
  </dd>
  <dt>
    <p><strong>o</strong></p>
  </dt>
  <dd>
    <p>It must be a user-space program and not a kernel patch.</p>
  </dd>
  <dt>
    <p><strong>o</strong></p>
  </dt>
  <dd>
    <p>The code must be easy to read and maintain.</p>
  </dd>
  <dt>
    <p><strong>o</strong></p>
  </dt>
  <dd>
    <p>It must be fully compliant with RFC 2516, the proposed PPPoE standard.</p>
  </dd>
  <dt>
    <p><strong>o</strong></p>
  </dt>
  <dd>
    <p>It must never hang up forever -- if the connection is broken, it must detect this and exit, allowing a wrapper script to restart the connection.</p>
  </dd>
  <dt>
    <p><strong>o</strong></p>
  </dt>
  <dd>
    <p>It must be fairly efficient.</p>
  </dd>

</dl>
<p>I believe I have achieved all of these goals, but (of course) am open to suggestions, patches and ideas.  See my home page, http://www.roaringpenguin.com, for contact information.</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">NOTES</h2>
        <div class="sectioncontent">
<p>For best results, you must give <strong>pppd</strong> an mtu option of 1492.  I have observed problems with excessively-large frames unless I set this option.  Also, if <strong>pppoe</strong> is running on a firewall machine, all machines behind the firewall should have MTU's of 1412.</p><p>If you have problems, check your system logs.  <strong>pppoe</strong> logs interesting things to syslog.  You may have to turn on logging of <em>debug</em>-level messages for complete diagnosis.</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">AUTHORS</h2>
        <div class="sectioncontent">
<p><strong>pppoe</strong> was written by David F. Skoll &lt;dfs@roaringpenguin.com&gt;, with much inspiration from an earlier version by Luke Stras.</p><p>The <strong>pppoe</strong> home page is <em>http://www.roaringpenguin.com/pppoe/</em>.</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">RELATED TO pppoe&hellip;</h2>
        <div class="sectioncontent">
<p><a href="../man8/pppd.8.html"><strong>pppd</strong>(8)</a>, <a href="../man8/pppoe-sniff.8.html"><strong>pppoe-sniff</strong>(8)</a>, <a href="../man8/pppoe-server.8.html"><strong>pppoe-server</strong>(8)</a>, <a href="../man8/pppoe-relay.8.html"><strong>pppoe-relay</strong>(8)</a>, /usr/share/doc/pppoe/README.Debian.gz</p>
        </div>
      </section>
<nav>
  <ul class="pager">
   <li class="previous"><a href="pppdump.8.html"><span aria-hidden="true">&larr;</span> pppdump.8: Convert ppp record file to readable format</a></li>
   <li class="next"><a href="pppoe-connect.8.html">pppoe-connect.8: Shell script to manage a pppoe link <span aria-hidden="true">&rarr;</span></a></li>
  </ul>
</nav>

  </div>
  <!-- jQuery (necessary for Bootstrap's JavaScript plugins) -->
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.2/jquery.min.js"></script>
  <!-- Include all compiled plugins (below), or include individual files as needed -->
  <script src="/js/bootstrap.min.js"></script>
  <script>
    (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
      (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
      m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
    })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

    ga('create', 'UA-60781387-1', 'auto');
    ga('send', 'pageview');

  </script>
</body>
</html>
