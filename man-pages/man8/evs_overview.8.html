<!DOCTYPE html>
<html lang="en">
<head>
  <link href="https://fonts.googleapis.com/css?family=Fira+Mono:400,700&effect=destruction%7Cshadow-multiple" rel="stylesheet" type="text/css">
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>evs_overview: Evs library overview</title>
  <link href="/css/bootstrap.min.css" rel="stylesheet">
  <link href="/css/manpage.css" rel="stylesheet">
  <link rel="apple-touch-icon" sizes="57x57" href="/icons/apple-icon-57x57.png">
  <link rel="apple-touch-icon" sizes="60x60" href="/icons/apple-icon-60x60.png">
  <link rel="apple-touch-icon" sizes="72x72" href="/icons/apple-icon-72x72.png">
  <link rel="apple-touch-icon" sizes="76x76" href="/icons/apple-icon-76x76.png">
  <link rel="apple-touch-icon" sizes="114x114" href="/icons/apple-icon-114x114.png">
  <link rel="apple-touch-icon" sizes="120x120" href="/icons/apple-icon-120x120.png">
  <link rel="apple-touch-icon" sizes="144x144" href="/icons/apple-icon-144x144.png">
  <link rel="apple-touch-icon" sizes="152x152" href="/icons/apple-icon-152x152.png">
  <link rel="apple-touch-icon" sizes="180x180" href="/icons/apple-icon-180x180.png">
  <link rel="icon" type="image/png" sizes="192x192" href="/icons/android-icon-192x192.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/icons/favicon-32x32.png">
  <link rel="icon" type="image/png" sizes="96x96" href="/icons/favicon-96x96.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/icons/favicon-16x16.png">
  <link rel="manifest" href="/icons/manifest.json">
  <meta name="msapplication-TileColor" content="#ffffff">
  <meta name="msapplication-TileImage" content="/icons/ms-icon-144x144.png">
  <meta name="theme-color" content="#ffffff">
  <meta name="description" content="Evs library overview">
  <meta name="twitter:card" content="summary_large_image">
  <meta name="twitter:site" content="@CartaTech">
  <meta name="twitter:creator" content="@CartaTech">
  <meta name="twitter:title" content="evs_overview (8) manual">
  <meta name="twitter:description" content="Evs library overview">
  <meta name="twitter:image" content="https://www.carta.tech/images/corosync-evs_overview-8.png">
  <meta property="og:url" content="https://www.carta.tech/man-pages/man8/evs_overview.8.html" />
  <meta property="og:type" content="website" />
  <meta property="og:title" content="evs_overview (8) manual" />
  <meta property="og:description" content="Evs library overview" />
  <meta property="fb:app_id" content="1241677679199500" />
  <meta property="og:image" content="https://www.carta.tech/images/corosync-evs_overview-8.png" />
  <meta property="og:image:width" content="600" />
  <meta property="og:image:height" content="315" />
</head>
<body>
  <div class="container final">
          <div class="page-header">
        <h1 class="font-effect-destruction">evs_overview<small> (8)</small></h1>
        <p class="lead">Evs library overview</p>
      </div>

    <ol class="breadcrumb" itemscope itemtype="http://schema.org/BreadcrumbList">
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/">
      <span itemprop="name">Carta.tech</span>
    </a>
    <meta itemprop="position" content="1" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/">
      <span itemprop="name">Man Pages</span>
    </a>
    <meta itemprop="position" content="2" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/man8/">
      <span itemprop="name">System administration commands</span>
    </a>
    <meta itemprop="position" content="3" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/man8/evs_overview.8.html">
      <span itemprop="name">evs_overview: Evs library overview</span>
    </a>
    <meta itemprop="position" content="4" />
  </li>
</ol>
<ol class="breadcrumb" itemscope itemtype="http://schema.org/BreadcrumbList">
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/">
      <span itemprop="name">Carta.tech</span>
    </a>
    <meta itemprop="position" content="1" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/packages/">
      <span itemprop="name">Packages</span>
    </a>
    <meta itemprop="position" content="2" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/packages/corosync/">
      <span itemprop="name">corosync</span>
    </a>
    <meta itemprop="position" content="3" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/man8/evs_overview.8.html">
      <span itemprop="name">evs_overview: Evs library overview</span>
    </a>
    <meta itemprop="position" content="4" />
  </li>
</ol>
    
      <section>
        <h2 class="font-effect-shadow-multiple">OVERVIEW</h2>
        <div class="sectioncontent">
<p>The EVS library is delivered with the corosync project.  This library is used to create distributed applications that operate properly during partitions, merges, and faults.</p><p>The library provides a mechanism to: * handle abstraction for multiple instances of an EVS library in one application * Deliver messages * Deliver configuration changes * join one or more groups * leave one or more groups * send messages to one or more groups * send messages to currently joined groups</p><p>The EVS library implements a messaging model known as Extended Virtual Synchrony. This model allows one sender to transmit to many receivers using standard UDP/IP. UDP/IP is unreliable and unordered, so the EVS library applies ordering and reliability to messages.  Hardware multicast is used to avoid duplicated packets with two or more receivers.  Erroneous messages are corrected automatically by the library.</p><p>Certain guarantees are provided by the EVS library.  These guarantees are related to message delivery and configuration change delivery.</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">DEFINITIONS</h2>
        <div class="sectioncontent">

<dl class='dl-vertical'>
  <dt>
    <p><strong>multicast</strong></p>
  </dt>
  <dd>
    <p>A multicast occurs when a network interface card sends a UDP packet to multiple receivers simulatenously.</p>
  </dd>
  <dt>
    <p><strong>processor</strong></p>
  </dt>
  <dd>
    <p>A processor is the entity that executes the extended virtual synchrony algorithms.</p>
  </dd>
  <dt>
    <p><strong>configuration</strong></p>
  </dt>
  <dd>
    <p>A configuration is the current description of the processors executing the extended virtual syncrhony algorithm.</p>
  </dd>
  <dt>
    <p><strong>configuration change</strong></p>
  </dt>
  <dd>
    <p>A configuration change occurs when a new configuration is delivered.</p>
  </dd>
  <dt>
    <p><strong>partition</strong></p>
  </dt>
  <dd>
    <p>A partition occurs when a configuration splits into two or more configurations, or a processor fails or is stopped and leaves the configuration.</p>
  </dd>
  <dt>
    <p><strong>merge</strong></p>
  </dt>
  <dd>
    <p>A merge occurs when two or more configurations join into a larger new configuration.  When a new processor starts up, it is treated as a configuration with only one processor and a merge occurs.</p>
  </dd>
  <dt>
    <p><strong>fifo ordering</strong></p>
  </dt>
  <dd>
    <p>A message is FIFO ordered when one sender and one receiver agree on the order of the messages sent.</p>
  </dd>
  <dt>
    <p><strong>agreed ordering</strong></p>
  </dt>
  <dd>
    <p>A message is AGREED ordered when all processors agree on the order of the messages sent.</p>
  </dd>
  <dt>
    <p><strong>safe ordering</strong></p>
  </dt>
  <dd>
    <p>A message is SAFE ordered when all processors agree on the order of messages sent and those messages are not delivered until all processors have a copy of the message to deliver.</p>
  </dd>
  <dt>
    <p><strong>virtual syncrhony</strong></p>
  </dt>
  <dd>
    <p>Virtual syncrhony is obtained when all processors agree on the order of messages sent and configuration changes sent for each new configuration.</p>
  </dd>

</dl>

        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">USING VIRTUAL SYNCHRONY</h2>
        <div class="sectioncontent">
<p>The virtual synchrony messaging model has many benefits for developing distributed applications.  Applications designed using replication have the most benefits.  Applications that must be able to partition and merge also benefit from the virtual synchrony messaging model.</p><p>All applications receive a copy of transmitted messages even if there are errors on the transmission media.  This allows optimiziations when every processor must receive a copy of the message for replication.</p><p>All messages are ordered according to agreed ordering.  This mechanism allows the avoidance of race conditions.  Consider a lock service implemented over several processors.  Two requests occur at the same time on two seperate processors.  The requests are ordered for every processor in the same order and delivered to the processors.  Then all processors will get request A before request B and can reject request B.  Any type of creation or deletion of a shared data structure can benefit from this mechanism.</p><p>Self delivery ensures that messages that are sent by a processor are also delivered back to that processor.  This allows the processor sending the message to execute logic when the message is self delivered according to agreed ordering and the virtual synchrony rules. It also permits all logic to be placed in one message handler instead of two seperate places.</p><p>Virtual Synchrony allows the current configuration to be used to make decisions in partitions and merges.  Since the configuration is sent in the stream of messages to the application, the application can alter its behavior based upon the configuration changes.</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">ARCHITECTURE AND ALGORITHM</h2>
        <div class="sectioncontent">
<p>The EVS library is a thin IPC interface to the corosync executive.  The corosync executive provides services for the SA Forum AIS libraries as well as the EVS library.</p><p>The corosync executive uses a ring protocol and membership protocol to send messages according to the semantics required by extended virtual synchrony.  The ring protocol creates a virtual ring of processors.  A token is rotated around the ring of processors. When the token is possessed by a processor, that processor may multicast messages to other processors in the system.</p><p>The token is called the ORF token (for ordering, reliability, flow control).  The ORF token orders all messages by increasing a sequence number every time a message is multicasted.  In this way, an ordering is placed on all messages that all processors agree to.  The token also contains a retransmission list.  If a token is received by a processor that has not yet received a message it should have, a message sequence number is added to the retransmission list.  A processor that has a copy of the message then retransmits the message.  The ORF token provides configuration-wide flow control by tracking the number of messages sent and limiting the number of messages that may be sent by one processor on each posession of the token.</p><p>The membership protocol is responsible for ring formation and detecting when a processor within a ring has failed.  If the token fails to make a rotation within a timeout period known as the token rotation timeout, the membership protocol will form a new ring. If a new processor starts, it will also form a new ring.  Two or more configurations may be used to form a new ring, allowing many partitions to merge together into one new configuration.</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">PERFORMANCE</h2>
        <div class="sectioncontent">
<p>The EVS library obtains 8.5MB/sec throughput on 100 mbit network links with many processors.  Larger messages obtain better throughput results because the time to access Ethernet is about the same for a small message as it is for a larger message.  Smaller messages obtain better messages per second, because the time to send a message is not exactly the same.</p><p>80% of CPU utilization occurs because of encryption and authentication.  The corosync can be built without encryption and authentication for those with no security requirements and low CPU utilization requirements.  Even without encryption or authentication, under heavy load, processor utilization can reach 25% on 1.5 GHZ CPU processors.</p><p>The current corosync executive supports 16 processors, however, support for more processors is possible by changing defines in the corosync executive.  This is untested, however.</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">SECURITY</h2>
        <div class="sectioncontent">
<p>The EVS library encrypts all messages sent over the network using the SOBER-128 stream cipher.  The EVS library uses HMAC and SHA1 to authenticate all messages. The EVS library uses SOBER-128 as a pseudo random number generator.  The EVS library feeds the PRNG using the /dev/random Linux device.</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">BUGS</h2>
        <div class="sectioncontent">
<p>This software is not yet production, so there may still be some bugs.  But it appears there are very few since nobody reports any unknown bugs at this point.</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">RELATED TO evs_overview&hellip;</h2>
        <div class="sectioncontent">
<p><a href="../man3/evs_initialize.3.html"><strong>evs_initialize</strong>(3)</a>, <a href="../man3/evs_finalize.3.html"><strong>evs_finalize</strong>(3)</a>, <a href="../man3/evs_fd_get.3.html"><strong>evs_fd_get</strong>(3)</a>, <a href="../man3/evs_dispatch.3.html"><strong>evs_dispatch</strong>(3)</a>, <a href="../man3/evs_join.3.html"><strong>evs_join</strong>(3)</a>, <a href="../man3/evs_leave.3.html"><strong>evs_leave</strong>(3)</a>, <a href="../man3/evs_mcast_joined.3.html"><strong>evs_mcast_joined</strong>(3)</a>, <a href="../man3/evs_mcast_groups.3.html"><strong>evs_mcast_groups</strong>(3)</a>, <a href="../man3/evs_membership_get.3.html"><strong>evs_membership_get</strong>(3)</a> <a href="../man3/evs_context_get.3.html"><strong>evs_context_get</strong>(3)</a> <a href="../man3/evs_context_set.3.html"><strong>evs_context_set</strong>(3)</a></p>
        </div>
      </section>
<nav>
  <ul class="pager">
   <li class="previous"><a href="everups.8.html"><span aria-hidden="true">&larr;</span> everups.8: Driver for ever ups models</a></li>
   <li class="next"><a href="exec-cd.8.html">exec-cd.8: Executes commands within a safely changed cwd <span aria-hidden="true">&rarr;</span></a></li>
  </ul>
</nav>

  </div>
  <!-- jQuery (necessary for Bootstrap's JavaScript plugins) -->
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.2/jquery.min.js"></script>
  <!-- Include all compiled plugins (below), or include individual files as needed -->
  <script src="/js/bootstrap.min.js"></script>
  <script>
    (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
      (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
      m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
    })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

    ga('create', 'UA-60781387-1', 'auto');
    ga('send', 'pageview');

  </script>
</body>
</html>
