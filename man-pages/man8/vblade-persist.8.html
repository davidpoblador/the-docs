<!DOCTYPE html>
<html lang="en">
<head>
  <link href="https://fonts.googleapis.com/css?family=Fira+Mono:400,700&effect=destruction%7Cshadow-multiple" rel="stylesheet" type="text/css">
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>vblade-persist: Manage persistent exported ata-over-ethernet devices</title>
  <link href="/css/bootstrap.min.css" rel="stylesheet">
  <link href="/css/manpage.css" rel="stylesheet">
  <link rel="apple-touch-icon" sizes="57x57" href="/icons/apple-icon-57x57.png">
  <link rel="apple-touch-icon" sizes="60x60" href="/icons/apple-icon-60x60.png">
  <link rel="apple-touch-icon" sizes="72x72" href="/icons/apple-icon-72x72.png">
  <link rel="apple-touch-icon" sizes="76x76" href="/icons/apple-icon-76x76.png">
  <link rel="apple-touch-icon" sizes="114x114" href="/icons/apple-icon-114x114.png">
  <link rel="apple-touch-icon" sizes="120x120" href="/icons/apple-icon-120x120.png">
  <link rel="apple-touch-icon" sizes="144x144" href="/icons/apple-icon-144x144.png">
  <link rel="apple-touch-icon" sizes="152x152" href="/icons/apple-icon-152x152.png">
  <link rel="apple-touch-icon" sizes="180x180" href="/icons/apple-icon-180x180.png">
  <link rel="icon" type="image/png" sizes="192x192" href="/icons/android-icon-192x192.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/icons/favicon-32x32.png">
  <link rel="icon" type="image/png" sizes="96x96" href="/icons/favicon-96x96.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/icons/favicon-16x16.png">
  <link rel="manifest" href="/icons/manifest.json">
  <meta name="msapplication-TileColor" content="#ffffff">
  <meta name="msapplication-TileImage" content="/icons/ms-icon-144x144.png">
  <meta name="theme-color" content="#ffffff">
  <meta name="description" content="Manage persistent exported ata-over-ethernet devices">
  <meta name="twitter:card" content="summary_large_image">
  <meta name="twitter:site" content="@CartaTech">
  <meta name="twitter:creator" content="@CartaTech">
  <meta name="twitter:title" content="vblade-persist (8) manual">
  <meta name="twitter:description" content="Manage persistent exported ata-over-ethernet devices">
  <meta name="twitter:image" content="https://www.carta.tech/images/vblade-persist-vblade-persist-8.png">
  <meta property="og:url" content="https://www.carta.tech/man-pages/man8/vblade-persist.8.html" />
  <meta property="og:type" content="website" />
  <meta property="og:title" content="vblade-persist (8) manual" />
  <meta property="og:description" content="Manage persistent exported ata-over-ethernet devices" />
  <meta property="fb:app_id" content="1241677679199500" />
  <meta property="og:image" content="https://www.carta.tech/images/vblade-persist-vblade-persist-8.png" />
  <meta property="og:image:width" content="600" />
  <meta property="og:image:height" content="315" />
</head>
<body>
  <div class="container final">
          <div class="page-header">
        <h1 class="font-effect-destruction">vblade-persist<small> (8)</small></h1>
        <p class="lead">Manage persistent exported ata-over-ethernet devices</p>
      </div>

    <ol class="breadcrumb" itemscope itemtype="http://schema.org/BreadcrumbList">
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/">
      <span itemprop="name">Carta.tech</span>
    </a>
    <meta itemprop="position" content="1" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/">
      <span itemprop="name">Man Pages</span>
    </a>
    <meta itemprop="position" content="2" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/man8/">
      <span itemprop="name">System administration commands</span>
    </a>
    <meta itemprop="position" content="3" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/man8/vblade-persist.8.html">
      <span itemprop="name">vblade-persist: Manage persistent exported ata-over-ethernet devices</span>
    </a>
    <meta itemprop="position" content="4" />
  </li>
</ol>
<ol class="breadcrumb" itemscope itemtype="http://schema.org/BreadcrumbList">
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/">
      <span itemprop="name">Carta.tech</span>
    </a>
    <meta itemprop="position" content="1" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/packages/">
      <span itemprop="name">Packages</span>
    </a>
    <meta itemprop="position" content="2" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/packages/vblade-persist/">
      <span itemprop="name">vblade-persist</span>
    </a>
    <meta itemprop="position" content="3" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/man8/vblade-persist.8.html">
      <span itemprop="name">vblade-persist: Manage persistent exported ata-over-ethernet devices</span>
    </a>
    <meta itemprop="position" content="4" />
  </li>
</ol>
    
      <section>
        <h2 class="font-effect-shadow-multiple">SYNOPSIS</h2>
        <div class="sectioncontent">
<p><strong>vblade-persist ls</strong> [<strong>--no-header</strong>]</p><p><strong>vblade-persist setup</strong> <em>shelf slot netif blockdev</em></p><p><strong>vblade-persist destroy</strong> <em>shelf slot</em></p><p><strong>vblade-persist</strong> { <strong>start</strong> | <strong>stop</strong> | <strong>restart</strong> | <strong>auto</strong> | <strong>noauto</strong> }  <em>shelf slot</em></p><p><strong>vblade-persist</strong> { <strong>start</strong> | <strong>stop</strong> | <strong>restart</strong> | <strong>auto</strong> | <strong>noauto</strong> } <strong>all</strong></p><p><strong>vblade-persist mac</strong> <em>shelf slot</em> { <strong>ls</strong> | <strong>clear</strong> }</p><p><strong>vblade-persist mac</strong> <em>shelf slot</em> { <strong>add</strong> | <strong>del</strong> } [  <em>addr</em> ... ]</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">DESCRIPTION</h2>
        <div class="sectioncontent">
<p>The <strong>vblade-persist</strong> script is used to show and manipulate persistently-exported ATA-over-Ethernet devices.  It has a simple subcommand syntax.</p><p>Persistent AoE device exports can be configured to come up at boot time.  For each running persistent AoE export, a symlink pointing to the backing device is created in /dev/etherd/, mirroring the devices seen by clients of the AoE device.</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">MANAGEMENT SUBCOMMANDS</h2>
        <div class="sectioncontent">
<p><strong>ls</strong> [<strong>--noheader</strong>]</p><p><strong>vblade-persist ls</strong> shows all existing persistent AoE exports.  The columns of the output are, in order: AoE Shelf, AoE Slot, Network Interface, Backing Device, AutoStart, Status.  AutoStart is either "auto" (start automatically at boot), or "noauto" (don't start automatically at boot).  Status should be either "run" (running) or "down" (not running).</p><p>The optional <strong>--no-header</strong> argument suppresses the header line.  This may be convenient for machine-parseable output.</p><p><strong>setup</strong> <em>shelf slot netif source</em></p><p><strong>vblade-persist setup</strong> creates a new persistent exported AoE block device.  You must supply all four additional arguments.  These are the same arguments supplied to <strong>vblade</strong>(8). You should specify <em>source</em> using an absolute path.</p><p>New devices set up this way are <strong>noauto</strong> (not brought up automatically at boot) and <strong>down</strong> (not exported immediately).</p><p><strong>destroy</strong> <em>shelf slot</em></p><p><strong>vblade-persist destroy</strong> halts any running exported AoE block device managed by <em>vblade-persist</em> and removes the service directory used to manage it.</p><p><strong>start</strong> <em>shelf slot</em></p><p><strong>stop</strong> <em>shelf slot</em></p><p><strong>restart</strong> <em>shelf slot</em></p><p>These commands control a specific exported AoE device.  Instead of specifying <em>shelf</em> and <em>slot</em> , you can also provide the special keyword <strong>all</strong> which will act on every exported AoE device.</p><p><strong>auto</strong> <em>shelf slot</em></p><p><strong>noauto</strong> <em>shelf slot</em></p><p>These commands control whether a specific exported AoE device should be started automatically ( <strong>auto</strong> ) or not ( <strong>noauto</strong> ) at system boot time.  Instead of specifying <em>shelf</em> and <em>slot</em> , you can also provide the special keyword <strong>all</strong> which will act on every exported AoE device.</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">MAC-ADDRESS FILTERING</h2>
        <div class="sectioncontent">
<p>You can use <strong>vblade-persist</strong> to restrict access to specific exports by MAC address, using the <strong>mac</strong> subcommand.</p><p><strong>mac</strong><em> shelf slot </em><strong>ls</strong></p><p>List all MAC addresses allowed to access the specified device, one per line.  If the list is empty, no MAC address limits are imposed on this device.</p><p><strong>mac</strong><em> shelf slot </em><strong>clear</strong></p><p>Remove all MAC address filtering from the specified device.  No MAC address limits will be imposed on this device.</p><p><strong>mac</strong> <em>shelf slot</em> <strong>add</strong> [ <em>addr</em> ... ]</p><p>Add a MAC address (or more than one) to the list of allowed addresses for the specified device.  Note that if there were no MAC addresses listed previously, this will enable MAC address filtering for the device.</p><p><strong>mac</strong> <em>shelf slot</em> <strong>del</strong> [ <em>addr</em> ... ]</p><p>Remove a MAC address (or more than one) from the list of allowed addresses for the specific device.  Note that if you remove all the MAC addresses from the list, this will disable MAC address filtering for the device.</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">EXAMPLES</h2>
        <div class="sectioncontent">
<p>Set up <strong>/dev/sda2</strong> as shelf <strong>2</strong>, slot <strong>3</strong> on the network served by interface <strong>eth0.</strong> Make sure it starts automatically at boot, and start it up now:</p><p><strong>vblade-persist setup 2 3 eth0 /dev/sda2</strong></p><p><strong>vblade-persist auto 2 3</strong></p><p><strong>vblade-persist start 2 3</strong></p><p>Limit that same export to MAC addresses <strong>aa:bb:cc:dd:ee:ff</strong> and <strong>11:22:33:44:55:66</strong>:</p><p><strong>vblade-persist mac 2 3 add aa:bb:cc:dd:ee:ff 11:22:33:44:55:66</strong></p><p>Remove all MAC address restrictions on the same export:</p><p><strong>vblade-persist mac 2 3 clear</strong></p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">BUGS</h2>
        <div class="sectioncontent">
<p>You can't currently use the <strong>vblade-persist</strong> framework to export a device (or two) with the same shelf/slot identifier on two different network interfaces.</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">DEPENDENCIES</h2>
        <div class="sectioncontent">
<p>The exports themselves are handled by <strong>vblade</strong>(8). Supervision of the exports and convenient management is enabled by <a href="../man8/runsv.8.html"><strong>runsv</strong>(8)</a>, from the runit suite.</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">RELATED TO vblade-persist&hellip;</h2>
        <div class="sectioncontent">
<p><strong>vblade</strong>(8), <a href="../man8/runsv.8.html"><strong>runsv</strong>(8)</a></p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">AUTHOR</h2>
        <div class="sectioncontent">
<p>Daniel Kahn Gillmor &lt;dkg@fifthhorseman.net&gt;</p>
        </div>
      </section>
<nav>
  <ul class="pager">
   <li class="previous"><a href="vbackup-wizard.8.html"><span aria-hidden="true">&larr;</span> vbackup-wizard.8: A wizard for basic vbackup configuration</a></li>
   <li class="next"><a href="vboxd.8.html">vboxd.8: Isdn voice box daemon <span aria-hidden="true">&rarr;</span></a></li>
  </ul>
</nav>

  </div>
  <!-- jQuery (necessary for Bootstrap's JavaScript plugins) -->
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.2/jquery.min.js"></script>
  <!-- Include all compiled plugins (below), or include individual files as needed -->
  <script src="/js/bootstrap.min.js"></script>
  <script>
    (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
      (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
      m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
    })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

    ga('create', 'UA-60781387-1', 'auto');
    ga('send', 'pageview');

  </script>
</body>
</html>
