<!DOCTYPE html>
<html lang="en">
<head>
  <link href="https://fonts.googleapis.com/css?family=Fira+Mono:400,700&effect=destruction%7Cshadow-multiple" rel="stylesheet" type="text/css">
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>ntdbbackup: Tool for backing up and for validating the integrity of samba .ntdb files</title>
  <link href="/css/bootstrap.min.css" rel="stylesheet">
  <link href="/css/manpage.css" rel="stylesheet">
  <link rel="apple-touch-icon" sizes="57x57" href="/icons/apple-icon-57x57.png">
  <link rel="apple-touch-icon" sizes="60x60" href="/icons/apple-icon-60x60.png">
  <link rel="apple-touch-icon" sizes="72x72" href="/icons/apple-icon-72x72.png">
  <link rel="apple-touch-icon" sizes="76x76" href="/icons/apple-icon-76x76.png">
  <link rel="apple-touch-icon" sizes="114x114" href="/icons/apple-icon-114x114.png">
  <link rel="apple-touch-icon" sizes="120x120" href="/icons/apple-icon-120x120.png">
  <link rel="apple-touch-icon" sizes="144x144" href="/icons/apple-icon-144x144.png">
  <link rel="apple-touch-icon" sizes="152x152" href="/icons/apple-icon-152x152.png">
  <link rel="apple-touch-icon" sizes="180x180" href="/icons/apple-icon-180x180.png">
  <link rel="icon" type="image/png" sizes="192x192" href="/icons/android-icon-192x192.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/icons/favicon-32x32.png">
  <link rel="icon" type="image/png" sizes="96x96" href="/icons/favicon-96x96.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/icons/favicon-16x16.png">
  <link rel="manifest" href="/icons/manifest.json">
  <meta name="msapplication-TileColor" content="#ffffff">
  <meta name="msapplication-TileImage" content="/icons/ms-icon-144x144.png">
  <meta name="theme-color" content="#ffffff">
  <meta name="description" content="Tool for backing up and for validating the integrity of samba .ntdb files">
  <meta name="twitter:card" content="summary_large_image">
  <meta name="twitter:site" content="@CartaTech">
  <meta name="twitter:creator" content="@CartaTech">
  <meta name="twitter:title" content="ntdbbackup (8) manual">
  <meta name="twitter:description" content="Tool for backing up and for validating the integrity of samba .ntdb files">
  <meta name="twitter:image" content="https://www.carta.tech/images/ntdb-tools-ntdbbackup-8.png">
  <meta property="og:url" content="https://www.carta.tech/man-pages/man8/ntdbbackup.8.html" />
  <meta property="og:type" content="website" />
  <meta property="og:title" content="ntdbbackup (8) manual" />
  <meta property="og:description" content="Tool for backing up and for validating the integrity of samba .ntdb files" />
  <meta property="fb:app_id" content="1241677679199500" />
  <meta property="og:image" content="https://www.carta.tech/images/ntdb-tools-ntdbbackup-8.png" />
  <meta property="og:image:width" content="600" />
  <meta property="og:image:height" content="315" />
</head>
<body>
  <div class="container final">
          <div class="page-header">
        <h1 class="font-effect-destruction">ntdbbackup<small> (8)</small></h1>
        <p class="lead">Tool for backing up and for validating the integrity of samba .ntdb files</p>
      </div>

    <ol class="breadcrumb" itemscope itemtype="http://schema.org/BreadcrumbList">
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/">
      <span itemprop="name">Carta.tech</span>
    </a>
    <meta itemprop="position" content="1" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/">
      <span itemprop="name">Man Pages</span>
    </a>
    <meta itemprop="position" content="2" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/man8/">
      <span itemprop="name">System administration commands</span>
    </a>
    <meta itemprop="position" content="3" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/man8/ntdbbackup.8.html">
      <span itemprop="name">ntdbbackup: Tool for backing up and for validating the integrity of samba .ntdb files</span>
    </a>
    <meta itemprop="position" content="4" />
  </li>
</ol>
<ol class="breadcrumb" itemscope itemtype="http://schema.org/BreadcrumbList">
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/">
      <span itemprop="name">Carta.tech</span>
    </a>
    <meta itemprop="position" content="1" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/packages/">
      <span itemprop="name">Packages</span>
    </a>
    <meta itemprop="position" content="2" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/packages/ntdb-tools/">
      <span itemprop="name">ntdb-tools</span>
    </a>
    <meta itemprop="position" content="3" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/man8/ntdbbackup.8.html">
      <span itemprop="name">ntdbbackup: Tool for backing up and for validating the integrity of samba .ntdb files</span>
    </a>
    <meta itemprop="position" content="4" />
  </li>
</ol>
    
      <section>
        <h2 class="font-effect-shadow-multiple">SYNOPSIS</h2>
        <div class="sectioncontent">
<p><strong>ntdbbackup</strong> [-s&nbsp;suffix] [-v] [-h]</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">DESCRIPTION</h2>
        <div class="sectioncontent">
<p>This tool is part of the <strong>samba</strong>(1) suite.</p><p><strong>ntdbbackup</strong> is a tool that may be used to backup samba .ntdb files. This tool may also be used to verify the integrity of the .ntdb files prior to samba startup or during normal operation. If it finds file damage and it finds a prior backup the backup file will be restored.</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">OPTIONS</h2>
        <div class="sectioncontent">
<p>-h</p><p>Get help information.</p><p>-s suffix</p><p>The <strong>-s</strong> option allows the administrator to specify a file backup extension. This way it is possible to keep a history of ntdb backup files by using a new suffix for each backup.</p><p>-v</p><p>The <strong>-v</strong> will check the database for damages (corrupt data) which if detected causes the backup to be restored.</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">COMMANDS</h2>
        <div class="sectioncontent">
<p><em>GENERAL INFORMATION</em></p><p>The <strong>ntdbbackup</strong> utility can safely be run at any time. It was designed so that it can be used at any time to validate the integrity of ntdb files, even during Samba operation. Typical usage for the command will be:</p><p>ntdbbackup [-s suffix] *.ntdb</p><p>Before restarting samba the following command may be run to validate .ntdb files:</p><p>ntdbbackup -v [-s suffix] *.ntdb</p><p>Note that Samba 4 can use .tdb files instead, so you should use <strong>tdbbackup</strong> on those files.</p><p>Samba .tdb and .ntdb files are stored in various locations, be sure to run backup all .(n)tdb files on the system. Important files includes:</p><p><strong>secrets.(n)tdb</strong> - usual location is in the /usr/local/samba/private directory, or on some systems in /etc/samba.</p><p><strong>passdb.(n)tdb</strong> - usual location is in the /usr/local/samba/private directory, or on some systems in /etc/samba.</p><p><strong>*.tdb</strong> and <strong>*.ntdb</strong> located in the /usr/local/samba/var directory or on some systems in the /var/cache or /var/lib/samba directories.</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">VERSION</h2>
        <div class="sectioncontent">
<p>This man page is correct for version 4 of the Samba suite.</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">RELATED TO ntdbbackup&hellip;</h2>
        <div class="sectioncontent">
<p><strong>tdbbackup</strong>(8), <a href="../man8/ntdbrestore.8.html"><strong>ntdbrestore</strong>(8)</a></p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">AUTHOR</h2>
        <div class="sectioncontent">
<p>The original Samba software and related utilities were created by Andrew Tridgell. Samba is now developed by the Samba Team as an Open Source project similar to the way the Linux kernel is developed.</p><p>The ntdbbackup man page was written by Rusty Russell, based on the tdbbackup man page by John H Terpstra.</p>
        </div>
      </section>
<nav>
  <ul class="pager">
   <li class="previous"><a href="nstat.8.html"><span aria-hidden="true">&larr;</span> nstat.8: Network statistics tools.</a></li>
   <li class="next"><a href="ntdbdump.8.html">ntdbdump.8: Tool for printing the contents of an ntdb file <span aria-hidden="true">&rarr;</span></a></li>
  </ul>
</nav>

  </div>
  <!-- jQuery (necessary for Bootstrap's JavaScript plugins) -->
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.2/jquery.min.js"></script>
  <!-- Include all compiled plugins (below), or include individual files as needed -->
  <script src="/js/bootstrap.min.js"></script>
  <script>
    (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
      (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
      m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
    })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

    ga('create', 'UA-60781387-1', 'auto');
    ga('send', 'pageview');

  </script>
</body>
</html>
