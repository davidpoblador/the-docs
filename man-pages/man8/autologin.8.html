<!DOCTYPE html>
<html lang="en">
<head>
  <link href="https://fonts.googleapis.com/css?family=Fira+Mono:400,700&effect=destruction%7Cshadow-multiple" rel="stylesheet" type="text/css">
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>autologin: Convert an apache identity to a dacs identity</title>
  <link href="/css/bootstrap.min.css" rel="stylesheet">
  <link href="/css/manpage.css" rel="stylesheet">
  <link rel="apple-touch-icon" sizes="57x57" href="/icons/apple-icon-57x57.png">
  <link rel="apple-touch-icon" sizes="60x60" href="/icons/apple-icon-60x60.png">
  <link rel="apple-touch-icon" sizes="72x72" href="/icons/apple-icon-72x72.png">
  <link rel="apple-touch-icon" sizes="76x76" href="/icons/apple-icon-76x76.png">
  <link rel="apple-touch-icon" sizes="114x114" href="/icons/apple-icon-114x114.png">
  <link rel="apple-touch-icon" sizes="120x120" href="/icons/apple-icon-120x120.png">
  <link rel="apple-touch-icon" sizes="144x144" href="/icons/apple-icon-144x144.png">
  <link rel="apple-touch-icon" sizes="152x152" href="/icons/apple-icon-152x152.png">
  <link rel="apple-touch-icon" sizes="180x180" href="/icons/apple-icon-180x180.png">
  <link rel="icon" type="image/png" sizes="192x192" href="/icons/android-icon-192x192.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/icons/favicon-32x32.png">
  <link rel="icon" type="image/png" sizes="96x96" href="/icons/favicon-96x96.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/icons/favicon-16x16.png">
  <link rel="manifest" href="/icons/manifest.json">
  <meta name="msapplication-TileColor" content="#ffffff">
  <meta name="msapplication-TileImage" content="/icons/ms-icon-144x144.png">
  <meta name="theme-color" content="#ffffff">
  <meta name="description" content="Convert an apache identity to a dacs identity">
  <meta name="twitter:card" content="summary_large_image">
  <meta name="twitter:site" content="@CartaTech">
  <meta name="twitter:creator" content="@CartaTech">
  <meta name="twitter:title" content="autologin (8) manual">
  <meta name="twitter:description" content="Convert an apache identity to a dacs identity">
  <meta name="twitter:image" content="https://www.carta.tech/images/dacs-autologin-8.png">
  <meta property="og:url" content="https://www.carta.tech/man-pages/man8/autologin.8.html" />
  <meta property="og:type" content="website" />
  <meta property="og:title" content="autologin (8) manual" />
  <meta property="og:description" content="Convert an apache identity to a dacs identity" />
  <meta property="fb:app_id" content="1241677679199500" />
  <meta property="og:image" content="https://www.carta.tech/images/dacs-autologin-8.png" />
  <meta property="og:image:width" content="600" />
  <meta property="og:image:height" content="315" />
</head>
<body>
  <div class="container final">
          <div class="page-header">
        <h1 class="font-effect-destruction">autologin<small> (8)</small></h1>
        <p class="lead">Convert an apache identity to a dacs identity</p>
      </div>

    <ol class="breadcrumb" itemscope itemtype="http://schema.org/BreadcrumbList">
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/">
      <span itemprop="name">Carta.tech</span>
    </a>
    <meta itemprop="position" content="1" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/">
      <span itemprop="name">Man Pages</span>
    </a>
    <meta itemprop="position" content="2" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/man8/">
      <span itemprop="name">System administration commands</span>
    </a>
    <meta itemprop="position" content="3" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/man8/autologin.8.html">
      <span itemprop="name">autologin: Convert an apache identity to a dacs identity</span>
    </a>
    <meta itemprop="position" content="4" />
  </li>
</ol>
<ol class="breadcrumb" itemscope itemtype="http://schema.org/BreadcrumbList">
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/">
      <span itemprop="name">Carta.tech</span>
    </a>
    <meta itemprop="position" content="1" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/packages/">
      <span itemprop="name">Packages</span>
    </a>
    <meta itemprop="position" content="2" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/packages/dacs/">
      <span itemprop="name">dacs</span>
    </a>
    <meta itemprop="position" content="3" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/man8/autologin.8.html">
      <span itemprop="name">autologin: Convert an apache identity to a dacs identity</span>
    </a>
    <meta itemprop="position" content="4" />
  </li>
</ol>
    
      <section>
        <h2 class="font-effect-shadow-multiple">SYNOPSIS</h2>
        <div class="sectioncontent">
<p><strong>autologin</strong> [<em>\m[blue]</em><strong>dacsoptions</strong>\m[]\s-2\u[1]\d\s+2]</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">DESCRIPTION</h2>
        <div class="sectioncontent">
<p>This program is part of the <strong>DACS</strong> suite.</p><p>The <strong>autologin</strong> CGI program, in conjunction with appropriate <strong>Apache</strong> and <strong>DACS</strong> configuration, is used to automatically convert an identity already established by <strong>Apache</strong> into a <strong>DACS</strong> identity. After standard HTTP Basic or Digest Authentication (\m[blue]<strong>RFC 2617</strong>\m[]\s-2\u[2]\d\s+2) has been performed successfully, <strong>autologin</strong> causes <strong>DACS</strong> credentials to be generated and returned. This capability lets <strong>DACS</strong> leverage any of <strong>Apache&apos;s</strong> existing authentication methods through simple configuration.</p><p>A user that has completed Basic or Digest Authentication (following a 401 Authorization Required response from the web server) accesses <strong>autologin</strong>. <strong>autologin</strong> generates credentials by constructing a request to \m[blue]<a href="../man8/dacs_authenticate.8.html"><strong>dacs_authenticate</strong>(8)</a></strong>\m[]\s-2\u[3]\d\s+2. The value of the <strong>REMOTE_USER</strong> environment variable, as set by <strong>Apache</strong>, is used by <strong>dacs_authenticate</strong> to derive the <strong>DACS</strong> username.</p><p><strong>Note</strong></p><p><strong>autologin</strong> is not installed by default when <strong>DACS</strong> is built, in part because it can be a bit tricky to configure correctly and securely. The more recent \m[blue]<strong>RFC 2617</strong>\m[]\s-2\u[2]\d\s+2 capability built-in to <strong>DACS</strong> is recommended instead. Please refer to the section on \m[blue]<strong>HTTP Authentication</strong>\m[]\s-2\u[4]\d\s+2.</p><p><strong>Security</strong></p><p>Because this program is run during authentication processing, its file permissions must be set to prevent replacement or alteration by users other than a <strong>DACS</strong> administrator.</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">OPTIONS</h2>
        <div class="sectioncontent">
<p>Only the standard \m[blue]<strong></strong><em>dacsoptions</em>\m[]\s-2\u[1]\d\s+2 command line arguments are recognized.</p><h3>Web Service Arguments</h3>
<p><strong>autologin</strong> understands the following CGI arguments. All arguments are required unless otherwise indicated.</p><p><em>DACS_CONF</em></p><p>The path to the <strong>DACS</strong> configuration file that should be used to locate jurisdiction configuration information needed by <strong>dacs_authenticate</strong>.</p><p><em>DACS_ERROR_URL</em></p><p>When <strong>autologin</strong> is invoked as a result of <strong>DACS</strong> event handling, <em>DACS_ERROR_URL</em> is automatically passed by \m[blue]<a href="../man8/dacs_acs.8.html"><strong>dacs_acs</strong>(8)</a></strong>\m[]\s-2\u[5]\d\s+2 and represents the original URL to which access was denied. In typical use, <strong>autologin</strong> is configured as the handler for a <strong>dacs_acs</strong><strong>902</strong> error code (NO_AUTH, "Authentication by DACS is required"). <strong>autologin</strong> then invokes <strong>dacs_authenticate</strong>. If <strong>DACS</strong> authentication is successful, <strong>dacs_authenticate</strong> ordinarily issues a browser redirect to the value of <em>DACS_ERROR_URL</em> and a cookie bearing the credentials are set in the browser (but see the <em>NOREDIRECT</em> argument).</p><p><em>NOREDIRECT</em></p><p>If this optional argument is present (its value is immaterial), <strong>autologin</strong> instructs <strong>dacs_authenticate</strong> to <em>not</em> issue a browser redirect to the value of <em>DACS_ERROR_URL</em>.</p><p><em>DACS_JURISDICTION</em></p><p>When <strong>autologin</strong> is invoked as a result of <strong>DACS</strong> event handling, <em>DACS_JURISDICTION</em> is set by <strong>DACS</strong> to the name of the jurisdiction that received the request. By default, <strong>autologin</strong> generates credentials for the jurisdiction at which <strong>dacs_authenticate</strong> is invoked (specifically, <em>DACS_JURISDICTION</em>). This can be overridden by the <em>DACS_SET_JURISDICTION</em> parameter.</p><p><em>DACS_SET_JURISDICTION</em></p><p>This optional argument explicitly names the jurisdiction in which <strong>autologin</strong> should generate credentials. <em>DACS_SET_JURISDICTION</em> overrides the value, if any, of <em>DACS_JURISDICTION</em> and <em>must be the same as the jurisdiction in which </em><em></em><strong>autologin</strong><em> is deployed</em>.</p><p><em>JURISDICTION_URI</em></p><p>This is the URI identifying the jurisdiction in the <strong>DACS</strong> configuration file corresponding to the value specified in a <em>DACS_JURISDICTION</em> or <em>DACS_SET_JURISDICTION</em> argument. This argument is optional since the jurisdiction name can be used for this purpose.</p><p><em>just_dump_stdin</em></p><p>This optional argument is useful for debugging. If the value of <strong>QUERY_STRING</strong> is exactly jump_dump_stdin, then the program will simply copy its standard input to the standard output as text/plain.</p>

        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">EXAMPLE</h2>
        <div class="sectioncontent">
<p>A typical use of <strong>autologin</strong> is to support coexistence on the same Web site of <strong>DACS</strong>-wrapped content, services. legacy applications, or content deployed under HTTP Basic or Digest authentication. The following example illustrates configuration of <strong>Apache</strong> and <strong>DACS</strong> for the deployment under HTTP Basic authentication of a Web log application, <strong>Blogo</strong>. <strong>Blogo</strong> will be deployed within a <strong>DACS</strong> jurisdiction METALOGIC. The URI space of interest will be example.com/metalogic/*.</p><p>In the <strong>Apache</strong> configuration file httpd.conf, a Location is defined for the <strong>Blogo</strong> application under Basic authentication:</p>
<pre>
&lt;Location /metalogic/blogo&gt;
  AuthType Basic
  AuthName "FedDev"
  AuthUserFile /local/etc/auth-file
  Require valid-user
# Note: For Apache 2.4, instead use:
# Require dacs-authz
&lt;/Location&gt;
</pre>
<p>A Location under Basic authentication also is defined where the <strong>autologin</strong> utility is deployed:</p>
<pre>
&lt;Location /metalogic/dacs-native&gt;
  AuthType Basic
  AuthName "FedDev"
  AuthUserFile /local/etc/auth-file
  Require valid-user
# Note: For Apache 2.4, instead use:
# Require dacs-authz
&lt;/Location&gt;
</pre>
<p>At the same time, other content in METALOGIC is protected by <strong>DACS</strong>:</p>
<pre>
&lt;Location /metalogic/dev&gt;
  Allow from all
  AuthType DACS
  AuthDACS dacs-acs
  Require valid-user
# Note: For Apache 2.4, instead use:
# Require dacs-authz
&lt;/Location&gt;
</pre>
<p><strong>Note</strong></p><p>Basic authentication cannot be specified in a subdirectory of a directory or location that has been configured for <strong>DACS</strong> access control. As above, <strong>DACS</strong> and Basic authentication must be configured in separate locations.</p><p>In the <strong>DACS</strong> configuration file, dacs.conf, jurisdiction METALOGIC is configured as follows:</p>
<pre>
&lt;Jurisdiction uri="example.com/metalogic"&gt;

JURISDICTION_NAME "METALOGIC"

ACS_ERROR_HANDLER "902 https://example.com/metalogic/dacs-native/autologin&#92;
?DACS_CONF=${Conf::DACS_CONF}&amp;JURISDICTION_URI=example.com/metalogic"

&lt;!-- Authenticate using Apache Basic/Digest Auth. --&gt;
&lt;Auth id="native"&gt;
URL "https://example.com/metalogic/dacs/local_native_authenticate"
STYLE "native"
CONTROL "sufficient"
&lt;/Auth&gt;

&lt;/Jurisdiction&gt;
</pre>
<p><strong>Note</strong></p><p>The native style of authentication <em>must</em> be configured when <strong>autologin</strong> is being used as described. See \m[blue]<a href="../man8/dacs_authenticate.8.html"><strong>dacs_authenticate</strong>(8)</a></strong>\m[]\s-2\u[6]\d\s+2.</p><p>The preceding configuration results in the following behaviour. A user accessing <strong>Blogo</strong> directly (https://example.com/metalogic/blogo) is challenged to enter a valid username and password (with respect to the Apache accounts in /local/etc/auth-file). If the user subsequently accesses <strong>DACS</strong> content requiring <strong>DACS</strong> authentication but no <strong>DACS</strong> credentials are present:</p><p>The <strong>902</strong> event handler is invoked, resulting in a browser redirect to <strong>autologin</strong>.</p><p>The <strong>REMOTE_USER</strong> environment variable is present in the environment as a result of successful Basic authentication.</p><p><strong>autologin</strong> runs <strong>dacs_authenticate</strong> (as a command, not as a web service).</p><p><strong>dacs_authenticate</strong> then invokes <strong>local_native_authenticate</strong>, which uses the value of <strong>REMOTE_USER</strong> as the <em>USERNAME</em> argument.</p><p>If authentication succeeds, <strong>DACS</strong> credentials for <strong>REMOTE_USER</strong> in jurisdiction METALOGIC are generated. These credentials are returned to the browser within a cookie and the browser is redirected to the value of <em>DACS_ERROR_URL</em> (recall that <em>DACS_ERROR_URL</em> was passed to <strong>autologin</strong> by <strong>dacs_acs</strong> when the <strong>902</strong> handler was invoked and is forwarded to <strong>dacs_authenticate</strong>).</p><p>If the user accesses <strong>DACS</strong> content without first visiting the <strong>Blogo</strong> application, the <strong>902</strong> event handler fires, resulting in a browser redirect to <strong>autologin</strong>. Since <strong>autologin</strong> is itself behind Basic authentication, the user will be prompted for a username and password. Once Basic authentication succeeds, <strong>autologin</strong> is invoked with <strong>REMOTE_USER</strong> set (and therefore so is <strong>dacs_authenticate</strong>) and the process described above is repeated.</p><p><strong>autologin</strong> may also be used as the target of an explicit authentication link. For example:</p>
<pre>
&lt;a href="https://example.com/metalogic/dacs-native/autologin?&#92;
DACS_CONF=/local/dacs/federations/example.com/dacs.conf&&#92;
DACS_SET_JURISDICTION=METALOGIC&&#92;
JURISDICTION_URI=example.com/metalogic&&#92;
DACS_ERROR_URL=https://example.com"&gt;Login&lt;/a&gt;
</pre>
<p>Following the link above results first in a Basic authentication challenge and then sets <strong>DACS</strong> credentials in jurisdiction METALOGIC.</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">NOTES</h2>
        <div class="sectioncontent">
<p><strong>autologin</strong> cannot generate credentials in a jurisdiction other than the one in which <strong>autologin</strong> is deployed.</p><p>The behaviour of browsers with respect to the HTTP 401 Authorization status code may have undesired consequences. For example, browsers continually send username and password in any matching request. If a user does not exit the browser, this can result in <strong>DACS</strong> credentials automatically being regenerated long after their configured lifetime has expired. \m[blue]<strong>RFC 2617</strong>\m[]\s-2\u[2]\d\s+2 provides no way for the server to "signout" a user, and neither do many browsers (\m[blue]<strong>Firefox</strong>\m[]\s-2\u[7]\d\s+2 is an exception), other than by ending the browser session. This makes it inconvenient for a user to reauthenticate with respect to <strong>DACS</strong> using this technique.</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">DIAGNOSTICS</h2>
        <div class="sectioncontent">
<p>The program exits 0 if everything was fine, 1 if an error occurred.</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">RELATED TO autologin&hellip;</h2>
        <div class="sectioncontent">
<p>\m[blue]<a href="../man8/dacs_authenticate.8.html"><strong>dacs_authenticate</strong>(8)</a></strong>\m[]\s-2\u[3]\d\s+2 (in particular, the native authentication style), \m[blue]<a href="../man8/dacs_autologin_ssl.8.html"><strong>dacs_autologin_ssl</strong>(8)</a></strong>\m[]\s-2\u[8]\d\s+2, \m[blue]<a href="../man8/dacs_acs.8.html"><strong>dacs_acs</strong>(8)</a></strong>\m[]\s-2\u[5]\d\s+2, \m[blue]<strong>dacs.conf</strong>(5)</strong>\m[]\s-2\u[9]\d\s+2</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">AUTHOR</h2>
        <div class="sectioncontent">
<p>\m[blue]<strong>Metalogic Software Corp.</strong>\m[]\s-2\u[10]\d\s+2 and Distributed Systems Software (\m[blue]<strong>www.dss.ca</strong>\m[]\s-2\u[11]\d\s+2)</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">COPYING</h2>
        <div class="sectioncontent">
<p>Copyright2003-2013 Distributed Systems Software. See the \m[blue]<strong>LICENSE</strong>\m[]\s-2\u[12]\d\s+2 file that accompanies the distribution for licensing information.</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">NOTES</h2>
        <div class="sectioncontent">

<dl class='dl-vertical'>
  <dt>
     1.
  </dt>
  <dd>
    <p>dacsoptions</p><p>http://dacs.dss.ca/man/dacs.1.html#dacsoptions</p>
  </dd>
  <dt>
     2.
  </dt>
  <dd>
    <p>RFC 2617</p><p>http://www.rfc-editor.org/rfc/rfc2617.txt</p>
  </dd>
  <dt>
     3.
  </dt>
  <dd>
    <p><a href="../man8/dacs_authenticate.8.html"><strong>dacs_authenticate</strong>(8)</a></p><p>http://dacs.dss.ca/man/dacs_authenticate.8.html</p>
  </dd>
  <dt>
     4.
  </dt>
  <dd>
    <p>HTTP Authentication</p><p>http://dacs.dss.ca/man/dacs_acs.8.html#http_authentication</p>
  </dd>
  <dt>
     5.
  </dt>
  <dd>
    <p><a href="../man8/dacs_acs.8.html"><strong>dacs_acs</strong>(8)</a></p><p>http://dacs.dss.ca/man/dacs_acs.8.html</p>
  </dd>
  <dt>
     6.
  </dt>
  <dd>
    <p><a href="../man8/dacs_authenticate.8.html"><strong>dacs_authenticate</strong>(8)</a></p><p>http://dacs.dss.ca/man/dacs_authenticate.8.html#local_native_authenticate</p>
  </dd>
  <dt>
     7.
  </dt>
  <dd>
    <p>Firefox</p><p>http://www.mozilla.com/firefox</p>
  </dd>
  <dt>
     8.
  </dt>
  <dd>
    <p><a href="../man8/dacs_autologin_ssl.8.html"><strong>dacs_autologin_ssl</strong>(8)</a></p><p>http://dacs.dss.ca/man/dacs_autologin_ssl.8.html</p>
  </dd>
  <dt>
     9.
  </dt>
  <dd>
    <p><strong>dacs.conf</strong>(5)</p><p>http://dacs.dss.ca/man/dacs.conf.5.html</p>
  </dd>
  <dt>
    10.
  </dt>
  <dd>
    <p>Metalogic Software Corp.</p><p>http://fedroot.com/admin/about-metalogic.shtml</p>
  </dd>
  <dt>
    11.
  </dt>
  <dd>
    <p>www.dss.ca</p><p>http://www.dss.ca</p>
  </dd>
  <dt>
    12.
  </dt>
  <dd>
    <p>LICENSE</p><p>http://dacs.dss.ca/man/../misc/LICENSE</p>
  </dd>

</dl>

        </div>
      </section>
<nav>
  <ul class="pager">
   <li class="previous"><a href="autolog.8.html"><span aria-hidden="true">&larr;</span> autolog.8: Log out idle users</a></li>
   <li class="next"><a href="automount.8.html">automount.8: Manage autofs mount points <span aria-hidden="true">&rarr;</span></a></li>
  </ul>
</nav>

  </div>
  <!-- jQuery (necessary for Bootstrap's JavaScript plugins) -->
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.2/jquery.min.js"></script>
  <!-- Include all compiled plugins (below), or include individual files as needed -->
  <script src="/js/bootstrap.min.js"></script>
  <script>
    (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
      (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
      m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
    })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

    ga('create', 'UA-60781387-1', 'auto');
    ga('send', 'pageview');

  </script>
</body>
</html>
