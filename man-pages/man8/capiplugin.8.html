<!DOCTYPE html>
<html lang="en">
<head>
  <link href="https://fonts.googleapis.com/css?family=Fira+Mono:400,700&effect=destruction%7Cshadow-multiple" rel="stylesheet" type="text/css">
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>capiplugin: Plugin for pppd (point-to-point protocol daemon)</title>
  <link href="/css/bootstrap.min.css" rel="stylesheet">
  <link href="/css/manpage.css" rel="stylesheet">
  <link rel="apple-touch-icon" sizes="57x57" href="/icons/apple-icon-57x57.png">
  <link rel="apple-touch-icon" sizes="60x60" href="/icons/apple-icon-60x60.png">
  <link rel="apple-touch-icon" sizes="72x72" href="/icons/apple-icon-72x72.png">
  <link rel="apple-touch-icon" sizes="76x76" href="/icons/apple-icon-76x76.png">
  <link rel="apple-touch-icon" sizes="114x114" href="/icons/apple-icon-114x114.png">
  <link rel="apple-touch-icon" sizes="120x120" href="/icons/apple-icon-120x120.png">
  <link rel="apple-touch-icon" sizes="144x144" href="/icons/apple-icon-144x144.png">
  <link rel="apple-touch-icon" sizes="152x152" href="/icons/apple-icon-152x152.png">
  <link rel="apple-touch-icon" sizes="180x180" href="/icons/apple-icon-180x180.png">
  <link rel="icon" type="image/png" sizes="192x192" href="/icons/android-icon-192x192.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/icons/favicon-32x32.png">
  <link rel="icon" type="image/png" sizes="96x96" href="/icons/favicon-96x96.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/icons/favicon-16x16.png">
  <link rel="manifest" href="/icons/manifest.json">
  <meta name="msapplication-TileColor" content="#ffffff">
  <meta name="msapplication-TileImage" content="/icons/ms-icon-144x144.png">
  <meta name="theme-color" content="#ffffff">
  <meta name="description" content="Plugin for pppd (point-to-point protocol daemon)">
  <meta name="twitter:card" content="summary_large_image">
  <meta name="twitter:site" content="@CartaTech">
  <meta name="twitter:creator" content="@CartaTech">
  <meta name="twitter:title" content="capiplugin (8) manual">
  <meta name="twitter:description" content="Plugin for pppd (point-to-point protocol daemon)">
  <meta name="twitter:image" content="https://www.carta.tech/images/pppdcapiplugin-capiplugin-8.png">
  <meta property="og:url" content="https://www.carta.tech/man-pages/man8/capiplugin.8.html" />
  <meta property="og:type" content="website" />
  <meta property="og:title" content="capiplugin (8) manual" />
  <meta property="og:description" content="Plugin for pppd (point-to-point protocol daemon)" />
  <meta property="fb:app_id" content="1241677679199500" />
  <meta property="og:image" content="https://www.carta.tech/images/pppdcapiplugin-capiplugin-8.png" />
  <meta property="og:image:width" content="600" />
  <meta property="og:image:height" content="315" />
</head>
<body>
  <div class="container final">
          <div class="page-header">
        <h1 class="font-effect-destruction">capiplugin<small> (8)</small></h1>
        <p class="lead">Plugin for pppd (point-to-point protocol daemon)</p>
      </div>

    <ol class="breadcrumb" itemscope itemtype="http://schema.org/BreadcrumbList">
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/">
      <span itemprop="name">Carta.tech</span>
    </a>
    <meta itemprop="position" content="1" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/">
      <span itemprop="name">Man Pages</span>
    </a>
    <meta itemprop="position" content="2" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/man8/">
      <span itemprop="name">System administration commands</span>
    </a>
    <meta itemprop="position" content="3" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/man8/capiplugin.8.html">
      <span itemprop="name">capiplugin: Plugin for pppd (point-to-point protocol daemon)</span>
    </a>
    <meta itemprop="position" content="4" />
  </li>
</ol>
<ol class="breadcrumb" itemscope itemtype="http://schema.org/BreadcrumbList">
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/">
      <span itemprop="name">Carta.tech</span>
    </a>
    <meta itemprop="position" content="1" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/packages/">
      <span itemprop="name">Packages</span>
    </a>
    <meta itemprop="position" content="2" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/packages/pppdcapiplugin/">
      <span itemprop="name">pppdcapiplugin</span>
    </a>
    <meta itemprop="position" content="3" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/man8/capiplugin.8.html">
      <span itemprop="name">capiplugin: Plugin for pppd (point-to-point protocol daemon)</span>
    </a>
    <meta itemprop="position" content="4" />
  </li>
</ol>
    
      <section>
        <h2 class="font-effect-shadow-multiple">SYNOPSIS</h2>
        <div class="sectioncontent">
<p><strong>pppd</strong> [<em>options</em>] <strong>plugin</strong> <strong>capiplugin.so</strong> [<em>options for capiplugin</em>]</p><p>before pppd 2.4.1:</p><p><strong>pppd</strong> [<em>options</em>] <strong>plugin</strong> <strong>/usr/lib/pppd/</strong><em>&lt;pppd-version&gt;</em>/capiplugin.so [<em>options for capiplugin</em>]</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">DESCRIPTION</h2>
        <div class="sectioncontent">
<p>The capiplugin provides a method to use PPP over ISDN with ISDN controllers that provide a CAPI2.0 interface. The plugin is responsible for the call setup with CAPI2.0. You can dial out, wait for incoming calls and set up communication over leased lines. It implements a feature to reject an incoming call and callback. This feature can also be used when dialing out. In this case, the party called has to reject the call and call back soon. When using dial-on-demand it is possible let both parties setup the connection, that means while the pppd is in dial-on-demand mode not only an outgoing paket but also an incoming call can trigger the connection setup. This can also combined with callback to assign the cost to one side only (COSO).</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">PPPD VERSIONS</h2>
        <div class="sectioncontent">
<p>The plugin interface of the pppd is binary incompartible between different version of the pppd. So you need a different capiplugin for every version of the pppd. The different plugins will be in the directory /usr/lib/ppp/<em>&lt;pppd-version&gt;</em>. Since 2.4.1 pppd checks if the version of the plugin matches and also search the plugins in these directories. With pppd versions before 2.4.1 you need to specify the absolute pathname of the plugin.</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">HOW IT WORKS</h2>
        <div class="sectioncontent">
<p>The capiplugin registers a new_phase_notifier and its own options to the pppd when loaded. When the pppd goes into phase SERIALCONN, the capiplugin set up a connection and sets the global variable devnam. The capiplugin will register a timer function that is called every second to handle the CAPI messages while pppd is running. To notify pppd when CAPI messages arrive, the CAPI file desciptor is added to the list of file descriptors which the pppd monitors for input. Once the connection is set up the pppd will start PPP negotiation on device devnam. When the pppd enters the DEAD phase, the connection will be dropped (if it is still active) When operating in dial-on-demand mode with wakeup on incoming calls, in phase DORMANT the plugin will setup CAPI2.0 to accept incoming calls. To wakeup pppd when an incoming call arrives, the plugin will generate an UDP paket to the discard port (9) of the gateway, so don't filter this paket or wakeup by incoming a call will not work.</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">MODES OF OPERATION</h2>
        <div class="sectioncontent">

<dl class='dl-vertical'>
  <dt>
    <p><strong>normal dial out</strong></p>
  </dt>
  <dd>
    <p>Simply make a connection, for example to your Internet provider.</p><p>Required options: <em>number</em>.</p><p>Recommended options: <em>msn</em>.</p><p>Other possible options: <em>controller</em>, <em>dialmax</em>, <em>dialtimeout</em>, <em>protocol</em> and <em>redialdelay</em>.</p>
  </dd>
  <dt>
    <p><strong>dial out with callback</strong></p>
  </dt>
  <dd>
    <p>Call a given number, the called party rejects the call and then calls back.</p><p>Required options: <em>number</em> and <em>coso remote</em>.</p><p>Recommended options: <em>cli</em> and <em>msn</em> or <em>inmsn</em>.</p><p>Other possible options: <em>cbwait</em>, <em>controller</em>, <em>connectdelay</em>, <em>dialtimeout</em>, <em>protocol</em></p>
  </dd>
  <dt>
    <p><strong>dial out on demand</strong></p>
  </dt>
  <dd>
    <p>Initiate the connection only on demand, i.e. when data traffic is present and drop the connection after a fix amount of idle time.</p><p>Required options: <em>number</em>.</p><p>Required pppd options: <em>demand</em>, <em>connect</em>, <em>idle</em>.</p><p>Recommended options: <em>msn</em>.</p><p>Other possible options: <em>controller</em>, <em>dialmax</em>, <em>dialtimeout</em>, <em>protocol</em> and <em>redialdelay</em>.</p>
  </dd>
  <dt>
    <p><strong>dial out on demand on an incoming phone call</strong></p>
  </dt>
  <dd>
    <p>Initiate the connection only on demand, i.e. when data traffic is present or an incoming phone call is detected and drop the connection after a fix amount of idle time. This is useful if you are not at home and you want your computer to make a connection to the internet.</p><p>Required options: <em>number</em> and <em>cli</em>.</p><p>Required options: <em>number</em>, <em>voicecallwakeup</em> and <em>inmsn</em> and/or <em>cli</em>.</p><p>Required pppd options: <em>demand</em>, <em>connect</em>, <em>idle</em>.</p><p>Recommended options: <em>msn</em>. Other possible options: <em>controller</em>, <em>dialmax</em>, <em>dialtimeout</em>, <em>protocol</em>, <em>redialdelay</em> and <em>inmsn</em>.</p>
  </dd>
  <dt>
    <p><strong>wait for dial in</strong></p>
  </dt>
  <dd>
    <p>Wait for calls and accept incoming calls.</p><p>Recommended options: <em>cli</em> and <em>msn</em> or <em>inmsn</em>.</p><p>Possible options: <em>connectdelay</em>, <em>controller</em>, <em>dialtimeout</em>, <em>protocol</em></p>
  </dd>
  <dt>
    <p><strong>wait for dial in and call back.</strong></p>
  </dt>
  <dd>
    <p>Wait for calls, reject the call and then call back.</p><p>Required options: <em>cbnumber</em>.</p><p>Recommended options: <em>cli</em> and <em>msn</em> or <em>inmsn</em>.</p><p>Other possible options: <em>cbdelay</em>, <em>connectdelay</em>, <em>controller</em>, <em>dialtimeout</em>, <em>protocol</em></p>
  </dd>
  <dt>
    <p><strong>dial on demand and also wait for dial in</strong></p>
  </dt>
  <dd>
    <p>Initiate the connection only on demand, i.e. when data traffic is present or when the other side dial in and drop the connection after a fix amount of idle time.</p><p>Required options: <em>number</em> and <em>inmsn</em> and/or <em>cli</em>.</p><p>Recommended options: <em>cli</em> and <em>msn</em> or <em>inmsn</em>.</p><p>Optional options: <em>coso caller</em>.</p><p>Other possible options: <em>cbdelay</em>, <em>connectdelay</em>, <em>controller</em>, <em>dialtimeout</em>, <em>protocol</em></p>
  </dd>
  <dt>
    <p><strong>dial on demand and also wait for dial in with COSO.</strong></p>
  </dt>
  <dd>
    <p>Initiate the connection only on demand, i.e. when data traffic is present or when the other side dial in and drop the connection after a fix amount of idle time. If option <em>coso local</em> is set, pppd will reject an incoming call from the remote party and will callback. With the option <em>coso remote</em> set, the remote party should reject the incoming call and call back.</p><p>Required options: <em>number</em>, <em>inmsn</em> and/or <em>cli</em>, <em>coso local</em> or <em>coso remote</em>.</p><p>Recommended options: <em>cli</em> and <em>msn</em> or <em>inmsn</em>.</p><p>Other possible options: <em>cbdelay</em>, <em>connectdelay</em>, <em>controller</em>, <em>dialtimeout</em>, <em>protocol</em></p>
  </dd>
  <dt>
    <p><strong>leased line</strong></p>
  </dt>
  <dd>
    <p>set up a leased line connection, with or without CAPI channel bundling.</p><p>Required options: <em>channels</em>. Other possible options:</p><p><em>connectdelay</em>, <em>controller</em>, <em>dialtimeout</em> and <em>protocol</em></p>
  </dd>

</dl>

        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">OPTIONS</h2>
        <div class="sectioncontent">

<dl class='dl-vertical'>
  <dt>
    <p><strong>avmadsl</strong></p>
  </dt>
  <dd>
    <p>make an DSL connection with the Fritz!Card DSL controller. The parameters for the DSL connection will be loaded from file /etc/drdsl/adsl.conf. This file can be edited or will be created by the program drdsl.</p>
  </dd>
  <dt>
    <p><strong>cbdelay </strong><em>&lt;seconds&gt;</em></p>
  </dt>
  <dd>
    <p>Number of seconds to wait before callback, when acting as dial-in server with callback. Default value is 2 seconds.</p>
  </dd>
  <dt>
    <p><strong>cbnumber </strong><em>&lt;phone numbers&gt;</em></p>
  </dt>
  <dd>
    <p>List of phone numbers for callback, separated by commas, when acting as dial-in server with callback.</p>
  </dd>
  <dt>
    <p><strong>cbwait </strong><em>&lt;seconds&gt;</em></p>
  </dt>
  <dd>
    <p>Time to wait for callback before giving up. Default value is 60 seconds.</p>
  </dd>
  <dt>
    <p><strong>channels </strong><em>&lt;channel specification&gt;</em></p>
  </dt>
  <dd>
    <p>List of b-channels or ranges to activate leased line mode, separated by commas.</p>
  </dd>
  <dt>
    <p><strong>cli </strong><em>&lt;phone numbers&gt;</em></p>
  </dt>
  <dd>
    <p>List of numbers from which incoming calls will be accepted, separated by commas.</p>
  </dd>
  <dt>
    <p><strong>clicb</strong></p>
  </dt>
  <dd>
    <p>The option is retained for compartiblity reasons only. Use option <em>coso local</em> or <em>coso remote</em> instead.</p><p>Enable callback mode. When option <em>number</em> is set, call number and wait for callback. When option <em>number</em> is not set, wait for incoming call, reject the call and call back. This option is optional if the <em>cbnumber</em> option is set.</p>
  </dd>
  <dt>
    <p><strong>connectdelay </strong><em>&lt;seconds&gt;</em></p>
  </dt>
  <dd>
    <p>Number of seconds to wait after a connection is set up, before PPP negotiation starts. Default value is 0 seconds. This option is useful when connecting with protocol <em>modem</em>. Some Internet access servers will hang up if they receive data immediatly after the connection is established.</p>
  </dd>
  <dt>
    <p><strong>controller </strong><em>&lt;controller specification&gt;</em></p>
  </dt>
  <dd>
    <p>For point-to-multipoint <em>&lt;controller specification&gt;</em> is only the CAPI 2.0 controller number, default is 1. For point-to-point, specify <em>&lt;controller number&gt;</em>,<em>&lt;ddi&gt;</em>,<em>&lt;length of internal numbersgt;</em></p>
  </dd>
  <dt>
    <p><strong>controller[1-3] </strong><em>&lt;controller specification&gt;</em></p>
  </dt>
  <dd>
    <p>Like option <em>controller</em>. Used to specify more than one controller</p>
  </dd>
  <dt>
    <p><strong>coso caller</strong></p>
  </dt>
  <dd>
    <p>No callback is done, the costs are assigned to the caller.</p>
  </dd>
  <dt>
    <p><strong>coso local</strong></p>
  </dt>
  <dd>
    <p>The costs are assigned to the local party. On an incoming call pppd will reject the call and callback.</p>
  </dd>
  <dt>
    <p><strong>coso remote</strong></p>
  </dt>
  <dd>
    <p>The costs are assigned to the remote party. On an outcoming call the remote party will reject the call and callback.</p>
  </dd>
  <dt>
    <p><strong>dialmax </strong><em>&lt;times&gt;</em></p>
  </dt>
  <dd>
    <p>Maximum number of times the list of phone numbers is tried before giving up. Default value is 4.</p><p>If dialmax is set to 0, the list is retried infinitely until a connection is made (or the process is stopped).</p>
  </dd>
  <dt>
    <p><strong>dialtimeout </strong><em>&lt;seconds&gt;</em></p>
  </dt>
  <dd>
    <p>Time to wait for the connection to be established or fail before giving up. Default value is 60 seconds.</p>
  </dd>
  <dt>
    <p><strong>inmsn </strong><em>&lt;msn&gt;</em></p>
  </dt>
  <dd>
    <p>List of phone numbers to monitor for calls, separated by commas. If this option is not set, the value of option <em>msn</em> is used.</p>
  </dd>
  <dt>
    <p><strong>inmsn[1-3] </strong><em>&lt;msn&gt;</em></p>
  </dt>
  <dd>
    <p>List of phone numbers to monitor for calls on controller specified by option <em>controller[1-3]</em>, separated by commas. If this option is not set, the value of option <em>msn[1-3]</em> is used.</p>
  </dd>
  <dt>
    <p><strong>msn </strong><em>&lt;msn&gt;</em></p>
  </dt>
  <dd>
    <p>Phone number used to make outgoing calls. Also used for incoming calls if option <em>inmsn</em> is not set.</p>
  </dd>
  <dt>
    <p><strong>msn[1-3] </strong><em>&lt;msn&gt;</em></p>
  </dt>
  <dd>
    <p>Phone number used to make outgoing calls on controller specified by option <em>controller[1-3]</em>. Also used for incoming calls if option <em>inmsn[1-3]</em> is not set.</p>
  </dd>
  <dt>
    <p><strong>number </strong><em>&lt;phone numbers&gt;</em></p>
  </dt>
  <dd>
    <p>List of phone numbers to call, separated by commas. Every number in the list is called until a connection can be established. When the end of the list is reached, the first number is called again. See option <em>dialmax</em>.</p>
  </dd>
  <dt>
    <p><strong>numberprefix </strong><em>&lt;prefix&gt;</em></p>
  </dt>
  <dd>
    <p>phone number to dial to access an outside line. For example, <em>numberprefix 0</em>.</p>
  </dd>
  <dt>
    <p><strong>numberprefix[1-3] </strong><em>&lt;prefix&gt;</em></p>
  </dt>
  <dd>
    <p>phone number to dial to access an outside line for controller specified by option <em>controller[1-3]</em>. For example, <em>numberprefix1 0</em>.</p>
  </dd>
  <dt>
    <p><strong>protocol </strong><em>hdlc</em> | <em>x75</em> | <em>v42bis</em> | <em>modem</em> | <em>analogmodem</em> | <em>v110async</em> | <em>v120async</em></p>
  </dt>
  <dd>
    <p>ISDN protocol to use. With <em>hdlc</em> and <em>adskpppoe</em>, the <em>sync</em> option must be added to the pppd. With <em>x75</em>, <em>v42bis</em>, <em>modem</em>, <em>v110async</em> and <em>v120async</em> the <em>sync</em> option MUST NOT be enabled. Default value is <em>hdlc</em>. Not all controllers support <em>v42bis</em>, <em>modem</em> and <em>v120async</em>. Use <a href="../man8/capiinfo.8.html"><strong>capiinfo</strong>(8)</a> to view which features your controller supports.</p>
  </dd>
  <dt>
    <p><strong>redialdelay </strong><em>&lt;seconds&gt;</em></p>
  </dt>
  <dd>
    <p>Number of seconds to wait between redialing. Default value is 5 seconds.</p>
  </dd>
  <dt>
    <p><strong>voicewakeup</strong></p>
  </dt>
  <dd>
    <p>With this option a incoming voicecall can trigger an outgoing connection setup.</p>
  </dd>

</dl>

        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">EXAMPLE FOR NORMAL DIAL OUT</h2>
        <div class="sectioncontent">
<p>Probably the most common use of pppd is to dial out to an ISP.  This can be specified with a command like</p><ul>
<li><p>pppd call isp</p></li>
</ul><p>where the /etc/ppp/peers/isp file is set up by the system administrator to resemble the following:</p><ul>
<li><p>sync</p><p>noauth</p><p>defaultroute</p><p>name USERNAME</p><p>plugin capiplugin.so</p><p>msn MSN</p><p>number PHONENUMBER</p><p>protocol hdlc</p><p>ipcp-accept-local</p><p>ipcp-accept-remote</p><p>/dev/null</p></li>
</ul><p>and where the files /etc/ppp/pap-secrets and /etc/ppp/chap-secrets are set up by the system administrator to resemble the following:</p><ul>
<li><p>USERNAME * PASSWORD *</p></li>
</ul>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">EXAMPLE OF DIAL OUT WITH CALLBACK</h2>
        <div class="sectioncontent">
<p>Dial out with callback can be specified with a command like</p><ul>
<li><p>pppd call isp-callback</p></li>
</ul><p>where the /etc/ppp/peers/isp-callback file is set up by the system administrator to resemble the following:</p><ul>
<li><p>sync</p><p>noauth</p><p>defaultroute</p><p>name USERNAME</p><p>plugin capiplugin.so</p><p>msn MSN</p><p>number PHONENUMBER</p><p>coso remote</p><p>cli PHONENUMBER</p><p>protocol hdlc</p><p>ipcp-accept-local</p><p>ipcp-accept-remote</p><p>/dev/null</p></li>
</ul><p>and where the files /etc/ppp/pap-secrets and /etc/ppp/chap-secrets are set up by the system administrator to resemble the following:</p><p>USERNAME * PASSWORD *</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">EXAMPLE DIAL OUT ON DEMAND</h2>
        <div class="sectioncontent">
<p>To dial out on demand and drop the link after 120 seconds idle time on the link add this line to the /etc/inittab file:</p><ul>
<li><p>isp:23:respawn:/usr/sbin/pppd call isp demand connect "" idle 120</p></li>
</ul><p>where the /etc/ppp/peers/isp file is set up by the system administrator to resemble the following:</p><ul>
<li><p>sync</p><p>noauth</p><p>defaultroute</p><p>name USERNAME</p><p>plugin capiplugin.so</p><p>msn MSN</p><p>number PHONENUMBER</p><p>protocol hdlc</p><p>ipcp-accept-local</p><p>ipcp-accept-remote</p><p>/dev/null</p></li>
</ul><p>and where the files /etc/ppp/pap-secrets and /etc/ppp/chap-secrets are set up by the system administrator to resemble the following:</p><ul>
<li><p>USERNAME * PASSWORD *</p></li>
</ul>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">EXAMPLE DIAL OUT ON DEMAND AND ON AN INCOMING PHONE CALL</h2>
        <div class="sectioncontent">
<p>To dial out on demand or on an incoming phone call and drop the link after 120 seconds idle time on the link add this line to the /etc/inittab file:</p><ul>
<li><p>isp:23:respawn:/usr/sbin/pppd call isp demand connect "" idle 120</p></li>
</ul><p>where the /etc/ppp/peers/isp file is set up by the system administrator to resemble the following:</p><ul>
<li><p>sync</p><p>noauth</p><p>defaultroute</p><p>name USERNAME</p><p>plugin capiplugin.so</p><p>msn MSN</p><p>number PHONENUMBER</p><p>cli VOICEPHONENUMBER</p><p>voicecallwakeup</p><p>protocol hdlc</p><p>ipcp-accept-local</p><p>ipcp-accept-remote</p><p>/dev/null</p></li>
</ul><p>and where the files /etc/ppp/pap-secrets and /etc/ppp/chap-secrets are set up by the system administrator to resemble the following:</p><ul>
<li><p>USERNAME * PASSWORD *</p></li>
</ul>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">EXAMPLE DIAL OUT ON DEMAND AND ALSO ACCEPT AN INCOMING DATA CALL</h2>
        <div class="sectioncontent">
<p>To dial out on demand or on an incoming data call and drop the link after 120 seconds idle time on the link add this line to the /etc/inittab file:</p><ul>
<li><p>isp:23:respawn:/usr/sbin/pppd call isp demand connect "" idle 120</p></li>
</ul><p>where the /etc/ppp/peers/isp file is set up by the system administrator to resemble the following:</p><ul>
<li><p>sync</p><p>noauth</p><p>defaultroute</p><p>name USERNAME</p><p>plugin capiplugin.so</p><p>msn MSN</p><p>number PHONENUMBER</p><p>inmsn MSN</p><p>protocol hdlc</p><p>ipcp-accept-local</p><p>ipcp-accept-remote</p><p>/dev/null</p></li>
</ul><p>and where the files /etc/ppp/pap-secrets and /etc/ppp/chap-secrets are set up by the system administrator to resemble the following:</p><ul>
<li><p>USERNAME * PASSWORD *</p></li>
</ul>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">EXAMPLE OF WAIT FOR DIAL IN WITHOUT CLI AUTHENTICATION</h2>
        <div class="sectioncontent">
<p>Wait for incoming calls, accept them according to options <em>msn</em>, <em>inmsn</em>, and <em>protocol</em><em>.</em></p><p>Do not provide option <em>cli</em> to the capiplugin. Start a pppd for every b channel. Authorization is checked using PAP or CHAP and the ip numbers are assigned according to the /etc/ppp/pap-secrets or /etc/ppp/chap-secrets file. Assume that the server has ip number 192.168.0.1, the clients are to be assigned the ip numbers starting from 192.168.0.2, and the hostname of the server is "dialinserver". Add these two lines to the /etc/inittab file:</p><ul>
<li><p>p0:23:respawn:/usr/sbin/pppd call incoming-noncli</p><p>p1:23:respawn:/usr/sbin/pppd call incoming-noncli</p></li>
</ul><p>where the /etc/ppp/peers/incoming-noncli file is set up to resemble the following:</p><ul>
<li><p>sync</p><p>auth</p><p>plugin capiplugin.so</p><p>inmsn MSN</p><p>protocol hdlc 192.168.0.1:</p></li>
</ul><p>with the files /etc/ppp/pap-secrets and /etc/ppp/chap-secrets set up to resemble the following:</p><ul>
<li><p>user1 dialinserver PASSWORD1 192.168.0.2</p><p>user2 dialinserver PASSWORD2 192.168.0.3</p></li>
</ul>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">EXAMPLE OF WAIT FOR DIAL IN WITH CLI AUTHENTICATION</h2>
        <div class="sectioncontent">
<p>Wait for incoming calls, accept them according to options <em>msn</em>, <em>inmsn</em>, <em>cli</em> and <em>protocol</em><em>.</em></p><p>Start a pppd for every client. Assume that the server has ip number 192.168.0.1 and the clients are to be assigned the ip numbers starting from 192.168.0.2. Add these three lines to the /etc/inittab file:</p><ul>
<li><p>p0:23:respawn:/usr/sbin/pppd call incoming-cli cli 04711 192.168.0.1:192.168.0.2</p><p>p1:23:respawn:/usr/sbin/pppd call incoming-cli cli 04712 192.168.0.1:192.168.0.3</p><p>p2:23:respawn:/usr/sbin/pppd call incoming-cli cli 04713 192.168.0.1:192.168.0.4</p></li>
</ul><p>where the /etc/ppp/peers/incoming-cli file is set up to resemble the following:</p><ul>
<li><p>sync</p><p>noauth</p><p>plugin capiplugin.so</p><p>inmsn MSN</p><p>protocol hdlc</p></li>
</ul>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">EXAMPLE OF WAIT FOR DIAL IN WITH CLI AUTHENTICATION AND CALLBACK</h2>
        <div class="sectioncontent">
<p>Wait for incoming calls, accept them according to options <em>msn</em>, <em>inmsn</em>, <em>cli</em> and <em>protocol</em><em>, reject incoming calls</em> and call back.</p><p>Start a pppd for every client. Assume that the server has ip number 192.168.0.1 and the clients are to be assigned the ip numbers starting from 192.168.0.2. Add these three lines to the /etc/inittab file.</p><ul>
<li><p>p0:23:respawn:/usr/sbin/pppd call incoming-cli cli 04711 cbnumber 4711 192.168.0.1:192.168.0.2</p><p>p1:23:respawn:/usr/sbin/pppd call incoming-cli cli 04712 cbnumber 4712 192.168.0.1:192.168.0.3</p><p>p2:23:respawn:/usr/sbin/pppd call incoming-cli cli 04713 cbnumber 4713 192.168.0.1:192.168.0.4</p></li>
</ul><p>where the /etc/ppp/peers/incoming-cli file is set up to resemble the following:</p><ul>
<li><p>sync</p><p>noauth</p><p>plugin capiplugin.so</p><p>inmsn MSN</p><p>protocol hdlc</p></li>
</ul>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">EXAMPLE OF A LEASED LINE CONNECTION WITH HDLC</h2>
        <div class="sectioncontent">
<p>Assume that the server has ip number 192.168.0.1 and the peer has the ip number 192.168.0.2. Add this line to the /etc/inittab file:</p><ul>
<li><p>p0:23:respawn:/usr/sbin/pppd call leased-hdlc controller 1 channels 1 192.168.0.1:192.168.0.2</p></li>
</ul><p>where the /etc/ppp/peers/leased-hdlc file is set up to resemble the following:</p><ul>
<li><p>sync</p><p>noauth</p><p>lcp-echo-interval 5</p><p>lcp-echo-failure 3</p><p>lcp-max-configure 50</p><p>lcp-max-terminate 2</p><p>noccp</p><p>noipx</p><p>persist</p><p>plugin capiplugin.so</p><p>protocol hdlc</p></li>
</ul>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">EXAMPLE OF A LEASED LINE CONNECTION WITH V42BIS</h2>
        <div class="sectioncontent">
<p>Assume that the server has ip number 192.168.0.1 and the peer has the ip number 192.168.0.2. Add this line to the /etc/inittab file for server 1 (192.168.0.1):</p><ul>
<li><p>p0:23:respawn:/usr/sbin/pppd call leased-v42bis controller 1 channels 1 192.168.0.1:192.168.0.2</p></li>
</ul><p>and this line to the /etc/inittab file for server 1 (192.168.0.2):</p><ul>
<li><p>p0:23:respawn:/usr/sbin/pppd call leased-v42bis controller 1 channels p1 192.168.0.2:192.168.0.1</p></li>
</ul><p>where the /etc/ppp/peers/leased-v42bis file is set up to resemble the following:</p><ul>
<li><p>sync</p><p>noauth</p><p>lcp-echo-interval 5</p><p>lcp-echo-failure 3</p><p>lcp-max-configure 50</p><p>lcp-max-terminate 2</p><p>noccp</p><p>noipx</p><p>persist</p><p>plugin capiplugin.so</p><p>protocol v42bis</p></li>
</ul>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">CAVEATS</h2>
        <div class="sectioncontent">
<p>Every pppd awaiting incoming calls can receive an incoming call first. So when two pppds are started to monitor the same MSN, one with CLI Authentication and the other without, the following can happen:</p><ul>
<li><p>The Client with the CLI specified to the first pppd calls, but the pppd without the <em>cli</em> option receives the call first and accepts it.</p></li>
</ul><p>To combine CLI Authentication and PAP/CHAP Authentication, use one MSN for CLI authenticated calls and another for the PAP/CHAP authenticated calls.</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">DIAGNOSTICS</h2>
        <div class="sectioncontent">
<p>Messages are sent to the syslog daemon just as in normal pppd operation; see the pppd manual page.</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">RELATED TO capiplugin&hellip;</h2>
        <div class="sectioncontent">
<p><a href="../man8/pppd.8.html"><strong>pppd</strong>(8)</a>, <a href="../man8/capiinfo.8.html"><strong>capiinfo</strong>(8)</a>, <a href="../man8/capiinit.8.html"><strong>capiinit</strong>(8)</a>, <strong>capictrl</strong>(8)</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">AUTHORS</h2>
        <div class="sectioncontent">
<p>Carsten Paeth (calle@calle.in-berlin.de)</p><p>AVM GmbH Berlin (info@avm.de)</p>
        </div>
      </section>
<nav>
  <ul class="pager">
   <li class="previous"><a href="capiinit.8.html"><span aria-hidden="true">&larr;</span> capiinit.8: Start or stop capi-capable isdn cards</a></li>
   <li class="next"><a href="captest.8.html">captest.8: A program to demonstrate capabilities <span aria-hidden="true">&rarr;</span></a></li>
  </ul>
</nav>

  </div>
  <!-- jQuery (necessary for Bootstrap's JavaScript plugins) -->
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.2/jquery.min.js"></script>
  <!-- Include all compiled plugins (below), or include individual files as needed -->
  <script src="/js/bootstrap.min.js"></script>
  <script>
    (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
      (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
      m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
    })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

    ga('create', 'UA-60781387-1', 'auto');
    ga('send', 'pageview');

  </script>
</body>
</html>
