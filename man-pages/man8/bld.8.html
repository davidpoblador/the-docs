<!DOCTYPE html>
<html lang="en">
<head>
  <link href="https://fonts.googleapis.com/css?family=Fira+Mono:400,700&effect=destruction%7Cshadow-multiple" rel="stylesheet" type="text/css">
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>bld: A black list daemon</title>
  <link href="/css/bootstrap.min.css" rel="stylesheet">
  <link href="/css/manpage.css" rel="stylesheet">
  <link rel="apple-touch-icon" sizes="57x57" href="/icons/apple-icon-57x57.png">
  <link rel="apple-touch-icon" sizes="60x60" href="/icons/apple-icon-60x60.png">
  <link rel="apple-touch-icon" sizes="72x72" href="/icons/apple-icon-72x72.png">
  <link rel="apple-touch-icon" sizes="76x76" href="/icons/apple-icon-76x76.png">
  <link rel="apple-touch-icon" sizes="114x114" href="/icons/apple-icon-114x114.png">
  <link rel="apple-touch-icon" sizes="120x120" href="/icons/apple-icon-120x120.png">
  <link rel="apple-touch-icon" sizes="144x144" href="/icons/apple-icon-144x144.png">
  <link rel="apple-touch-icon" sizes="152x152" href="/icons/apple-icon-152x152.png">
  <link rel="apple-touch-icon" sizes="180x180" href="/icons/apple-icon-180x180.png">
  <link rel="icon" type="image/png" sizes="192x192" href="/icons/android-icon-192x192.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/icons/favicon-32x32.png">
  <link rel="icon" type="image/png" sizes="96x96" href="/icons/favicon-96x96.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/icons/favicon-16x16.png">
  <link rel="manifest" href="/icons/manifest.json">
  <meta name="msapplication-TileColor" content="#ffffff">
  <meta name="msapplication-TileImage" content="/icons/ms-icon-144x144.png">
  <meta name="theme-color" content="#ffffff">
  <meta name="description" content="A black list daemon">
  <meta name="twitter:card" content="summary_large_image">
  <meta name="twitter:site" content="@CartaTech">
  <meta name="twitter:creator" content="@CartaTech">
  <meta name="twitter:title" content="bld (8) manual">
  <meta name="twitter:description" content="A black list daemon">
  <meta name="twitter:image" content="https://www.carta.tech/images/bld-bld-8.png">
  <meta property="og:url" content="https://www.carta.tech/man-pages/man8/bld.8.html" />
  <meta property="og:type" content="website" />
  <meta property="og:title" content="bld (8) manual" />
  <meta property="og:description" content="A black list daemon" />
  <meta property="fb:app_id" content="1241677679199500" />
  <meta property="og:image" content="https://www.carta.tech/images/bld-bld-8.png" />
  <meta property="og:image:width" content="600" />
  <meta property="og:image:height" content="315" />
</head>
<body>
  <div class="container final">
          <div class="page-header">
        <h1 class="font-effect-destruction">bld<small> (8)</small></h1>
        <p class="lead">A black list daemon</p>
      </div>

    <ol class="breadcrumb" itemscope itemtype="http://schema.org/BreadcrumbList">
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/">
      <span itemprop="name">Carta.tech</span>
    </a>
    <meta itemprop="position" content="1" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/">
      <span itemprop="name">Man Pages</span>
    </a>
    <meta itemprop="position" content="2" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/man8/">
      <span itemprop="name">System administration commands</span>
    </a>
    <meta itemprop="position" content="3" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/man8/bld.8.html">
      <span itemprop="name">bld: A black list daemon</span>
    </a>
    <meta itemprop="position" content="4" />
  </li>
</ol>
<ol class="breadcrumb" itemscope itemtype="http://schema.org/BreadcrumbList">
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/">
      <span itemprop="name">Carta.tech</span>
    </a>
    <meta itemprop="position" content="1" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/packages/">
      <span itemprop="name">Packages</span>
    </a>
    <meta itemprop="position" content="2" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/packages/bld/">
      <span itemprop="name">bld</span>
    </a>
    <meta itemprop="position" content="3" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/man8/bld.8.html">
      <span itemprop="name">bld: A black list daemon</span>
    </a>
    <meta itemprop="position" content="4" />
  </li>
</ol>
    
      <section>
        <h2 class="font-effect-shadow-multiple">SYNOPSIS</h2>
        <div class="sectioncontent">
<p><strong>bld</strong> -h | [option]</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">OPTIONS</h2>
        <div class="sectioncontent">

<dl class='dl-vertical'>
  <dt>
    <p><strong>-v</strong></p>
  </dt>
  <dd>
    <p>Output version information and exit</p>
  </dd>
  <dt>
    <p><strong>-n</strong></p>
  </dt>
  <dd>
    <p>Do not fork to become a daemon</p>
  </dd>
  <dt>
    <p><strong>-a</strong> <em>address</em></p>
  </dt>
  <dd>
    <p>Address to bind to</p>
  </dd>
  <dt>
    <p><strong>-p</strong> <em>port</em></p>
  </dt>
  <dd>
    <p>Port to listen to</p>
  </dd>
  <dt>
    <p><strong>-l</strong> <em>number</em></p>
  </dt>
  <dd>
    <p>Log verbosity (between 0 and 3)</p>
  </dd>
  <dt>
    <p><strong>-t</strong> <em>number</em></p>
  </dt>
  <dd>
    <p>Minimum time interval before blacklisting</p>
  </dd>
  <dt>
    <p><strong>-m</strong> <em>number</em></p>
  </dt>
  <dd>
    <p>Maximum submissions in time interval</p>
  </dd>
  <dt>
    <p><strong>-i</strong> <em>number</em></p>
  </dt>
  <dd>
    <p>IP list size</p>
  </dd>
  <dt>
    <p><strong>-b</strong> <em>number</em></p>
  </dt>
  <dd>
    <p>Blacklist size</p>
  </dd>
  <dt>
    <p><strong>-e</strong> <em>number</em></p>
  </dt>
  <dd>
    <p>Blacklist expiration</p>
  </dd>
  <dt>
    <p><strong>-P</strong> <em>filename</em></p>
  </dt>
  <dd>
    <p>Filename where to save PID</p>
  </dd>
  <dt>
    <p><strong>-T</strong> <em>number</em></p>
  </dt>
  <dd>
    <p>Timeout for client connections</p>
  </dd>
  <dt>
    <p><strong>-u</strong> <em>user</em></p>
  </dt>
  <dd>
    <p>User to run as</p>
  </dd>
  <dt>
    <p><strong>-g</strong> <em>group</em></p>
  </dt>
  <dd>
    <p>Group to run as</p>
  </dd>
  <dt>
    <p><strong>-f</strong> <em>filename</em></p>
  </dt>
  <dd>
    <p>Use a specific configuration file</p>
  </dd>
  <dt>
    <p><strong>-A</strong> <em>filename</em></p>
  </dt>
  <dd>
    <p>Filename where to find ACLs</p>
  </dd>
  <dt>
    <p><strong>-W</strong> <em>filename</em></p>
  </dt>
  <dd>
    <p>Filename where to find whitelist</p>
  </dd>
  <dt>
    <p><strong>-B</strong> <em>filename</em></p>
  </dt>
  <dd>
    <p>Filename where to store blacklist</p>
  </dd>
  <dt>
    <p><strong>-I</strong> <em>filename</em></p>
  </dt>
  <dd>
    <p>Filename where to store whole IP list</p>
  </dd>
  <dt>
    
  </dt>
  <dd>
    
  </dd>

</dl>

        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">DESCRIPTION</h2>
        <div class="sectioncontent">
<p>By default, the <strong>bld</strong> daemon listens to requests on port 2905.  Requests are either IP addresses submissions or checks against the black list.</p><p><strong>bld</strong> uses a very simple algorithm to decide whether to add IP addresses to the blacklist or not. The first time an IP address is submitted, it is added to an internal list with a timestamp and all further requests increment a counter for this IP.  As soon as the minimum time interval is elapsed (default: 30 seconds), and if a maximum requests ratio is reached (default: 10 submissions in the 30 seconds interval), the IP is put in the blacklist.  It is then blacklisted for a configurable time (default: 900 seconds).</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">PROTOCOL</h2>
        <div class="sectioncontent">
<p>Requests sent to <strong>bld</strong> are rather simple.  Each request or reply is followed by a linefeed and a carriage return.  A client may only send one request per TCP session.  As of now, two commands may be used: <strong>ip</strong> (address submission) and <strong>ip?</strong> (ask if address is blacklisted).</p><p><strong>ip=a.b.c.d</strong> submits an IP address.  The server acknowledges either with a <strong>200</strong> code if the address is not blacklisted or a <strong>421</strong> if it is.</p><p><strong>ipdecr=a.b.c.d</strong> decrements the internal counter for an IP address. The lowest value for the counter is zero.  The server always acknowledges with a <strong>200</strong> code.</p><p><strong>ip?=a.b.c.d</strong> asks if address is blacklisted.  The server reply may be <strong>421</strong> if it is or <strong>200</strong> if it's not.</p><p><strong>ipbl=a.b.c.d</strong> forces the insertion in the blacklist.  The server acknowledges with a <strong>200</strong> code.</p><p>If using IP based restrictions, the server reply may be <strong>600</strong> if the client is not in the correct ACL to perform a request.  Any other error will generate a reply with a <strong>500</strong> error code.</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">NOTES</h2>
        <div class="sectioncontent">
<p><strong>bld</strong> binds to localhost by default and accepts any local request, so please make sure that only trusted users can establish a connection to the daemon.  Please check that all authorized hosts meet the minimal security requirements before changing this parameter even if using an access control list (see <a href="../man5/bld_acl.conf.5.html"><strong>bld_acl.conf</strong>(5)</a>).</p><p><strong>bld</strong> will log some statistics if it receives the SIGUSR1 signal. SIGUSR2 is used to force a dump of both lists in <strong>bld</strong> working directory.</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">FILES</h2>
        <div class="sectioncontent">
<p>/etc/bld/bld.conf /etc/bld/bld_acl.conf /etc/bld/bld_whitelist.conf /var/run/bld/bld.pid /var/run/bld/bld_iplist.dump /var/run/bld/bld_blacklist.dump</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">RELATED TO bld&hellip;</h2>
        <div class="sectioncontent">
<p><a href="../man5/bld.conf.5.html"><strong>bld.conf</strong>(5)</a> <a href="../man5/bld_acl.conf.5.html"><strong>bld_acl.conf</strong>(5)</a> <a href="../man5/bld_whitelist.conf.5.html"><strong>bld_whitelist.conf</strong>(5)</a> <a href="../man8/bldread.8.html"><strong>bldread</strong>(8)</a> <a href="../man8/bldquery.8.html"><strong>bldquery</strong>(8)</a> <a href="../man8/bldsubmit.8.html"><strong>bldsubmit</strong>(8)</a> <a href="../man8/blddecr.8.html"><strong>blddecr</strong>(8)</a></p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">AUTHOR</h2>
        <div class="sectioncontent">
<p>Olivier Beyssac &lt;obld@r14.freenix.org&gt;</p>
        </div>
      </section>
<nav>
  <ul class="pager">
   <li class="previous"><a href="blazer_usb.8.html"><span aria-hidden="true">&larr;</span> blazer_usb.8: Driver for megatec/q1 protocol usb based ups equipment</a></li>
   <li class="next"><a href="bld-mrtg.8.html">bld-mrtg.8: Return mrtg-friendly statistics about local bld status <span aria-hidden="true">&rarr;</span></a></li>
  </ul>
</nav>

  </div>
  <!-- jQuery (necessary for Bootstrap's JavaScript plugins) -->
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.2/jquery.min.js"></script>
  <!-- Include all compiled plugins (below), or include individual files as needed -->
  <script src="/js/bootstrap.min.js"></script>
  <script>
    (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
      (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
      m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
    })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

    ga('create', 'UA-60781387-1', 'auto');
    ga('send', 'pageview');

  </script>
</body>
</html>
