<!DOCTYPE html>
<html lang="en">
<head>
  <link href="https://fonts.googleapis.com/css?family=Fira+Mono:400,700&effect=destruction%7Cshadow-multiple" rel="stylesheet" type="text/css">
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>scsi-config: Query information from a scsi device with a nice user interface</title>
  <link href="/css/bootstrap.min.css" rel="stylesheet">
  <link href="/css/manpage.css" rel="stylesheet">
  <link rel="apple-touch-icon" sizes="57x57" href="/icons/apple-icon-57x57.png">
  <link rel="apple-touch-icon" sizes="60x60" href="/icons/apple-icon-60x60.png">
  <link rel="apple-touch-icon" sizes="72x72" href="/icons/apple-icon-72x72.png">
  <link rel="apple-touch-icon" sizes="76x76" href="/icons/apple-icon-76x76.png">
  <link rel="apple-touch-icon" sizes="114x114" href="/icons/apple-icon-114x114.png">
  <link rel="apple-touch-icon" sizes="120x120" href="/icons/apple-icon-120x120.png">
  <link rel="apple-touch-icon" sizes="144x144" href="/icons/apple-icon-144x144.png">
  <link rel="apple-touch-icon" sizes="152x152" href="/icons/apple-icon-152x152.png">
  <link rel="apple-touch-icon" sizes="180x180" href="/icons/apple-icon-180x180.png">
  <link rel="icon" type="image/png" sizes="192x192" href="/icons/android-icon-192x192.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/icons/favicon-32x32.png">
  <link rel="icon" type="image/png" sizes="96x96" href="/icons/favicon-96x96.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/icons/favicon-16x16.png">
  <link rel="manifest" href="/icons/manifest.json">
  <meta name="msapplication-TileColor" content="#ffffff">
  <meta name="msapplication-TileImage" content="/icons/ms-icon-144x144.png">
  <meta name="theme-color" content="#ffffff">
  <meta name="description" content="Query information from a scsi device with a nice user interface">
  <meta name="twitter:card" content="summary_large_image">
  <meta name="twitter:site" content="@CartaTech">
  <meta name="twitter:creator" content="@CartaTech">
  <meta name="twitter:title" content="scsi-config (8) manual">
  <meta name="twitter:description" content="Query information from a scsi device with a nice user interface">
  <meta name="twitter:image" content="https://www.carta.tech/images/scsitools-scsi-config-8.png">
  <meta property="og:url" content="https://www.carta.tech/man-pages/man8/scsi-config.8.html" />
  <meta property="og:type" content="website" />
  <meta property="og:title" content="scsi-config (8) manual" />
  <meta property="og:description" content="Query information from a scsi device with a nice user interface" />
  <meta property="fb:app_id" content="1241677679199500" />
  <meta property="og:image" content="https://www.carta.tech/images/scsitools-scsi-config-8.png" />
  <meta property="og:image:width" content="600" />
  <meta property="og:image:height" content="315" />
</head>
<body>
  <div class="container final">
          <div class="page-header">
        <h1 class="font-effect-destruction">scsi-config<small> (8)</small></h1>
        <p class="lead">Query information from a scsi device with a nice user interface</p>
      </div>

    <ol class="breadcrumb" itemscope itemtype="http://schema.org/BreadcrumbList">
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/">
      <span itemprop="name">Carta.tech</span>
    </a>
    <meta itemprop="position" content="1" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/">
      <span itemprop="name">Man Pages</span>
    </a>
    <meta itemprop="position" content="2" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/man8/">
      <span itemprop="name">System administration commands</span>
    </a>
    <meta itemprop="position" content="3" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/man8/scsi-config.8.html">
      <span itemprop="name">scsi-config: Query information from a scsi device with a nice user interface</span>
    </a>
    <meta itemprop="position" content="4" />
  </li>
</ol>
<ol class="breadcrumb" itemscope itemtype="http://schema.org/BreadcrumbList">
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/">
      <span itemprop="name">Carta.tech</span>
    </a>
    <meta itemprop="position" content="1" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/packages/">
      <span itemprop="name">Packages</span>
    </a>
    <meta itemprop="position" content="2" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/packages/scsitools/">
      <span itemprop="name">scsitools</span>
    </a>
    <meta itemprop="position" content="3" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/man8/scsi-config.8.html">
      <span itemprop="name">scsi-config: Query information from a scsi device with a nice user interface</span>
    </a>
    <meta itemprop="position" content="4" />
  </li>
</ol>
    
      <section>
        <h2 class="font-effect-shadow-multiple">SYNOPSIS</h2>
        <div class="sectioncontent">
<p><strong>scsi-config [</strong><em>device</em><strong>]</strong></p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">DESCRIPTION</h2>
        <div class="sectioncontent">
<p><strong>scsi-config</strong> queries information from an scsi target with a nice Tcl/Tk user interface. If you do not specify a device to query, <strong>scsi-config</strong> calculates a list of available devices and prompts it to you.</p><p>By the nature of a graphical user interface, most things will explain them self. Basically, <strong>scsi-config</strong> shows a list of buttons for certain mode pages which you may press. Those buttons which you can press and the text windows with white backgrounds can be modified by you and the modifications send back to the device.</p><p>In the main window there is a button to instruct the device to save the data in some non volatile memory (if it supports it). Note that this will instruct the device to save the <strong>Read-Write Error Recovery Page , </strong> <strong>Disconnect-Reconnect Page , </strong> <strong>Format Device Page , </strong> <strong>Caching Page , and </strong> <strong>Control Mode Page in its NVRAM. Usually saving even a single of those should write</strong> them all to the NVRAM, but you never know.</p><p>You can query the current, the factory default and the values in the NVRAM (which may not be the current parameters) from the device.</p><p>Not all combinations of button toggles or all values are valid. In general, try to set them and see which values the drive accepts. <strong>scsi-config</strong> rereads the device configuration immediately, s.t. you see which values where accepted.</p><p>Also note that some disk drives are notched, and that those have an active notch (shown in the main window) to which all your settings apply (at least those of notched pages, which are also marked in slate gray). You can select the active notch to which your settings apply (and to which the values refer) in the <strong>Notch Page</strong>.</p><p>For those devices which do not feature an NVRAM (generally removable media devices) and as a kind of backup, you can save the current settings to a file. Actually the file will be a <em>/bin/sh</em> script making the necessary <a href="../man8/scsiinfo.8.html"><strong>scsiinfo</strong>(8)</a> calls to set the saved parameters when executed.</p><p>There is also a nice Overview button which will query many details about the disk geometry and draw them in a nice picture. This looks esp. nice for drives with many notches, that is different regions on the disk with different tracks per sector settings. It is also very useful for notched drives as you can immediately select the mode pages for each notch.</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">SOME USAGE GUIDELINES</h2>
        <div class="sectioncontent">

<dl class='dl-vertical'>
  <dt>
    <p><strong>1. General Warning</strong></p>
  </dt>
  <dd>
    <p>Generally, do not modify settings you don't understand. It is useful to know the SCSI-II specs mentioned below. Some setting may render the device unusable or even damage it. Usually a power cycle resets the state (if you do not save the weird settings in the NVRAM). Some settings affecting the assignment of logical sectors will render the disk unusable until the next low level format.</p>
  </dd>
  <dt>
    <p><strong>2. On Write Caching</strong></p>
  </dt>
  <dd>
    <p>As an old warning, this does also mean you should not generally switch the write cache on. At least on those drives where you have a choice at all. Reasons are twofold:</p>
<dl class='dl-vertical'>
  <dt>
    <p><strong>a)</strong></p>
  </dt>
  <dd>
    <p>It is a priori unclear when the drive will actually perform the writes. This is a bad thing when considering shutdown of your machine. On the other hand, it seems sensible to assume that the drive will immediately write it's cache to disk when it is idle (after all file systems are unmounted) and due to the size of the on disk cache this will usually only need a few seconds after the shutdown (but the drive lamp will usually not glow, as it is mostly connected to the host adapter (if you have a lamp at all) and it is not participating).</p><p>There is a SCSI command to flush the caches. Linux could call it prior to shutting down, spinning a disk down. Due to my knowledge this is not yet done though.</p>
  </dd>
  <dt>
    <p><strong>b)</strong></p>
  </dt>
  <dd>
    <p>As the writes are performed asynchronously, errors are reported asynchronously. The disk might return an error at some simple read instruction related to a write which was acknowledged OK several transactions ago. This generally confuses things and makes interpreting errors very difficult. Some devices are known/said to not report write errors in this mode of operation at all.</p><p>Just imagine that at the point where a file system is unmounted, or a new removable media is detected it could tell: Oops, BTW, there was some write error ago although I told you it was OK already.</p>
  </dd>

</dl>
<ul>
<li><p>Thus, when you run a disk in write cache mode, keep it in mind when weird error messages occur and give the disk time to flush it's buffers at shutdown. Generally it would be good if you knew more vendor specific details on how the disk operates in the write cache mode.</p></li>
</ul>
  </dd>
  <dt>
    <p><strong>3. Reassigning Bad Blocks Automatically</strong></p>
  </dt>
  <dd>
    <p>One of the nice features of SCSI disk is that they allow to remap bad blocks automatically as they are detected without any user intervention. However, you actually have to enable this feature! It turned out that you can not generally assume a disk in this mode. To enable this mode or check the settings, proceed as follows:</p>
<dl class='dl-vertical'>
  <dt>
    <p><strong>a)</strong></p>
  </dt>
  <dd>
    <p>Go to the <strong>Read-Write Error Recovery Page</strong>. <strong>AWRE</strong> (Automatic Write Reallocation Enable) and <strong>ARRE</strong> (Automatic Read Reallocation Enable) buttons enable the automatic reallocation.</p><p>In the same window, you can select the maximal retries performed. EER allows the disk to do some Early Error Recovery which is fast (but might misdetect or miscorrect data). A selected DCR button (Disable CoRrection Codes) disallows the disk to use any error correction codes at all (thus the drive will have to retry until it performs an error free read).</p><p>Usually a sector will be reallocated after even a single read retry or the given number of failed write retries. When the sector cannot be recovered, it is reallocated but the data is lost and an error is signalled.</p><p>The other buttons there apply to error reporting as well. TB Transmits the bad Block together with the error, RC Reads Continuous, that is, does not pause a read operation while retrying or using error code calculations to recover a bad block (thus may return bad data). PER lets the disk report even recovered errors (Post ERror), DTE (Disable Transfer on Error) even breaks a running data transmission when an error is detected.</p>
  </dd>
  <dt>
    <p><strong>b)</strong></p>
  </dt>
  <dd>
    <p>Even when the reallocation is enabled, the disk must actually have some reserved areas where to remap the bad blocks. The <strong>Format Page</strong> controls this. Either a given number of Alternate Sectors Per LUN is set aside for the whole disk or a given number of tracks is defined to be a <em>zone</em> and for each zone a number of sectors or tracks is put aside. These alternate data areas are where bad sectors are remapped.</p><p>Note that this page is very likely to apply only to the current notch on a notched disk device.</p><p>If there are no, or not many alternate sectors reserved on your disk, you must change these settings.</p><p>I found that those disks which allow to modify these settings are very often set to no reserved sectors at all by the vendors, as this increases the disks capacity. For the sake of stability, you should really modify these settings.</p><p>If you decide to modify the number of alternate sectors, you must</p>
<dl class='dl-vertical'>
  <dt>
    <p><strong>i)</strong></p>
  </dt>
  <dd>
    <p>Save the parameters to the NVRAM of the disk.</p>
  </dd>
  <dt>
    <p><strong>ii)</strong></p>
  </dt>
  <dd>
    <p>Low-level format the disk drive (and not erase the NVRAM during this operation).</p>
  </dd>

</dl>
<ul>
<li><p>to make the changes be effective.</p></li>
</ul>
  </dd>
  <dt>
    <p><strong>c)</strong></p>
  </dt>
  <dd>
    <p>Esp. when you set the disk to not report recovered errors (or when it is in a write cache mode or something), and just as a general guideline, keep an eye on the grown defects list where the disk will report all the remappings which took place as your disk ages.</p><p>The old adventurers guide line applies: Save (Backup) Early, Save (Backup) Often. Find the right time to replace your disk avoiding too much work recovering your data.</p>
  </dd>

</dl>

  </dd>

</dl>

        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">BUGS</h2>
        <div class="sectioncontent">
<p><strong>scsi-config</strong> could be enhanced by making better use of Tcl/Tk. I learned much about it during my work on <a href="../man8/tk_scsiformat.8.html"><strong>tk_scsiformat</strong>(8)</a> and their would be much room for fixes and enhances. On other hand, it fulfils it's purpose as it is quite nicely already.</p><p>As <strong>scsi-config</strong> makes heavy use of <a href="../man8/scsiinfo.8.html"><strong>scsiinfo</strong>(8)</a> all it's bugs (esp. on defect reading) apply.</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">FILES</h2>
        <div class="sectioncontent">
<p><em>/usr/lib/scsi/cache</em>, <em>/usr/lib/scsi/control</em>, <em>/usr/lib/scsi/disconnect</em>, <em>/usr/lib/scsi/error</em>, <em>/usr/lib/scsi/format</em>, <em>/usr/lib/scsi/generic</em>, <em>/usr/lib/scsi/inquiry</em>, <em>/usr/lib/scsi/notch</em>, <em>/usr/lib/scsi/overview</em>, <em>/usr/lib/scsi/peripheral</em>, <em>/usr/lib/scsi/rigid</em>, <em>/usr/lib/scsi/save-changes</em>, <em>/usr/lib/scsi/save-file</em>, <em>/usr/lib/scsi/tworands</em>, <em>/usr/lib/scsi/verify</em> (Tcl/Tk subroutines used by scsi-config).</p><p><em>/dev/sd*</em></p><p><em>/dev/sg*</em></p><p><em>/dev/scd*</em></p><p><em>/dev/st*</em></p><p><em>/dev/nst*</em></p><p><em>/dev/rmt*</em></p><p><em>/dev/nrmt*</em></p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">RELATED TO scsi-config&hellip;</h2>
        <div class="sectioncontent">
<p><a href="../man8/scsiinfo.8.html"><strong>scsiinfo</strong>(8)</a>, <a href="../man8/scsiformat.8.html"><strong>scsiformat</strong>(8)</a>, <a href="../man8/tk_scsiformat.8.html"><strong>tk_scsiformat</strong>(8)</a>, <a href="../man8/fdisk.8.html"><strong>fdisk</strong>(8)</a>, <strong>sd</strong>(4),</p><p><strong>Draft proposed</strong></p><p><strong>American National Standard</strong></p><p><strong>for information systems</strong></p><p><strong>SMALL COMPUTER SYSTEM INTERFACE - 2</strong></p><p><strong>(SCSI-2)</strong></p><p><strong>MARCH 9, 1990</strong></p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">AUTHORS</h2>
        <div class="sectioncontent">
<p>Eric Youngdale.</p><p>Michael Weller &lt;eowmob@exp-math.uni-essen.de&gt;, Versions 1.5 & 1.7</p>
        </div>
      </section>
<nav>
  <ul class="pager">
   <li class="previous"><a href="script-email.8.html"><span aria-hidden="true">&larr;</span> script-email.8: Amanda script to send email notifications</a></li>
   <li class="next"><a href="scsi-spin.8.html">scsi-spin.8: Spin up and down a scsi device <span aria-hidden="true">&rarr;</span></a></li>
  </ul>
</nav>

  </div>
  <!-- jQuery (necessary for Bootstrap's JavaScript plugins) -->
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.2/jquery.min.js"></script>
  <!-- Include all compiled plugins (below), or include individual files as needed -->
  <script src="/js/bootstrap.min.js"></script>
  <script>
    (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
      (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
      m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
    })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

    ga('create', 'UA-60781387-1', 'auto');
    ga('send', 'pageview');

  </script>
</body>
</html>
