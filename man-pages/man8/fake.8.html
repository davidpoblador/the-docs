<!DOCTYPE html>
<html lang="en">
<head>
  <link href="https://fonts.googleapis.com/css?family=Fira+Mono:400,700&effect=destruction%7Cshadow-multiple" rel="stylesheet" type="text/css">
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>fake: Ip address takeover tool</title>
  <link href="/css/bootstrap.min.css" rel="stylesheet">
  <link href="/css/manpage.css" rel="stylesheet">
  <link rel="apple-touch-icon" sizes="57x57" href="/icons/apple-icon-57x57.png">
  <link rel="apple-touch-icon" sizes="60x60" href="/icons/apple-icon-60x60.png">
  <link rel="apple-touch-icon" sizes="72x72" href="/icons/apple-icon-72x72.png">
  <link rel="apple-touch-icon" sizes="76x76" href="/icons/apple-icon-76x76.png">
  <link rel="apple-touch-icon" sizes="114x114" href="/icons/apple-icon-114x114.png">
  <link rel="apple-touch-icon" sizes="120x120" href="/icons/apple-icon-120x120.png">
  <link rel="apple-touch-icon" sizes="144x144" href="/icons/apple-icon-144x144.png">
  <link rel="apple-touch-icon" sizes="152x152" href="/icons/apple-icon-152x152.png">
  <link rel="apple-touch-icon" sizes="180x180" href="/icons/apple-icon-180x180.png">
  <link rel="icon" type="image/png" sizes="192x192" href="/icons/android-icon-192x192.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/icons/favicon-32x32.png">
  <link rel="icon" type="image/png" sizes="96x96" href="/icons/favicon-96x96.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/icons/favicon-16x16.png">
  <link rel="manifest" href="/icons/manifest.json">
  <meta name="msapplication-TileColor" content="#ffffff">
  <meta name="msapplication-TileImage" content="/icons/ms-icon-144x144.png">
  <meta name="theme-color" content="#ffffff">
  <meta name="description" content="Ip address takeover tool">
  <meta name="twitter:card" content="summary_large_image">
  <meta name="twitter:site" content="@CartaTech">
  <meta name="twitter:creator" content="@CartaTech">
  <meta name="twitter:title" content="fake (8) manual">
  <meta name="twitter:description" content="Ip address takeover tool">
  <meta name="twitter:image" content="https://www.carta.tech/images/fake-fake-8.png">
  <meta property="og:url" content="https://www.carta.tech/man-pages/man8/fake.8.html" />
  <meta property="og:type" content="website" />
  <meta property="og:title" content="fake (8) manual" />
  <meta property="og:description" content="Ip address takeover tool" />
  <meta property="fb:app_id" content="1241677679199500" />
  <meta property="og:image" content="https://www.carta.tech/images/fake-fake-8.png" />
  <meta property="og:image:width" content="600" />
  <meta property="og:image:height" content="315" />
</head>
<body>
  <div class="container final">
          <div class="page-header">
        <h1 class="font-effect-destruction">fake<small> (8)</small></h1>
        <p class="lead">Ip address takeover tool</p>
      </div>

    <ol class="breadcrumb" itemscope itemtype="http://schema.org/BreadcrumbList">
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/">
      <span itemprop="name">Carta.tech</span>
    </a>
    <meta itemprop="position" content="1" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/">
      <span itemprop="name">Man Pages</span>
    </a>
    <meta itemprop="position" content="2" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/man8/">
      <span itemprop="name">System administration commands</span>
    </a>
    <meta itemprop="position" content="3" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/man8/fake.8.html">
      <span itemprop="name">fake: Ip address takeover tool</span>
    </a>
    <meta itemprop="position" content="4" />
  </li>
</ol>
<ol class="breadcrumb" itemscope itemtype="http://schema.org/BreadcrumbList">
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/">
      <span itemprop="name">Carta.tech</span>
    </a>
    <meta itemprop="position" content="1" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/packages/">
      <span itemprop="name">Packages</span>
    </a>
    <meta itemprop="position" content="2" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/packages/fake/">
      <span itemprop="name">fake</span>
    </a>
    <meta itemprop="position" content="3" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/man8/fake.8.html">
      <span itemprop="name">fake: Ip address takeover tool</span>
    </a>
    <meta itemprop="position" content="4" />
  </li>
</ol>
    
      <section>
        <h2 class="font-effect-shadow-multiple">SYNOPSIS</h2>
        <div class="sectioncontent">
<p><strong>fake</strong> [<strong>remove</strong>] <em>IP_ADDRESS</em></p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">DESCRIPTION</h2>
        <div class="sectioncontent">
<p>The <strong>fake</strong> utility enables the switching in of a backup server by bringing up an additional interface and using ARP spoofing to take over <em>IP_ADDRESS</em>.</p><p>Variants of the script have been used extensively at Zip World (http://www.zipworld.com.au/) for backing up mail, web and proxy servers. Although this system has been shown to work you are well advised to test the system thoroughly before putting it into production.</p><p>Please read the documents in <em>/usr/share/doc/fake/</em> for an explanation of how <strong>fake</strong> works and for a discussion of issues surrounding its use.</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">OPTIONS</h2>
        <div class="sectioncontent">

<dl class='dl-vertical'>
  <dt>
    <p><strong>remove</strong></p>
  </dt>
  <dd>
    <p>Stop the takeover of an IP address. Without this option, fake starts the takeover of an IP address.</p>
  </dd>

</dl>

        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">GLOBAL CONFIGURATION FILE</h2>
        <div class="sectioncontent">
<p>The global configuration file is in <em>/etc/fake/.fakerc</em>. The settings there are overridden by those in <em>${HOME}/.fakerc</em>. Here is a sample configuration file.</p>
<pre>
############################################################
# Set up basic environment for fake
# Variables are set as bash variables
# i.e. &lt;VARIABLE&gt;=&lt;value&gt;
#
# Must set:
#  ARP_DELAY: Delay in seconds between gratuitous ARP
#  PID_DIR: Directory where PID files are kept
#  INSTANCE_CONFIG_DIR: Directory where specific
#   configuration files for an IP address takeover are kept
#  CLEAR_ROUTERS_FILE: New line delimited list of routers to rsh
#    to and execute "clear arp-cache"
#  FAKE_RSH: Programme to use to "rsh" to another machine
#    to obtain macaddress by running ifconfig
#
# PATH can be set here to ensure that send_arp is in the
#  path
############################################################

FAKE_HOME="/etc/fake"

#PATH=/sbin:/usr/sbin:/bin:/usr/bin

ARP_DELAY=1
CLEAR_ROUTERS_FILE="$FAKE_HOME/clear_routers"
PID_DIR="/var/run"
INSTANCE_CONFIG_DIR="$FAKE_HOME/instance_config"

#Only needed if you wish to send gratuitous ARP
#advertising the "real" mac address when turning fake off
#FAKE_RSH=ssh

</pre>

        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">INSTANCE CONFIGURATION</h2>
        <div class="sectioncontent">
<p>To configure an instance of <strong>fake</strong>, create <em>/etc/fake/instance_config/&lt;IP-address-to-take-over&gt;.cfg</em> with the following format:</p>
<pre>
SPOOF_IP=&lt;IP-address-to-take-over&gt;

</pre>
<p>The SPOOF_IP variable must contain the same IP address as appears in the name of the file. This is checked at run time.</p>
<pre>
IFCONFIG=TRUE|FALSE
SPOOF_NETMASK=&lt;netmask-of-network-that-IP-address-to-take-over-is-on&gt;
TARGET_INTERFACE=&lt;interface-to-bring-up&gt;

</pre>
<p>If the IFCONFIG variable is set to <strong>TRUE</strong>, the address specified by SPOOF_IP will be brought up on the interface specified by TARGET_INTERFACE; SPOOF_NETMASK and TARGET_INTERFACE must also be defined.</p><p>For obvious reasons it is very important that the TARGET_INTERFACEs of running instances of <strong>fake</strong> all be different from one another.</p><p>Optionally if you wish to <strong>rsh</strong> to the main server and advertise the "real" MAC address when turning <strong>fake</strong> off then set the following;</p>
<pre>
FOREIGN_INTERFACE=&lt;interface-on-foreign-host-with-MAC-address-to-use&gt;
FOREIGN_ARP=&lt;number-of-ARPs-to-send-with-real-MAC-address&gt;

</pre>
<p>To use this last feature in an automated fashion you will need to be able to $FAKE_RSH to $SPOOF_IP from the host that <strong>fake</strong> runs on without manual authentication. With <strong>rsh</strong> this is typically achived using <em>.rhosts</em>; with <strong>ssh</strong> an RSH key with an empty passphrase can be employed.</p><p>Here is an example of <em>/etc/fake/instance_config/203.12.97.7.cfg</em>:</p>
<pre>
SPOOF_IP=203.12.97.7
IFCONFIG=TRUE
SPOOF_NETMASK=255.255.255.0
TARGET_INTERFACE=eth0:2
FOREIGN_INTERFACE=eth0
FOREIGN_ARP=5

</pre>

        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">ACTIVATION</h2>
        <div class="sectioncontent">
<p>To activate <strong>fake</strong>, run:</p>
<pre>
fake &lt;IP-address-to-take-over&gt; &

</pre>
<p>Logs will be made to the local0.notice syslog facility.</p><p>On startup you should see messages in the syslog; running <strong>ifconfig</strong> should show the new interface; running <strong>route</strong> should show a route for the spoofed IP address on the new interface (which is needed so the machine that <strong>fake</strong> is running on can communicate correctly to this IP address); and running <strong>tcpdump -i &lt;interface&gt; arp</strong> should show the gratuitous ARP packets.</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">DEACTIVATION</h2>
        <div class="sectioncontent">
<p>To deactivate, run:</p>
<pre>
fake remove &lt;IP-address-to-take-over&gt;

</pre>
<p>As of version 1.1.2 the <strong>fake</strong> process can be sent a SIGTERM or SIGHUP to effect the removal.</p><p>On removal you should see a message in the syslog; <strong>ifconfig</strong> should show that the new interface has been removed; <strong>route</strong> should show that the new route has been removed; and <strong>tcpdump</strong> should show that the gratuitous ARP has stopped.</p><p><strong>Note:</strong> Activating <strong>fake</strong> multiple times with the same arguments has the same effect as activating it once. Similarly, deactivating fake multiple times with the same arguments has the same effect as deactivating it once.</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">FILES</h2>
        <div class="sectioncontent">

<dl class='dl-vertical'>
  <dt>
    <p><em>/etc/fake/.fakerc</em></p>
  </dt>
  <dd>
    
  </dd>
  <dt>
    <p><em>/etc/fake/clear_routers</em></p>
  </dt>
  <dd>
    
  </dd>
  <dt>
    <p><em>/etc/fake/instance_config/&lt;IP-address&gt;.cfg</em></p>
  </dt>
  <dd>
    
  </dd>
  <dt>
    <p><em>/var/run/fake.&lt;IP-address&gt;.pid</em></p>
  </dt>
  <dd>
    
  </dd>

</dl>

        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">AUTHOR</h2>
        <div class="sectioncontent">
<p>Horms &lt;horms@verge.net.au&gt;</p>
        </div>
      </section>
<nav>
  <ul class="pager">
   <li class="previous"><a href="faimond.8.html"><span aria-hidden="true">&larr;</span> faimond.8: Fai monitor daemon</a></li>
   <li class="next"><a href="fake-hwclock.8.html">fake-hwclock.8: Control fake hardware clock <span aria-hidden="true">&rarr;</span></a></li>
  </ul>
</nav>

  </div>
  <!-- jQuery (necessary for Bootstrap's JavaScript plugins) -->
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.2/jquery.min.js"></script>
  <!-- Include all compiled plugins (below), or include individual files as needed -->
  <script src="/js/bootstrap.min.js"></script>
  <script>
    (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
      (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
      m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
    })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

    ga('create', 'UA-60781387-1', 'auto');
    ga('send', 'pageview');

  </script>
</body>
</html>
