<!DOCTYPE html>
<html lang="en">
<head>
  <link href="https://fonts.googleapis.com/css?family=Fira+Mono:400,700&effect=destruction%7Cshadow-multiple" rel="stylesheet" type="text/css">
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>sg_ses: Access a scsi enclosure services (ses) device</title>
  <link href="/css/bootstrap.min.css" rel="stylesheet">
  <link href="/css/manpage.css" rel="stylesheet">
  <link rel="apple-touch-icon" sizes="57x57" href="/icons/apple-icon-57x57.png">
  <link rel="apple-touch-icon" sizes="60x60" href="/icons/apple-icon-60x60.png">
  <link rel="apple-touch-icon" sizes="72x72" href="/icons/apple-icon-72x72.png">
  <link rel="apple-touch-icon" sizes="76x76" href="/icons/apple-icon-76x76.png">
  <link rel="apple-touch-icon" sizes="114x114" href="/icons/apple-icon-114x114.png">
  <link rel="apple-touch-icon" sizes="120x120" href="/icons/apple-icon-120x120.png">
  <link rel="apple-touch-icon" sizes="144x144" href="/icons/apple-icon-144x144.png">
  <link rel="apple-touch-icon" sizes="152x152" href="/icons/apple-icon-152x152.png">
  <link rel="apple-touch-icon" sizes="180x180" href="/icons/apple-icon-180x180.png">
  <link rel="icon" type="image/png" sizes="192x192" href="/icons/android-icon-192x192.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/icons/favicon-32x32.png">
  <link rel="icon" type="image/png" sizes="96x96" href="/icons/favicon-96x96.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/icons/favicon-16x16.png">
  <link rel="manifest" href="/icons/manifest.json">
  <meta name="msapplication-TileColor" content="#ffffff">
  <meta name="msapplication-TileImage" content="/icons/ms-icon-144x144.png">
  <meta name="theme-color" content="#ffffff">
  <meta name="description" content="Access a scsi enclosure services (ses) device">
  <meta name="twitter:card" content="summary_large_image">
  <meta name="twitter:site" content="@CartaTech">
  <meta name="twitter:creator" content="@CartaTech">
  <meta name="twitter:title" content="sg_ses (8) manual">
  <meta name="twitter:description" content="Access a scsi enclosure services (ses) device">
  <meta name="twitter:image" content="https://www.carta.tech/images/sg3-utils-sg_ses-8.png">
  <meta property="og:url" content="https://www.carta.tech/man-pages/man8/sg_ses.8.html" />
  <meta property="og:type" content="website" />
  <meta property="og:title" content="sg_ses (8) manual" />
  <meta property="og:description" content="Access a scsi enclosure services (ses) device" />
  <meta property="fb:app_id" content="1241677679199500" />
  <meta property="og:image" content="https://www.carta.tech/images/sg3-utils-sg_ses-8.png" />
  <meta property="og:image:width" content="600" />
  <meta property="og:image:height" content="315" />
</head>
<body>
  <div class="container final">
          <div class="page-header">
        <h1 class="font-effect-destruction">sg_ses<small> (8)</small></h1>
        <p class="lead">Access a scsi enclosure services (ses) device</p>
      </div>

    <ol class="breadcrumb" itemscope itemtype="http://schema.org/BreadcrumbList">
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/">
      <span itemprop="name">Carta.tech</span>
    </a>
    <meta itemprop="position" content="1" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/">
      <span itemprop="name">Man Pages</span>
    </a>
    <meta itemprop="position" content="2" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/man8/">
      <span itemprop="name">System administration commands</span>
    </a>
    <meta itemprop="position" content="3" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/man8/sg_ses.8.html">
      <span itemprop="name">sg_ses: Access a scsi enclosure services (ses) device</span>
    </a>
    <meta itemprop="position" content="4" />
  </li>
</ol>
<ol class="breadcrumb" itemscope itemtype="http://schema.org/BreadcrumbList">
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/">
      <span itemprop="name">Carta.tech</span>
    </a>
    <meta itemprop="position" content="1" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/packages/">
      <span itemprop="name">Packages</span>
    </a>
    <meta itemprop="position" content="2" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/packages/sg3-utils/">
      <span itemprop="name">sg3-utils</span>
    </a>
    <meta itemprop="position" content="3" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/man8/sg_ses.8.html">
      <span itemprop="name">sg_ses: Access a scsi enclosure services (ses) device</span>
    </a>
    <meta itemprop="position" content="4" />
  </li>
</ol>
    
      <section>
        <h2 class="font-effect-shadow-multiple">SYNOPSIS</h2>
        <div class="sectioncontent">
<p><strong>sg_ses</strong> [<em>--byte1=B1</em>] [<em>--clear=STR</em>] [<em>--control</em>] [<em>--data=H,H...</em>] [<em>--descriptor=DN</em>] [<em>--dev-slot-num=SN</em>] [<em>--eiioe=A_F</em>] [<em>--enumerate</em>] [<em>--filter</em>] [<em>--get=STR</em>] [<em>--help</em>] [<em>--hex</em>] [<em>--index=IIA</em> | <em>--index=TIA,II</em>] [<em>--inner-hex</em>] [<em>--join</em>] [<em>--list</em>] [<em>--nickname=SEN</em>] [<em>--nickid=SEID</em>]  [<em>--page=PG</em>] [<em>--raw</em>] [<em>--readonly</em>] [<em>--sas-addr=SA</em>] [<em>--set=STR</em>] [<em>--status</em>] [<em>--verbose</em>] [<em>--version</em>] <em>DEVICE</em></p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">DESCRIPTION</h2>
        <div class="sectioncontent">
<p>Fetches management information from a SCSI Enclosure Service (SES) device. This utility can also modify the state of a SES device. The <em>DEVICE</em> should be a SES device which may be a dedicated enclosure services processor in which case an INQUIRY response's Peripheral Device Type is 13 [0xd]. Alternatively it may be attached to another type of SCSI device (e.g. a disk) in which case the EncServ bit is set in its INQUIRY response.</p><p>If no options are given (i.e. only the <em>DEVICE</em> argument is given) then the names of all diagnostic pages supported are listed. Most, but not necessarily all, of the named diagnostic pages are defined in the SES standards and drafts. The most recent reference for this utility is the draft SCSI Enclosure Services 3 document T10/2149-D Revision 6 at http://www.t10.org . Existing standards for SES and SES-2 are ANSI INCITS 305-1998 and ANSI INCITS 448-2008 respectively.</p><p>Changing the state of an enclosure (e.g. requesting the "ident" (locate) LED to flash on a disk carrier in an array) is typically done using a read-modify-write cycle. See the section on CHANGING STATE below.</p><p>There is a web page discussing this utility at http://sg.danny.cz/sg/sg_ses.html .</p><p>In the following sections "page" refers to a diagnostic page, either fetched with a SCSI RECEIVE DIAGNOSTIC RESULTS command or sent to the <em>DEVICE</em> with a SCSI SEND DIAGNOSTIC command.</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">OPTIONS</h2>
        <div class="sectioncontent">
<p>Arguments to long options are mandatory for short options as well. The options are arranged in alphabetical order based on the long option name.</p>
<dl class='dl-vertical'>
  <dt>
    <p><strong>-b</strong>, <strong>--byte1</strong>=<em>B1</em></p>
  </dt>
  <dd>
    <p>some modifiable pages may need byte 1 (i.e. the second byte) set. In the Enclosure Control page, byte 1 contains the INFO, NON-CRIT, CRIT and UNRECOV bits. In the Subenclosure String Out, Subenclosure Nickname Control and Download Microcode Control pages, byte 1 is the Subenclosure identifier. Active when the <em>--control</em> and <em>--data=H,H...</em> options are used and the default value is 0. If the <em>--clear=STR</em> or <em>--set=STR</em> option is used then the value read from byte 1 is written back to byte 1. <em>B1</em> is in decimal unless it is prefixed by '0x' or '0X' (or has a trailing 'h' or 'H').</p>
  </dd>
  <dt>
    <p><strong>-C</strong>, <strong>--clear</strong>=<em>STR</em></p>
  </dt>
  <dd>
    <p>Used to clear an element field in the Enclosure Control or Threshold Out page. Must be used together with an indexing option to specify which element is to be changed. The Enclosure Control page is assumed if the <em>--page=PG</em> option is not given. See the STR FORMAT section below.</p>
  </dd>
  <dt>
    <p><strong>-c</strong>, <strong>--control</strong></p>
  </dt>
  <dd>
    <p>will send control information to the <em>DEVICE</em> via a SCSI SEND DIAGNOSTIC command. Cannot give both this option and <em>--status</em>. The Enclosure Control, String Out, Threshold Out, Array Control (obsolete in SES-2), Subenclosure String Out, Subenclosure Nickname Control and Download Microcode pages can be set currently. This option is assumed if either the <em>--clear=STR</em> or <em>--set=STR</em> option is given.</p>
  </dd>
  <dt>
    <p><strong>-d</strong>, <strong>--data</strong>=<em>H,H...</em></p>
  </dt>
  <dd>
    <p>permits a string of comma separated (ASCII) hex bytes to be specified (limit 1024). A (single) space separated string of hex bytes is also allowed but the list needs to be in quotes. This option allows the parameters to a control page to be specified. The string given should not include the first 4 bytes (i.e. page code and length).</p>
  </dd>
  <dt>
    <p><strong>-d</strong>, <strong>--data</strong>=-</p>
  </dt>
  <dd>
    <p>reads one or more data strings from stdin, limit 2048 bytes. stdin may provide ASCII hex as a comma separated list (i.e. as with the <em>--data=H,H...</em> option). Additionally spaces, tabs and line feeds are permitted as separators from stdin . Stops reading stdin when an EOF is detected.</p>
  </dd>
  <dt>
    <p><strong>-d</strong>, <strong>--data</strong>=@<em>FN</em></p>
  </dt>
  <dd>
    <p>reads one or more data strings from the file called <em>FN</em>, limit 2048 bytes. Othewise this option is the same as the previous item that reads from stdin.</p>
  </dd>
  <dt>
    <p><strong>-D</strong>, <strong>--descriptor</strong>=<em>DN</em></p>
  </dt>
  <dd>
    <p>where <em>DN</em> is a descriptor name (string) as found in the Element Descriptor page. This is a medium level indexing alternative to the low level <em>--index=</em> options. If the descriptor name contains a space then <em>DN</em> needs to be surrounded by quotes (single or double) or the space escaped (e.g. preceded by a backslash). See the DESCRIPTOR NAME, DEVICE SLOT NAME AND SAS ADDRESS section below.</p>
  </dd>
  <dt>
    <p><strong>-x</strong>, <strong>--dev-slot-num</strong>=<em>SN</em></p>
  </dt>
  <dd>
    <p>where <em>SN</em> is a device slot number found in the Additional Element Status page. Only entries for FCP and SAS devices (with EIP=1) have device slot numbers. <em>SN</em> must be a number in the range 0 to 255 (inclusive). This is a medium level indexing alternative to the low level <em>--index=</em> options. See the DESCRIPTOR NAME, DEVICE SLOT NAME AND SAS ADDRESS section below.</p>
  </dd>
  <dt>
    <p><strong>-E</strong>, <strong>--eiioe</strong>=<em>A_F</em></p>
  </dt>
  <dd>
    <p><em>A_F</em> is either the string 'auto' or 'force'. There was some fuzziness in the interpretation of the 'element index' field in the Additional Element Status page between SES-2 and SES-3. The EIIOE bit was introduced to resolve the problem but not all enclosures have caught up. Using '--eiioe=force' will decode this page as if the EIIOE bit is set. Using '--eiioe=auto' will decode this page as if the EIIOE bit is set if the first element index in this page is 1 (in other words a heuristic to guess whether the EIIOE bit should be set or not).</p><p>If the enclosure sets the EIIOE bit then this option has no effect. It is recommended that HP JBOD users set --eiioe=auto .</p>
  </dd>
  <dt>
    <p><strong>-e</strong>, <strong>--enumerate</strong></p>
  </dt>
  <dd>
    <p>enumerate all known page names and SES elements when this option is given once. If <em>--enumerate</em> is given twice, then the recognised acronyms for the <em>--clear=STR</em>, <em>--get=STR</em> and <em>--set=STR</em> options are listed. The utility exits after listing this information (so most other options and <em>DEVICE</em> are ignored).</p>
  </dd>
  <dt>
    <p><strong>-f</strong>, <strong>--filter</strong></p>
  </dt>
  <dd>
    <p>cuts down on the amount of output from the Enclosure Status page and the Additional Element Status page. When this option is given, any line which has all its binary flags cleared (i.e. 0) is filtered out (i.e.  ignored). If a line has some other value on it (e.g. a temperature) then it is output. When this option is used twice only elements associated with the "status=ok" field (in the Enclosure status page) are output. The <em>--filter</em> option is useful for reducing the amount of output generated by the <em>--join</em> option.</p>
  </dd>
  <dt>
    <p><strong>-G</strong>, <strong>--get</strong>=<em>STR</em></p>
  </dt>
  <dd>
    <p>Used to read a field in a status element. Must be used together with a an indexing option to specify which element is to be read. By default the Enclosure Status page is read, the only other pages that can be read are the Threshold In and Additional Element Status pages. If a value is found it is output in decimal to stdout (by default) or in hexadecimal preceded by "0x" if the <em>--hex</em> option is also given. See the STR FORMAT section below.</p>
  </dd>
  <dt>
    <p><strong>-h</strong>, <strong>--help</strong></p>
  </dt>
  <dd>
    <p>output the usage message then exit. Since there is a lot of information, it is split into two pages. The most important is shown on the first page. Use this option twice (e.g. '-hh') to output the second page. Note: the <em>--enumerate</em> option might also be viewed as a help or usage type option. And like this option it has a "given twice" form: '-ee'.</p>
  </dd>
  <dt>
    <p><strong>-H</strong>, <strong>--hex</strong></p>
  </dt>
  <dd>
    <p>If the <em>--get=STR</em> option is given then output the value found (if any) in hexadecimal, with a leading "0x". Otherwise output the response in hexadecimal. Ignored when all elements from several pages are being accessed.</p>
  </dd>
  <dt>
    <p><strong>-I</strong>, <strong>--index</strong>=<em>IIA</em></p>
  </dt>
  <dd>
    <p>where <em>IIA</em> is either an individual index (II) or an Element type abbreviation (A). See the INDEXES section below. If the <em>--page=PG</em> option is not given then the Enclosure Status (or Control) page is assumed. May be used with the <em>--join</em> option or one of the <em>--clear=STR</em>, <em>--get=STR</em> or <em>--set=STR</em> options. To enumerate the available Element type abbreviations use the <em>--enumerate</em> option.</p>
  </dd>
  <dt>
    <p><strong>-I</strong>, <strong>--index</strong>=<em>TIA,II</em></p>
  </dt>
  <dd>
    <p>where <em>TIA,II</em> is an type header index (TI) or Element type abbreviation (A) followed by an individual index (II). See the INDEXES section below. If the <em>--page=PG</em> option is not given then the Enclosure Status (or Control) page is assumed. May be used with the <em>--join</em> option or one of the <em>--clear=STR</em>, <em>--get=STR</em> or <em>--set=STR</em> options. To enumerate the available Element type abbreviations use the <em>--enumerate</em> option.</p>
  </dd>
  <dt>
    <p><strong>-i</strong>, <strong>--inner-hex</strong></p>
  </dt>
  <dd>
    <p>the outer levels of a status page are decoded and printed out but the innermost level (e.g. the Element Status Descriptor) is output in hex. Also active with the Additional Element Status and Threshold In pages. Can be used with an indexing option and/or <em>--join</em> options.</p>
  </dd>
  <dt>
    <p><strong>-j</strong>, <strong>--join</strong></p>
  </dt>
  <dd>
    <p>group elements from the Element Descriptor, Enclosure Status and Additional Element Status pages. If this option is given twice then elements from the Threshold In page are also grouped. The order is dictated by the Configuration page. All elements are output unless one of the indexing options is given, in which case only the matching element and its associateds are output. The <em>--filter</em> option can be added to reduce the amount of output generated by this option. See the INDEXES and DESCRIPTOR NAME, DEVICE SLOT NAME AND SAS ADDRESS sections below.</p>
  </dd>
  <dt>
    <p><strong>-l</strong>, <strong>--list</strong></p>
  </dt>
  <dd>
    <p>This option is equivalent to <em>--enumerate</em>. See that option.</p>
  </dd>
  <dt>
    <p><strong>-n</strong>, <strong>--nickname</strong>=<em>SEN</em></p>
  </dt>
  <dd>
    <p>where <em>SEN</em> is the new Subenclosure Nickname. Only the first 32 characters (bytes) of <em>SEN</em> are used, if more are given they are ignored. See the SETTING SUBENCLOSURE NICKNAME section below.</p>
  </dd>
  <dt>
    <p><strong>-N</strong>, <strong>--nickid</strong>=<em>SEID</em></p>
  </dt>
  <dd>
    <p>where <em>SEID</em> is the Subenclosure identifier that the new Nickname (<em>SEN</em>) will be applied to. So <em>SEID</em> must be an existing Subenclosure identifier. The default value is 0 which is the main enclosure.</p>
  </dd>
  <dt>
    <p><strong>-p</strong>, <strong>--page</strong>=<em>PG</em></p>
  </dt>
  <dd>
    <p>where <em>PG</em> is a page abbreviation or code (a number). If <em>PG</em> starts with a digit it is assumed to be in decimal unless prefixed by 0x for hex. Valid range is 0 to 255 (0x0 to 0xff) inclusive. Default is page 'sdp' which is page_code 0 (i.e. "Supported Diagnostic Pages") if no other options are given.</p>
  </dd>
  <dt>
    <p><strong>-r</strong>, <strong>--raw</strong></p>
  </dt>
  <dd>
    <p>outputs the chosen status page in ASCII hex in a format suitable for a later invocation using the <em>--data=</em> option. A page less its first 4 bytes (page code and length) is output. When used twice (e.g. <em>-rr</em>) the full page contents is output in binary to stdout.</p>
  </dd>
  <dt>
    <p><strong>-R</strong>, <strong>--readonly</strong></p>
  </dt>
  <dd>
    <p>open the <em>DEVICE</em> read-only (e.g. in Unix with the O_RDONLY flag). The default is to open it read-write.</p>
  </dd>
  <dt>
    <p><strong>-A</strong>, <strong>--sas-addr</strong>=<em>SA</em></p>
  </dt>
  <dd>
    <p>this is an indexing method for SAS end devices (e.g. SAS disks). The utility will try to find the element or slot in the Additional Element Status page whose SAS address matches <em>SA</em>. For a SAS disk or tape that SAS address is its target port identifier for the port connected to that element or slot. Most SAS disks and tapes have two such target ports, usually numbered consecutively.</p><p>SATA devices in a SAS enclosure often receive "manufactured" target port identifiers from a SAS expander; typically will a SAS address close to but different from the SAS address of the expander itself. Note that this manufactured target port identifier is different from a SATA disk's WWN.</p><p><em>SA</em> is a hex number that is up to 8 digits long. It may have a leading '0x' or '0X' or a trailing 'h' or 'H'. This option is a medium level  indexing alternative to the low level <em>--index=</em> options. See the DESCRIPTOR NAME, DEVICE SLOT NAME AND SAS ADDRESS section below.</p>
  </dd>
  <dt>
    <p><strong>-S</strong>, <strong>--set</strong>=<em>STR</em></p>
  </dt>
  <dd>
    <p>Used to set an element field in the Enclosure Control or Threshold Out page. Must be used together with an indexing option to specify which element is to be changed. The Enclosure Control page is assumed if the <em>--page=PG</em> option is not given. See the STR FORMAT section below.</p>
  </dd>
  <dt>
    <p><strong>-s</strong>, <strong>--status</strong></p>
  </dt>
  <dd>
    <p>will fetch page from the <em>DEVICE</em> via a SCSI RECEIVE DIAGNOSTIC RESULTS command. In the absence of other options that imply modifying a page (e.g. <em>--control</em> or <em>--set=STR</em>) then <em>--status</em> is assumed.</p>
  </dd>
  <dt>
    <p><strong>-v</strong>, <strong>--verbose</strong></p>
  </dt>
  <dd>
    <p>increase the level of verbosity, (i.e. debug output).</p>
  </dd>
  <dt>
    <p><strong>-V</strong>, <strong>--version</strong></p>
  </dt>
  <dd>
    <p>print the version string and then exit.</p>
  </dd>

</dl>

        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">INDEXES</h2>
        <div class="sectioncontent">
<p>An enclosure can have information about its disk and tape drives plus other supporting components like power supplies spread across several pages. Addressing a specific element (overall or individual) within a page is complicated. This section describes low level indexing (i.e. choosing a single element (or a group of related elements) from a large number of elements). If available, the medium level indexing described in the following section (DESCRIPTOR NAME, DEVICE SLOT NAME AND SAS ADDRESS) might be simpler to use.</p><p>The Configuration page is key to low level indexing: it contains a list of "type headers", each of which contains an Element type (e.g. Array Device Slot), a Subenclosure identifier (0 for the primary enclosure) and a "Number of possible elements". Corresponding to each type header, the Enclosure Status page has one "overall" element plus "Number of possible elements" individual elements all of which have the given Element type. For some Element types the "Number of possible elements" will be 0 so the Enclosure Status page has only one "overall" element corresponding to that type header. The Element Descriptor page and the Threshold (In and Out) pages follow the same pattern as the Enclosure Status page.</p><p>The Additional Element Status page is a bit more complicated. It has entries for "Number of possible elements" of certain Element types. It does not have entries corresponding to the "overall" elements. To make the correspondence a little clearer each descriptor in this page optionally contains an "Element Index Present" (EIP) indicator. If EIP is set then each element's "Element Index" field refers to the position of the corresponding element in the Enclosure Status page.</p><p>Addressing a single overall element or a single individual element is done with two indexes: TI and II. Both are origin 0. TI=0 corresponds to the first type header entry which must be a Device Slot or Array Device Slot Element type (according to the SES-2 standard). To address the corresponding overall instance, II is set to -1, otherwise II can be set to the individual instance index. As an alternative to the type header index (TI), an Element type abbreviation (A) optionally followed by a number (e.g. "ps" refers to the first Power Supply Element type; "ps1" refers to the second) can be given.</p><p>One of two command lines variants can be used to specify indexes: <em>--index=TIA,II</em> where <em>TIA</em> is either an type header index (TI) or an Element type abbreviation (A) (e.g. "ps" or "ps1"). <em>II</em> is either an individual index or "-1" to specify the overall element. The second variant is <em>--index=IIA</em> where <em>IIA</em> is either an individual index (II) or an Element type abbreviation (A). When <em>IIA</em> is an individual index then the option is equivalent to <em>--index=0,II</em>. When <em>IIA</em> is an Element type abbreviation then the option is equivalent to <em>--index=A,-1</em>.</p><p>To cope with vendor specific Element types (which should be in the range 128 to 255) the Element type can be given as a number with a leading underscore. For example these are equivalent: <em>--index=arr</em> and <em>--index=_23</em> since the Array Device Slot Element type value is 23. Also <em>--index=ps1</em> and <em>--index=_2_1</em> are equivalent.</p><p>Another example: if the first type header in the Configuration page has has Array Device Slot Element type then <em>--index=0,-1</em> is equivalent to <em>--index=arr</em>. Also <em>--index=arr,3</em> is equivalent to <em>--index=3</em>.</p><p>The <em>--index=</em> options  can be used to reduce the amount of output (e.g. only showing the element associated with the second 12 volt power supply). They may also be used together with with the <em>--clear=STR</em>, <em>--get=STR</em> and <em>--set=STR</em> options which are described in the STR section below.</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">DESCRIPTOR NAME, DEVICE SLOT NAME AND SAS ADDRESS</h2>
        <div class="sectioncontent">
<p>The three options: <em>--descriptor=DN</em>, <em>--dev-slot-num=SN</em> and <em>--sas-addr=SA</em> allow medium level indexing, as an alternative to the low level <em>--index=</em> options. Only one of the three options can be used in an invocation. Each of the three options implicitly set the <em>--join</em> option since they need either the Element Descriptor page or the Additional Element Status page as well as the pages needed by the <em>--index=</em> option.</p><p>These medium level indexing options need support from the SES device and that support is optional. For example the <em>--descriptor=DN</em> needs the Element Descriptor page provided by the SES device however that is optional. Also the provided descriptor names need to be useful, and having descriptor names which are all "0" is not very useful. Also some elements (e.g. overall elements) may not have descriptor names.</p><p>These medium level indexing options can be used to reduce the amount of output (e.g. only showing the elements related to device slot number 3). They may also be used together with with the <em>--clear=STR</em>, <em>--get=STR</em> and <em>--set=STR</em> options which are described in the following section. Note that even if a field can be set (e.g. "do not remove" (dnr)) and that field can be read back with <em>--get=STR</em> confirming that change, the disk array may still ignore it (e.g. because it does not have the mechanism to lock the disk drawer).</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">STR FORMAT</h2>
        <div class="sectioncontent">
<p>The <em>STR</em> operands of the <em>--clear=STR</em>, <em>--get=STR</em> and <em>--set=STR</em> options all have the same structure. There are two forms:</p>
<pre>
      &lt;acronym&gt;[=&lt;value&gt;]
</pre>

<pre>
      &lt;start_byte&gt;:&lt;start_bit&gt;[:&lt;num_bits&gt;][=&lt;value&gt;]
</pre>
<p>The &lt;acronym&gt; is one of a list of common fields (e.g. "ident" and "fault") that the utility converts internally into the second form. The &lt;start_byte&gt; is usually in the range 0 to 3, the &lt;start_bit&gt; must be in the range 0 to 7 and the &lt;num_bits&gt; must be in the range 1 to 64 (default 1). The number of bits are read in the left to right sense of the element tables shown in the various SES draft documents. For example the 8 bits of byte 2 would be represented as 2:7:8 with the most significant bit being 2:7 and the least sugnificant bit being 2:0 .</p><p>The &lt;value&gt; is optional but is ignored if provided to <em>--get=STR</em>. For <em>--set=STR</em> the default &lt;value&gt; is 1 while for <em>--clear=STR</em> the default value is 0 .</p><p>The supported list of &lt;acronym&gt;s can be viewed by using the <em>--enumerate</em> option twice (or "-ee").</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">CHANGING STATE</h2>
        <div class="sectioncontent">
<p>This utility has various techniques for changing the state of a SES device. As noted above this is typically a read-modify-write type operation. Most modifiable pages have a "status" (or "in") page that can be read, and a corresponding "control" (or "out") page that can be written back to change the state of the enclosure.</p><p>The lower level technique provided by this utility involves outputting a "status" page in hex with <em>--raw</em>. Then a text editor can be used to edit the hex (note: to change an Enclosure Control descriptor the SELECT bit needs to be set). Next the control page data can fed back with the <em>--data=H,H...</em> option together with the <em>--control</em> option; the <em>--byte1=B1</em> option may need to be given as well.</p><p>Changes to the Enclosure Control page (and the Threshold Out page) can be done at a higher level. This involves choosing a page (the default in this case is the Enclosure Control page). Next choose an individual or overall element index (or name it with its Element Descriptor string). Then give the element's name (e.g. "ident" for RQST IDENT) or its position within that element (e.g. in an Array Device Slot Control element RQST IDENT is byte 2, bit 1 and 1 bit long ("2:1:1")). Finally a value can be given, if not the value for <em>--set=STR</em> defaults to 1 and for <em>--clear=STR</em> defaults to 0.</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">SETTING SUBENCLOSURE NICKNAME</h2>
        <div class="sectioncontent">
<p>The format of the Subenclosure Nickname control page is different from its corresponding status page. The status page reports all Subenclosure Nicknames (and Subenclosure identifier 0 is the main enclosure) while the control page allows only one of them to be changed. Therefore using the <strong>--data</strong> option technique to change a Subenclosure nickname is difficult (but still possible).</p><p>To simplify changing a Subenclosure nickname the <em>--nickname=SEN</em> and <em>--nickid=SEID</em> options have been added. If the <em>SEN</em> string contains spaces or other punctuation, it should be quoted: surrounded by single or double quotes (or the offending characters escaped). If the <em>--nickid=SEID</em> is not given then a Subenclosure identifier of 0 is assumed. As a guard the <em>--control</em> option must also be given. If the <em>--page=PG</em> option is not given then <em>--page=snic</em> is assumed.</p><p>When <em>--nickname=SEN</em> is given then the Subenclosure Nickname Status page is read to obtain the Generation Code field. That Generation Code together with no more than 32 bytes from the Nickname (<em>SEN</em>) and the Subenclosure Identifier (<em>SEID</em>) are written to the Subenclosure Nickname Control page.</p><p>There is an example of changing a nickname in the EXAMPLES section below.</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">NOTES</h2>
        <div class="sectioncontent">
<p>This utility can be used to fetch arbitrary (i.e. non SES) diagnostic pages (using the SCSI READ DIAGNOSTIC command). To this end the <em>--page=PG</em> and <em>--hex</em> options would be appropriate. Arbitrary diagnostic pages can be sent to a device with the sg_senddiag utility.</p><p>The most troublesome part of the join operation is associating Additional Element Status descriptors correctly. At least one SES device vendor has misinterpreted the SES-2 standard with its "element index" field. The code in this utility interprets the "element index" field as per the SES-2 standard and if that yields an inappropriate Element type, adjusts its indexing to follow that vendor's misinterpretation.</p><p>In draft SES-3 revision 5 the "Door Lock" element name was changed to the "Door" (and an OPEN field was added to the status element). As a consequence the former 'dl' element type abbreviation has been changed to 'do'.</p><p>There is a related command set called SAF-TE (SCSI attached fault-tolerant enclosure) for enclosure (including RAID) status and control. SCSI devices that support SAF-TE report "Processor" peripheral device type (0x3) in their INQUIRY response. See the sg_safte utility in this package or safte-monitor on the Internet.</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">EXAMPLES</h2>
        <div class="sectioncontent">
<p>Examples can also be found at http://sg.danny.cz/sg/sg_ses.html</p><p>The following examples use Linux device names. For suitable device names in other supported Operating Systems see the <a href="../man8/sg3_utils.8.html"><strong>sg3_utils</strong>(8)</a> man page.</p><p>To view the supported pages:</p>
<pre>
   sg_ses /dev/bsg/6:0:2:0
</pre>
<p>To view the Configuration Diagnostic page:</p>
<pre>
   sg_ses --page=cf /dev/bsg/6:0:2:0
</pre>
<p>To view the Enclosure Status page:</p>
<pre>
   sg_ses --page=es /dev/bsg/6:0:2:0
</pre>
<p>To get the (attached) SAS address of that device (which is held in the Additional Element Sense page (page 10)) printed on hex:</p>
<pre>
   sg_ses -p aes -D ArrayDevice07 -G at_sas_addr -H /dev/sg3
</pre>
<p>To collate the information in the Enclosure Status, Element Descriptor and Additional Element Status pages the <em>--join</em> option can be used:</p>
<pre>
   sg_ses --join /dev/sg3
</pre>
<p>This will produce a lot of output. To filter out lines that don't contain much information add the <em>--filter</em> option:</p>
<pre>
   sg_ses --join --filter /dev/sg3
</pre>
<p>Fields in the various elements of the Enclosure Control and Threshold pages can be changed with the <em>--clear=STR</em> and <em>--set=STR</em> options. [All modifiable pages can be changed with the <em>--raw</em> and <em>--data=H,H...</em> options.] The following example looks at making the "ident" LED (also called "locate") flash on "ArrayDevice07" which is a disk (or more precisely the carrier drawer the disk is in):</p>
<pre>
   sg_ses --index=7 --set=2:1:1 /dev/sg3
</pre>
<p>If the Element Descriptor diagnostic page shows that "ArrayDevice07" is the descriptor name associated with element index 7 then this invocation is equivalent to the previous one:</p>
<pre>
   sg_ses --descriptor=ArrayDevice07 --set=2:1:1 /dev/sg3
</pre>
<p>Further the byte 2, bit 1 (for 1 bit) field in the Array Device Slot Control element is RQST IDENT for asking a disk carrier to flash a LED so it can be located. In this case "ident" (or "locate") is accepted as an acronym for that field:</p>
<pre>
   sg_ses --descriptor=ArrayDevice07 --set=ident /dev/sg3
</pre>
<p>To stop that LED flashing:</p>
<pre>
   sg_ses --dev-slot-num=7 --clear=ident /dev/sg3
</pre>
<p>The above assumes the descriptor name 'ArrayDevice07' corresponds to device slot number 7.</p><p>Now for an example of a more general but lower level technique for changing a modifiable diagnostic page. The String (In and Out) diagnostics page is relatively simple (compared with the Enclosure Status/Control page). However the use of this lower level technique is awkward involving three steps: read, modify then write. First check the current String (In) page contents:</p>
<pre>
   sg_ses --page=str /dev/bsg/6:0:2:0
</pre>
<p>Now the "read" step. The following command will send the contents of the String page (from byte 4 onwards) to stdout. The output will be in ASCII hex with pairs of hex digits representing a byte, 16 pairs per line, space separated. The redirection puts stdout in a file called "t":</p>
<pre>
   sg_ses --page=str --raw /dev/bsg/6:0:2:0 &gt; t
</pre>
<p>Then with the aid of the SES-3 document (in revision 3: section 6.1.6) use your favourite editor to change t. The changes can be sent to the device with:</p>
<pre>
   sg_ses --page=str --control --data=- /dev/bsg/6:0:2:0 &lt; t
</pre>
<p>If the above is successful, the String page should have been changed. To check try:</p>
<pre>
   sg_ses --page=str /dev/bsg/6:0:2:0
</pre>
<p>To change the nickname on the main enclosure:</p>
<pre>
   sg_ses --nickname='1st enclosure' --control /dev/bsg/6:0:2:0
</pre>

        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">EXIT STATUS</h2>
        <div class="sectioncontent">
<p>The exit status of sg_ses is 0 when it is successful. Otherwise see the <a href="../man8/sg3_utils.8.html"><strong>sg3_utils</strong>(8)</a> man page.</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">AUTHORS</h2>
        <div class="sectioncontent">
<p>Written by Douglas Gilbert.</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">REPORTING BUGS</h2>
        <div class="sectioncontent">
<p>Report bugs to &lt;dgilbert at interlog dot com&gt;.</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">COPYRIGHT</h2>
        <div class="sectioncontent">
<p>Copyright &copy; 2004-2014 Douglas Gilbert</p><p>This software is distributed under a FreeBSD license. There is NO warranty; not even for MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">RELATED TO sg_ses&hellip;</h2>
        <div class="sectioncontent">
<p><strong>sg_inq, sg_safte, sg_senddiag, sg3_utils (in sg3_utils package);</strong> <strong>safte-monitor (Internet)</strong></p>
        </div>
      </section>
<nav>
  <ul class="pager">
   <li class="previous"><a href="sg_senddiag.8.html"><span aria-hidden="true">&larr;</span> sg_senddiag.8: Performs a scsi send diagnostic command</a></li>
   <li class="next"><a href="sg_start.8.html">sg_start.8: Send scsi start stop unit command: start, stop, load or eject medium <span aria-hidden="true">&rarr;</span></a></li>
  </ul>
</nav>

  </div>
  <!-- jQuery (necessary for Bootstrap's JavaScript plugins) -->
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.2/jquery.min.js"></script>
  <!-- Include all compiled plugins (below), or include individual files as needed -->
  <script src="/js/bootstrap.min.js"></script>
  <script>
    (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
      (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
      m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
    })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

    ga('create', 'UA-60781387-1', 'auto');
    ga('send', 'pageview');

  </script>
</body>
</html>
