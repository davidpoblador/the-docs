<!DOCTYPE html>
<html lang="en">
<head>
  <link href="https://fonts.googleapis.com/css?family=Fira+Mono:400,700&effect=destruction%7Cshadow-multiple" rel="stylesheet" type="text/css">
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>dacs_autologin_ssl: Use an ssl client certificate to automatically obtain dacs credentials</title>
  <link href="/css/bootstrap.min.css" rel="stylesheet">
  <link href="/css/manpage.css" rel="stylesheet">
  <link rel="apple-touch-icon" sizes="57x57" href="/icons/apple-icon-57x57.png">
  <link rel="apple-touch-icon" sizes="60x60" href="/icons/apple-icon-60x60.png">
  <link rel="apple-touch-icon" sizes="72x72" href="/icons/apple-icon-72x72.png">
  <link rel="apple-touch-icon" sizes="76x76" href="/icons/apple-icon-76x76.png">
  <link rel="apple-touch-icon" sizes="114x114" href="/icons/apple-icon-114x114.png">
  <link rel="apple-touch-icon" sizes="120x120" href="/icons/apple-icon-120x120.png">
  <link rel="apple-touch-icon" sizes="144x144" href="/icons/apple-icon-144x144.png">
  <link rel="apple-touch-icon" sizes="152x152" href="/icons/apple-icon-152x152.png">
  <link rel="apple-touch-icon" sizes="180x180" href="/icons/apple-icon-180x180.png">
  <link rel="icon" type="image/png" sizes="192x192" href="/icons/android-icon-192x192.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/icons/favicon-32x32.png">
  <link rel="icon" type="image/png" sizes="96x96" href="/icons/favicon-96x96.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/icons/favicon-16x16.png">
  <link rel="manifest" href="/icons/manifest.json">
  <meta name="msapplication-TileColor" content="#ffffff">
  <meta name="msapplication-TileImage" content="/icons/ms-icon-144x144.png">
  <meta name="theme-color" content="#ffffff">
  <meta name="description" content="Use an ssl client certificate to automatically obtain dacs credentials">
  <meta name="twitter:card" content="summary_large_image">
  <meta name="twitter:site" content="@CartaTech">
  <meta name="twitter:creator" content="@CartaTech">
  <meta name="twitter:title" content="dacs_autologin_ssl (8) manual">
  <meta name="twitter:description" content="Use an ssl client certificate to automatically obtain dacs credentials">
  <meta name="twitter:image" content="https://www.carta.tech/images/dacs-dacs_autologin_ssl-8.png">
  <meta property="og:url" content="https://www.carta.tech/man-pages/man8/dacs_autologin_ssl.8.html" />
  <meta property="og:type" content="website" />
  <meta property="og:title" content="dacs_autologin_ssl (8) manual" />
  <meta property="og:description" content="Use an ssl client certificate to automatically obtain dacs credentials" />
  <meta property="fb:app_id" content="1241677679199500" />
  <meta property="og:image" content="https://www.carta.tech/images/dacs-dacs_autologin_ssl-8.png" />
  <meta property="og:image:width" content="600" />
  <meta property="og:image:height" content="315" />
</head>
<body>
  <div class="container final">
          <div class="page-header">
        <h1 class="font-effect-destruction">dacs_autologin_ssl<small> (8)</small></h1>
        <p class="lead">Use an ssl client certificate to automatically obtain dacs credentials</p>
      </div>

    <ol class="breadcrumb" itemscope itemtype="http://schema.org/BreadcrumbList">
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/">
      <span itemprop="name">Carta.tech</span>
    </a>
    <meta itemprop="position" content="1" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/">
      <span itemprop="name">Man Pages</span>
    </a>
    <meta itemprop="position" content="2" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/man8/">
      <span itemprop="name">System administration commands</span>
    </a>
    <meta itemprop="position" content="3" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/man8/dacs_autologin_ssl.8.html">
      <span itemprop="name">dacs_autologin_ssl: Use an ssl client certificate to automatically obtain dacs credentials</span>
    </a>
    <meta itemprop="position" content="4" />
  </li>
</ol>
<ol class="breadcrumb" itemscope itemtype="http://schema.org/BreadcrumbList">
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/">
      <span itemprop="name">Carta.tech</span>
    </a>
    <meta itemprop="position" content="1" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/packages/">
      <span itemprop="name">Packages</span>
    </a>
    <meta itemprop="position" content="2" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/packages/dacs/">
      <span itemprop="name">dacs</span>
    </a>
    <meta itemprop="position" content="3" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/man8/dacs_autologin_ssl.8.html">
      <span itemprop="name">dacs_autologin_ssl: Use an ssl client certificate to automatically obtain dacs credentials</span>
    </a>
    <meta itemprop="position" content="4" />
  </li>
</ol>
    
      <section>
        <h2 class="font-effect-shadow-multiple">SYNOPSIS</h2>
        <div class="sectioncontent">
<p><strong>dacs_autologin_ssl</strong> [<em>\m[blue]</em><strong>dacsoptions</strong>\m[]\s-2\u[1]\d\s+2]</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">DESCRIPTION</h2>
        <div class="sectioncontent">
<p>This program is part of the <strong>DACS</strong> suite.</p><p>The <strong>dacs_autologin_ssl</strong> CGI program, in conjunction with appropriate <strong>DACS</strong> configuration and a valid SSL client certificate, can be used for user-transparent <strong>DACS</strong> authentication. A user is not prompted for a username or password, and no user-visible sign-on procedure takes place.</p><p>At present, the program merely acts as glue to indirectly invoke \m[blue]<a href="../man8/dacs_authenticate.8.html"><strong>dacs_authenticate</strong>(8)</a></strong>\m[]\s-2\u[2]\d\s+2. Any valid X.509 certificate can be used for this purpose, including a self-signed certificate. Please refer to the \m[blue]<strong>OpenSSL</strong>\m[]\s-2\u[3]\d\s+2 documentation for additional information about certificates.</p><p>This program can be used to automatically and transparently authenticate a user that has been issued an SSL client certificate. When an unauthenticated user is denied access to a <strong>DACS</strong>-wrapped resource, she can be automatically authenticated and redirected back to the resource without any user input or action. This assumes that the client certificate is sent automatically by the browser and that no additional user prompting is needed by the authenticating jurisdiction. For redirection to the original resource to work properly. the original request must have used the GET method.</p><p><strong>Note</strong></p><p>The cert style of authentication <em>must</em> be configured when <strong>dacs_autologin_ssl</strong> is being used as described. See \m[blue]<a href="../man8/dacs_authenticate.8.html"><strong>dacs_authenticate</strong>(8)</a></strong>\m[]\s-2\u[4]\d\s+2.</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">OPTIONS</h2>
        <div class="sectioncontent">
<p>Only the standard \m[blue]<strong></strong><em>dacsoptions</em>\m[]\s-2\u[1]\d\s+2 command line arguments are recognized.</p><h3>Web Service Arguments</h3>
<p><strong>dasc_autologin_ssl</strong> understands the following CGI arguments.</p><p><em>DACS_ERROR_URL</em></p><p>When <strong>dacs_autologin_ssl</strong> is invoked as a result of <strong>DACS</strong> event handling, <em>DACS_ERROR_URL</em> is automatically passed to it by \m[blue]<a href="../man8/dacs_acs.8.html"><strong>dacs_acs</strong>(8)</a></strong>\m[]\s-2\u[5]\d\s+2 and represents the original URL to which access was denied. In typical use, <strong>dacs_autologin_ssl</strong> is configured as the handler for a <strong>dacs_acs</strong><strong>902</strong> error code (NO_AUTH, "Authentication by DACS is required"). <strong>dacs_autologin_ssl</strong> then invokes <strong>dacs_authenticate</strong>. If <strong>DACS</strong> authentication is successful, <strong>dacs_authenticate</strong> ordinarily issues a browser redirect to the value of <em>DACS_ERROR_URL</em> and a cookie bearing the credentials are set in the browser (but see the <em>NOREDIRECT</em> argument). This argument is optional; if not provided, the jurisdiction&apos;s configured post-authentication action will occur.</p><p><em>NOREDIRECT</em></p><p>If this optional argument is present (its value is immaterial), <strong>dacs_autologin_ssl</strong> instructs <strong>dacs_authenticate</strong> to <em>not</em> issue a browser redirect to the value of <em>DACS_ERROR_URL</em>.</p><p><em>AUTH_JURISDICTION</em></p><p>If this optional argument is present, it gives the name of the jurisdiction at which authentication should take place. By default, <strong>dacs_authenticate</strong> is invoked at the same jurisdiction as <strong>dacs_autologin_ssl</strong>.</p><p><em>CERT_NAME_ATTR</em></p><p>This optional argument explicitly names the attribute in the certificate from which to set <em>USERNAME</em>. The default value is <em>SSL_CLIENT_S_DN_CN</em>. It is an error if the specified attribute name does not exist. Giving the value of <em>CERT_NAME_ATTR</em> as the empty string results in the empty string being passed as the value of <em>USERNAME</em>.</p>

        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">EXAMPLE</h2>
        <div class="sectioncontent">
<p>A typical use of <strong>dacs_autologin_ssl</strong> is to transparently authenticate a user via his SSL client certificate.</p><p>In the <strong>DACS</strong> configuration file, dacs.conf, jurisdiction EXAMPLE is configured as follows (this excerpt from a configuration file uses fictitious domain names):</p>
<pre>
&lt;Jurisdiction uri="example.com"&gt;

JURISDICTION_NAME "EXAMPLE"

ACS_ERROR_HANDLER "NO_AUTH https://example.com/cgi-bin/dacs/dacs_autologin_ssl"

&lt;!-- Authenticate using an SSL certificate. --&gt;
&lt;Auth id="cert"&gt;
URL "https://example.com/cgi-bin/dacs/local_cert_authenticate"
STYLE "cert"
CONTROL "sufficient"
CERT_CA_PATH "/usr/local/apache2.2/conf/ssl.crt"
CERT_NAME_ATTR "SSL_CLIENT_S_DN_CN"
&lt;/Auth&gt;

&lt;/Jurisdiction&gt;
</pre>
<p>Assume the following access control rule applies to the request:</p>
<pre>
&lt;acl_rule status="enabled"&gt;
  &lt;services&gt;
    &lt;service url_pattern=&apos;/foo.html&apos;/&gt;
  &lt;/services&gt;

  &lt;rule order="allow,deny"&gt;
    &lt;allow&gt;
      user("auth")
    &lt;/allow&gt;
  &lt;/rule&gt;
&lt;/acl_rule&gt;


</pre>
<p>The preceding configuration results in the following behaviour. An unauthenticated user accessing foo.html (https://example.com/foo.html) is denied access because the rule governing that web page tests for authentication and no credentials are sent with the request. As a result, the \m[blue]<strong>ACS_ERROR_HANDLER</strong>\m[]\s-2\u[6]\d\s+2 directive causes the user to be redirected to <strong>dacs_autologin_ssl</strong>, which redirects the user to <strong>dacs_authenticate</strong>, passing arguments as necessary.</p><p><strong>dacs_authenticate</strong> then invokes \m[blue]<strong>local_cert_authenticate</strong>\m[]\s-2\u[4]\d\s+2, passing it the client&apos;s certificate. The certificate is validated and a username is extracted from it and mapped to a valid <strong>DACS</strong> username.</p><p>If authentication succeeds, <strong>DACS</strong> credentials for the jurisdiction EXAMPLE are generated. These credentials are returned to the browser within a cookie and the browser is redirected to the value of <em>DACS_ERROR_URL</em> (recall that <em>DACS_ERROR_URL</em> was passed to <strong>dacs_autologin_ssl</strong> by <strong>dacs_acs</strong> when the <strong>902</strong> handler was invoked and was forwarded to <strong>dacs_authenticate</strong>). In this example the user is redirected to https://example.com/foo.html. Given the rule above, this time the user&apos;s request for foo.html will be granted.</p><p><strong>dacs_autologin_ssl</strong> may also be used as the target of an explicit authentication link. For example:</p>
<pre>
&lt;a href="https://example.com/cgi-bin/dacs/dacs_autologin_ssl?&#92;
AUTH_JURISDICTION=EXAMPLE&&#92;
DACS_ERROR_URL=https://example.com/cgi-bin/dacs/dacs_current_credentials"&gt;Login&lt;/a&gt;
</pre>
<p>Following the link should result in the user being authenticated and redirected to the specified URL.</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">DIAGNOSTICS</h2>
        <div class="sectioncontent">
<p>The program exits 0 if everything was fine, 1 if an error occurred.</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">RELATED TO dacs_autologin_ssl&hellip;</h2>
        <div class="sectioncontent">
<p>\m[blue]<a href="../man8/dacs_authenticate.8.html"><strong>dacs_authenticate</strong>(8)</a></strong>\m[]\s-2\u[2]\d\s+2, \m[blue]<a href="../man8/dacs_acs.8.html"><strong>dacs_acs</strong>(8)</a></strong>\m[]\s-2\u[5]\d\s+2, \m[blue]<strong>dacs.conf</strong>(5)</strong>\m[]\s-2\u[7]\d\s+2, \m[blue]<a href="../man8/autologin.8.html"><strong>autologin</strong>(8)</a></strong>\m[]\s-2\u[8]\d\s+2</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">AUTHOR</h2>
        <div class="sectioncontent">
<p>Distributed Systems Software (\m[blue]<strong>www.dss.ca</strong>\m[]\s-2\u[9]\d\s+2)</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">COPYING</h2>
        <div class="sectioncontent">
<p>Copyright2003-2012 Distributed Systems Software. See the \m[blue]<strong>LICENSE</strong>\m[]\s-2\u[10]\d\s+2 file that accompanies the distribution for licensing information.</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">NOTES</h2>
        <div class="sectioncontent">

<dl class='dl-vertical'>
  <dt>
     1.
  </dt>
  <dd>
    <p>dacsoptions</p><p>http://dacs.dss.ca/man/dacs.1.html#dacsoptions</p>
  </dd>
  <dt>
     2.
  </dt>
  <dd>
    <p><a href="../man8/dacs_authenticate.8.html"><strong>dacs_authenticate</strong>(8)</a></p><p>http://dacs.dss.ca/man/dacs_authenticate.8.html</p>
  </dd>
  <dt>
     3.
  </dt>
  <dd>
    <p>OpenSSL</p><p>http://www.openssl.org</p>
  </dd>
  <dt>
     4.
  </dt>
  <dd>
    <p><a href="../man8/dacs_authenticate.8.html"><strong>dacs_authenticate</strong>(8)</a></p><p>http://dacs.dss.ca/man/dacs_authenticate.8.html#local_cert_authenticate</p>
  </dd>
  <dt>
     5.
  </dt>
  <dd>
    <p><a href="../man8/dacs_acs.8.html"><strong>dacs_acs</strong>(8)</a></p><p>http://dacs.dss.ca/man/dacs_acs.8.html</p>
  </dd>
  <dt>
     6.
  </dt>
  <dd>
    <p>ACS_ERROR_HANDLER</p><p>http://dacs.dss.ca/man/dacs.conf.5.html#ACS_ERROR_HANDLER</p>
  </dd>
  <dt>
     7.
  </dt>
  <dd>
    <p><strong>dacs.conf</strong>(5)</p><p>http://dacs.dss.ca/man/dacs.conf.5.html</p>
  </dd>
  <dt>
     8.
  </dt>
  <dd>
    <p><a href="../man8/autologin.8.html"><strong>autologin</strong>(8)</a></p><p>http://dacs.dss.ca/man/autologin.8.html</p>
  </dd>
  <dt>
     9.
  </dt>
  <dd>
    <p>www.dss.ca</p><p>http://www.dss.ca</p>
  </dd>
  <dt>
    10.
  </dt>
  <dd>
    <p>LICENSE</p><p>http://dacs.dss.ca/man/../misc/LICENSE</p>
  </dd>

</dl>

        </div>
      </section>
<nav>
  <ul class="pager">
   <li class="previous"><a href="dacs_authenticate.8.html"><span aria-hidden="true">&larr;</span> dacs_authenticate.8: Dacs authentication service</a></li>
   <li class="next"><a href="dacs_conf.8.html">dacs_conf.8: Display dacs configuration directives <span aria-hidden="true">&rarr;</span></a></li>
  </ul>
</nav>

  </div>
  <!-- jQuery (necessary for Bootstrap's JavaScript plugins) -->
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.2/jquery.min.js"></script>
  <!-- Include all compiled plugins (below), or include individual files as needed -->
  <script src="/js/bootstrap.min.js"></script>
  <script>
    (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
      (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
      m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
    })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

    ga('create', 'UA-60781387-1', 'auto');
    ga('send', 'pageview');

  </script>
</body>
</html>
