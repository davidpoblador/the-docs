<!DOCTYPE html>
<html lang="en">
<head>
  <link href="https://fonts.googleapis.com/css?family=Fira+Mono:400,700&effect=destruction%7Cshadow-multiple" rel="stylesheet" type="text/css">
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>irk: Relay for shipping notifications to irc servers</title>
  <link href="/css/bootstrap.min.css" rel="stylesheet">
  <link href="/css/manpage.css" rel="stylesheet">
  <link rel="apple-touch-icon" sizes="57x57" href="/icons/apple-icon-57x57.png">
  <link rel="apple-touch-icon" sizes="60x60" href="/icons/apple-icon-60x60.png">
  <link rel="apple-touch-icon" sizes="72x72" href="/icons/apple-icon-72x72.png">
  <link rel="apple-touch-icon" sizes="76x76" href="/icons/apple-icon-76x76.png">
  <link rel="apple-touch-icon" sizes="114x114" href="/icons/apple-icon-114x114.png">
  <link rel="apple-touch-icon" sizes="120x120" href="/icons/apple-icon-120x120.png">
  <link rel="apple-touch-icon" sizes="144x144" href="/icons/apple-icon-144x144.png">
  <link rel="apple-touch-icon" sizes="152x152" href="/icons/apple-icon-152x152.png">
  <link rel="apple-touch-icon" sizes="180x180" href="/icons/apple-icon-180x180.png">
  <link rel="icon" type="image/png" sizes="192x192" href="/icons/android-icon-192x192.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/icons/favicon-32x32.png">
  <link rel="icon" type="image/png" sizes="96x96" href="/icons/favicon-96x96.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/icons/favicon-16x16.png">
  <link rel="manifest" href="/icons/manifest.json">
  <meta name="msapplication-TileColor" content="#ffffff">
  <meta name="msapplication-TileImage" content="/icons/ms-icon-144x144.png">
  <meta name="theme-color" content="#ffffff">
  <meta name="description" content="Relay for shipping notifications to irc servers">
  <meta name="twitter:card" content="summary_large_image">
  <meta name="twitter:site" content="@CartaTech">
  <meta name="twitter:creator" content="@CartaTech">
  <meta name="twitter:title" content="irk (8) manual">
  <meta name="twitter:description" content="Relay for shipping notifications to irc servers">
  <meta name="twitter:image" content="https://www.carta.tech/images/irker-irk-8.png">
  <meta property="og:url" content="https://www.carta.tech/man-pages/man8/irk.8.html" />
  <meta property="og:type" content="website" />
  <meta property="og:title" content="irk (8) manual" />
  <meta property="og:description" content="Relay for shipping notifications to irc servers" />
  <meta property="fb:app_id" content="1241677679199500" />
  <meta property="og:image" content="https://www.carta.tech/images/irker-irk-8.png" />
  <meta property="og:image:width" content="600" />
  <meta property="og:image:height" content="315" />
</head>
<body>
  <div class="container final">
          <div class="page-header">
        <h1 class="font-effect-destruction">irk<small> (8)</small></h1>
        <p class="lead">Relay for shipping notifications to irc servers</p>
      </div>

    <ol class="breadcrumb" itemscope itemtype="http://schema.org/BreadcrumbList">
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/">
      <span itemprop="name">Carta.tech</span>
    </a>
    <meta itemprop="position" content="1" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/">
      <span itemprop="name">Man Pages</span>
    </a>
    <meta itemprop="position" content="2" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/man8/">
      <span itemprop="name">System administration commands</span>
    </a>
    <meta itemprop="position" content="3" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/man8/irk.8.html">
      <span itemprop="name">irk: Relay for shipping notifications to irc servers</span>
    </a>
    <meta itemprop="position" content="4" />
  </li>
</ol>
<ol class="breadcrumb" itemscope itemtype="http://schema.org/BreadcrumbList">
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/">
      <span itemprop="name">Carta.tech</span>
    </a>
    <meta itemprop="position" content="1" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/packages/">
      <span itemprop="name">Packages</span>
    </a>
    <meta itemprop="position" content="2" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/packages/irker/">
      <span itemprop="name">irker</span>
    </a>
    <meta itemprop="position" content="3" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/man8/irk.8.html">
      <span itemprop="name">irk: Relay for shipping notifications to irc servers</span>
    </a>
    <meta itemprop="position" content="4" />
  </li>
</ol>
    
      <section>
        <h2 class="font-effect-shadow-multiple">SYNOPSIS</h2>
        <div class="sectioncontent">
<p><strong>irkerd</strong> [-c&nbsp;<em>ca-file</em>] [-d&nbsp;<em>debuglevel</em>] [-e&nbsp;<em>cert-file</em>] [-l&nbsp;<em>logfile</em>] [-H&nbsp;<em>host</em>] [-n&nbsp;<em>nick</em>] [-p&nbsp;<em>password</em>] [-i&nbsp;<em>IRC-URL</em>] [-V] [-h] [<em>message&nbsp;text</em>]</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">DESCRIPTION</h2>
        <div class="sectioncontent">
<p>irkerd is a specialized write-only IRC client intended to be used for shipping notification messages to IRC channels. The use case in mind when it was designed was broadcasting notifications from commit hooks in version-control systems.</p><p>The main advantage of relaying through this daemon over individual scripted sends from applications is that it can maintain connection state for multiple channels, rather than producing obnoxious join/leave channel spam on every message.</p><p>irkerd is a socket server that listens on for UDP or TCP packets on port 6659 for textual request lines containing JSON objects and terminated by a newline. Each JSON object must have two members: "to" specifying a destination or destination list, and "privmsg" specifying the message text. Examples:</p>
<pre>
{"to":"irc://chat.freenode.net/git-ciabot", "privmsg":"Hello, world!"}
{"to":["irc://chat.freenode.net/#git-ciabot","irc://chat.freenode.net/#gpsd"],"privmsg":"Multichannel test"}
{"to":"irc://chat.hypothetical.net:6668/git-ciabot", "privmsg":"Hello, world!"}
{"to":"ircs://chat.hypothetical.net/git-private?key=topsecret", "privmsg":"Keyed channel test"}
{"to":"ircs://:topsecret@chat.example.net/git-private", "privmsg":"Password-protected server test"}
</pre>
<p>If the channel part of the URL does not have one of the prefix characters &ldquo;#&rdquo;, &ldquo;&&rdquo;, or &ldquo;+&rdquo;, a &ldquo;#&rdquo; will be prepended to it before shipping - <em>unless</em> the channel part has the suffix ",isnick" (which is unconditionally removed).</p><p>The host part of the URL may have a port-number suffix separated by a colon, as shown in the third example; otherwise irkerd sends plaintext messages to the default 6667 IRC port of each server, and SSL/TLS messages to 6697.</p><p>The password for password-protected servers can be set using the usual &ldquo;[{username}:{password}@]{host}:{port}&rdquo; defined in RFC 3986, as shown in the fifth example. Non-empty URL usernames override the default &ldquo;irker&rdquo; username.</p><p>When the &ldquo;to&rdquo; URL uses the &ldquo;ircs&rdquo; scheme (as shown in the fourth and fifth examples), the connection to the IRC server is made via SSL/TLS (vs. a plaintext connection with the &ldquo;irc&rdquo; scheme). To connect via SSL/TLS with Python 2.x, you need to explicitly declare the certificate authority file used to verify server certificates. For example, &ldquo;-c /etc/ssl/certs/ca-certificates.crt&rdquo;. In Python 3.2 and later, you can still set this option to declare a custom CA file, but irkerd; if you don&apos;t set it irkerd will use OpenSSL&apos;s default file (using Python&apos;s &ldquo;ssl.SSLContext.set_default_verify_paths&rdquo;). In Python 3.2 and later, &ldquo;ssl.match_hostname&rdquo; is used to ensure the server certificate belongs to the intended host, as well as being signed by a trusted CA.</p><p>To join password-protected (mode +k) channels, the channel part of the URL may be followed with a query-string indicating the channel key, of the form &ldquo;?secret&rdquo; or &ldquo;?key=secret&rdquo;, where &ldquo;secret&rdquo; is the channel key.</p><p>An empty message is legal and will cause irkerd to join or maintain a connection to the target channels without actually emitting a message. This may be useful for advertising that an instance is up and running, or for joining a channel to log its traffic.</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">OPTIONS</h2>
        <div class="sectioncontent">
<p>irkerd takes the following options:</p><p>-d</p><p>Takes a following value, setting the debugging level from it; possible values are &apos;critical&apos;, &apos;error&apos;, &apos;warning&apos;, &apos;info&apos;, &apos;debug&apos;. This option will generally only be of interest to developers, as the logs are designed to help trace irkerd&apos;s internal state. These tracing logs are independent of the traffic logs controlled by &ldquo;-l&rdquo;.</p><p>Logging will be to standard error (if irkerd is running in the foreground) or to &ldquo;/dev/syslog&rdquo; with facility "daemon" (if irkerd is running in the background). The background-ness of irkerd is determined by comparing the process group id with the process group associated with the terminal attached to stdout (with non-matches for background processes). We assume you aren&apos;t running irkerd in Windows or another OS that doesn&apos;t support &ldquo;os.getpgrp&rdquo; or &ldquo;tcgetpgrp&rdquo;. We assume that if stdout is attached to a TTY associated with the same process group as irkerd, you do intend to log to stderr and not syslog.</p><p>-e</p><p>Takes a following filename in pem format and uses it to authenticate to the IRC server. You must be connecting to the IRC server over SSL for this to function properly. This is commonly known as &ldquo;CertFP.&rdquo;</p><p>-e</p><p>Takes a following filename in pem format and uses it to authenticate to the IRC server. You must be connecting to the IRC server over SSL for this to function properly. This is commonly known as &ldquo;CertFP.&rdquo;</p><p>-l</p><p>Takes a following filename, logs traffic to that file. Each log line consists of three |-separated fields; a numeric timestamp in Unix time, the FQDN of the sending server, and the message data.</p><p>-H</p><p>Takes a following hostname, and binds to that address when listening for messages. irkerd binds to localhost by default, but you may want to use your host&apos;s public address to listen on a local network. Listening on a public interface is not recommended, as it makes spamming IRC channels very easy.</p><p>-n</p><p>Takes a following value, setting the nick to be used. If the nick contains a numeric format element (such as %03d) it is used to generate suffixed fallback names in the event of a nick collision.</p><p>-p</p><p>Takes a following value, setting a nickserv password to be used. If given, this password is shipped to authenticate the nick on receipt of a welcome message.</p><p>-i</p><p>Immediate mode, to be run in foreground. Takes a following following value interpreted as a channel URL. May take a second argument giving a message string; if the sedond argument is absent the message is read from standard input (and may contain newlines). Sends the message, then quits.</p><p>-V</p><p>Write the program version to stdout and terminate.</p><p>-h</p><p>Print usage instructions and terminate.</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">LIMITATIONS</h2>
        <div class="sectioncontent">
<p>Requests via UDP optimizes for lowest latency and network load by avoiding TCP connection setup time; the cost is that delivery is not reliable in the face of packet loss.</p><p>An irkerd instance with a publicly-accessible request socket could complicate blocking of IRC spam by making it easy for spammers to submit while hiding their IP addresses; the better way to deploy, then, is on places like project-hosting sites where the irkerd socket can be visible from commit-hook code but not exposed to the outside world. Priming your firewall with blocklists of IP addresses known to spew spam is always a good idea.</p><p>The absence of any option to set the service port is deliberate. If you think you need to do that, you have a problem better solved at your firewall.</p><p>IRC has a message length limit of 510 bytes; generate your privmsg attribute values with appropriate care.</p><p>IRC ignores any text after an embedded newline. Be aware that irkerd will turn payload strings with embedded newlines into multiple IRC sends to avoid having message data discarded.</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">RELATED TO irk&hellip;</h2>
        <div class="sectioncontent">
<p><a href="../man1/irkerhook.1.html"><strong>irkerhook</strong>(1)</a>,</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">AUTHOR</h2>
        <div class="sectioncontent">
<p>Eric S. Raymond &lt;esr@snark.thyrsus.com&gt;. See the project page at \m[blue]<strong>http://www.catb.org/~esr/irker</strong>\m[] for updates and other resources, including an installable repository hook script.</p>
        </div>
      </section>
<nav>
  <ul class="pager">
   <li class="previous"><a href="irdaping.8.html"><span aria-hidden="true">&larr;</span> irdaping.8: Sends irda test frames</a></li>
   <li class="next"><a href="irkerd.8.html">irkerd.8: Relay for shipping notifications to irc servers <span aria-hidden="true">&rarr;</span></a></li>
  </ul>
</nav>

  </div>
  <!-- jQuery (necessary for Bootstrap's JavaScript plugins) -->
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.2/jquery.min.js"></script>
  <!-- Include all compiled plugins (below), or include individual files as needed -->
  <script src="/js/bootstrap.min.js"></script>
  <script>
    (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
      (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
      m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
    })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

    ga('create', 'UA-60781387-1', 'auto');
    ga('send', 'pageview');

  </script>
</body>
</html>
