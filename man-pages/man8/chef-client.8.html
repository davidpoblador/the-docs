<!DOCTYPE html>
<html lang="en">
<head>
  <link href="https://fonts.googleapis.com/css?family=Fira+Mono:400,700&effect=destruction%7Cshadow-multiple" rel="stylesheet" type="text/css">
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>chef-client: The man page for the chef-client command line tool.  a chef-client is an agent that runs locally on every node that is registered with the server. when a chef-client is run, it will perform all of the steps that are required to bring the node into the expected state, including: registering and authenticating the node with the server building the node object synchronizing cookbooks compiling the resource collection by loading each of the required cookbooks, including recipes, attributes, and all other dependencies taking the appropriate and required actions to configure the node looking for exceptions and notifications, handling each as required  the chef-client executable can be run as a command-line tool. a client.rb file is used to specify the configuration details for the chef-client. this file is the default configuration file and is loaded every time the chef-client executable is run. the chef-client executable can be run as a daemon. on unix- and linux-based machines, the configuration file is located at: /etc/chef/client.rb. on microsoft windows machines, the configuration file is located at c:chefclient.rb.</title>
  <link href="/css/bootstrap.min.css" rel="stylesheet">
  <link href="/css/manpage.css" rel="stylesheet">
  <link rel="apple-touch-icon" sizes="57x57" href="/icons/apple-icon-57x57.png">
  <link rel="apple-touch-icon" sizes="60x60" href="/icons/apple-icon-60x60.png">
  <link rel="apple-touch-icon" sizes="72x72" href="/icons/apple-icon-72x72.png">
  <link rel="apple-touch-icon" sizes="76x76" href="/icons/apple-icon-76x76.png">
  <link rel="apple-touch-icon" sizes="114x114" href="/icons/apple-icon-114x114.png">
  <link rel="apple-touch-icon" sizes="120x120" href="/icons/apple-icon-120x120.png">
  <link rel="apple-touch-icon" sizes="144x144" href="/icons/apple-icon-144x144.png">
  <link rel="apple-touch-icon" sizes="152x152" href="/icons/apple-icon-152x152.png">
  <link rel="apple-touch-icon" sizes="180x180" href="/icons/apple-icon-180x180.png">
  <link rel="icon" type="image/png" sizes="192x192" href="/icons/android-icon-192x192.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/icons/favicon-32x32.png">
  <link rel="icon" type="image/png" sizes="96x96" href="/icons/favicon-96x96.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/icons/favicon-16x16.png">
  <link rel="manifest" href="/icons/manifest.json">
  <meta name="msapplication-TileColor" content="#ffffff">
  <meta name="msapplication-TileImage" content="/icons/ms-icon-144x144.png">
  <meta name="theme-color" content="#ffffff">
  <meta name="description" content="The man page for the chef-client command line tool.  a chef-client is an agent that runs locally on every node that is registered with the server. when a chef-client is run, it will perform all of the steps that are required to bring the node into the expected state, including: registering and authenticating the node with the server building the node object synchronizing cookbooks compiling the resource collection by loading each of the required cookbooks, including recipes, attributes, and all other dependencies taking the appropriate and required actions to configure the node looking for exceptions and notifications, handling each as required  the chef-client executable can be run as a command-line tool. a client.rb file is used to specify the configuration details for the chef-client. this file is the default configuration file and is loaded every time the chef-client executable is run. the chef-client executable can be run as a daemon. on unix- and linux-based machines, the configuration file is located at: /etc/chef/client.rb. on microsoft windows machines, the configuration file is located at c:chefclient.rb.">
  <meta name="twitter:card" content="summary_large_image">
  <meta name="twitter:site" content="@CartaTech">
  <meta name="twitter:creator" content="@CartaTech">
  <meta name="twitter:title" content="chef-client (8) manual">
  <meta name="twitter:description" content="The man page for the chef-client command line tool.  a chef-client is an agent that runs locally on every node that is registered with the server. when a chef-client is run, it will perform all of the steps that are required to bring the node into the expected state, including: registering and authenticating the node with the server building the node object synchronizing cookbooks compiling the resource collection by loading each of the required cookbooks, including recipes, attributes, and all other dependencies taking the appropriate and required actions to configure the node looking for exceptions and notifications, handling each as required  the chef-client executable can be run as a command-line tool. a client.rb file is used to specify the configuration details for the chef-client. this file is the default configuration file and is loaded every time the chef-client executable is run. the chef-client executable can be run as a daemon. on unix- and linux-based machines, the configuration file is located at: /etc/chef/client.rb. on microsoft windows machines, the configuration file is located at c:chefclient.rb.">
  <meta name="twitter:image" content="https://www.carta.tech/images/chef-chef-client-8.png">
  <meta property="og:url" content="https://www.carta.tech/man-pages/man8/chef-client.8.html" />
  <meta property="og:type" content="website" />
  <meta property="og:title" content="chef-client (8) manual" />
  <meta property="og:description" content="The man page for the chef-client command line tool.  a chef-client is an agent that runs locally on every node that is registered with the server. when a chef-client is run, it will perform all of the steps that are required to bring the node into the expected state, including: registering and authenticating the node with the server building the node object synchronizing cookbooks compiling the resource collection by loading each of the required cookbooks, including recipes, attributes, and all other dependencies taking the appropriate and required actions to configure the node looking for exceptions and notifications, handling each as required  the chef-client executable can be run as a command-line tool. a client.rb file is used to specify the configuration details for the chef-client. this file is the default configuration file and is loaded every time the chef-client executable is run. the chef-client executable can be run as a daemon. on unix- and linux-based machines, the configuration file is located at: /etc/chef/client.rb. on microsoft windows machines, the configuration file is located at c:chefclient.rb." />
  <meta property="fb:app_id" content="1241677679199500" />
  <meta property="og:image" content="https://www.carta.tech/images/chef-chef-client-8.png" />
  <meta property="og:image:width" content="600" />
  <meta property="og:image:height" content="315" />
</head>
<body>
  <div class="container final">
          <div class="page-header">
        <h1 class="font-effect-destruction">chef-client<small> (8)</small></h1>
        <p class="lead">The man page for the chef-client command line tool.  a chef-client is an agent that runs locally on every node that is registered with the server. when a chef-client is run, it will perform all of the steps that are required to bring the node into the expected state, including: registering and authenticating the node with the server building the node object synchronizing cookbooks compiling the resource collection by loading each of the required cookbooks, including recipes, attributes, and all other dependencies taking the appropriate and required actions to configure the node looking for exceptions and notifications, handling each as required  the chef-client executable can be run as a command-line tool. a client.rb file is used to specify the configuration details for the chef-client. this file is the default configuration file and is loaded every time the chef-client executable is run. the chef-client executable can be run as a daemon. on unix- and linux-based machines, the configuration file is located at: /etc/chef/client.rb. on microsoft windows machines, the configuration file is located at c:chefclient.rb.</p>
      </div>

    <ol class="breadcrumb" itemscope itemtype="http://schema.org/BreadcrumbList">
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/">
      <span itemprop="name">Carta.tech</span>
    </a>
    <meta itemprop="position" content="1" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/">
      <span itemprop="name">Man Pages</span>
    </a>
    <meta itemprop="position" content="2" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/man8/">
      <span itemprop="name">System administration commands</span>
    </a>
    <meta itemprop="position" content="3" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/man8/chef-client.8.html">
      <span itemprop="name">chef-client: The man page for the chef-client command line tool.  a chef-client is an agent that runs locally on every node that is registered with the server. when a chef-client is run, it will perform all of the steps that are required to bring the node into the expected state, including: registering and authenticating the node with the server building the node object synchronizing cookbooks compiling the resource collection by loading each of the required cookbooks, including recipes, attributes, and all other dependencies taking the appropriate and required actions to configure the node looking for exceptions and notifications, handling each as required  the chef-client executable can be run as a command-line tool. a client.rb file is used to specify the configuration details for the chef-client. this file is the default configuration file and is loaded every time the chef-client executable is run. the chef-client executable can be run as a daemon. on unix- and linux-based machines, the configuration file is located at: /etc/chef/client.rb. on microsoft windows machines, the configuration file is located at c:chefclient.rb.</span>
    </a>
    <meta itemprop="position" content="4" />
  </li>
</ol>
<ol class="breadcrumb" itemscope itemtype="http://schema.org/BreadcrumbList">
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/">
      <span itemprop="name">Carta.tech</span>
    </a>
    <meta itemprop="position" content="1" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/packages/">
      <span itemprop="name">Packages</span>
    </a>
    <meta itemprop="position" content="2" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/packages/chef/">
      <span itemprop="name">chef</span>
    </a>
    <meta itemprop="position" content="3" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/man8/chef-client.8.html">
      <span itemprop="name">chef-client: The man page for the chef-client command line tool.  a chef-client is an agent that runs locally on every node that is registered with the server. when a chef-client is run, it will perform all of the steps that are required to bring the node into the expected state, including: registering and authenticating the node with the server building the node object synchronizing cookbooks compiling the resource collection by loading each of the required cookbooks, including recipes, attributes, and all other dependencies taking the appropriate and required actions to configure the node looking for exceptions and notifications, handling each as required  the chef-client executable can be run as a command-line tool. a client.rb file is used to specify the configuration details for the chef-client. this file is the default configuration file and is loaded every time the chef-client executable is run. the chef-client executable can be run as a daemon. on unix- and linux-based machines, the configuration file is located at: /etc/chef/client.rb. on microsoft windows machines, the configuration file is located at c:chefclient.rb.</span>
    </a>
    <meta itemprop="position" content="4" />
  </li>
</ol>
    
      <section>
        <h2 class="font-effect-shadow-multiple">OPTIONS</h2>
        <div class="sectioncontent">
<p>This command has the following syntax:</p>
<pre>
chef-client OPTION VALUE OPTION VALUE ...
</pre>
<p>This command has the following options:</p>
<dl class='dl-vertical'>
  <dt>
    <p><strong></strong><strong>-A</strong><strong>, </strong><strong>--fatal-windows-admin-check</strong><strong></strong></p>
  </dt>
  <dd>
    <p>Indicates that a chef-client run should fail if the chef-client does not have administrator privileges in Microsoft Windows.</p>
  </dd>
  <dt>
    <p><strong></strong><strong>--chef-zero-port PORT</strong><strong></strong></p>
  </dt>
  <dd>
    <p>The port on which chef-zero will listen.</p>
  </dd>
  <dt>
    <p><strong></strong><strong>-F FORMAT</strong><strong>, </strong><strong>--format FORMAT</strong><strong></strong></p>
  </dt>
  <dd>
    <p>The output format: <strong>doc</strong> (default) or <strong>min</strong>.</p><p>Use <strong>doc</strong> to print the progress of the chef-client run using full strings that display a summary of updates as they occur.</p><p>Use <strong>min</strong> to print the progress of the chef-client run using single characters. A summary of updates is printed at the end of the chef-client run. A dot (<strong>.</strong>) is printed for events that do not have meaningful status information, such as loading a file or synchronizing a cookbook. For resources, a dot (<strong>.</strong>) is printed when the resource is up to date, an <strong>S</strong> is printed when the resource is skipped by <strong>not_if</strong> or <strong>only_if</strong>, and a <strong>U</strong> is printed when the resource is updated.</p><p>Other formatting options are available when those formatters are configured in the client.rb file using the <strong>add_formatter</strong> option.</p>
  </dd>
  <dt>
    <p><strong></strong><strong>--force-formatter</strong><strong></strong></p>
  </dt>
  <dd>
    <p>Indicates that formatter output will be used instead of logger output.</p>
  </dd>
  <dt>
    <p><strong></strong><strong>--force-logger</strong><strong></strong></p>
  </dt>
  <dd>
    <p>Indicates that logger output will be used instead of formatter output.</p>
  </dd>
  <dt>
    <p><strong></strong><strong>-g GROUP</strong><strong>, </strong><strong>--group GROUP</strong><strong></strong></p>
  </dt>
  <dd>
    <p>The name of the group that owns a process. This is required when starting any executable as a daemon.</p>
  </dd>
  <dt>
    <p><strong></strong><strong>-h</strong><strong>, </strong><strong>--help</strong><strong></strong></p>
  </dt>
  <dd>
    <p>Shows help for the command.</p>
  </dd>
  <dt>
    <p><strong></strong><strong>-i SECONDS</strong><strong>, </strong><strong>--interval SECONDS</strong><strong></strong></p>
  </dt>
  <dd>
    <p>The frequency (in seconds) at which the chef-client runs. Default value: <strong>1800</strong>.</p>
  </dd>
  <dt>
    <p><strong></strong><strong>-j PATH</strong><strong>, </strong><strong>--json-attributes PATH</strong><strong></strong></p>
  </dt>
  <dd>
    <p>The path to a file that contains JSON data.</p>
  </dd>
  <dt>
    <p><strong></strong><strong>-k KEY_FILE</strong><strong>, </strong><strong>--client_key KEY_FILE</strong><strong></strong></p>
  </dt>
  <dd>
    <p>The location of the file which contains the client key. Default value: <strong>/etc/chef/client.pem</strong>.</p>
  </dd>
  <dt>
    <p><strong></strong><strong>-K KEY_FILE</strong><strong>, </strong><strong>--validation_key KEY_FILE</strong><strong></strong></p>
  </dt>
  <dd>
    <p>The location of the file which contains the key used when a chef-client is registered with a server. A validation key is signed using the <strong>validation_client_name</strong> for authentication. Default value: <strong>/etc/chef/validation.pem</strong>.</p>
  </dd>
  <dt>
    <p><strong></strong><strong>-l LEVEL</strong><strong>, </strong><strong>--log_level LEVEL</strong><strong></strong></p>
  </dt>
  <dd>
    <p>The level of logging that will be stored in a log file.</p>
  </dd>
  <dt>
    <p><strong></strong><strong>-L LOGLOCATION</strong><strong>, </strong><strong>--logfile c</strong><strong></strong></p>
  </dt>
  <dd>
    <p>The location in which log file output files will be saved. If this location is set to something other than <strong>STDOUT</strong>, standard output logging will still be performed (otherwise there would be no output other than to a file). This is recommended when starting any executable as a daemon. Default value: <strong>STDOUT</strong>.</p>
  </dd>
  <dt>
    <p><strong></strong><strong>--[no-]color</strong><strong></strong></p>
  </dt>
  <dd>
    <p>Indicates whether colored output will be used. Default setting: <strong>--color</strong>.</p>
  </dd>
  <dt>
    <p><strong></strong><strong>-N NODE_NAME</strong><strong>, </strong><strong>--node-name NODE_NAME</strong><strong></strong></p>
  </dt>
  <dd>
    <p>The name of the node.</p>
  </dd>
  <dt>
    <p><strong></strong><strong>-o RUN_LIST_ITEM</strong><strong>, </strong><strong>--override-runlist RUN_LIST_ITEM</strong><strong></strong></p>
  </dt>
  <dd>
    <p>Replace the current run list with the specified items.</p>
  </dd>
  <dt>
    <p><strong></strong><strong>--once</strong><strong></strong></p>
  </dt>
  <dd>
    <p>Indicates that the chef-client is run once and that interval and splay options are cancelled.</p>
  </dd>
  <dt>
    <p><strong></strong><strong>-P PID_FILE</strong><strong>, </strong><strong>--pid PID_FILE</strong><strong></strong></p>
  </dt>
  <dd>
    <p>The location in which a process identification number (pid) is saved. An executable, when started as a daemon, will write the pid to the specified file. Default value: <strong>/tmp/name-of-executable.pid</strong>.</p>
  </dd>
  <dt>
    <p><strong></strong><strong>-R</strong><strong>, </strong><strong>--enable-reporting</strong><strong></strong></p>
  </dt>
  <dd>
    <p>Indicates that data collection reporting is enabled during a chef-client run.</p>
  </dd>
  <dt>
    <p><strong></strong><strong>RECIPE_FILE</strong><strong></strong></p>
  </dt>
  <dd>
    <p>The path to a recipe. For example, if a recipe file is in the current directory, use <strong>recipe_file.rb</strong>. This is typically used with the <strong>--local-mode</strong> option.</p>
  </dd>
  <dt>
    <p><strong></strong><strong>-s SECONDS</strong><strong>, </strong><strong>--splay SECONDS</strong><strong></strong></p>
  </dt>
  <dd>
    <p>A number (in seconds) to add to the <strong>interval</strong> that is used to determine the frequency of chef-client runs. This number can help prevent server load when there are many clients running at the same time.</p>
  </dd>
  <dt>
    <p><strong></strong><strong>-S CHEF_SERVER_URL</strong><strong>, </strong><strong>--server CHEF_SERVER_URL</strong><strong></strong></p>
  </dt>
  <dd>
    <p>The URL for the server.</p>
  </dd>
  <dt>
    <p><strong></strong><strong>-u USER</strong><strong>, </strong><strong>--user USER</strong><strong></strong></p>
  </dt>
  <dd>
    <p>The user that owns a process. This is required when starting any executable as a daemon.</p>
  </dd>
  <dt>
    <p><strong></strong><strong>-v</strong><strong>, </strong><strong>--version</strong><strong></strong></p>
  </dt>
  <dd>
    <p>The version of the chef-client.</p>
  </dd>
  <dt>
    <p><strong></strong><strong>-W</strong><strong>, </strong><strong>--why-run</strong><strong></strong></p>
  </dt>
  <dd>
    <p>Indicates that the executable will be run in why-run mode, which is a type of chef-client run that does everything except modify the system. Use why-run mode to understand why the chef-client makes the decisions that it makes and to learn more about the current and proposed state of the system.</p>
  </dd>
  <dt>
    <p><strong></strong><strong>-z</strong><strong>, </strong><strong>--local-mode</strong><strong></strong></p>
  </dt>
  <dd>
    <p>Indicates that the chef-client will be run in local mode, which allows all commands that work against the server to also work against the local chef-repo..</p>
  </dd>

</dl>

        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">RUN WITH ELEVATED PRIVILEGES</h2>
        <div class="sectioncontent">
<p>The chef-client may need to be run with elevated privileges in order to get a recipe to converge correctly. On UNIX and UNIX-like operating systems this can be done by running the command as root. On Microsoft Windows this can be done by running the command prompt as an administrator.</p><h3>Linux</h3>
<p>On Linux, the following error sometimes occurs when the permissions used to run the chef-client are incorrect:</p>
<pre>
$ chef-client
[Tue, 29 Nov 2011 19:46:17 -0800] INFO: *** Chef 10.X.X ***
[Tue, 29 Nov 2011 19:46:18 -0800] WARN: Failed to read the private key /etc/chef/client.pem: #&lt;Errno::EACCES: Permission denied - /etc/chef/client.pem&gt;
</pre>
<p>This can be resolved by running the command as root. There are a few ways this can be done:</p><ul>
<li><p>Log in as root and then run the chef-client</p></li><li><p>Use <strong>su</strong> to become the root user, and then run the chef-client. For example:</p>
<pre>
$ su
</pre>
<p>and then:</p>
<pre>
$ chef-client
</pre>
</li><li><p>Use the sudo utility</p>
<pre>
$ sudo chef-client
</pre>
</li><li><p>Give a user access to read <strong>/etc/chef</strong> and also the files accessed by the chef-client. This requires super user privileges and, as such, is not a recommended approach</p></li>
</ul>
<h3>Windows</h3>
<p>On Microsoft Windows, running without elevated privileges (when they are necessary) is an issue that fails silently. It will appear that the chef-client completed its run successfully, but the changes will not have been made. When this occurs, do one of the following to run the chef-client as the administrator:</p><ul>
<li><p>Log in to the administrator account. (This is not the same as an account in the administrator&apos;s security group.)</p></li><li><p>Run the chef-client process from the administrator account while being logged into another account. Run the following command:</p>
<pre>
$ runas /user:Administrator "cmd /C chef-client"
</pre>
<p>This will prompt for the administrator account password.</p></li><li><p>Open a command prompt by right-clicking on the command prompt application, and then selecting <strong>Run as administrator</strong>. After the command window opens, the chef-client can be run as the administrator</p></li>
</ul>

        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">EXAMPLES</h2>
        <div class="sectioncontent">
<p><strong>Start a Chef run when the chef-client is running as a daemon</strong></p><p>A chef-client that is running as a daemon can be woken up and started by sending the process a <strong>SIGUSR1</strong>. For example, to trigger a chef-client run on a machine running Linux:</p>
<pre>
$ sudo killall -USR1 chef-client
</pre>
<p><strong>Start a Chef run manually</strong></p>
<pre>
$ ps auxw|grep chef-client
</pre>
<p>to return something like:</p>
<pre>
root           66066   0.9  0.0  2488880    264 s001  S+   10:26AM   0:03.05
/System/Library/Frameworks/Ruby.framework/Versions/1.8/usr/bin/ruby /usr/bin/chef-client -i 3600 -s 20
</pre>
<p>and then enter:</p>
<pre>
$ sudo kill -USR1 66066
</pre>

        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">AUTHOR</h2>
        <div class="sectioncontent">
<p>Chef</p>
        </div>
      </section>
<nav>
  <ul class="pager">
   <li class="previous"><a href="checksecurity.8.html"><span aria-hidden="true">&larr;</span> checksecurity.8: Run a collection of simple system checks</a></li>
   <li class="next"><a href="chef-solo.8.html">chef-solo.8: The man page for the chef-solo command line tool.  chef-solo is an open source version of the chef-client that allows using cookbooks with nodes without requiring access to a server. chef-solo runs locally and requires that a cookbook (and any of its dependencies) be on the same physical disk as the node. chef-solo is a limited-functionality version of the chef-client and does not support the following: node data storage search indexes centralized distribution of cookbooks a centralized api that interacts with and integrates infrastructure components authentication or authorization persistent attributes  the chef-solo executable can be run as a command-line tool. <span aria-hidden="true">&rarr;</span></a></li>
  </ul>
</nav>

  </div>
  <!-- jQuery (necessary for Bootstrap's JavaScript plugins) -->
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.2/jquery.min.js"></script>
  <!-- Include all compiled plugins (below), or include individual files as needed -->
  <script src="/js/bootstrap.min.js"></script>
  <script>
    (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
      (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
      m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
    })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

    ga('create', 'UA-60781387-1', 'auto');
    ga('send', 'pageview');

  </script>
</body>
</html>
