<!DOCTYPE html>
<html lang="en">
<head>
  <link href="https://fonts.googleapis.com/css?family=Fira+Mono:400,700&effect=destruction%7Cshadow-multiple" rel="stylesheet" type="text/css">
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>metche: Reducing root bus factor</title>
  <link href="/css/bootstrap.min.css" rel="stylesheet">
  <link href="/css/manpage.css" rel="stylesheet">
  <link rel="apple-touch-icon" sizes="57x57" href="/icons/apple-icon-57x57.png">
  <link rel="apple-touch-icon" sizes="60x60" href="/icons/apple-icon-60x60.png">
  <link rel="apple-touch-icon" sizes="72x72" href="/icons/apple-icon-72x72.png">
  <link rel="apple-touch-icon" sizes="76x76" href="/icons/apple-icon-76x76.png">
  <link rel="apple-touch-icon" sizes="114x114" href="/icons/apple-icon-114x114.png">
  <link rel="apple-touch-icon" sizes="120x120" href="/icons/apple-icon-120x120.png">
  <link rel="apple-touch-icon" sizes="144x144" href="/icons/apple-icon-144x144.png">
  <link rel="apple-touch-icon" sizes="152x152" href="/icons/apple-icon-152x152.png">
  <link rel="apple-touch-icon" sizes="180x180" href="/icons/apple-icon-180x180.png">
  <link rel="icon" type="image/png" sizes="192x192" href="/icons/android-icon-192x192.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/icons/favicon-32x32.png">
  <link rel="icon" type="image/png" sizes="96x96" href="/icons/favicon-96x96.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/icons/favicon-16x16.png">
  <link rel="manifest" href="/icons/manifest.json">
  <meta name="msapplication-TileColor" content="#ffffff">
  <meta name="msapplication-TileImage" content="/icons/ms-icon-144x144.png">
  <meta name="theme-color" content="#ffffff">
  <meta name="description" content="Reducing root bus factor">
  <meta name="twitter:card" content="summary_large_image">
  <meta name="twitter:site" content="@CartaTech">
  <meta name="twitter:creator" content="@CartaTech">
  <meta name="twitter:title" content="metche (8) manual">
  <meta name="twitter:description" content="Reducing root bus factor">
  <meta name="twitter:image" content="https://www.carta.tech/images/metche-metche-8.png">
  <meta property="og:url" content="https://www.carta.tech/man-pages/man8/metche.8.html" />
  <meta property="og:type" content="website" />
  <meta property="og:title" content="metche (8) manual" />
  <meta property="og:description" content="Reducing root bus factor" />
  <meta property="fb:app_id" content="1241677679199500" />
  <meta property="og:image" content="https://www.carta.tech/images/metche-metche-8.png" />
  <meta property="og:image:width" content="600" />
  <meta property="og:image:height" content="315" />
</head>
<body>
  <div class="container final">
          <div class="page-header">
        <h1 class="font-effect-destruction">metche<small> (8)</small></h1>
        <p class="lead">Reducing root bus factor</p>
      </div>

    <ol class="breadcrumb" itemscope itemtype="http://schema.org/BreadcrumbList">
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/">
      <span itemprop="name">Carta.tech</span>
    </a>
    <meta itemprop="position" content="1" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/">
      <span itemprop="name">Man Pages</span>
    </a>
    <meta itemprop="position" content="2" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/man8/">
      <span itemprop="name">System administration commands</span>
    </a>
    <meta itemprop="position" content="3" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/man8/metche.8.html">
      <span itemprop="name">metche: Reducing root bus factor</span>
    </a>
    <meta itemprop="position" content="4" />
  </li>
</ol>
<ol class="breadcrumb" itemscope itemtype="http://schema.org/BreadcrumbList">
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/">
      <span itemprop="name">Carta.tech</span>
    </a>
    <meta itemprop="position" content="1" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/packages/">
      <span itemprop="name">Packages</span>
    </a>
    <meta itemprop="position" content="2" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/packages/metche/">
      <span itemprop="name">metche</span>
    </a>
    <meta itemprop="position" content="3" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/man8/metche.8.html">
      <span itemprop="name">metche: Reducing root bus factor</span>
    </a>
    <meta itemprop="position" content="4" />
  </li>
</ol>
    
      <section>
        <h2 class="font-effect-shadow-multiple">SYNOPSIS</h2>
        <div class="sectioncontent">
<ul>
<li>
<pre>
metche&nbsp;[-h&nbsp;VSERVER]&nbsp;report&nbsp;(stable|testing|unstable)-YYYYMMDDHHMM
metche&nbsp;[-h&nbsp;VSERVER]&nbsp;list
metche&nbsp;[-h&nbsp;VSERVER]&nbsp;stabilize&nbsp;testing-YYYYMMDDHHMM

</pre>
</li>
</ul>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">DESCRIPTION</h2>
        <div class="sectioncontent">
<p>metche is a tool meant to ease collective system administration by monitoring changes in the system configuration.</p><p>metche basic usage is to monitor changes in a directory, usually /etc; optionally, metche can also monitor:</p>
<dl class='dl-vertical'>
  <dt>
    \[bu]
  </dt>
  <dd>
    <p>one or more user maintained changelog files,</p>
  </dd>
  <dt>
    \[bu]
  </dt>
  <dd>
    <p>the state of Debian packages and versions.</p>
  </dd>

</dl>
<p>metche should be installed with a cronjob that regularly runs to automatically save the system state as needed. These states are saved in a way similar to the Debian development model:</p>
<dl class='dl-vertical'>
  <dt>
    \[bu]
  </dt>
  <dd>
    <p><em>unstable</em> states are saved as soon as a change is detected. They are kept until a new <em>testing</em> state appears.</p>
  </dd>
  <dt>
    \[bu]
  </dt>
  <dd>
    <p><em>testing</em> states is created from the last <em>unstable</em> state that has not been changed after a short amount of time (by default, one hour). Old <em>unstable</em> states are deleted afterwards.</p>
  </dd>
  <dt>
    \[bu]
  </dt>
  <dd>
    <p><em>stable</em> states are created from the last <em>testing</em> state, either manually, or after a long amount of time (by default, 3 days). Old <em>testing</em> states are deleted afterwards.</p>
  </dd>

</dl>
<p>When a new <em>testing</em> state is saved, an email is sent to a configurable address, giving an overwiew of the differences with the previous <em>testing</em>. A notification is also sent when a new <em>stable</em> state is saved.</p><p>metche\[aq]s configuration is read from /etc/metche.conf. Various settings like changelog monitoring or time between system state switches are described there.</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">OPTIONS</h2>
        <div class="sectioncontent">
<p>If -h&nbsp;VSERVER is specified, the VServer <em>VSERVER</em> is operated on instead of the host system. This, along with the VSNAMES option, allows one to monitor several VServers running on the system.</p><p>One of the following commands must be specified on the command line:</p>
<dl class='dl-vertical'>
  <dt>
    <p><strong>report</strong></p>
  </dt>
  <dd>
    <p>When run with the <em>report</em> command, metche displays a report against the specified saved state, or if unspecified, against the latest testing state. This is useful when you have broken your system and want to know which changes have been made since a given, known working, system state.</p>
  </dd>
  <dt>
    <p><strong>list</strong></p>
  </dt>
  <dd>
    <p>When run with the <em>list</em> command, metche displays a list of all the saved states.</p>
  </dd>
  <dt>
    <p><strong>stabilize</strong></p>
  </dt>
  <dd>
    <p>When run with the <em>stabilize</em> command, metche turns a "testing state" into a "stable state". By default, it will use the last "testing state", but this can be overridden by giving a specific state as argument.</p>
  </dd>
  <dt>
    <p><strong>cron</strong></p>
  </dt>
  <dd>
    <p>This command should not be called manually, but used from a cronjob. When called, it can perform various operations like: saving "unstable", "testing" or "stable" states as needed and sending reports and notification if configured to do so. This command does not support the -h option.</p>
  </dd>

</dl>

        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">FILES</h2>
        <div class="sectioncontent">
<p>/etc/metche.conf contains metche configuration.</p><p>When configured to monitor one changelog, CHANGELOG_FILE (default: /root/Changelog).</p><p>When configured to monitor multiple changelogs, CHANGELOG_DIR/*/Changelog (default: /root/changelogs).</p><p>System states are saved in BACKUP_DIR (default: /var/lib/metche).</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">SECURITY</h2>
        <div class="sectioncontent">
<p>metche is able to use GnuPG to encrypt the email it sends, but does not by default; just enable the ENCRYPT_EMAIL configuration option, and make sure EMAIL_ADDRESS\[aq] public key is in root\[aq]s keyring, trusted enough to be used blindly by metche. If EMAIL_ADDRESS is an email alias or mailing-list\[aq]s address, you probably want to use the group option in /root/.gnupg/gpg.conf so that metche reports are encrypted for every person subscribed to this alias or mailing-list; for more information, see <a href="../man1/gpg.1.html"><strong>gpg</strong>(1)</a>.</p><p>When DO_DETAILS is enabled and ENCRYPT_EMAIL is disabled, metche sends in <em>clear text email</em> the changes made to the watched directory... either make sure that the EXCLUDES configuration variable prevents it to send sensitive information, or triple check that secure connections will be used end-to-end on the email path. If unsure, set EMAIL_ADDRESS configuration variable to a local mailbox. Please note that EMAIL_ADDRESS is not used for VServers: a VServer\[aq]s report messages are sent to its root email address.</p><p>metche stores, in BACKUP_DIR (default: /var/lib/metche), various backups of WATCHED_DIR. Make sure that this backup place is at least as secured as the source.</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">BUGS</h2>
        <div class="sectioncontent">
<p>See metche\[aq]s ticket system (https://labs.riseup.net/code/projects/metche/issues) for known bugs, missing features, and the development road-map.</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">AUTHORS</h2>
        <div class="sectioncontent">
<p>metche and this manual page were written by the boum.org collective, and are now maintained by the metche developers collective &lt;metche@lists.riseup.net&gt;.</p>
        </div>
      </section>
<nav>
  <ul class="pager">
   <li class="previous"><a href="metasys.8.html"><span aria-hidden="true">&larr;</span> metasys.8: Driver for meta system ups equipment</a></li>
   <li class="next"><a href="mge-shut.8.html">mge-shut.8: Driver for shut protocol ups equipment <span aria-hidden="true">&rarr;</span></a></li>
  </ul>
</nav>

  </div>
  <!-- jQuery (necessary for Bootstrap's JavaScript plugins) -->
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.2/jquery.min.js"></script>
  <!-- Include all compiled plugins (below), or include individual files as needed -->
  <script src="/js/bootstrap.min.js"></script>
  <script>
    (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
      (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
      m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
    })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

    ga('create', 'UA-60781387-1', 'auto');
    ga('send', 'pageview');

  </script>
</body>
</html>
