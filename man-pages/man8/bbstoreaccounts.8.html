<!DOCTYPE html>
<html lang="en">
<head>
  <link href="https://fonts.googleapis.com/css?family=Fira+Mono:400,700&effect=destruction%7Cshadow-multiple" rel="stylesheet" type="text/css">
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>bbstoreaccounts: Box backup store accounts manager</title>
  <link href="/css/bootstrap.min.css" rel="stylesheet">
  <link href="/css/manpage.css" rel="stylesheet">
  <link rel="apple-touch-icon" sizes="57x57" href="/icons/apple-icon-57x57.png">
  <link rel="apple-touch-icon" sizes="60x60" href="/icons/apple-icon-60x60.png">
  <link rel="apple-touch-icon" sizes="72x72" href="/icons/apple-icon-72x72.png">
  <link rel="apple-touch-icon" sizes="76x76" href="/icons/apple-icon-76x76.png">
  <link rel="apple-touch-icon" sizes="114x114" href="/icons/apple-icon-114x114.png">
  <link rel="apple-touch-icon" sizes="120x120" href="/icons/apple-icon-120x120.png">
  <link rel="apple-touch-icon" sizes="144x144" href="/icons/apple-icon-144x144.png">
  <link rel="apple-touch-icon" sizes="152x152" href="/icons/apple-icon-152x152.png">
  <link rel="apple-touch-icon" sizes="180x180" href="/icons/apple-icon-180x180.png">
  <link rel="icon" type="image/png" sizes="192x192" href="/icons/android-icon-192x192.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/icons/favicon-32x32.png">
  <link rel="icon" type="image/png" sizes="96x96" href="/icons/favicon-96x96.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/icons/favicon-16x16.png">
  <link rel="manifest" href="/icons/manifest.json">
  <meta name="msapplication-TileColor" content="#ffffff">
  <meta name="msapplication-TileImage" content="/icons/ms-icon-144x144.png">
  <meta name="theme-color" content="#ffffff">
  <meta name="description" content="Box backup store accounts manager">
  <meta name="twitter:card" content="summary_large_image">
  <meta name="twitter:site" content="@CartaTech">
  <meta name="twitter:creator" content="@CartaTech">
  <meta name="twitter:title" content="bbstoreaccounts (8) manual">
  <meta name="twitter:description" content="Box backup store accounts manager">
  <meta name="twitter:image" content="https://www.carta.tech/images/boxbackup-server-bbstoreaccounts-8.png">
  <meta property="og:url" content="https://www.carta.tech/man-pages/man8/bbstoreaccounts.8.html" />
  <meta property="og:type" content="website" />
  <meta property="og:title" content="bbstoreaccounts (8) manual" />
  <meta property="og:description" content="Box backup store accounts manager" />
  <meta property="fb:app_id" content="1241677679199500" />
  <meta property="og:image" content="https://www.carta.tech/images/boxbackup-server-bbstoreaccounts-8.png" />
  <meta property="og:image:width" content="600" />
  <meta property="og:image:height" content="315" />
</head>
<body>
  <div class="container final">
          <div class="page-header">
        <h1 class="font-effect-destruction">bbstoreaccounts<small> (8)</small></h1>
        <p class="lead">Box backup store accounts manager</p>
      </div>

    <ol class="breadcrumb" itemscope itemtype="http://schema.org/BreadcrumbList">
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/">
      <span itemprop="name">Carta.tech</span>
    </a>
    <meta itemprop="position" content="1" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/">
      <span itemprop="name">Man Pages</span>
    </a>
    <meta itemprop="position" content="2" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/man8/">
      <span itemprop="name">System administration commands</span>
    </a>
    <meta itemprop="position" content="3" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/man8/bbstoreaccounts.8.html">
      <span itemprop="name">bbstoreaccounts: Box backup store accounts manager</span>
    </a>
    <meta itemprop="position" content="4" />
  </li>
</ol>
<ol class="breadcrumb" itemscope itemtype="http://schema.org/BreadcrumbList">
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/">
      <span itemprop="name">Carta.tech</span>
    </a>
    <meta itemprop="position" content="1" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/packages/">
      <span itemprop="name">Packages</span>
    </a>
    <meta itemprop="position" content="2" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/packages/boxbackup-server/">
      <span itemprop="name">boxbackup-server</span>
    </a>
    <meta itemprop="position" content="3" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/man8/bbstoreaccounts.8.html">
      <span itemprop="name">bbstoreaccounts: Box backup store accounts manager</span>
    </a>
    <meta itemprop="position" content="4" />
  </li>
</ol>
    
      <section>
        <h2 class="font-effect-shadow-multiple">SYNOPSIS</h2>
        <div class="sectioncontent">
<p><strong>bbstoreaccounts</strong> [-c&nbsp;config-file] command account-id [command-specific&nbsp;arguments]</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">DESCRIPTION</h2>
        <div class="sectioncontent">
<p><strong>bbstoreaccounts</strong> is the tool for managing accounts on the store server. It can be used to view information related to accounts, as well as create, change and delete accounts on the store server.</p><p><strong>bbstoreaccounts</strong> always takes at least 2 parameters: the command name and the account ID. Some commands require additional parameters, and some commands have optional parameters.</p><h3>Options</h3>
<p><strong>-c config-file</strong></p><p>The configfile to use for connecting to the store. Default is <em>/etc/box/bbstored.conf</em>.</p>
<h3>Commands</h3>
<p>The commands tells bbstoreaccounts what action to perform.</p><p><strong>check</strong> <em>account-id</em> [fix]</p><p>The <strong>check</strong> command verifies the integrity of the store account given, and optionally fixes any corruptions. <strong>Note</strong>: It is recommended to run the \'simple\' check command (without <strong>fix</strong>) before using the <strong>fix</strong> option. This gives an overview of the extent of any problems, before attempting to fix them.</p><p><strong>create</strong> <em>account-id</em> <em>disc-set</em> <em>soft-limit</em> <em>hard-limit</em></p><p>Creates a new store account with the parameters given. The parameters are as follows:</p><p><strong>account-id</strong></p><p>The ID of the new account to be created. A 32-bit hexadecimal number. Cannot already exist on the server.</p><p><strong>disc-set</strong></p><p>The disc set from <a href="../man5/raidfile.conf.5.html"><strong>raidfile.conf</strong>(5)</a> where the backups for this client will be stored. A number. Each RAID-file set has a number in raidfile.conf. This number is what\'s used.</p><p><strong>soft-limit</strong></p><p>The soft limit is the amount of storage that the server will guarantee to be available for storage.</p><p><strong>hard-limit</strong></p><p>The amount of storage that the the server will allow, before rejecting uploads, and starting to eliminate old and deleted files to get back down to soft-limit.</p><p><strong>delete</strong> <em>account-id</em> [yes]</p><p>Deletes the account from the store server completely. Removes all backups and deletes all references to the account in the config files.</p><p><strong>delete</strong> will ask for confirmation from the user, when called. Using the <strong>yes</strong> flag, eliminates that need. This is useful when deleting accounts from within a script or some other automated means. 0</p><p><strong>info</strong> <em>account-id</em></p><p>Display information about the given account. Example:</p>
<pre>
[root]# bbstoreaccounts info 1
                  Account ID: 00000001
              Last object ID: 58757
                 Blocks used: 9864063 (38531.50Mb)
    Blocks used by old files: 62058 (242.41Mb)
Blocks used by deleted files: 34025 (132.91Mb)
  Blocks used by directories: 6679 (26.09Mb)
            Block soft limit: 11796480 (46080.00Mb)
            Block hard limit: 13107200 (51200.00Mb)
         Client store marker: 1139559852000000
</pre>
<p>Explanation:</p><p>Account ID</p><p>The account ID being displayed.</p><p>Last Object ID</p><p>A counter that keeps track of the objects that have been backed up. This number refers to the last file that was written to the store. The ID is displayed as a decimal number, and the object ID can be converted to a path name to a file as follows: convert the number to hex (e.g.: 58757 =&gt; 0xE585); The last backed up file will be (relative from the client\'s store root): <em>e5/o85.rfw</em>. Longer numbers infer more directories in the structure, so as an example 3952697264 as the last object ID gives 0xEB995FB0, which translates to a backup pathname of <em>eb/99/5f/ob0.rfw</em>.</p><p>Blocks used</p><p>The number of blocks used by the store. The size in Mb depends on the number of blocks, as well as the block size for the disc set given in <a href="../man5/raidfile.conf.5.html"><strong>raidfile.conf</strong>(5)</a>. In this case the block size is 4096.</p><p>Blocks used by old files</p><p>The number of blocks occupied by files that have newer versions in the store. This data is at risk for being removed during housekeeping.</p><p>Blocks used by deleted files</p><p>The number of blocks used by files that have been deleted on the client. This data is at risk for being removed during housekeeping.</p><p>Blocks used by directories</p><p>The number of blocks used by directories in the store.</p><p>Block soft limit</p><p>The soft limit in blocks. The soft limit is the maximum guaranteed storage space available to the account. When housekeeping starts, and the old and deleted files are removed, they are removed in chronological order (oldest first), until the data used is less than the soft limit.</p><p>Block hard limit</p><p>The hard limit in blocks. The hard limit is the most amount of storage the server will allow in an account. Any data above this amount will be rejected. Housekeeping will reduce the storage use, so more data can be uploaded.</p><p>Client store marker</p><p><a href="../man8/bbstored.8.html"><strong>bbstored</strong>(8)</a> uses this number to determine if it needs to rescan the entire store. If this number is different from the last time it checked, a rescan will take place.</p><p><strong>setlimit</strong> <em>account-id</em> <em>soft-limit</em> <em>hard-limit</em></p><p>Changes the storage space allocation for the given account. No server restart is needed.</p><p>Parameters:</p><p><strong>account-id</strong></p><p>The ID of the account to be modified.</p><p><strong>soft-limit</strong></p><p>The soft limit is the amount of storage that the server will guarantee to be available for storage.</p><p><strong>hard-limit</strong></p><p>The amount of storage that the the server will allow before rejecting uploads and starting to eliminate old and deleted files to get back down to <strong>soft-limit</strong>.</p>

        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">EXAMPLES</h2>
        <div class="sectioncontent">
<p>Create an account with ID 3af on disc set 0, with a 20GB soft-limit and a 22GB hard-limit:</p>
<pre>
bbstoreaccounts create 3af 0 20G 22G
</pre>
<p>Alter existing account ID 20 to have a 50GB soft-limit and a 55GB hard-limit:</p>
<pre>
bbstoreaccounts setlimit 20 50G 55G
</pre>

        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">FILES</h2>
        <div class="sectioncontent">
<p><em>/etc/box/bbstored/accounts.txt</em></p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">RELATED TO bbstoreaccounts&hellip;</h2>
        <div class="sectioncontent">
<p><a href="../man8/bbstored.8.html"><strong>bbstored</strong>(8)</a>, <a href="../man8/bbstored-config.8.html"><strong>bbstored-config</strong>(8)</a></p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">AUTHORS</h2>
        <div class="sectioncontent">
<p>Ben Summers</p><p>Per Thomsen</p><p>James O\'Gorman</p>
        </div>
      </section>
<nav>
  <ul class="pager">
   <li class="previous"><a href="bbackupquery.8.html"><span aria-hidden="true">&larr;</span> bbackupquery.8: Box backup store query and file retrieval</a></li>
   <li class="next"><a href="bbstored.8.html">bbstored.8: Box backup store daemon <span aria-hidden="true">&rarr;</span></a></li>
  </ul>
</nav>

  </div>
  <!-- jQuery (necessary for Bootstrap's JavaScript plugins) -->
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.2/jquery.min.js"></script>
  <!-- Include all compiled plugins (below), or include individual files as needed -->
  <script src="/js/bootstrap.min.js"></script>
  <script>
    (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
      (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
      m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
    })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

    ga('create', 'UA-60781387-1', 'auto');
    ga('send', 'pageview');

  </script>
</body>
</html>
