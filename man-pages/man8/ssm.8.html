<!DOCTYPE html>
<html lang="en">
<head>
  <link href="https://fonts.googleapis.com/css?family=Fira+Mono:400,700&effect=destruction%7Cshadow-multiple" rel="stylesheet" type="text/css">
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>ssm: System storage manager: a single tool to manage your storage</title>
  <link href="/css/bootstrap.min.css" rel="stylesheet">
  <link href="/css/manpage.css" rel="stylesheet">
  <link rel="apple-touch-icon" sizes="57x57" href="/icons/apple-icon-57x57.png">
  <link rel="apple-touch-icon" sizes="60x60" href="/icons/apple-icon-60x60.png">
  <link rel="apple-touch-icon" sizes="72x72" href="/icons/apple-icon-72x72.png">
  <link rel="apple-touch-icon" sizes="76x76" href="/icons/apple-icon-76x76.png">
  <link rel="apple-touch-icon" sizes="114x114" href="/icons/apple-icon-114x114.png">
  <link rel="apple-touch-icon" sizes="120x120" href="/icons/apple-icon-120x120.png">
  <link rel="apple-touch-icon" sizes="144x144" href="/icons/apple-icon-144x144.png">
  <link rel="apple-touch-icon" sizes="152x152" href="/icons/apple-icon-152x152.png">
  <link rel="apple-touch-icon" sizes="180x180" href="/icons/apple-icon-180x180.png">
  <link rel="icon" type="image/png" sizes="192x192" href="/icons/android-icon-192x192.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/icons/favicon-32x32.png">
  <link rel="icon" type="image/png" sizes="96x96" href="/icons/favicon-96x96.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/icons/favicon-16x16.png">
  <link rel="manifest" href="/icons/manifest.json">
  <meta name="msapplication-TileColor" content="#ffffff">
  <meta name="msapplication-TileImage" content="/icons/ms-icon-144x144.png">
  <meta name="theme-color" content="#ffffff">
  <meta name="description" content="System storage manager: a single tool to manage your storage">
  <meta name="twitter:card" content="summary_large_image">
  <meta name="twitter:site" content="@CartaTech">
  <meta name="twitter:creator" content="@CartaTech">
  <meta name="twitter:title" content="ssm (8) manual">
  <meta name="twitter:description" content="System storage manager: a single tool to manage your storage">
  <meta name="twitter:image" content="https://www.carta.tech/images/system-storage-manager-ssm-8.png">
  <meta property="og:url" content="https://www.carta.tech/man-pages/man8/ssm.8.html" />
  <meta property="og:type" content="website" />
  <meta property="og:title" content="ssm (8) manual" />
  <meta property="og:description" content="System storage manager: a single tool to manage your storage" />
  <meta property="fb:app_id" content="1241677679199500" />
  <meta property="og:image" content="https://www.carta.tech/images/system-storage-manager-ssm-8.png" />
  <meta property="og:image:width" content="600" />
  <meta property="og:image:height" content="315" />
</head>
<body>
  <div class="container final">
          <div class="page-header">
        <h1 class="font-effect-destruction">ssm<small> (8)</small></h1>
        <p class="lead">System storage manager: a single tool to manage your storage</p>
      </div>

    <ol class="breadcrumb" itemscope itemtype="http://schema.org/BreadcrumbList">
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/">
      <span itemprop="name">Carta.tech</span>
    </a>
    <meta itemprop="position" content="1" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/">
      <span itemprop="name">Man Pages</span>
    </a>
    <meta itemprop="position" content="2" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/man8/">
      <span itemprop="name">System administration commands</span>
    </a>
    <meta itemprop="position" content="3" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/man8/ssm.8.html">
      <span itemprop="name">ssm: System storage manager: a single tool to manage your storage</span>
    </a>
    <meta itemprop="position" content="4" />
  </li>
</ol>
<ol class="breadcrumb" itemscope itemtype="http://schema.org/BreadcrumbList">
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/">
      <span itemprop="name">Carta.tech</span>
    </a>
    <meta itemprop="position" content="1" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/packages/">
      <span itemprop="name">Packages</span>
    </a>
    <meta itemprop="position" content="2" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/packages/system-storage-manager/">
      <span itemprop="name">system-storage-manager</span>
    </a>
    <meta itemprop="position" content="3" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/man8/ssm.8.html">
      <span itemprop="name">ssm: System storage manager: a single tool to manage your storage</span>
    </a>
    <meta itemprop="position" content="4" />
  </li>
</ol>
    
      <section>
        <h2 class="font-effect-shadow-multiple">SYNOPSIS</h2>
        <div class="sectioncontent">
<p><strong>ssm</strong> [<strong>-h</strong>] [<strong>--version</strong>] [<strong>-v</strong>] [<strong>-f</strong>] [<strong>-b</strong> BACKEND] {check,resize,create,list,add,remove,snapshot} ...</p><p><strong>ssm</strong> <strong>create</strong> [<strong>-h</strong>] [<strong>-s</strong> SIZE] [<strong>-n</strong> NAME] [<strong>--fstype</strong> FSTYPE] [<strong>-r</strong> LEVEL] [<strong>-I</strong> STRIPESIZE] [<strong>-i</strong> STRIPES] [<strong>-p</strong> POOL] [<strong>device</strong> [<strong>device</strong> ...]] [mount]</p><p><strong>ssm</strong> <strong>list</strong> [<strong>-h</strong>] [{volumes,vol,dev,devices,pool,pools,fs,filesystems,snap,snapshots}]</p><p><strong>ssm</strong> <strong>remove</strong> [<strong>-h</strong>] [<strong>-a</strong>] [<strong>items</strong> [<strong>items</strong> ...]]</p><p><strong>ssm</strong> <strong>resize</strong> [<strong>-h</strong>] [<strong>-s</strong> SIZE] <strong>volume</strong> [<strong>device</strong> [<strong>device</strong> ...]]</p><p><strong>ssm</strong> <strong>check</strong> [<strong>-h</strong>] <strong>device</strong> [<strong>device</strong> ...]</p><p><strong>ssm</strong> <strong>snapshot</strong> [<strong>-h</strong>] [<strong>-s</strong> SIZE] [<strong>-d</strong> DEST | <strong>-n</strong> NAME] volume</p><p><strong>ssm</strong> <strong>add</strong> [<strong>-h</strong>] [<strong>-p</strong> POOL] <strong>device</strong> [<strong>device</strong> ...]</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">DESCRIPTION</h2>
        <div class="sectioncontent">
<p>System Storage Manager provides easy to use command line interface to manage your storage using various technologies like lvm, btrfs, encrypted volumes and more.</p><p>In more sophisticated enterprise storage environments, management with Device Mapper (dm), Logical Volume Manager (LVM), or Multiple Devices (md) is becoming increasingly more difficult.  With file systems added to the mix, the number of tools needed to configure and manage storage has grown so large that it is simply not user friendly.  With so many options for a system administrator to consider, the opportunity for errors and problems is large.</p><p>The btrfs administration tools have shown us that storage management can be simplified, and we are working to bring that ease of use to Linux filesystems in general.</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">OPTIONS</h2>
        <div class="sectioncontent">

<dl class='dl-vertical'>
  <dt>
    <p><strong>-h, --help</strong></p>
  </dt>
  <dd>
    <p>show this help message and exit</p>
  </dd>
  <dt>
    <p><strong>--version</strong></p>
  </dt>
  <dd>
    <p>show program&apos;s version number and exit</p>
  </dd>
  <dt>
    <p><strong>-v, --verbose</strong></p>
  </dt>
  <dd>
    <p>Show aditional information while executing.</p>
  </dd>
  <dt>
    <p><strong>-f, --force</strong></p>
  </dt>
  <dd>
    <p>Force execution in the case where ssm has some doubts or questions.</p>
  </dd>
  <dt>
    <p><strong>-b</strong><em></em><strong>BACKEND,</strong><em></em><strong>--backend</strong><em></em><strong>BACKEND</strong></p>
  </dt>
  <dd>
    <p>Choose backend to use. Currently you can choose from (lvm,btrfs).</p>
  </dd>

</dl>

        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">SYSTEM STORAGE MANAGER COMMANDS</h2>
        <div class="sectioncontent">
<h3>Introduction</h3>
<p>System Storage Manager have several commands you can specify on the command line as a first argument to the ssm. They all have specific use and its own arguments, but global ssm arguments are propagated to all commands.</p>
<h3>Create command</h3>
<p><strong>ssm</strong> <strong>create</strong> [<strong>-h</strong>] [<strong>-s</strong> SIZE] [<strong>-n</strong> NAME] [<strong>--fstype</strong> FSTYPE] [<strong>-r</strong> LEVEL] [<strong>-I</strong> STRIPESIZE] [<strong>-i</strong> STRIPES] [<strong>-p</strong> POOL] [<strong>device</strong> [<strong>device</strong> ...]] [mount]</p><p>This command creates a new volume with defined parameters. If <strong>device</strong> is provided it will be used to create a volume, hence it will be added into the <strong>pool</strong> prior the volume creation (See <em>Add command section</em>). More devices can be used to create a volume.</p><p>If the <strong>device</strong> is already used in the different pool, then <strong>ssm</strong> will ask you whether you want to remove it from the original pool. If you decline, or the removal fails, then the <strong>volume</strong> creation fails if the <em>SIZE</em> was not provided. On the other hand, if the <em>SIZE</em> is provided and some devices can not be added to the <strong>pool</strong> the volume creation might succeed if there is enough space in the <strong>pool</strong>.</p><p><em>POOL</em> name can be specified as well. If the pool exists new volume will be created from that pool (optionally adding <strong>device</strong> into the pool). However if the <em>POOL</em> does not exist <strong>ssm</strong> will attempt to create a new pool with provided <strong>device</strong> and then create a new volume from this pool. If <strong>--backend</strong> argument is omitted, the default <strong>ssm</strong> backend will be used. Default backend is <em>lvm</em>.</p><p><strong>ssm</strong> also supports creating RAID configuration, however some back-ends might not support all the levels, or it might not support RAID at all. In this case, volume creation will fail.</p><p>If <strong>mount</strong> point is provided <strong>ssm</strong> will attempt to mount the volume after it is created. However it will fail if mountable file system is not present on the volume.</p>
<dl class='dl-vertical'>
  <dt>
    <p><strong>-h, --help</strong></p>
  </dt>
  <dd>
    <p>show this help message and exit</p>
  </dd>
  <dt>
    <p><strong>-s</strong><em></em><strong>SIZE,</strong><em></em><strong>--size</strong><em></em><strong>SIZE</strong></p>
  </dt>
  <dd>
    <p>Gives the size to allocate for the new logical volume A size suffix K|k, M|m, G|g, T|t, P|p, E|e can be used to define &apos;power of two&apos; units. If no unit is provided, it defaults to kilobytes. This is optional if if not given maximum possible size will be used.</p>
  </dd>
  <dt>
    <p><strong>-n</strong><em></em><strong>NAME,</strong><em></em><strong>--name</strong><em></em><strong>NAME</strong></p>
  </dt>
  <dd>
    <p>The name for the new logical volume. This is optional and if omitted, name will be generated by the corresponding backend.</p>
  </dd>
  <dt>
    <p><strong>--fstype</strong><em></em><strong>FSTYPE</strong></p>
  </dt>
  <dd>
    <p>Gives the file system type to create on the new logical volume. Supported file systems are (ext3, ext4, xfs, btrfs). This is optional and if not given file system will not be created.</p>
  </dd>
  <dt>
    <p><strong>-r</strong><em></em><strong>LEVEL,</strong><em></em><strong>--raid</strong><em></em><strong>LEVEL</strong></p>
  </dt>
  <dd>
    <p>Specify a RAID level you want to use when creating a new volume. Note that some backends might not implement all supported RAID levels. This is optional and if no specified, linear volume will be created. You can choose from the following list of supported levels (0,1,10).</p>
  </dd>
  <dt>
    <p><strong>-I</strong><em></em><strong>STRIPESIZE,</strong><em></em><strong>--stripesize</strong><em></em><strong>STRIPESIZE</strong></p>
  </dt>
  <dd>
    <p>Gives the number of kilobytes for the granularity of stripes. This is optional and if not given, backend default will be used. Note that you have to specify RAID level as well.</p>
  </dd>
  <dt>
    <p><strong>-i</strong><em></em><strong>STRIPES,</strong><em></em><strong>--stripes</strong><em></em><strong>STRIPES</strong></p>
  </dt>
  <dd>
    <p>Gives the number of stripes. This is equal to the number of physical volumes to scatter the logical volume. This is optional and if stripesize is set and multiple devices are provided stripes is determined automatically from the number of devices. Note that you have to specify RAID level as well.</p>
  </dd>
  <dt>
    <p><strong>-p</strong><em></em><strong>POOL,</strong><em></em><strong>--pool</strong><em></em><strong>POOL</strong></p>
  </dt>
  <dd>
    <p>Pool to use to create the new volume.</p>
  </dd>

</dl>

<h3>List command</h3>
<p><strong>ssm</strong> <strong>list</strong> [<strong>-h</strong>] [{volumes,vol,dev,devices,pool,pools,fs,filesystems,snap,snapshots}]</p><p>List informations about all detected devices, pools, volumes and snapshots found in the system. <strong>list</strong> command can be used either alone to list all the information, or you can request specific section only.</p><p>Following sections can be specified:</p>
<dl class='dl-vertical'>
  <dt>
    <p><strong>{volumes | vol}</strong></p>
  </dt>
  <dd>
    <p>List information about all <strong>volumes</strong> found in the system.</p>
  </dd>
  <dt>
    <p><strong>{devices | dev}</strong></p>
  </dt>
  <dd>
    <p>List information about all <strong>devices</strong> found in the system. Some devices are intentionally hidden, like for example cdrom, or DM/MD devices since those are actually listed as volumes.</p>
  </dd>
  <dt>
    <p><strong>{pools | pool}</strong></p>
  </dt>
  <dd>
    <p>List information about all <strong>pools</strong> found in the system.</p>
  </dd>
  <dt>
    <p><strong>{filesystems | fs}</strong></p>
  </dt>
  <dd>
    <p>List information about all volumes containing <strong>filesystems</strong> found in the system.</p>
  </dd>
  <dt>
    <p><strong>{snapshots | snap}</strong></p>
  </dt>
  <dd>
    <p>List information about all <strong>snapshots</strong> found in the system. Note that some back-ends does not support snapshotting and some can not distinguish between snapshot and regular volume. in this case <strong>ssm</strong> will try to recognize volume name in order to identify <strong>snapshot</strong>, but if the <strong>ssm</strong> regular expression does not match the snapshot pattern, this snapshot will not be recognized.</p>
  </dd>
  <dt>
    <p><strong>-h, --help</strong></p>
  </dt>
  <dd>
    <p>show this help message and exit</p>
  </dd>

</dl>

<h3>Remove command</h3>
<p><strong>ssm</strong> <strong>remove</strong> [<strong>-h</strong>] [<strong>-a</strong>] [<strong>items</strong> [<strong>items</strong> ...]]</p><p>This command removes <strong>item</strong> from the system. Multiple items can be specified. If the <strong>item</strong> can not be removed for some reason, it will be skipped.</p><p><strong>item</strong> can represent:</p>
<dl class='dl-vertical'>
  <dt>
    <p><strong>device</strong></p>
  </dt>
  <dd>
    <p>Remove <strong>device</strong> from the pool. Note that this can not be done in some cases where the device is used by pool. You can use <strong>-f</strong> argument to <em>force</em> removal. If the device does not belong to any pool, it will be skipped.</p>
  </dd>
  <dt>
    <p><strong>pool</strong></p>
  </dt>
  <dd>
    <p>Remove the <strong>pool</strong> from the system. This will also remove all volumes created from that pool.</p>
  </dd>
  <dt>
    <p><strong>volume</strong></p>
  </dt>
  <dd>
    <p>Remove the <strong>volume</strong> from the system. Note that this will fail if the <strong>volume</strong> is mounted and it can not be <em>forced</em> with <strong>-f</strong>.</p>
  </dd>
  <dt>
    <p><strong>-h, --help</strong></p>
  </dt>
  <dd>
    <p>show this help message and exit</p>
  </dd>
  <dt>
    <p><strong>-a, --all</strong></p>
  </dt>
  <dd>
    <p>Remove all pools in the system.</p>
  </dd>

</dl>

<h3>Resize command</h3>
<p><strong>ssm</strong> <strong>resize</strong> [<strong>-h</strong>] [<strong>-s</strong> SIZE] <strong>volume</strong> [<strong>device</strong> [<strong>device</strong> ...]]</p><p>Change size of the <strong>volume</strong> and file system. If there is no file system only the <strong>volume</strong> itself will be resized. You can specify <strong>device</strong> to add into the <strong>volume</strong> pool prior the resize. Note that <strong>device</strong> will only be added into the pool if the <strong>volume</strong> size is going to grow.</p><p>If the <strong>device</strong> is already used in the different pool, then <strong>ssm</strong> will ask you whether you want to remove it from the original pool.</p><p>In some cases file system has to be mounted in order to resize. This will be handled by <strong>ssm</strong> automatically by mounting the <strong>volume</strong> temporarily.</p>
<dl class='dl-vertical'>
  <dt>
    <p><strong>-h, --help</strong></p>
  </dt>
  <dd>
    <p>show this help message and exit</p>
  </dd>
  <dt>
    <p><strong>-s</strong><em></em><strong>SIZE,</strong><em></em><strong>--size</strong><em></em><strong>SIZE</strong></p>
  </dt>
  <dd>
    <p>New size of the volume. With the + or - sign the value is added to or subtracted from the actual size of the volume and without it, the value will be set as the new volume size. A size suffix of [k|K] for kilobytes, [m|M] for megabytes, [g|G] for gigabytes, [t|T] for terabytes or [p|P] for petabytes is optional. If no unit is provided the default is kilobytes.</p>
  </dd>

</dl>

<h3>Check command</h3>
<p><strong>ssm</strong> <strong>check</strong> [<strong>-h</strong>] <strong>device</strong> [<strong>device</strong> ...]</p><p>Check the file system consistency on the <strong>volume</strong>. You can specify multiple volumes to check. If there is no file system on the <strong>volume</strong>, this <strong>volume</strong> will be skipped.</p><p>In some cases file system has to be mounted in order to check the file system This will be handled by <strong>ssm</strong> automatically by mounting the <strong>volume</strong> temporarily.</p>
<dl class='dl-vertical'>
  <dt>
    <p><strong>-h, --help</strong></p>
  </dt>
  <dd>
    <p>show this help message and exit</p>
  </dd>

</dl>

<h3>Snapshot command</h3>
<p><strong>ssm</strong> <strong>snapshot</strong> [<strong>-h</strong>] [<strong>-s</strong> SIZE] [<strong>-d</strong> DEST | <strong>-n</strong> NAME] volume</p><p>Take a snapshot of existing <strong>volume</strong>. This operation will fail if back-end which the <strong>volume</strong> belongs to does not support snapshotting. Note that you can not specify both <em>NAME</em> and <em>DESC</em> since those options are mutually exclusive.</p><p>In some cases file system has to be mounted in order to take a snapshot of the <strong>volume</strong>. This will be handled by <strong>ssm</strong> automatically by mounting the <strong>volume</strong> temporarily.</p>
<dl class='dl-vertical'>
  <dt>
    <p><strong>-h, --help</strong></p>
  </dt>
  <dd>
    <p>show this help message and exit</p>
  </dd>
  <dt>
    <p><strong>-s</strong><em></em><strong>SIZE,</strong><em></em><strong>--size</strong><em></em><strong>SIZE</strong></p>
  </dt>
  <dd>
    <p>Gives the size to allocate for the new snapshot volume A size suffix K|k, M|m, G|g, T|t, P|p, E|e can be used to define &apos;power of two&apos; units. If no unit is provided, it defaults to kilobytes. This is option and if not give, the size will be determined automatically.</p>
  </dd>
  <dt>
    <p><strong>-d</strong><em></em><strong>DEST,</strong><em></em><strong>--dest</strong><em></em><strong>DEST</strong></p>
  </dt>
  <dd>
    <p>Destination of the snapshot specified with absolute path to be used for the new snapshot. This is optional and if not specified default backend policy will be performed.</p>
  </dd>
  <dt>
    <p><strong>-n</strong><em></em><strong>NAME,</strong><em></em><strong>--name</strong><em></em><strong>NAME</strong></p>
  </dt>
  <dd>
    <p>Name of the new snapshot. This is optional and if not specified default backend policy will be performed.</p>
  </dd>

</dl>

<h3>Add command</h3>
<p><strong>ssm</strong> <strong>add</strong> [<strong>-h</strong>] [<strong>-p</strong> POOL] <strong>device</strong> [<strong>device</strong> ...]</p><p>This command adds <strong>device</strong> into the pool. The <strong>device</strong> will not be added if it&apos;s already part of different pool. When multiple devices are provided, all of them are added into the pool. If one of the devices can not be added into the pool for some reason, it will be skipped. If no pool is specified, default pool will be chosen. In the case of non existing pool, it will be created using provided devices.</p>
<dl class='dl-vertical'>
  <dt>
    <p><strong>-h, --help</strong></p>
  </dt>
  <dd>
    <p>show this help message and exit</p>
  </dd>
  <dt>
    <p><strong>-p</strong><em></em><strong>POOL,</strong><em></em><strong>--pool</strong><em></em><strong>POOL</strong></p>
  </dt>
  <dd>
    <p>Pool to add device into. If not specified the default pool is used.</p>
  </dd>

</dl>


        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">BACK-ENDS</h2>
        <div class="sectioncontent">
<h3>Introduction</h3>
<p>Ssm aims to create unified user interface for various technologies like Device Mapper (dm), Btrfs file system, Multiple Devices (md) and possibly more. In order to do so we have a core abstraction layer in <strong>ssmlib/main.py</strong>. This abstraction layer should ideally know nothing about the underlying technology, but rather comply with <strong>device</strong>, <strong>pool</strong> and <strong>volume</strong> abstraction.</p><p>Various backends can be registered in <strong>ssmlib/main.py</strong> in order to handle specific storage technology implementing methods like <em>create</em>, <em>snapshot</em>, or <em>remove</em> volumes and pools. The core will then call these methods to manage the storage without needing to know what lies underneath it. There are already several backends registered in ssm.</p>
<h3>Btrfs backend</h3>
<p>Btrfs is the file system with many advanced features including volume management. This is the reason why btrfs is handled differently than other <em>conventional</em> file systems in <strong>ssm</strong>. It is used as a volume management back-end.</p><p>Pools, volumes and snapshots can be created with btrfs backend and here is what it means from the btrfs point of view:</p>
<dl class='dl-vertical'>
  <dt>
    <p><strong>pool</strong></p>
  </dt>
  <dd>
    <p>Pool is actually a btrfs file system itself, because it can be extended by adding more devices, or shrink by removing devices from it. Subvolumes and snapshots can also be created. When the new btrfs pool should be created <strong>ssm</strong> simply creates a btrfs file system, which means that every new btrfs pool has one volume of the same name as the pool itself which can not be removed without removing the entire pool. Default btrfs pool name is <strong>btrfs_pool</strong>.</p><p>When creating new btrfs pool, the name of the pool is used as the file system label. If there is already existing btrfs file system in the system without a label, btrfs pool name will be generated for internal use in the following format "btrfs_{device base name}".</p><p>Btrfs pool is created when <strong>create</strong> or <strong>add</strong> command is used with devices specified and non existing pool name.</p>
  </dd>
  <dt>
    <p><strong>volume</strong></p>
  </dt>
  <dd>
    <p>Volume in btrfs back-end is actually just btrfs subvolume with the exception of the first volume created on btrfs pool creation, which is the file system itself. Subvolumes can only be created on btrfs file system when the it is mounted, but user does not have to worry about that, since <strong>ssm</strong> will automatically mount the file system temporarily in order to create a new subvolume.</p><p>Volume name is used as subvolume path in the btrfs file system and every object in this path must exists in order to create a volume. Volume name for internal tracking and for representing to the user is generated in the format "{pool_name}:{volume name}", but volumes can be also referenced with its mount point.</p><p>Btrfs volumes are only shown in the <em>list</em> output, when the file system is mounted, with the exception of the main btrfs volume - the file system itself.</p><p>New btrfs volume can be created with <strong>create</strong> command.</p>
  </dd>
  <dt>
    <p><strong>snapshot</strong></p>
  </dt>
  <dd>
    <p>Btrfs file system support subvolume snapshotting, so you can take a snapshot of any btrfs volume in the system with <strong>ssm</strong>. However btrfs does not distinguish between subvolumes and snapshots, because snapshot actually is just a subvolume with some block shared with different subvolume. It means, that <strong>ssm</strong> is not able to recognize btrfs snapshot directly, but instead it is trying to recognize special name format of the btrfs volume. However, if the <em>NAME</em> is specified when creating snapshot which does not match the special pattern, snapshot will not be recognized by the <strong>ssm</strong> and it will be listed as regular btrfs volume.</p><p>New btrfs snapshot can be created with <strong>snapshot</strong> command.</p>
  </dd>
  <dt>
    <p><strong>device</strong></p>
  </dt>
  <dd>
    <p>Btrfs does not require any special device to be created on.</p>
  </dd>

</dl>

<h3>Lvm backend</h3>
<p>Pools, volumes and snapshots can be created with lvm, which pretty much match the lvm abstraction.</p>
<dl class='dl-vertical'>
  <dt>
    <p><strong>pool</strong></p>
  </dt>
  <dd>
    <p>Lvm pool is just <em>volume group</em> in lvm language. It means that it is grouping devices and new logical volumes can be created out of the lvm pool. Default lvm pool name is <strong>lvm_pool</strong>.</p><p>Lvm pool is created when <strong>create</strong> or <strong>add</strong> command is used with devices specified and non existing pool name.</p>
  </dd>
  <dt>
    <p><strong>volume</strong></p>
  </dt>
  <dd>
    <p>Lvm volume is just <em>logical volume</em> in lvm language. Lvm volume can be created wit <strong>create</strong> command.</p>
  </dd>
  <dt>
    <p><strong>snapshot</strong></p>
  </dt>
  <dd>
    <p>Lvm volumes can be snapshotted as well. When a snapshot is created from the lvm volume, new <em>snapshot</em> volume is created, which can be handled as any other lvm volume. Unlike <em>btrfs</em> lvm is able to distinguish snapshot from regular volume, so there is no need for a snapshot name to match special pattern.</p>
  </dd>
  <dt>
    <p><strong>device</strong></p>
  </dt>
  <dd>
    <p>Lvm requires <em>physical device</em> to be created on the device, but with <strong>ssm</strong> this is transparent for the user.</p>
  </dd>

</dl>

<h3>Crypt backend</h3>
<p>Crypt backend in <strong>ssm</strong> is currently limited to only gather the information about encrypted volumes in the system. You can not create or manage encrypted volumes or pools, but it will be extended in the future.</p>
<h3>MD backend</h3>
<p>MD backend in <strong>ssm</strong> is currently limited to only gather the information about MD volumes in the system. You can not create or manage MD volumes or pools, but it will be extended in the future.</p>

        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">EXAMPLES</h2>
        <div class="sectioncontent">
<p><strong>List</strong> system storage information:</p>
<pre>
# ssm list
</pre>
<p><strong>List</strong> all pools in the system:</p>
<pre>
# ssm list pools
</pre>
<p><strong>Create</strong> a new 100GB <strong>volume</strong> with default lvm backend using <em>/dev/sda</em> and <em>/dev/sdb</em> with xfs file system:</p>
<pre>
# ssm create --size 100G --fs xfs /dev/sda /dev/sdb
</pre>
<p><strong>Create</strong> a new <strong>volume</strong> with btrfs backend using <em>/dev/sda</em> and <em>/dev/sdb</em> and let the volume to be RAID 1:</p>
<pre>
# ssm -b btrfs create --raid 1 /dev/sda /dev/sdb
</pre>
<p>Using lvm backend <strong>create</strong> a RAID 0 <strong>volume</strong> with devices <em>/dev/sda</em> and <em>/dev/sdb</em> with 128kB stripe size, ext4 file system and mount it on <em>/home</em>:</p>
<pre>
# ssm create --raid 0 --stripesize 128k /dev/sda /dev/sdb /home
</pre>
<p><strong>Extend</strong> btrfs <strong>volume</strong> <em>btrfs_pool</em> by 500GB and use <em>/dev/sdc</em> and <em>/dev/sde</em> to cover the resize:</p>
<pre>
# ssm resize -s +500G btrfs_pool /dev/sdc /dev/sde
</pre>
<p><strong>Shrink volume</strong> <em>/dev/lvm_pool/lvol001</em> by 1TB:</p>
<pre>
# ssm resize -s-1t /dev/lvm_pool/lvol001
</pre>
<p><strong>Remove</strong> <em>/dev/sda</em> <strong>device</strong> from the pool, remove the <em>btrfs_pool</em> <strong>pool</strong> and also remove the <strong>volume</strong> <em>/dev/lvm_pool/lvol001</em>:</p>
<pre>
# ssm remove /dev/sda btrfs_pool /dev/lvm_pool/lvol001
</pre>
<p><strong>Take a snapshot</strong> of the btrfs volume <em>btrfs_pool:my_volume</em>:</p>
<pre>
# ssm snapshot btrfs_pool:my_volume
</pre>
<p><strong>Add devices</strong> <em>/dev/sda</em> and <em>/dev/sdb</em> into the <em>btrfs_pool</em> pool:</p>
<pre>
# ssm add -p btrfs_pool /dev/sda /dev/sdb
</pre>

        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">ENVIRONMENT VARIABLES</h2>
        <div class="sectioncontent">

<dl class='dl-vertical'>
  <dt>
    <p><strong>SSM_DEFAULT_BACKEND</strong></p>
  </dt>
  <dd>
    <p>Specify which backend will be used by default. This can be overridden by specifying <strong>-b</strong> or <strong>--backend</strong> argument. Currently only <em>lvm</em> and <em>btrfs</em> is supported.</p>
  </dd>
  <dt>
    <p><strong>SSM_LVM_DEFAULT_POOL</strong></p>
  </dt>
  <dd>
    <p>Name of the default lvm pool to be used if <strong>-p</strong> or <strong>--pool</strong> argument is omitted.</p>
  </dd>
  <dt>
    <p><strong>SSM_BTRFS_DEFAULT_POOL</strong></p>
  </dt>
  <dd>
    <p>Name of the default btrfs pool to be used if <strong>-p</strong> or <strong>--pool</strong> argument is omitted.</p>
  </dd>

</dl>

        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">LICENCE</h2>
        <div class="sectioncontent">
<p>(C)2011 Red Hat, Inc., Lukas Czerner &lt;<em>lczerner@redhat.com</em>&gt;</p><p>This program is free software: you can redistribute it and/or modify it under the terms of the GNU General Public License as published by the Free Software Foundation, either version 2 of the License, or (at your option) any later version.</p><p>This program is distributed in the hope that it will be useful, but WITHOUT ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU General Public License for more details.</p><p>You should have received a copy of the GNU General Public License along with this program.  If not, see &lt;<em>http://www.gnu.org/licenses/</em>&gt;.</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">REQUIREMENTS</h2>
        <div class="sectioncontent">
<p>Python 2.6 or higher is required to run this tool. System Storage Manager can only be run as root since most of the commands requires root privileges.</p><p>There are other requirements listed bellow, but note that you do not necessarily need all dependencies for all backends, however if some of the tools required by the backend is missing, the backend would not work.</p><h3>Python modules</h3>
<ul>
<li><p>os</p></li><li><p>re</p></li><li><p>sys</p></li><li><p>stat</p></li><li><p>argparse</p></li><li><p>datetime</p></li><li><p>threading</p></li><li><p>subprocess</p></li>
</ul>
<h3>System tools</h3>
<ul>
<li><p>tune2fs</p></li><li><p>fsck.SUPPORTED_FS</p></li><li><p>resize2fs</p></li><li><p>xfs_db</p></li><li><p>xfs_check</p></li><li><p>xfs_growfs</p></li><li><p>mkfs.SUPPORTED_FS</p></li><li><p>which</p></li><li><p>mount</p></li><li><p>blkid</p></li><li><p>wipefs</p></li>
</ul>
<h3>Lvm backend</h3>
<ul>
<li><p>lvm2 binaries</p></li>
</ul>
<h3>Btrfs backend</h3>
<ul>
<li><p>btrfs progs</p></li>
</ul>
<h3>Crypt backend</h3>
<ul>
<li><p>dmsetup</p></li><li><p>cryptsetup</p></li>
</ul>

        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">AVAILABILITY</h2>
        <div class="sectioncontent">
<p><strong>System storage manager</strong> is available from <em>http://storagemanager.sourceforge.net</em>. You can subscribe to <em>storagemanager-devel@lists.sourceforge.net</em> to follow the current development.</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">AUTHOR</h2>
        <div class="sectioncontent">
<p>Lukáš Czerner &lt;lczerner@redhat.com&gt;</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">COPYRIGHT</h2>
        <div class="sectioncontent">
<p>2012, Red Hat, Inc., Lukáš Czerner &lt;lczerner@redhat.com&gt;</p>
        </div>
      </section>
<nav>
  <ul class="pager">
   <li class="previous"><a href="sshuttle.8.html"><span aria-hidden="true">&larr;</span> sshuttle.8: A transparent proxy-based vpn using ssh</a></li>
   <li class="next"><a href="ssmtp.8.html">ssmtp.8: Send a message using smtp <span aria-hidden="true">&rarr;</span></a></li>
  </ul>
</nav>

  </div>
  <!-- jQuery (necessary for Bootstrap's JavaScript plugins) -->
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.2/jquery.min.js"></script>
  <!-- Include all compiled plugins (below), or include individual files as needed -->
  <script src="/js/bootstrap.min.js"></script>
  <script>
    (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
      (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
      m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
    })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

    ga('create', 'UA-60781387-1', 'auto');
    ga('send', 'pageview');

  </script>
</body>
</html>
