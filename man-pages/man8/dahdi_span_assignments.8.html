<!DOCTYPE html>
<html lang="en">
<head>
  <link href="https://fonts.googleapis.com/css?family=Fira+Mono:400,700&effect=destruction%7Cshadow-multiple" rel="stylesheet" type="text/css">
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>dahdi_span_assignments: Handle dahdi spans assignments</title>
  <link href="/css/bootstrap.min.css" rel="stylesheet">
  <link href="/css/manpage.css" rel="stylesheet">
  <link rel="apple-touch-icon" sizes="57x57" href="/icons/apple-icon-57x57.png">
  <link rel="apple-touch-icon" sizes="60x60" href="/icons/apple-icon-60x60.png">
  <link rel="apple-touch-icon" sizes="72x72" href="/icons/apple-icon-72x72.png">
  <link rel="apple-touch-icon" sizes="76x76" href="/icons/apple-icon-76x76.png">
  <link rel="apple-touch-icon" sizes="114x114" href="/icons/apple-icon-114x114.png">
  <link rel="apple-touch-icon" sizes="120x120" href="/icons/apple-icon-120x120.png">
  <link rel="apple-touch-icon" sizes="144x144" href="/icons/apple-icon-144x144.png">
  <link rel="apple-touch-icon" sizes="152x152" href="/icons/apple-icon-152x152.png">
  <link rel="apple-touch-icon" sizes="180x180" href="/icons/apple-icon-180x180.png">
  <link rel="icon" type="image/png" sizes="192x192" href="/icons/android-icon-192x192.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/icons/favicon-32x32.png">
  <link rel="icon" type="image/png" sizes="96x96" href="/icons/favicon-96x96.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/icons/favicon-16x16.png">
  <link rel="manifest" href="/icons/manifest.json">
  <meta name="msapplication-TileColor" content="#ffffff">
  <meta name="msapplication-TileImage" content="/icons/ms-icon-144x144.png">
  <meta name="theme-color" content="#ffffff">
  <meta name="description" content="Handle dahdi spans assignments">
  <meta name="twitter:card" content="summary_large_image">
  <meta name="twitter:site" content="@CartaTech">
  <meta name="twitter:creator" content="@CartaTech">
  <meta name="twitter:title" content="dahdi_span_assignments (8) manual">
  <meta name="twitter:description" content="Handle dahdi spans assignments">
  <meta name="twitter:image" content="https://www.carta.tech/images/dahdi-dahdi_span_assignments-8.png">
  <meta property="og:url" content="https://www.carta.tech/man-pages/man8/dahdi_span_assignments.8.html" />
  <meta property="og:type" content="website" />
  <meta property="og:title" content="dahdi_span_assignments (8) manual" />
  <meta property="og:description" content="Handle dahdi spans assignments" />
  <meta property="fb:app_id" content="1241677679199500" />
  <meta property="og:image" content="https://www.carta.tech/images/dahdi-dahdi_span_assignments-8.png" />
  <meta property="og:image:width" content="600" />
  <meta property="og:image:height" content="315" />
</head>
<body>
  <div class="container final">
          <div class="page-header">
        <h1 class="font-effect-destruction">dahdi_span_assignments<small> (8)</small></h1>
        <p class="lead">Handle dahdi spans assignments</p>
      </div>

    <ol class="breadcrumb" itemscope itemtype="http://schema.org/BreadcrumbList">
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/">
      <span itemprop="name">Carta.tech</span>
    </a>
    <meta itemprop="position" content="1" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/">
      <span itemprop="name">Man Pages</span>
    </a>
    <meta itemprop="position" content="2" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/man8/">
      <span itemprop="name">System administration commands</span>
    </a>
    <meta itemprop="position" content="3" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/man8/dahdi_span_assignments.8.html">
      <span itemprop="name">dahdi_span_assignments: Handle dahdi spans assignments</span>
    </a>
    <meta itemprop="position" content="4" />
  </li>
</ol>
<ol class="breadcrumb" itemscope itemtype="http://schema.org/BreadcrumbList">
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/">
      <span itemprop="name">Carta.tech</span>
    </a>
    <meta itemprop="position" content="1" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/packages/">
      <span itemprop="name">Packages</span>
    </a>
    <meta itemprop="position" content="2" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/packages/dahdi/">
      <span itemprop="name">dahdi</span>
    </a>
    <meta itemprop="position" content="3" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/man8/dahdi_span_assignments.8.html">
      <span itemprop="name">dahdi_span_assignments: Handle dahdi spans assignments</span>
    </a>
    <meta itemprop="position" content="4" />
  </li>
</ol>
    
      <section>
        <h2 class="font-effect-shadow-multiple">SYNOPSIS</h2>
        <div class="sectioncontent">
<p><strong>dahdi_span_assignments [-v|--verbose] [-n|--dry-run] &lt;add|remove|auto&gt; </strong><strong>[</strong><em>devpath</em><strong>...]</strong></p><p><strong>dahdi_span_assignments [-v|--verbose] list </strong><strong>[</strong><em>devpath</em><strong>...]</strong></p><p><strong>dahdi_span_assignments [-v|--verbose] [-k|--key </strong><em>key</em><strong>] dumpconfig</strong></p><p><strong>dahdi_span_assignments -h|--help</strong></p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">DESCRIPTION</h2>
        <div class="sectioncontent">
<p>Channels in DAHDI devices (such as DAHDI PCI cards) are groups to logical units called "spans" (for example: a port in a digital card is a span). When the kernel module parameter <strong>dahdi.auto_assign_span</strong> is unset, DAHDI devices that register with DAHDI don't cause their spans to be automatically assigned.</p><p>This allows user-space to order DAHDI to assign them to specific span and channel numbers. That way, specific spans on specific DAHDI devices may be assigned with specific span and channel numbers <strong>regardless</strong> of the registration order of the hardware (or if all hardware is present at all).</p><p><strong>dahdi_span_assignments</strong> is used to assign those spans or to help creating the configuration file used in their assignment: <strong>/etc/dahdi/assigned-spans.conf .</strong></p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">SUB-COMMANDS</h2>
        <div class="sectioncontent">
<p>There are several sub-commands.</p><p>All sub-commands take an optional list of paths to SysFS nodes of devices. If given, the command will only operate on those DAHDI devices. The default is to operate on all devices (which would normally be the sane case when running from the command-line).</p><p><strong>add </strong><strong>[</strong><em>devpath </em><strong>...]</strong></p><p>Applies to all devices or to those listed on the command line. Parameters are paths (in SysFS) to DAHDI devices with unassigned spans.</p><p>The command will assign spans with DAHDI according to configuration in <strong>assigned-spans.conf</strong>.</p><p>If no line matches the span, or if the assignment for it fails (it is not available) it will remain unassigned.</p><p>If any of the span settings fails (the span number or range of channels is already in use), the program will print a message, but continue applying the others. In such a case you should fix assigned-spans.conf and re-run <strong>add</strong> (or run <strong>auto</strong> to give those channels the first available range and regenerate the file with 'dahdi_genconf assignedspans').</p><p><strong>remove </strong><strong>[</strong><em>devpath </em><strong>...]</strong></p><p>Applies to all devices or to those listed on the command line. Parameters are paths (in SysFS) to DAHDI devices with assigned spans.</p><p>The command will un-assign them.</p><p><strong>auto </strong><strong>[</strong><em>devpath </em><strong>...]</strong></p><p>Applies to all devices or to those listed on the command line. Parameters are paths (in SysFS) to DAHDI devices with unassigned spans.</p><p>Each span is assigned to first available span number and channel numbers, as if <strong>dahdi.auto_assign_span</strong> was set. The configuration file doesn't affect these assignments.</p><p><strong>list</strong></p><p>List all spans in the system.</p><p><strong>dumpconfig</strong></p><p>List all assigned spans in the system in a format fit to be used in <strong>assigned-spans.conf</strong>. Use this to generate a configuration file after you have (automatically or manually) assigned all existing spans.</p><p><strong>dahdi_genconf assignedspans</strong> uses this command internally.</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">OPTIONS</h2>
        <div class="sectioncontent">
<p><strong>-v --verbose</strong></p><p>Verbose output.</p><p><strong>-n --dry-run</strong></p><p>Don't assign / un-assign spans. Only print commands used to do so.</p><p><strong>-k </strong><em>key</em></p><p>For <strong>dumpconfig</strong> - The key by which to identify the hardware in the generated configuration. Legal values:</p><p><strong>hwid</strong></p><p>Hardware identifier (e.g.: software-readable serial number). This is the default. If the device has no hwid, devpath is used.</p><p><strong>location</strong></p><p>The location field (file) in the SysFS device node (directory) for the DAHDI device. If not available (typically: DAHDI version &lt;= 2.7.x), devpath is used.</p><p><strong>devpath</strong></p><p>Path in SysFS to the device node.</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">CONFIGURATION</h2>
        <div class="sectioncontent">
<p><strong>/etc/dahdi/assigned-spans.conf</strong> is a file with lines specifying assignment of spans.</p><p>Empty lines or lines beginning with '#' are ignored.</p><p>Each line is in the format of:</p><p><em>ID spanspec ...</em></p><p>The <em>ID</em> field specifies the DAHDI device and the <em>spanspecs</em> define how to assign its spans. A line may have multiple <em>spanspecs</em> in a single line (though dumpconfig generates a configuration with one per line).</p><h3>Span Identifier</h3>
<p>A DAHDI device may be specified either by a hardware identifier (a software readable serial number or whatever) or the location in which it is installed on the system. The former makes it simpler to change connector / slot whereas the latter makes it simpler to replace a unit.</p><p>The value in this field is matched (when the commands <strong>add</strong> and <strong>remove</strong>) are used) to the following values:</p><p> <em>hwid</em>  <strong>@</strong><em>location</em>  <em>devpath</em></p><p>See above for their descriptions. The value may include shell wildcards: *, ? and [], which are used in the match. The values to be matched are first cleaned up: '!' is replaced with '/' and any character beyond "a-zA-Z0-9/:.-" is removed.</p>
<h3>Span Specification</h3>
<p>Each line should have one or more span specifications: this is the value used to assign a span with DAHDI in the SysFS interface. A specification has three colon-separated numbers:</p><p><em>rel_span_no:span_no:first_chan</em></p><p>for instance, the following are four span specifications for a quad-E1 device: 1:6:53 2:7:84 3:8:115 4:9:146 occupying spans 6-9 and channels 53-176.</p><p><strong>rel_span_no</strong></p><p>The relative number of the span in the device. E.g.: port number.</p><p><strong>span_no</strong></p><p>The desired DAHDI span number. Must be available.</p><p><strong>first_chan</strong></p><p>The desired DAHDI channel number for the first DAHDI channel in the span. All channels of the span will be assigned following it and hence that space must be available.</p>

        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">ENVIRONMENT</h2>
        <div class="sectioncontent">
<p><strong>DAHDICONFDIR</strong></p><p>The directory in which assigned-spans.conf resides. /etc/dahdi if not overridden from the environment.</p><p><strong>DAHDISASSIGNEDSPANSCONF</strong></p><p>The path to assigned-spans.conf resides. /etc/dahdi/assigned-spans.conf if not overridden from the environment.</p><p><strong>SPAN_ASSIGNMENTS_KEY</strong></p><p>The default value for -k . Defaults to "hwid" if not overridden from the environment.</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">FILES</h2>
        <div class="sectioncontent">
<p><strong>/etc/dahdi/assigned-spans.conf</strong></p><p>The default location for the configuration file.</p><p><strong>/sys/bus/dahdi_devices/devices/</strong><em>device</em></p><p>SysFS node for the device. In this directory reside the following files, among others:</p><p><strong>location</strong></p><p>The value of the device's location field.</p><p><strong>assign_span, unassign_span, auto_assign</strong></p><p>Write only files for the operations. Used by <strong>add</strong>, <strong>remove</strong> and <strong>auto</strong>, respectively.</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">RELATED TO dahdi_span_assignments&hellip;</h2>
        <div class="sectioncontent">
<p><a href="../man8/dahdi_span_types.8.html"><strong>dahdi_span_types</strong>(8)</a>, <strong>dahdi_genconf</strong>(8), <a href="../man8/dahdi_cfg.8.html"><strong>dahdi_cfg</strong>(8)</a></p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">AUTHOR</h2>
        <div class="sectioncontent">
<p>dahdi_span_assignments was written by Oron Peled.  This manual page was written by Tzafrir Cohen. Permission is granted to copy, distribute and/or modify this document under the terms of the GNU General Public License, Version 2 any  later version published by the Free Software Foundation.</p>
        </div>
      </section>
<nav>
  <ul class="pager">
   <li class="previous"><a href="dahdi_scan.8.html"><span aria-hidden="true">&larr;</span> dahdi_scan.8: Dahdi_scan  print configuration of dahdi spans</a></li>
   <li class="next"><a href="dahdi_span_types.8.html">dahdi_span_types.8: Set line modes of dahdi spans before assignment <span aria-hidden="true">&rarr;</span></a></li>
  </ul>
</nav>

  </div>
  <!-- jQuery (necessary for Bootstrap's JavaScript plugins) -->
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.2/jquery.min.js"></script>
  <!-- Include all compiled plugins (below), or include individual files as needed -->
  <script src="/js/bootstrap.min.js"></script>
  <script>
    (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
      (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
      m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
    })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

    ga('create', 'UA-60781387-1', 'auto');
    ga('send', 'pageview');

  </script>
</body>
</html>
