<!DOCTYPE html>
<html lang="en">
<head>
  <link href="https://fonts.googleapis.com/css?family=Fira+Mono:400,700&effect=destruction%7Cshadow-multiple" rel="stylesheet" type="text/css">
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>mrb: Manage incremental snapshots with rsync/make.</title>
  <link href="/css/bootstrap.min.css" rel="stylesheet">
  <link href="/css/manpage.css" rel="stylesheet">
  <link rel="apple-touch-icon" sizes="57x57" href="/icons/apple-icon-57x57.png">
  <link rel="apple-touch-icon" sizes="60x60" href="/icons/apple-icon-60x60.png">
  <link rel="apple-touch-icon" sizes="72x72" href="/icons/apple-icon-72x72.png">
  <link rel="apple-touch-icon" sizes="76x76" href="/icons/apple-icon-76x76.png">
  <link rel="apple-touch-icon" sizes="114x114" href="/icons/apple-icon-114x114.png">
  <link rel="apple-touch-icon" sizes="120x120" href="/icons/apple-icon-120x120.png">
  <link rel="apple-touch-icon" sizes="144x144" href="/icons/apple-icon-144x144.png">
  <link rel="apple-touch-icon" sizes="152x152" href="/icons/apple-icon-152x152.png">
  <link rel="apple-touch-icon" sizes="180x180" href="/icons/apple-icon-180x180.png">
  <link rel="icon" type="image/png" sizes="192x192" href="/icons/android-icon-192x192.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/icons/favicon-32x32.png">
  <link rel="icon" type="image/png" sizes="96x96" href="/icons/favicon-96x96.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/icons/favicon-16x16.png">
  <link rel="manifest" href="/icons/manifest.json">
  <meta name="msapplication-TileColor" content="#ffffff">
  <meta name="msapplication-TileImage" content="/icons/ms-icon-144x144.png">
  <meta name="theme-color" content="#ffffff">
  <meta name="description" content="Manage incremental snapshots with rsync/make.">
  <meta name="twitter:card" content="summary_large_image">
  <meta name="twitter:site" content="@CartaTech">
  <meta name="twitter:creator" content="@CartaTech">
  <meta name="twitter:title" content="mrb (8) manual">
  <meta name="twitter:description" content="Manage incremental snapshots with rsync/make.">
  <meta name="twitter:image" content="https://www.carta.tech/images/mrb-mrb-8.png">
  <meta property="og:url" content="https://www.carta.tech/man-pages/man8/mrb.8.html" />
  <meta property="og:type" content="website" />
  <meta property="og:title" content="mrb (8) manual" />
  <meta property="og:description" content="Manage incremental snapshots with rsync/make." />
  <meta property="fb:app_id" content="1241677679199500" />
  <meta property="og:image" content="https://www.carta.tech/images/mrb-mrb-8.png" />
  <meta property="og:image:width" content="600" />
  <meta property="og:image:height" content="315" />
</head>
<body>
  <div class="container final">
          <div class="page-header">
        <h1 class="font-effect-destruction">mrb<small> (8)</small></h1>
        <p class="lead">Manage incremental snapshots with rsync/make.</p>
      </div>

    <ol class="breadcrumb" itemscope itemtype="http://schema.org/BreadcrumbList">
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/">
      <span itemprop="name">Carta.tech</span>
    </a>
    <meta itemprop="position" content="1" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/">
      <span itemprop="name">Man Pages</span>
    </a>
    <meta itemprop="position" content="2" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/man8/">
      <span itemprop="name">System administration commands</span>
    </a>
    <meta itemprop="position" content="3" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/man8/mrb.8.html">
      <span itemprop="name">mrb: Manage incremental snapshots with rsync/make.</span>
    </a>
    <meta itemprop="position" content="4" />
  </li>
</ol>
<ol class="breadcrumb" itemscope itemtype="http://schema.org/BreadcrumbList">
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/">
      <span itemprop="name">Carta.tech</span>
    </a>
    <meta itemprop="position" content="1" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/packages/">
      <span itemprop="name">Packages</span>
    </a>
    <meta itemprop="position" content="2" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/packages/mrb/">
      <span itemprop="name">mrb</span>
    </a>
    <meta itemprop="position" content="3" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/man8/mrb.8.html">
      <span itemprop="name">mrb: Manage incremental snapshots with rsync/make.</span>
    </a>
    <meta itemprop="position" content="4" />
  </li>
</ol>
    
      <section>
        <h2 class="font-effect-shadow-multiple">SYNOPSIS</h2>
        <div class="sectioncontent">
<p><strong>mrb</strong> <em>command</em></p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">DESCRIPTION</h2>
        <div class="sectioncontent">
<p><strong>mrb</strong> is a simple aid to creating efficient incremental snapshots of a set, or sets, of directories whenever that may be required.  It may be used as part of a regular automated backup regime, or for manually checkpointing changes at convenient points in time.</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">COMMANDS</h2>
        <div class="sectioncontent">
<p>The following commands are recognised (where '<em>MODULE</em>' is the name of one of your snapshot definitions):</p>
<dl class='dl-vertical'>
  <dt>
    <p><strong>new-</strong><em>MODULE</em></p>
  </dt>
  <dd>
    <p>Create a skeleton definition for a new snapshot '<em>MODULE</em>'.</p>
  </dd>
  <dt>
    <p><strong>dest-</strong><em>MODULE</em></p>
  </dt>
  <dd>
    <p>Create the destination dir for '<em>MODULE</em>'. This directory must exist to create a snapshot.</p>
  </dd>
  <dt>
    <p><strong>snap-</strong><em>MODULE</em></p>
  </dt>
  <dd>
    <p>Create a snapshot of '<em>MODULE</em>'.</p>
  </dd>
  <dt>
    <p><strong>sync</strong></p>
  </dt>
  <dd>
    <p>Create snapshots of all defined modules. If run as root this may be configured to include the modules of other users too (see MRB_SYNC_USERS in ~/.mrb/defaults).</p>
  </dd>
  <dt>
    <p><strong>help</strong></p>
  </dt>
  <dd>
    <p>Show mrb's own help text.</p>
  </dd>

</dl>

        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">CONFIGURATION FILES</h2>
        <div class="sectioncontent">
<h3>Per-user configuration</h3>
<p>The following files may be used to specify global and local configuration options.</p>
<dl class='dl-vertical'>
  <dt>
    <p><em>/etc/default/mrb</em></p>
  </dt>
  <dd>
    <p>system default configuration.</p>
  </dd>
  <dt>
    <p><em>~/.mrb/defaults</em></p>
  </dt>
  <dd>
    <p>per-user configuration.</p>
  </dd>

</dl>

<h3>Per-user options</h3>
<p>The following options control behaviour for all of a user's modules.</p>
<dl class='dl-vertical'>
  <dt>
    <p><strong>MRB_SNAPSHOT_LOG</strong></p>
  </dt>
  <dd>
    <p>An optional file path where transfer details will be recorded.  If unset these details will not be logged.</p>
  </dd>
  <dt>
    <p><strong>MRB_SYNC_USERS</strong></p>
  </dt>
  <dd>
    <p>A space separated list of users whose modules should be included in a <strong>sync</strong>. This is mostly only useful for root, as mrb will assume the identity of each user before creating snapshots of their modules.  If unset, only the invoking user's modules will be sync'ed.</p>
  </dd>
  <dt>
    <p><strong>MRB_CONFDIR</strong></p>
  </dt>
  <dd>
    <p>An space separated list of the directories to search for module definition (*.mrc) files.  They will be searched in the order given, with new modules added by default to the last one listed.  There should be few reasons to change the default value.</p>
  </dd>

</dl>

<h3>Per-module configuration</h3>
<p>The default <strong>MRB_CONFDIR</strong> value will search for module definitions in:</p>
<dl class='dl-vertical'>
  <dt>
    <p><em>/etc/mrb/*.mrc</em></p>
  </dt>
  <dd>
    
  </dd>
  <dt>
    <p><em>~/.mrb/*.mrc</em></p>
  </dt>
  <dd>
    <p>Those created by <strong>new-</strong><em>MODULE</em> will be placed in this latter location by default.</p>
  </dd>

</dl>

<h3>Per-module options</h3>
<p>In each case <em>module</em> below is the name of the particular module that the value set should apply to.  These options should be defined in a file named <em>module</em>.<strong>mrc</strong>.</p>
<dl class='dl-vertical'>
  <dt>
    <p><strong>module_SRC</strong></p>
  </dt>
  <dd>
    <p>A space separated list of the files and (top level) directories to include in the snapshots for this module.</p>
  </dd>
  <dt>
    <p><strong>module_DEST</strong></p>
  </dt>
  <dd>
    <p>The directory root where snapshots of <em>module</em> should be stored.</p>
  </dd>
  <dt>
    <p><strong>module_INCLUDE</strong></p>
  </dt>
  <dd>
    <p>An optional list of <a href="../man1/rsync.1.html"><strong>rsync</strong>(1)</a> include patterns.</p>
  </dd>
  <dt>
    <p><strong>module_EXCLUDE</strong></p>
  </dt>
  <dd>
    <p>An optional list of <a href="../man1/rsync.1.html"><strong>rsync</strong>(1)</a> exclude patterns.</p>
  </dd>
  <dt>
    <p><strong>module_FILTER</strong></p>
  </dt>
  <dd>
    <p>An optional list of <a href="../man1/rsync.1.html"><strong>rsync</strong>(1)</a> filter patterns.</p>
  </dd>
  <dt>
    <p><strong>module_FILTER_FILE</strong></p>
  </dt>
  <dd>
    <p>An optional filename for <a href="../man1/rsync.1.html"><strong>rsync</strong>(1)</a> dir-merge filtering support.</p>
  </dd>
  <dt>
    <p><strong>module_RSYNC_OPTIONS</strong></p>
  </dt>
  <dd>
    <p>Optional additional <a href="../man1/rsync.1.html"><strong>rsync</strong>(1)</a> options to pass verbatim when it is invoked.</p>
  </dd>
  <dt>
    <p><strong>module_PRECOMMAND</strong></p>
  </dt>
  <dd>
    <p>An optional shell command to invoke just prior to creating a new snapshot. If the command does not return a successful exit status, then the snapshot creation will be aborted before it begins.  It may be used to mount removable media or similar.</p>
  </dd>
  <dt>
    <p><strong>module_POSTCOMMAND</strong></p>
  </dt>
  <dd>
    <p>An optional shell command to execute after making the snapshot.  It will not be called if the snaphot creation failed at an earlier stage, and its return status may halt a sync operation if it fails with more modules still to process. It may be used, for example, to unmount removable media again.</p>
  </dd>
  <dt>
    <p><strong>module_USER</strong></p>
  </dt>
  <dd>
    <p>An optional user name to check that mrb is running as before performing a snapshot.  This can be used to ensure you have the correct permisson to access the files being mirrored before you get too far.</p>
  </dd>

</dl>


        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">RELATED TO mrb&hellip;</h2>
        <div class="sectioncontent">
<p><a href="../man1/rsync.1.html"><strong>rsync</strong>(1)</a>, <a href="../man1/make.1.html"><strong>make</strong>(1)</a>.</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">AUTHOR</h2>
        <div class="sectioncontent">
<p>mrb was written by Ron &lt;ron@debian.org&gt;.</p>
        </div>
      </section>
<nav>
  <ul class="pager">
   <li class="previous"><a href="mpt-status.8.html"><span aria-hidden="true">&larr;</span> mpt-status.8: Retrieve configuration and health status from lsi hardware raid controllers</a></li>
   <li class="next"><a href="mrd6.8.html">mrd6.8: An ipv6 multicast routing daemon and framework <span aria-hidden="true">&rarr;</span></a></li>
  </ul>
</nav>

  </div>
  <!-- jQuery (necessary for Bootstrap's JavaScript plugins) -->
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.2/jquery.min.js"></script>
  <!-- Include all compiled plugins (below), or include individual files as needed -->
  <script src="/js/bootstrap.min.js"></script>
  <script>
    (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
      (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
      m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
    })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

    ga('create', 'UA-60781387-1', 'auto');
    ga('send', 'pageview');

  </script>
</body>
</html>
