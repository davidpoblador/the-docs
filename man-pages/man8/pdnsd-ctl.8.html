<!DOCTYPE html>
<html lang="en">
<head>
  <link href="https://fonts.googleapis.com/css?family=Fira+Mono:400,700&effect=destruction%7Cshadow-multiple" rel="stylesheet" type="text/css">
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>pdnsd-ctl: Controls pdnsd</title>
  <link href="/css/bootstrap.min.css" rel="stylesheet">
  <link href="/css/manpage.css" rel="stylesheet">
  <link rel="apple-touch-icon" sizes="57x57" href="/icons/apple-icon-57x57.png">
  <link rel="apple-touch-icon" sizes="60x60" href="/icons/apple-icon-60x60.png">
  <link rel="apple-touch-icon" sizes="72x72" href="/icons/apple-icon-72x72.png">
  <link rel="apple-touch-icon" sizes="76x76" href="/icons/apple-icon-76x76.png">
  <link rel="apple-touch-icon" sizes="114x114" href="/icons/apple-icon-114x114.png">
  <link rel="apple-touch-icon" sizes="120x120" href="/icons/apple-icon-120x120.png">
  <link rel="apple-touch-icon" sizes="144x144" href="/icons/apple-icon-144x144.png">
  <link rel="apple-touch-icon" sizes="152x152" href="/icons/apple-icon-152x152.png">
  <link rel="apple-touch-icon" sizes="180x180" href="/icons/apple-icon-180x180.png">
  <link rel="icon" type="image/png" sizes="192x192" href="/icons/android-icon-192x192.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/icons/favicon-32x32.png">
  <link rel="icon" type="image/png" sizes="96x96" href="/icons/favicon-96x96.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/icons/favicon-16x16.png">
  <link rel="manifest" href="/icons/manifest.json">
  <meta name="msapplication-TileColor" content="#ffffff">
  <meta name="msapplication-TileImage" content="/icons/ms-icon-144x144.png">
  <meta name="theme-color" content="#ffffff">
  <meta name="description" content="Controls pdnsd">
  <meta name="twitter:card" content="summary_large_image">
  <meta name="twitter:site" content="@CartaTech">
  <meta name="twitter:creator" content="@CartaTech">
  <meta name="twitter:title" content="pdnsd-ctl (8) manual">
  <meta name="twitter:description" content="Controls pdnsd">
  <meta name="twitter:image" content="https://www.carta.tech/images/pdnsd-pdnsd-ctl-8.png">
  <meta property="og:url" content="https://www.carta.tech/man-pages/man8/pdnsd-ctl.8.html" />
  <meta property="og:type" content="website" />
  <meta property="og:title" content="pdnsd-ctl (8) manual" />
  <meta property="og:description" content="Controls pdnsd" />
  <meta property="fb:app_id" content="1241677679199500" />
  <meta property="og:image" content="https://www.carta.tech/images/pdnsd-pdnsd-ctl-8.png" />
  <meta property="og:image:width" content="600" />
  <meta property="og:image:height" content="315" />
</head>
<body>
  <div class="container final">
          <div class="page-header">
        <h1 class="font-effect-destruction">pdnsd-ctl<small> (8)</small></h1>
        <p class="lead">Controls pdnsd</p>
      </div>

    <ol class="breadcrumb" itemscope itemtype="http://schema.org/BreadcrumbList">
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/">
      <span itemprop="name">Carta.tech</span>
    </a>
    <meta itemprop="position" content="1" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/">
      <span itemprop="name">Man Pages</span>
    </a>
    <meta itemprop="position" content="2" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/man8/">
      <span itemprop="name">System administration commands</span>
    </a>
    <meta itemprop="position" content="3" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/man8/pdnsd-ctl.8.html">
      <span itemprop="name">pdnsd-ctl: Controls pdnsd</span>
    </a>
    <meta itemprop="position" content="4" />
  </li>
</ol>
<ol class="breadcrumb" itemscope itemtype="http://schema.org/BreadcrumbList">
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/">
      <span itemprop="name">Carta.tech</span>
    </a>
    <meta itemprop="position" content="1" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/packages/">
      <span itemprop="name">Packages</span>
    </a>
    <meta itemprop="position" content="2" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/packages/pdnsd/">
      <span itemprop="name">pdnsd</span>
    </a>
    <meta itemprop="position" content="3" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/man8/pdnsd-ctl.8.html">
      <span itemprop="name">pdnsd-ctl: Controls pdnsd</span>
    </a>
    <meta itemprop="position" content="4" />
  </li>
</ol>
    
      <section>
        <h2 class="font-effect-shadow-multiple">SYNOPSIS</h2>
        <div class="sectioncontent">
<p><strong>pdnsd-ctl</strong> [<strong>-c</strong> <em>cachedir</em>] [<strong>-q</strong>] <em>command</em> [<em>arguments</em>]</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">DESCRIPTION</h2>
        <div class="sectioncontent">
<p><strong>pdnsd-ctl</strong> controls <strong>pdnsd</strong>, a proxy dns server with permanent caching. Note that the status control socket must be enabled (by specifying an option on the pdnsd command line or in the configuration file) before you can use <strong>pdnsd-ctl</strong>.</p>
<dl class='dl-vertical'>
  <dt>
    <p><strong>-c</strong> <em>cachedir</em></p>
  </dt>
  <dd>
    <p>Set the cache directory to <em>cachedir</em> (must match pdnsd setting). This is only necessary if the directory differs from the default specified at compile time.</p>
  </dd>
  <dt>
    <p><strong>-q</strong></p>
  </dt>
  <dd>
    <p>Be quiet unless output is specified by the command or something goes wrong.</p>
  </dd>

</dl>

        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">COMMANDS</h2>
        <div class="sectioncontent">

<dl class='dl-vertical'>
  <dt>
    <p><strong>help</strong>&nbsp;&nbsp;&nbsp;[no arguments]</p>
  </dt>
  <dd>
    <p>Print a command summary.</p>
  </dd>
  <dt>
    <p><strong>version</strong>&nbsp;[no arguments]</p>
  </dt>
  <dd>
    <p>Print version and license info.</p>
  </dd>
  <dt>
    <p><strong>status</strong>&nbsp;[no arguments]</p>
  </dt>
  <dd>
    <p>Print a description of pdnsd's cache status, thread status and configuration. Also shows which remote name servers are assumed to be available.</p>
  </dd>
  <dt>
    <p><strong>server</strong>&nbsp;(<em>index</em>|<em>label</em>) (<strong>up</strong>|<strong>down</strong>|<strong>retest</strong>) [<em>dns1</em>[,<em>dns2</em>[,...]]]</p>
  </dt>
  <dd>
    <p>Set the status of the servers with the given index or label to up or down, or force a retest. The index is assigned in the order of definition in pdnsd.conf starting with 0. Use the status command to view the indexes. You can specify all instead of an index to perform the action for all servers registered with pdnsd.</p><ul>
<li><p>An optional third argument can be given consisting of a list of IP addresses separated by commas or white-space characters. This list will replace the addresses of name servers used by pdnsd for the given server section. This feature is useful for run-time configuration of pdnsd with dynamic DNS data in scripts called by ppp or DHCP clients. The last argument may also be an empty string, which causes existing IP addresses to be removed and the corresponding server section to become inactive.</p></li>
</ul>
  </dd>
  <dt>
    <p><strong>record</strong>&nbsp;<em>name</em> (<strong>delete</strong>|<strong>invalidate</strong>)</p>
  </dt>
  <dd>
    <p>Delete or invalidate the records of the given domain name if it is in the cache. Invalidation means that the records are marked as timed out, and will be reloaded if possible. For local records (i.e., records that were given in the config file using a rr section, records read from a hosts-style file and records added using pdnsd-ctl), invalidation has no effect. Deletion will work, though.</p>
  </dd>
  <dt>
    <p><strong>source</strong>&nbsp;<em>fn</em> <em>owner</em> [<em>ttl</em>] [(<strong>on</strong>|<strong>off</strong>)] [<strong>noauth</strong>]</p>
  </dt>
  <dd>
    <p>Load a hosts-style file. Works like using the pdnsd source configuration section. Owner and ttl are used as in the source section. ttl has a default of 900 (it does not need to be specified). The next to last argument corresponds to the serve_aliases option, and is off by default. <strong>noauth</strong> is used to make the domains non-authoritative (this is similar to setting authrec=off in the config file, please consult the <strong>pdnsd.conf</strong>(5) man page for what that means). fn is the name of the file, which must be readable by pdnsd.</p>
  </dd>
  <dt>
    <p><strong>add</strong>&nbsp;&nbsp;&nbsp;&nbsp;<strong>a</strong> <em>addr</em> <em>name</em> [<em>ttl</em>] [<strong>noauth</strong>]</p>
  </dt>
  <dd>
    
  </dd>
  <dt>
    <p><strong>add</strong>&nbsp;&nbsp;&nbsp;&nbsp;<strong>aaaa</strong> <em>addr</em> <em>name</em> [<em>ttl</em>] [<strong>noauth</strong>]</p>
  </dt>
  <dd>
    
  </dd>
  <dt>
    <p><strong>add</strong>&nbsp;&nbsp;&nbsp;&nbsp;<strong>ptr</strong> <em>host</em> <em>name</em> [<em>ttl</em>] [<strong>noauth</strong>]</p>
  </dt>
  <dd>
    
  </dd>
  <dt>
    <p><strong>add</strong>&nbsp;&nbsp;&nbsp;&nbsp;<strong>cname</strong> <em>host</em> <em>name</em> [<em>ttl</em>] [<strong>noauth</strong>]</p>
  </dt>
  <dd>
    
  </dd>
  <dt>
    <p><strong>add</strong>&nbsp;&nbsp;&nbsp;&nbsp;<strong>mx</strong> <em>host</em> <em>name</em> <em>pref</em> [<em>ttl</em>] [<strong>noauth</strong>]</p>
  </dt>
  <dd>
    <p>Add a record of the given type to the pdnsd cache, replacing existing records for the same name and type. The 2nd argument corresponds to the value of the option in the rr section that is named like the first argument. The addr argument may be a list of IP addresses, separated by commas or white space. The ttl is optional, the default is 900 seconds. <strong>noauth</strong> is used to make the domains non-authoritative (this is similar to setting authrec=off in the config file, please consult the <strong>pdnsd.conf</strong>(5) man page for what that means). If you want no other record than the newly added in the cache, do <strong>pdnsd-ctl</strong>&nbsp;<strong>record</strong>&nbsp;<em>name</em>&nbsp;<strong>delete</strong> before adding records.</p>
  </dd>
  <dt>
    <p><strong>neg</strong>&nbsp;&nbsp;&nbsp;&nbsp;<em>name</em> [<em>type</em>] [<em>ttl</em>]</p>
  </dt>
  <dd>
    <p>Add a negatively cached record to pdnsd's cache, replacing existing records for the same name and type. If no type is given, the whole domain is cached negatively. For negatively cached records, errors are immediately returned on a query, without querying other servers first. The ttl is optional, the default is 900 seconds.</p>
  </dd>
  <dt>
    <p><strong>config</strong>&nbsp;<em>filename</em></p>
  </dt>
  <dd>
    <p>Reload pdnsd's configuration file.</p><p>The config file must be owned by the uid that pdnsd had when it was started, and be readable by pdnsd's run_as uid. If no file name is specified, the config file used at start-up is reloaded. Note that some configuration changes, like the port or IP address pdnsd listens on, cannot be made this way and you will receive an error message. In these cases, you will have to restart pdnsd instead.</p>
  </dd>
  <dt>
    <p><strong>include</strong>&nbsp;<em>filename</em></p>
  </dt>
  <dd>
    <p>Parse an include file.</p><p>The include file may contain the same type of sections as a config file, expect for global and server sections, which are not allowed. This command can be used to add data to the cache without reconfiguring pdnsd.</p>
  </dd>
  <dt>
    <p><strong>eval</strong>&nbsp;&nbsp;&nbsp;<em>string</em></p>
  </dt>
  <dd>
    <p>Parse a string as if part of an include file.</p><p>The string should hold one or more complete configuration sections, but no global and server sections, which are not allowed. If multiple strings are given, they will be joined using newline chars and parsed together.</p>
  </dd>
  <dt>
    <p><strong>empty-cache</strong>&nbsp;[[+|-]<em>name</em> ...]</p>
  </dt>
  <dd>
    <p>Delete all entries in the cache matching include/exclude rules.</p><p>If no arguments are provided, the cache is completely emptied, freeing all existing entries. Note that this also removes local records, as defined by the config file. To restore local records, run "pdnsd-ctl&nbsp;config" immediately afterwards.</p><p>If one or more arguments are provided, these are interpreted as include/exclude names. If an argument starts with a '+' the name is to be included. If an argument starts with a '-' it is to be excluded. If an argument does not begin with '+' or '-', a '+' is assumed. If the domain name of a cache entry ends in one of the names in the list, the first match will determine what happens. If the matching name is to be included, the cache entry is deleted, otherwise it remains. If there are no matches, the default action is not to delete.</p>
  </dd>
  <dt>
    <p><strong>dump</strong>&nbsp;&nbsp;&nbsp;[<em>name</em>]</p>
  </dt>
  <dd>
    <p>Print information stored in the cache about <em>name</em>. If <em>name</em> begins with a dot and is not the root domain, information about the names in the cache ending in <em>name</em> (including <em>name</em> without the leading dot) will be printed. If <em>name</em> is not specified, information about all the names in the cache will be printed.</p>
  </dd>
  <dt>
    <p><strong>list-rrtypes</strong> [no arguments]</p>
  </dt>
  <dd>
    <p>List available rr types for the neg command. Note that those are only used for the neg command, not for add!</p>
  </dd>

</dl>

        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">BUGS</h2>
        <div class="sectioncontent">
<p>If you pipe the output of <strong>dump</strong> command through an application that reads only part of the output and then blocks (such as more or less), pdnsd threads trying to add new entries to the cache will be suspended until the pipe is closed. It is preferable to capture the output in a file in such a case.</p><p>Report any remaining bugs to the authors.</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">AUTHORS</h2>
        <div class="sectioncontent">
<p>Thomas Moestl</p><p>&lt;tmoestl@gmx.net&gt;</p><p>Paul A. Rombouts</p><p>&lt;p.a.rombouts@home.nl&gt;</p><p>(for versions 1.1.8b1-par and later)</p><p>Last revised: 04 Sep 2008 by Paul A. Rombouts.</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">RELATED TO pdnsd-ctl&hellip;</h2>
        <div class="sectioncontent">
<p><a href="../man8/pdnsd.8.html"><strong>pdnsd</strong>(8)</a>, <strong>pdnsd.conf</strong>(5)</p>
        </div>
      </section>
<nav>
  <ul class="pager">
   <li class="previous"><a href="pdnsd.8.html"><span aria-hidden="true">&larr;</span> pdnsd.8: Dns proxy daemon</a></li>
   <li class="next"><a href="pdnssec.8.html">pdnssec.8: Powerdnssec command and control <span aria-hidden="true">&rarr;</span></a></li>
  </ul>
</nav>

  </div>
  <!-- jQuery (necessary for Bootstrap's JavaScript plugins) -->
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.2/jquery.min.js"></script>
  <!-- Include all compiled plugins (below), or include individual files as needed -->
  <script src="/js/bootstrap.min.js"></script>
  <script>
    (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
      (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
      m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
    })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

    ga('create', 'UA-60781387-1', 'auto');
    ga('send', 'pageview');

  </script>
</body>
</html>
