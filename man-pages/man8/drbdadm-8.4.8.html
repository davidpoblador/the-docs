<!DOCTYPE html>
<html lang="en">
<head>
  <link href="https://fonts.googleapis.com/css?family=Fira+Mono:400,700&effect=destruction%7Cshadow-multiple" rel="stylesheet" type="text/css">
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>drbdadm-8.4: Administration tool for drbd .</title>
  <link href="/css/bootstrap.min.css" rel="stylesheet">
  <link href="/css/manpage.css" rel="stylesheet">
  <link rel="apple-touch-icon" sizes="57x57" href="/icons/apple-icon-57x57.png">
  <link rel="apple-touch-icon" sizes="60x60" href="/icons/apple-icon-60x60.png">
  <link rel="apple-touch-icon" sizes="72x72" href="/icons/apple-icon-72x72.png">
  <link rel="apple-touch-icon" sizes="76x76" href="/icons/apple-icon-76x76.png">
  <link rel="apple-touch-icon" sizes="114x114" href="/icons/apple-icon-114x114.png">
  <link rel="apple-touch-icon" sizes="120x120" href="/icons/apple-icon-120x120.png">
  <link rel="apple-touch-icon" sizes="144x144" href="/icons/apple-icon-144x144.png">
  <link rel="apple-touch-icon" sizes="152x152" href="/icons/apple-icon-152x152.png">
  <link rel="apple-touch-icon" sizes="180x180" href="/icons/apple-icon-180x180.png">
  <link rel="icon" type="image/png" sizes="192x192" href="/icons/android-icon-192x192.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/icons/favicon-32x32.png">
  <link rel="icon" type="image/png" sizes="96x96" href="/icons/favicon-96x96.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/icons/favicon-16x16.png">
  <link rel="manifest" href="/icons/manifest.json">
  <meta name="msapplication-TileColor" content="#ffffff">
  <meta name="msapplication-TileImage" content="/icons/ms-icon-144x144.png">
  <meta name="theme-color" content="#ffffff">
  <meta name="description" content="Administration tool for drbd .">
  <meta name="twitter:card" content="summary_large_image">
  <meta name="twitter:site" content="@CartaTech">
  <meta name="twitter:creator" content="@CartaTech">
  <meta name="twitter:title" content="drbdadm-8.4 (8) manual">
  <meta name="twitter:description" content="Administration tool for drbd .">
  <meta name="twitter:image" content="https://www.carta.tech/images/drbd-utils-drbdadm-8.4-8.png">
  <meta property="og:url" content="https://www.carta.tech/man-pages/man8/drbdadm-8.4.8.html" />
  <meta property="og:type" content="website" />
  <meta property="og:title" content="drbdadm-8.4 (8) manual" />
  <meta property="og:description" content="Administration tool for drbd ." />
  <meta property="fb:app_id" content="1241677679199500" />
  <meta property="og:image" content="https://www.carta.tech/images/drbd-utils-drbdadm-8.4-8.png" />
  <meta property="og:image:width" content="600" />
  <meta property="og:image:height" content="315" />
</head>
<body>
  <div class="container final">
          <div class="page-header">
        <h1 class="font-effect-destruction">drbdadm-8.4<small> (8)</small></h1>
        <p class="lead">Administration tool for drbd .</p>
      </div>

    <ol class="breadcrumb" itemscope itemtype="http://schema.org/BreadcrumbList">
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/">
      <span itemprop="name">Carta.tech</span>
    </a>
    <meta itemprop="position" content="1" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/">
      <span itemprop="name">Man Pages</span>
    </a>
    <meta itemprop="position" content="2" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/man8/">
      <span itemprop="name">System administration commands</span>
    </a>
    <meta itemprop="position" content="3" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/man8/drbdadm-8.4.8.html">
      <span itemprop="name">drbdadm-8.4: Administration tool for drbd .</span>
    </a>
    <meta itemprop="position" content="4" />
  </li>
</ol>
<ol class="breadcrumb" itemscope itemtype="http://schema.org/BreadcrumbList">
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/">
      <span itemprop="name">Carta.tech</span>
    </a>
    <meta itemprop="position" content="1" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/packages/">
      <span itemprop="name">Packages</span>
    </a>
    <meta itemprop="position" content="2" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/packages/drbd-utils/">
      <span itemprop="name">drbd-utils</span>
    </a>
    <meta itemprop="position" content="3" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/man8/drbdadm-8.4.8.html">
      <span itemprop="name">drbdadm-8.4: Administration tool for drbd .</span>
    </a>
    <meta itemprop="position" content="4" />
  </li>
</ol>
    
      <section>
        <h2 class="font-effect-shadow-multiple">SYNOPSIS</h2>
        <div class="sectioncontent">
<p><strong>drbdadm</strong> [-d] [-c&nbsp;{<em>file</em>}] [-t&nbsp;{<em>file</em>}] [-s&nbsp;{<em>cmd</em>}] [-m&nbsp;{<em>cmd</em>}] [-S] [-h&nbsp;{<em>host</em>}] [--&nbsp;{<em>backend-options</em>}] {<em>command</em>} [{all} | {<em>resource</em><em>[/volume&gt;]</em>...}]</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">DESCRIPTION</h2>
        <div class="sectioncontent">
<p><strong>Drbdadm</strong> is the high level tool of the DRBD program suite. <strong>Drbdadm</strong> is to <strong>drbdsetup</strong> and <strong>drbdmeta</strong> what <strong>ifup</strong>/<strong>ifdown</strong> is to <strong>ifconfig</strong>. <strong>Drbdadm</strong> reads its configuration file and performs the specified commands by calling the <strong>drbdsetup</strong> and/or the <strong>drbdmeta</strong> program.</p><p><strong>Drbdadm</strong> can operate on whole resources or on individual volumes in a resource. The sub commands: <strong>attach</strong>, <strong>detach</strong>, <strong>primary</strong>, <strong>secondary</strong>, <strong>invalidate</strong>, <strong>invalidate-remote</strong>, <strong>outdate</strong>, <strong>resize</strong>, <strong>verify</strong>, <strong>pause-sync</strong>, <strong>resume-sync</strong>, <strong>role</strong>, <strong>csytate</strong>, <strong>dstate</strong>, <strong>create-md</strong>, <strong>show-gi</strong>, <strong>get-gi</strong>, <strong>dump-md</strong>, <strong>wipe-md</strong> work on whole resources and on individual volumes.</p><p>Resource level only commands are: <strong>connect</strong>, <strong>disconnect</strong>, <strong>up</strong>, <strong>down</strong>, <strong>wait-connect</strong> and <strong>dump</strong>.</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">OPTIONS</h2>
        <div class="sectioncontent">
<p><strong>-d</strong>, <strong>--dry-run</strong></p><p>Just prints the calls of <strong>drbdsetup</strong> to stdout, but does not run the commands.</p><p><strong>-c</strong>, <strong>--config-file</strong> <em>file</em></p><p>Specifies the configuration file drbdadm will use. If this parameter is not specified, drbdadm will look for <strong>/etc/drbd-84.conf</strong>, <strong>/etc/drbd-83.conf</strong>, <strong>/etc/drbd-08.conf</strong> and <strong>/etc/drbd.conf</strong>.</p><p><strong>-t</strong>, <strong>--config-to-test</strong> <em>file</em></p><p>Specifies an additional configuration file drbdadm to check. This option is only allowed with the dump and the sh-nop commands.</p><p><strong>-s</strong>, <strong>--drbdsetup</strong> <em>file</em></p><p>Specifies the full path to the <strong>drbdsetup</strong> program. If this option is omitted, drbdadm will look for it beneath itself first, and then in the PATH.</p><p><strong>-m</strong>, <strong>--drbdmeta</strong> <em>file</em></p><p>Specifies the full path to the <strong>drbdmeta</strong> program. If this option is omitted, drbdadm will look for it beneath itself first, and then in the PATH.</p><p><strong>-S</strong>, <strong>--stacked</strong></p><p>Specifies that this command should be performed on a stacked resource.</p><p><strong>-P</strong>, <strong>--peer</strong></p><p>Specifies to which peer node to connect. Only necessary if there are more than two host sections in the resource you are working on.</p><p><strong>--</strong> <em>backend-options</em></p><p>All options following the doubly hyphen are considered <em>backend-options</em>. These are passed through to the backend command. I.e. to <strong>drbdsetup</strong>, <strong>drbdmeta</strong> or <strong>drbd-proxy-ctl</strong>.</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">COMMANDS</h2>
        <div class="sectioncontent">
<p>attach</p><p>Attaches a local backing block device to the DRBD resource&apos;s device.</p><p>detach</p><p>Removes the backing storage device from a DRBD resource&apos;s device.</p><p>connect</p><p>Sets up the network configuration of the resource&apos;s device. If the peer device is already configured, the two DRBD devices will connect. If there are more than two host sections in the resource you need to use the <strong>--peer</strong> option to select the peer you want to connect to.</p><p>disconnect</p><p>Removes the network configuration from the resource. The device will then go into StandAlone state.</p><p>syncer</p><p>Loads the resynchronization parameters into the device.</p><p>up</p><p>Is a shortcut for attach and connect.</p><p>down</p><p>Is a shortcut for disconnect and detach.</p><p>primary</p><p>Promote the resource&apos;s device into primary role. You need to do this before any access to the device, such as creating or mounting a file system.</p><p>secondary</p><p>Brings the device back into secondary role. This is needed since in a connected DRBD device pair, only one of the two peers may have primary role (except if <strong>allow-two-primaries</strong> is explicitly set in the configuration file).</p><p>invalidate</p><p>Forces DRBD to consider the data on the <em>local</em> backing storage device as out-of-sync. Therefore DRBD will copy each and every block from its peer, to bring the local storage device back in sync. To avoid races, you need an established replication link, or be disconnected Secondary.</p><p>invalidate-remote</p><p>This command is similar to the invalidate command, however, the <em>peer&apos;s</em> backing storage is invalidated and hence rewritten with the data of the local node. To avoid races, you need an established replication link, or be disconnected Primary.</p><p>resize</p><p>Causes DRBD to re-examine all sizing constraints, and resize the resource&apos;s device accordingly. For example, if you increased the size of your backing storage devices (on both nodes, of course), then DRBD will adopt the new size after you called this command on one of your nodes. Since new storage space must be synchronised this command only works if there is at least one primary node present.</p><p>The <strong>--size</strong> option can be used to online shrink the usable size of a drbd device. It&apos;s the users responsibility to make sure that a file system on the device is not truncated by that operation.</p><p>The <strong>--assume-peer-has-space</strong> allows you to resize a device which is currently not connected to the peer. Use with care, since if you do not resize the peer&apos;s disk as well, further connect attempts of the two will fail.</p><p>The <strong>--assume-clean</strong> allows you to resize an existing device and avoid syncing the new space. This is useful when adding addtional blank storage to your device. Example:</p>
<pre>
# drbdadm -- --assume-clean resize r0
</pre>
<p>The options <strong>--al-stripes</strong> and <strong>--al-stripe-size-kB</strong> may be used to change the layout of the activity log online. In case of internal meta data this may invovle shrinking the user visible size at the same time (unsing the <strong>--size</strong>) or increasing the avalable space on the backing devices.</p><p>check-resize</p><p>Calls drbdmeta to eventually move internal meta data. If the backing device was resized, while DRBD was not running, meta data has to be moved to the end of the device, so that the next <strong>attach</strong> command can succeed.</p><p>create-md</p><p>Initializes the meta data storage. This needs to be done before a DRBD resource can be taken online for the first time. In case of issues with that command have a look at <a href="../man8/drbdmeta.8.html"><strong>drbdmeta</strong>(8)</a></p><p>get-gi</p><p>Shows a short textual representation of the data generation identifiers.</p><p>show-gi</p><p>Prints a textual representation of the data generation identifiers including explanatory information.</p><p>dump-md</p><p>Dumps the whole contents of the meta data storage, including the stored bit-map and activity-log, in a textual representation.</p><p>outdate</p><p>Sets the outdated flag in the meta data.</p><p>adjust</p><p>Synchronizes the configuration of the device with your configuration file. You should always examine the output of the dry-run mode before actually executing this command.</p><p>wait-connect</p><p>Waits until the device is connected to its peer device.</p><p>role</p><p>Shows the current roles of the devices (local/peer). E.g. Primary/Secondary</p><p>state</p><p>Deprecated alias for "role", see above.</p><p>cstate</p><p>Shows the current connection state of the devices.</p><p>dump</p><p>Just parse the configuration file and dump it to stdout. May be used to check the configuration file for syntactic correctness.</p><p>outdate</p><p>Used to mark the node&apos;s data as outdated. Usually used by the peer&apos;s fence-peer handler.</p><p>verify</p><p>Starts online verify. During online verify, data on both nodes is compared for equality. See /proc/drbd for online verify progress. If out-of-sync blocks are found, they are <em>not</em> resynchronized automatically. To do that, <strong>disconnect</strong> and <strong>connect</strong> the resource when verification has completed.</p><p>See also the notes on data integrity on the drbd.conf manpage.</p><p>pause-sync</p><p>Temporarily suspend an ongoing resynchronization by setting the local pause flag. Resync only progresses if neither the local nor the remote pause flag is set. It might be desirable to postpone DRBD&apos;s resynchronization until after any resynchronization of the backing storage&apos;s RAID setup.</p><p>resume-sync</p><p>Unset the local sync pause flag.</p><p>new-current-uuid</p><p>Generates a new currend UUID and rotates all other UUID values.</p><p>This can be used to shorten the initial resync of a cluster. See the <strong>drbdsetup</strong> manpage for a more details.</p><p>dstate</p><p>Show the current state of the backing storage devices. (local/peer)</p><p>hidden-commands</p><p>Shows all commands undocumented on purpose.</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">VERSION</h2>
        <div class="sectioncontent">
<p>This document was revised for version 8.4.0 of the DRBD distribution.</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">AUTHOR</h2>
        <div class="sectioncontent">
<p>Written by Philipp Reisner &lt;philipp.reisner@linbit.com&gt; and Lars Ellenberg &lt;lars.ellenberg@linbit.com&gt;</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">REPORTING BUGS</h2>
        <div class="sectioncontent">
<p>Report bugs to &lt;drbd-user@lists.linbit.com&gt;.</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">COPYRIGHT</h2>
        <div class="sectioncontent">
<p>Copyright 2001-2011 LINBIT Information Technologies, Philipp Reisner, Lars Ellenberg. This is free software; see the source for copying conditions. There is NO warranty; not even for MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">RELATED TO drbdadm-8.4&hellip;</h2>
        <div class="sectioncontent">
<p><a href="../man5/drbd.conf.5.html"><strong>drbd.conf</strong>(5)</a>, <a href="../man8/drbd.8.html"><strong>drbd</strong>(8)</a>, <a href="../man8/drbddisk.8.html"><strong>drbddisk</strong>(8)</a>, <a href="../man8/drbdsetup.8.html"><strong>drbdsetup</strong>(8)</a>, <a href="../man8/drbdmeta.8.html"><strong>drbdmeta</strong>(8)</a> and the \m[blue]<strong>DRBD project web site</strong>\m[]\s-2\u[1]\d\s+2</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">NOTES</h2>
        <div class="sectioncontent">

<dl class='dl-vertical'>
  <dt>
     1.
  </dt>
  <dd>
    <p>DRBD project web site</p><p>http://www.drbd.org/</p>
  </dd>

</dl>

        </div>
      </section>
<nav>
  <ul class="pager">
   <li class="previous"><a href="drbdadm-8.3.8.html"><span aria-hidden="true">&larr;</span> drbdadm-8.3.8: Administration tool for drbd .</a></li>
   <li class="next"><a href="drbdadm-9.0.8.html">drbdadm-9.0.8: Utility for drbd administration. <span aria-hidden="true">&rarr;</span></a></li>
  </ul>
</nav>

  </div>
  <!-- jQuery (necessary for Bootstrap's JavaScript plugins) -->
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.2/jquery.min.js"></script>
  <!-- Include all compiled plugins (below), or include individual files as needed -->
  <script src="/js/bootstrap.min.js"></script>
  <script>
    (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
      (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
      m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
    })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

    ga('create', 'UA-60781387-1', 'auto');
    ga('send', 'pageview');

  </script>
</body>
</html>
