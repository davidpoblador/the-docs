<!DOCTYPE html>
<html lang="en">
<head>
  <link href="https://fonts.googleapis.com/css?family=Fira+Mono:400,700&effect=destruction%7Cshadow-multiple" rel="stylesheet" type="text/css">
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>xymonproxy: Xymon message proxy</title>
  <link href="/css/bootstrap.min.css" rel="stylesheet">
  <link href="/css/manpage.css" rel="stylesheet">
  <link rel="apple-touch-icon" sizes="57x57" href="/icons/apple-icon-57x57.png">
  <link rel="apple-touch-icon" sizes="60x60" href="/icons/apple-icon-60x60.png">
  <link rel="apple-touch-icon" sizes="72x72" href="/icons/apple-icon-72x72.png">
  <link rel="apple-touch-icon" sizes="76x76" href="/icons/apple-icon-76x76.png">
  <link rel="apple-touch-icon" sizes="114x114" href="/icons/apple-icon-114x114.png">
  <link rel="apple-touch-icon" sizes="120x120" href="/icons/apple-icon-120x120.png">
  <link rel="apple-touch-icon" sizes="144x144" href="/icons/apple-icon-144x144.png">
  <link rel="apple-touch-icon" sizes="152x152" href="/icons/apple-icon-152x152.png">
  <link rel="apple-touch-icon" sizes="180x180" href="/icons/apple-icon-180x180.png">
  <link rel="icon" type="image/png" sizes="192x192" href="/icons/android-icon-192x192.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/icons/favicon-32x32.png">
  <link rel="icon" type="image/png" sizes="96x96" href="/icons/favicon-96x96.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/icons/favicon-16x16.png">
  <link rel="manifest" href="/icons/manifest.json">
  <meta name="msapplication-TileColor" content="#ffffff">
  <meta name="msapplication-TileImage" content="/icons/ms-icon-144x144.png">
  <meta name="theme-color" content="#ffffff">
  <meta name="description" content="Xymon message proxy">
  <meta name="twitter:card" content="summary_large_image">
  <meta name="twitter:site" content="@CartaTech">
  <meta name="twitter:creator" content="@CartaTech">
  <meta name="twitter:title" content="xymonproxy (8) manual">
  <meta name="twitter:description" content="Xymon message proxy">
  <meta name="twitter:image" content="https://www.carta.tech/images/xymon-xymonproxy-8.png">
  <meta property="og:url" content="https://www.carta.tech/man-pages/man8/xymonproxy.8.html" />
  <meta property="og:type" content="website" />
  <meta property="og:title" content="xymonproxy (8) manual" />
  <meta property="og:description" content="Xymon message proxy" />
  <meta property="fb:app_id" content="1241677679199500" />
  <meta property="og:image" content="https://www.carta.tech/images/xymon-xymonproxy-8.png" />
  <meta property="og:image:width" content="600" />
  <meta property="og:image:height" content="315" />
</head>
<body>
  <div class="container final">
          <div class="page-header">
        <h1 class="font-effect-destruction">xymonproxy<small> (8)</small></h1>
        <p class="lead">Xymon message proxy</p>
      </div>

    <ol class="breadcrumb" itemscope itemtype="http://schema.org/BreadcrumbList">
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/">
      <span itemprop="name">Carta.tech</span>
    </a>
    <meta itemprop="position" content="1" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/">
      <span itemprop="name">Man Pages</span>
    </a>
    <meta itemprop="position" content="2" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/man8/">
      <span itemprop="name">System administration commands</span>
    </a>
    <meta itemprop="position" content="3" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/man8/xymonproxy.8.html">
      <span itemprop="name">xymonproxy: Xymon message proxy</span>
    </a>
    <meta itemprop="position" content="4" />
  </li>
</ol>
<ol class="breadcrumb" itemscope itemtype="http://schema.org/BreadcrumbList">
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/">
      <span itemprop="name">Carta.tech</span>
    </a>
    <meta itemprop="position" content="1" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/packages/">
      <span itemprop="name">Packages</span>
    </a>
    <meta itemprop="position" content="2" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/packages/xymon/">
      <span itemprop="name">xymon</span>
    </a>
    <meta itemprop="position" content="3" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/man8/xymonproxy.8.html">
      <span itemprop="name">xymonproxy: Xymon message proxy</span>
    </a>
    <meta itemprop="position" content="4" />
  </li>
</ol>
    
      <section>
        <h2 class="font-effect-shadow-multiple">SYNOPSIS</h2>
        <div class="sectioncontent">
<p><strong>xymonproxy [options] --server=$XYMSRV</strong></p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">DESCRIPTION</h2>
        <div class="sectioncontent">
<p><a href="../man8/xymonproxy.8.html"><strong>xymonproxy</strong>(8)</a></em> is a proxy for forwarding Xymon messages from one server to another. It will typically be needed if you have clients behind a firewall, so they cannot send status messages to the Xymon server directly.</p><p>xymonproxy serves three purposes. First, it acts as a regular proxy server, allowing clients that cannot connect directly to the Xymon servers to send data. Although xymonproxy is optimized for handling status messages, it will forward all types of messages, including notes- and data-messages.</p><p>Second, it acts as a buffer, smoothing out peak loads if many clients try to send status messages simultaneously. xymonproxy can absorb messages very quickly, but will queue them up internally and forward them to the Xymon server at a reasonable pace.</p><p>Third, xymonproxy merges small "status" messages into larger "combo" messages. This can dramatically decrease the number of connections that need to go from xymonproxy to the Xymon server.  The merging of messages causes "status" messages to be delayed for up to 0.25 seconds before being sent off to the Xymon server.</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">OPTIONS</h2>
        <div class="sectioncontent">

<dl class='dl-vertical'>
  <dt>
    --server=SERVERIP[:PORT][,SERVER2IP[:PORT]]
  </dt>
  <dd>
    <p>Specifies the IP-address and optional portnumber where incoming messages are forwarded to. The default portnumber is 1984, the standard Xymon port number. If you have setup the normal Xymon environment, you can use "--server=$XYMSRV". Up to 3 servers can be specified; incoming messages are sent to all of them (except "config", "query" and "download" messages, which go to the LAST server only). If you have Xymon clients sending their data via this proxy, note that the clients will receive their configuration data from the LAST of the servers listed here.  This option is required.</p>
  </dd>
  <dt>
    --listen=LOCALIP[:PORT]
  </dt>
  <dd>
    <p>Specifies the IP-adress where xymonproxy listens for incoming connections. By default, xymonproxy listens on all IP-addresses assigned to the host. If no portnumber is given, port 1984 will be used.</p>
  </dd>
  <dt>
    --timeout=N
  </dt>
  <dd>
    <p>Specifies the number of seconds after which a connection is aborted due to a timeout. Default: 10 seconds.</p>
  </dd>
  <dt>
    --report=[PROXYHOSTNAME.]SERVICE
  </dt>
  <dd>
    <p>If given, this option causes xymonproxy to send a status report every 5 minutes to the Xymon server about itself. If you have set the standard Xymon environment, you can use "--report=xymonproxy" to have xymonproxy report its status to a "xymonproxy" column in Xymon. The default for PROXYHOSTNAME is the $MACHINE environment variable, i.e. the hostname of the server running xymonproxy. See REPORT OUTPUT below for an explanation of the report contents.</p>
  </dd>
  <dt>
    --lqueue=N
  </dt>
  <dd>
    <p>Size of the listen-queue where incoming connections can queue up before being processed. This should be large to accommodate bursts of activity from clients. Default: 512.</p>
  </dd>
  <dt>
    --daemon
  </dt>
  <dd>
    <p>Run in daemon mode, i.e. detach and run as a background process. This is the default.</p>
  </dd>
  <dt>
    --no-daemon
  </dt>
  <dd>
    <p>Runs xymonproxy as a foreground process.</p>
  </dd>
  <dt>
    --pidfile=FILENAME
  </dt>
  <dd>
    <p>Specifies the location of a file containing the process-ID of the xymonproxy daemon process. Default: /var/run/xymonproxy.pid.</p>
  </dd>
  <dt>
    --logfile=FILENAME
  </dt>
  <dd>
    <p>Sends all logging output to the specified file instead of stderr.</p>
  </dd>
  <dt>
    --log-details
  </dt>
  <dd>
    <p>Log details (IP-address, message type and hostname) to the logfile. This can also be enabled and disabled at run-time by sending the xymonproxy process a SIGUSR1 signal.</p>
  </dd>
  <dt>
    --debug
  </dt>
  <dd>
    <p>Enable debugging output.</p>
  </dd>

</dl>

        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">REPORT OUTPUT</h2>
        <div class="sectioncontent">
<p>If enabled via the "--report" option, xymonproxy will send a status message about itself to the Xymon server once every 5 minutes.</p><p>The status message includes the following information:</p>
<dl class='dl-vertical'>
  <dt>
    Incoming messages
  </dt>
  <dd>
    <p>The total number of connections accepted from clients since the proxy started. The "(N msgs/second)" is the average number of messages per second over the past 5 minutes.</p>
  </dd>
  <dt>
    Outbound messages
  </dt>
  <dd>
    <p>The total number of messages sent to the Xymon server. Note that this is probably smaller than the number of incoming messages, since xymonproxy merges messages before sending them.</p>
  </dd>
  <dt>
    Incoming - Combo messages
  </dt>
  <dd>
    <p>The number of "combo" messages received from a client.</p>
  </dd>
  <dt>
    Incoming - Status messages
  </dt>
  <dd>
    <p>The number of "status" messages received from a client. xymonproxy attempts to merge these into "combo" messages. The "Messages merged" is the number of "status" messages that were merged into a combo message, the "Resulting combos" is the number of "combo" messages that resulted from the merging.</p>
  </dd>
  <dt>
    Incoming - Other messages
  </dt>
  <dd>
    <p>The number of other messages (data, notes, ack, query, ...) messages received from a client.</p>
  </dd>
  <dt>
    Proxy resources - Connection table size
  </dt>
  <dd>
    <p>This is the number of connection table slots in the proxy. This measures the number of simultaneously active requests that the proxy has handled, and so gives an idea about the peak number of clients that the proxy has handled simultaneously.</p>
  </dd>
  <dt>
    Proxy resources - Buffer space
  </dt>
  <dd>
    <p>This is the number of KB memory allocated for network buffers.</p>
  </dd>
  <dt>
    Timeout details - reading from client
  </dt>
  <dd>
    <p>The number of messages dropped because reading the message from the client timed out.</p>
  </dd>
  <dt>
    Timeout details - connecting to server
  </dt>
  <dd>
    <p>The number of messages dropped, because a connection to the Xymon server could not be established.</p>
  </dd>
  <dt>
    Timeout details - sending to server
  </dt>
  <dd>
    <p>The number of messages dropped because the communication to the Xymon server timed out after a connection was established.</p>
  </dd>
  <dt>
    Timeout details - recovered
  </dt>
  <dd>
    <p>When a timeout happens while sending the status message to the server, xymonproxy will attempt to recover the message and retry sending it to the server after waiting a few seconds. This number is the number of messages that were recovered, and so were not lost.</p>
  </dd>
  <dt>
    Timeout details - reading from server
  </dt>
  <dd>
    <p>The number of response messages that timed out while attempting to read them from the server. Note that this applies to the "config" and "query" messages only, since all other message types do not get any response from the servers.</p>
  </dd>
  <dt>
    Timeout details - sending to client
  </dt>
  <dd>
    <p>The number of response messages that timed out while attempting to send them to the client. Note that this applies to the "config" and "query" messages only, since all other message types do not get any response from the servers.</p>
  </dd>
  <dt>
    Average queue time
  </dt>
  <dd>
    <p>The average time it took the proxy to process a message, calculated from the messages that have passed through the proxy during the past 5 minutes. This number is computed from the messages that actually end up establishing a connection to the Xymon server, i.e. status messages that were combined into combo-messages do not go into the calculation - if they did, it would reduce the average time, since it is faster to merge messages than send them out over the network.</p>
  </dd>

</dl>

        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple"></h2>
        <div class="sectioncontent">
<p>If you think the numbers do not add up, here is how they relate.</p><p>The "Incoming messages" should be equal to the sum of the "Incoming Combo/Status/Page/Other messages", or slightly more because messages in transit are not included in the per-type message counts.</p><p>The "Outbound messages" should be equal to sum of the "Incoming Combo/Page/Other messages", plus the "Resulting combos" count, plus "Incoming Status messages" minus "Messages merged" (this latter number is the number of status messages that were NOT merged into combos, but sent directly). The "Outbound messages" may be slightly lower than that, because messages in transit are not included in the "Outbound messages" count until they have been fully sent.</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">SIGNALS</h2>
        <div class="sectioncontent">

<dl class='dl-vertical'>
  <dt>
    SIGHUP
  </dt>
  <dd>
    <p>Re-opens the logfile, e.g. after it has been rotated.</p>
  </dd>
  <dt>
    SIGTERM
  </dt>
  <dd>
    <p>Shut down the proxy.</p>
  </dd>
  <dt>
    SIGUSR1
  </dt>
  <dd>
    <p>Toggles logging of individual messages.</p>
  </dd>

</dl>

        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">RELATED TO xymonproxy&hellip;</h2>
        <div class="sectioncontent">
<p><a href="../man1/xymon.1.html"><strong>xymon</strong>(1)</a>, <strong>xymond</strong>(1), <a href="../man7/xymon.7.html"><strong>xymon</strong>(7)</a></p>
        </div>
      </section>
<nav>
  <ul class="pager">
   <li class="previous"><a href="xymonlaunch.8.html"><span aria-hidden="true">&larr;</span> xymonlaunch.8: Master program to launch other xymon programs</a></li>
   <li class="next"><a href="yasat.8.html">yasat.8: Simple stupid audit tool <span aria-hidden="true">&rarr;</span></a></li>
  </ul>
</nav>

  </div>
  <!-- jQuery (necessary for Bootstrap's JavaScript plugins) -->
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.2/jquery.min.js"></script>
  <!-- Include all compiled plugins (below), or include individual files as needed -->
  <script src="/js/bootstrap.min.js"></script>
  <script>
    (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
      (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
      m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
    })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

    ga('create', 'UA-60781387-1', 'auto');
    ga('send', 'pageview');

  </script>
</body>
</html>
