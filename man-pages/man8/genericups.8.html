<!DOCTYPE html>
<html lang="en">
<head>
  <link href="https://fonts.googleapis.com/css?family=Fira+Mono:400,700&effect=destruction%7Cshadow-multiple" rel="stylesheet" type="text/css">
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>genericups: Driver for contact-closure ups equipment</title>
  <link href="/css/bootstrap.min.css" rel="stylesheet">
  <link href="/css/manpage.css" rel="stylesheet">
  <link rel="apple-touch-icon" sizes="57x57" href="/icons/apple-icon-57x57.png">
  <link rel="apple-touch-icon" sizes="60x60" href="/icons/apple-icon-60x60.png">
  <link rel="apple-touch-icon" sizes="72x72" href="/icons/apple-icon-72x72.png">
  <link rel="apple-touch-icon" sizes="76x76" href="/icons/apple-icon-76x76.png">
  <link rel="apple-touch-icon" sizes="114x114" href="/icons/apple-icon-114x114.png">
  <link rel="apple-touch-icon" sizes="120x120" href="/icons/apple-icon-120x120.png">
  <link rel="apple-touch-icon" sizes="144x144" href="/icons/apple-icon-144x144.png">
  <link rel="apple-touch-icon" sizes="152x152" href="/icons/apple-icon-152x152.png">
  <link rel="apple-touch-icon" sizes="180x180" href="/icons/apple-icon-180x180.png">
  <link rel="icon" type="image/png" sizes="192x192" href="/icons/android-icon-192x192.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/icons/favicon-32x32.png">
  <link rel="icon" type="image/png" sizes="96x96" href="/icons/favicon-96x96.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/icons/favicon-16x16.png">
  <link rel="manifest" href="/icons/manifest.json">
  <meta name="msapplication-TileColor" content="#ffffff">
  <meta name="msapplication-TileImage" content="/icons/ms-icon-144x144.png">
  <meta name="theme-color" content="#ffffff">
  <meta name="description" content="Driver for contact-closure ups equipment">
  <meta name="twitter:card" content="summary_large_image">
  <meta name="twitter:site" content="@CartaTech">
  <meta name="twitter:creator" content="@CartaTech">
  <meta name="twitter:title" content="genericups (8) manual">
  <meta name="twitter:description" content="Driver for contact-closure ups equipment">
  <meta name="twitter:image" content="https://www.carta.tech/images/nut-server-genericups-8.png">
  <meta property="og:url" content="https://www.carta.tech/man-pages/man8/genericups.8.html" />
  <meta property="og:type" content="website" />
  <meta property="og:title" content="genericups (8) manual" />
  <meta property="og:description" content="Driver for contact-closure ups equipment" />
  <meta property="fb:app_id" content="1241677679199500" />
  <meta property="og:image" content="https://www.carta.tech/images/nut-server-genericups-8.png" />
  <meta property="og:image:width" content="600" />
  <meta property="og:image:height" content="315" />
</head>
<body>
  <div class="container final">
          <div class="page-header">
        <h1 class="font-effect-destruction">genericups<small> (8)</small></h1>
        <p class="lead">Driver for contact-closure ups equipment</p>
      </div>

    <ol class="breadcrumb" itemscope itemtype="http://schema.org/BreadcrumbList">
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/">
      <span itemprop="name">Carta.tech</span>
    </a>
    <meta itemprop="position" content="1" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/">
      <span itemprop="name">Man Pages</span>
    </a>
    <meta itemprop="position" content="2" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/man8/">
      <span itemprop="name">System administration commands</span>
    </a>
    <meta itemprop="position" content="3" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/man8/genericups.8.html">
      <span itemprop="name">genericups: Driver for contact-closure ups equipment</span>
    </a>
    <meta itemprop="position" content="4" />
  </li>
</ol>
<ol class="breadcrumb" itemscope itemtype="http://schema.org/BreadcrumbList">
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/">
      <span itemprop="name">Carta.tech</span>
    </a>
    <meta itemprop="position" content="1" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/packages/">
      <span itemprop="name">Packages</span>
    </a>
    <meta itemprop="position" content="2" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/packages/nut-server/">
      <span itemprop="name">nut-server</span>
    </a>
    <meta itemprop="position" content="3" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/man8/genericups.8.html">
      <span itemprop="name">genericups: Driver for contact-closure ups equipment</span>
    </a>
    <meta itemprop="position" content="4" />
  </li>
</ol>
    
      <section>
        <h2 class="font-effect-shadow-multiple">NOTE</h2>
        <div class="sectioncontent">
<p>This man page only documents the specific features of the genericups driver. For information about the core driver, see <a href="../man8/nutupsdrv.8.html"><strong>nutupsdrv</strong>(8)</a>.</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">SUPPORTED HARDWARE</h2>
        <div class="sectioncontent">
<p>This driver supports hardware from many different manufacturers as it only uses the very simplest of signaling schemes. Contact closure refers to a kind of interface where basic high/low signals are provided to indicate status. This kind of UPS can only report line power and battery status.</p><p>This means that you will only get the essentials in ups.status: OL, OB, and LB. Anything else requires a smarter UPS.</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">CABLING</h2>
        <div class="sectioncontent">
<p>Cabling is different for every kind of UPS. See the table below for information on what is known to work with a given UPS type.</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">EXTRA ARGUMENTS</h2>
        <div class="sectioncontent">
<p>This driver supports the following settings in the <a href="../man5/ups.conf.5.html"><strong>ups.conf</strong>(5)</a>:</p><p>upstype=<em>type</em></p><p>Required. Configures the driver for a specific kind of UPS. See the UPS Types section below for more information on which entries are available.</p><p>mfr=<em>string</em></p><p>Optional. The very nature of a generic UPS driver sometimes means that the stock manufacturer data has no relation to the actual hardware that is attached. With the mfr setting, you can change the value that is seen by clients that monitor this UPS.</p><p>model=<em>string</em></p><p>Optional. This is like mfr above, but it overrides the model string instead.</p><p>serial=<em>string</em></p><p>Optional. This is like mfr above and intended to record the identification string of the UPS. It is titled "serial" because usually this string is referred to as the serial number.</p><p>sdtime=<em>value</em></p><p>Optional. The driver will sleep for this many seconds after setting the shutdown signal. This is necessary for some hardware which requires a sustained level to activate the shutdown sequence.</p><p>The default behavior of the driver is to exit immediately. If this doesn\(cqt reliably trigger a shutdown in your UPS hardware, use this setting to give it more time to react.</p><p><strong>Note</strong></p><p>very large values for sdtime may create warnings from upsdrvctl if it gets tired of waiting for the driver to return.</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">CUSTOM CONFIGURATIONS</h2>
        <div class="sectioncontent">
<p>You may override the values for CP, OL, LB, and SD by defining them in the <a href="../man5/ups.conf.5.html"><strong>ups.conf</strong>(5)</a> after the upstype setting.</p><p>For example, to set the cable power to DTR and the low battery value to DCD, it would look like this:</p>
<pre>
CP = DTR
</pre>

<pre>
LB = DCD
</pre>
<p>Recognized values for input lines are CTS, DCD, and RNG. Recognized values for output lines are DTR, RTS, and ST. See below for more about what these signals mean.</p><p>These values may be negated for active low signals. That is, "LB=-DCD" recognizes a low battery condition when DCD is not held high.</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">TYPE INFORMATION</h2>
        <div class="sectioncontent">
<p>The essence of a UPS definition in this driver is how it uses the serial lines that are available. These are the abbreviations you will see below:</p><p>OL</p><p>On line (no power failure) (opposite of OB - on battery)</p><p>LB</p><p>Low battery</p><p>SD</p><p>Shutdown load</p><p>CP</p><p>Cable power (must be present for cable to have valid reading)</p><p>CTS</p><p>Clear to Send. Received from the UPS.</p><p>RTS</p><p>Ready to Send. Sent by the PC.</p><p>DCD</p><p>Data Carrier Detect. Received from the UPS.</p><p>RNG</p><p>Ring indicate. Received from the UPS.</p><p>DTR</p><p>Data Terminal Ready. Sent by the PC.</p><p>ST</p><p>Send a BREAK on the transmit data line</p><p>A "-" in front of a signal name (like -RNG) means that the indicated condition is signaled with an active low signal. For example, [LB=-RNG] means the battery is low when the ring indicate line goes low, and that the battery is OK when that line is held high.</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">UPS TYPES</h2>
        <div class="sectioncontent">
<p>0 = UPSonic LAN Saver 600</p>
<pre>
[CP=DTR+RTS] [OL=-CTS] [LB=DCD] [SD=DTR]
</pre>
<p>1 = APC Back-UPS/Back-UPS Pro/Smart-UPS with 940-0095A/C cable</p>
<pre>
[CP=DTR] [OL=-RNG] [LB=DCD] [SD=RTS]
</pre>
<p>2 = APC Back-UPS/Back-UPS Pro/Smart-UPS with 940-0020B cable</p>
<pre>
[CP=RTS] [OL=-CTS] [LB=DCD] [SD=DTR+RTS]
</pre>

<pre>
Type 2 has also been reported to work with the 940-0020C cable.
</pre>
<p>3 = PowerTech Comp1000 with DTR cable power</p>
<pre>
[CP=DTR] [OL=CTS] [LB=DCD] [SD=DTR+RTS]
</pre>
<p>4 = Generic RUPS Model</p>
<pre>
[CP=RTS] [OL=CTS] [LB=-DCD] [SD=-RTS]
</pre>
<p>5 = Tripp Lite UPS with Lan2.2 interface (black 73-0844 cable)</p>
<pre>
[CP=DTR] [OL=CTS] [LB=-DCD] [SD=DTR+RTS]
</pre>
<p>6 = Best Patriot with INT51 cable</p>
<pre>
[CP=DTR] [OL=CTS] [LB=-DCD] [SD=RTS]
</pre>
<p>7 = CyberPower Power99 Also Upsonic Power Guardian PG-500, Belkin Belkin Home Office, F6H350-SER, F6H500-SER, F6H650-SER, Eaton Management Card Contact - Config3 with cable 66033 (shutdown does not work)</p>
<pre>
[CP=RTS] [OL=CTS] [LB=-DCD] [SD=DTR]
</pre>
<p>8 = Nitram Elite 500</p>
<pre>
[CP=DTR] [OL=CTS] [LB=-DCD] [SD=???]
</pre>
<p>9 = APC Back-UPS/Back-UPS Pro/Smart-UPS with 940-0023A cable</p>
<pre>
[CP=none] [OL=-DCD] [LB=CTS] [SD=RTS]
</pre>
<p>10 = Victron Lite with crack cable</p>
<pre>
[CP=RTS] [OL=CTS] [LB=-DCD] [SD=DTR]
</pre>
<p>11 = Powerware 3115</p>
<pre>
[CP=DTR] [OL=-CTS] [LB=-DCD] [SD=ST]
</pre>
<p>12 = APC Back-UPS Office with 940-0119A cable</p>
<pre>
[CP=RTS] [OL=-CTS] [LB=DCD] [SD=DTR]
</pre>
<p>13 = RPT Repoteck RPT-800A/RPT-162A</p>
<pre>
[CP=DTR+RTS] [OL=DCD] [LB=-CTS] [SD=ST]
</pre>
<p>14 = Online P-series</p>
<pre>
[CP=DTR] [OL=DCD] [LB=-CTS] [SD=RTS]
</pre>
<p>15 = Powerware 5119, 5125</p>
<pre>
[CP=DTR] [OL=CTS] [LB=-DCD] [SD=ST]
</pre>
<p>16 = Nitram Elite 2002</p>
<pre>
[CP=DTR+RTS] [OL=CTS] [LB=-DCD] [SD=???]
</pre>
<p>17 = PowerKinetics 9001</p>
<pre>
[CP=DTR] [OL=CTS] [LB=-DCD] [SD=???]
</pre>
<p>18 = TrippLite Omni 450LAN with Martin\(cqs cabling</p>
<pre>
[CP=DTR] [OL=CTS] [LB=DCD] [SD=none]
</pre>
<p>19 = Fideltronic Ares Series</p>
<pre>
[CP=DTR] [OL=CTS] [LB=-DCD] [SD=RTS]
</pre>
<p>20 = Powerware 5119 RM</p>
<pre>
[CP=DTR] [OL=-CTS] [LB=DCD] [SD=ST]
</pre>

<pre>
Check docs/cables/powerware.txt
</pre>
<p>21 = Generic RUPS 2000 (Megatec M2501 cable)</p>
<pre>
[CP=RTS] [OL=CTS] [LB=-DCD] [SD=RTS+DTR]
</pre>
<p>22 = Gamatronic All models with alarm interface (also CyberPower SL series)</p>
<pre>
[CP=RTS] [OL=CTS] [LB=-DCD] [SD=DTR]
</pre>

        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">SIMILAR MODELS</h2>
        <div class="sectioncontent">
<p>Many different UPS companies make models with similar interfaces. The RUPS cable seems to be especially popular in the "power strip" variety of UPS found in office supply stores. If your UPS works with an entry in the table above, but the model or manufacturer information don\(cqt match, don\(cqt despair. You can fix that easily by using the mfr and model variables documented above in your <a href="../man5/ups.conf.5.html"><strong>ups.conf</strong>(5)</a>.</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">TESTING COMPATIBILITY</h2>
        <div class="sectioncontent">
<p>If your UPS isn\(cqt listed above, you can try going through the list until you find one that works. There is a lot of cable and interface reuse in the UPS world, and you may find a match.</p><p>To do this, first make sure nothing important is plugged into the outlets on the UPS, as you may inadvertently switch it off. Definitely make sure that the computer you\(cqre using is not plugged into that UPS. Plug in something small like a lamp so you know when power is being supplied to the outlets.</p><p>Now, you can either attempt to make an educated guess based on the documentation your manufacturer has provided (if any), or just start going down the list.</p><h3>Step 1</h3>
<p>Pick a driver to try from the list (genericups -h) and go to step 2.</p>
<h3>Step 2</h3>
<p>Start the driver with the type you want to try -</p>
<pre>
genericups -x upstype=n /dev/port
</pre>
<p>Let upsd sync up (watch the syslog), and then run upsc to see what it found. If the STATUS is right (should be OL for on line), continue to Step 3, otherwise go back to step 1.</p><p>Alternatively, you can run genericups in debug mode -</p>
<pre>
genericups -DDDDD -x upstype=n /dev/port
</pre>
<p>In this mode it will be running in the foreground and continuously display the line and battery status of the UPS.</p>
<h3>Step 3</h3>
<p>Disconnect the UPS from the wall/mains power. This is easiest if you have a switched outlet in between it and the wall, but you can also just pull the plug to test. The lamp should stay lit, and the status should switch to "OB". If the lamp went out or the status didn\(cqt go to "OB" within about 15 seconds, go to Step 1. Otherwise, continue to Step 4.</p>
<h3>Step 4</h3>
<p>At this point, we know that OL and OB work. If nothing else beyond this point works, you at least know what your OL/OB value should be.</p><p>Wait for the UPS to start complaining about a low battery. Depending on the size of your UPS battery and the lamp\(cqs bulb, this could take awhile. It should start complaining audibly at some point. When this happens, STATUS should show "OB LB" within 15 seconds. If not, go to Step 1, otherwise continue to Step 5.</p>
<h3>Step 5</h3>
<p>So far: OL works, OB works, and LB works.</p><p>With the UPS running on battery, run the genericups driver with the -k switch to shut it down.</p>
<pre>
genericups -x upstype=n -k /dev/port
</pre>
<p>If the UPS turns off the lamp, you\(cqre done. At this point, you have verified that the shutdown sequence actually does what you want. You can start using the genericups driver with this type number for normal operations.</p><p>You should use your findings to add a section to your ups.conf. Here is a quick example:</p>
<pre>
[myups]
        driver = genericups
        port = /dev/ttyS0
        upstype = 1
</pre>
<p>Change the port and upstype values to match your system.</p>

        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">NEW SUPPORT</h2>
        <div class="sectioncontent">
<p>If the above testing sequence fails, you will probably need to create a new entry to support your hardware. All UPS types are determined from the table in the genericups.h file in the source tree.</p><p>On a standard 9 pin serial port, there are 6 lines that are used as the standard "high/low" signal levels. 4 of them are incoming (to the PC, from the UPS), and the other 2 are outgoing (to the UPS, from the PC). The other 3 are the receive/transmit lines and the ground.</p><p>Be aware that many manufacturers remap pins within the cable. If you have any doubts, a quick check with a multimeter should confirm whether the cable is straight-through or not. Another thing to keep in mind is that some cables have electronics in them to do special things. Some have resistors and transistors on board to change behavior depending on what\(cqs being supplied by the PC.</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">SPECIFIC MODEL NOTES</h2>
        <div class="sectioncontent">
<p>These have been contributed by users of this driver.</p><p>The Centralion CL series may power down the load if the driver starts up with the UPS running on battery as the default line settings contain the shutdown sequence. - Neil Muller</p><p>The Tripp-Lite Internet Office 700 must be used with the black 73-0844 cable instead of the gray 73-0743 cable. This entry should work with any of their models with the Lan 2.2 interface - see the sticker by the DB9 connector on the UPS. - Stephen Brown</p><p>Type 5 should work with the Tripp-Lite Lan 2.1 interface and the 73-0724 cable. This was tested with the OmniSmart 675 PNP on Red Hat 7.2. - Q Giese</p><p>Types 7 and 10 should both work with the PhoenixTec A1000.</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">BUGS</h2>
        <div class="sectioncontent">
<p>There is no way to reliably detect a contact-closure UPS. This means the driver will start up happily even if no UPS is detected. It also means that if the connection between the UPS and computer is interrupted, you may not be able to sense this in software.</p><p>Most contact-closure UPSes will not power down the load if the line power is present. This can create a race when using slave <a href="../man8/upsmon.8.html"><strong>upsmon</strong>(8)</a> systems. See the <a href="../man8/upsmon.8.html"><strong>upsmon</strong>(8)</a> man page for more information.</p><p>The solution to both of these problems is to upgrade to a smart protocol UPS of some kind that allows detection and proper load cycling on command.</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">RELATED TO genericups&hellip;</h2>
        <div class="sectioncontent">
<h3>The core driver</h3>
<p><a href="../man8/nutupsdrv.8.html"><strong>nutupsdrv</strong>(8)</a></p>
<h3>Internet resources</h3>
<p>The NUT (Network UPS Tools) home page: http://www.networkupstools.org/</p>

        </div>
      </section>
<nav>
  <ul class="pager">
   <li class="previous"><a href="gencmn.8.html"><span aria-hidden="true">&larr;</span> gencmn.8: Generate an icu memory-mappable data file</a></li>
   <li class="next"><a href="genext2fs.8.html">genext2fs.8: Ext2 filesystem generator for embedded systems <span aria-hidden="true">&rarr;</span></a></li>
  </ul>
</nav>

  </div>
  <!-- jQuery (necessary for Bootstrap's JavaScript plugins) -->
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.2/jquery.min.js"></script>
  <!-- Include all compiled plugins (below), or include individual files as needed -->
  <script src="/js/bootstrap.min.js"></script>
  <script>
    (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
      (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
      m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
    })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

    ga('create', 'UA-60781387-1', 'auto');
    ga('send', 'pageview');

  </script>
</body>
</html>
