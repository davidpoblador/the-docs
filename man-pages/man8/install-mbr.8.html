<!DOCTYPE html>
<html lang="en">
<head>
  <link href="https://fonts.googleapis.com/css?family=Fira+Mono:400,700&effect=destruction%7Cshadow-multiple" rel="stylesheet" type="text/css">
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>install-mbr: Install a master boot record manager</title>
  <link href="/css/bootstrap.min.css" rel="stylesheet">
  <link href="/css/manpage.css" rel="stylesheet">
  <link rel="apple-touch-icon" sizes="57x57" href="/icons/apple-icon-57x57.png">
  <link rel="apple-touch-icon" sizes="60x60" href="/icons/apple-icon-60x60.png">
  <link rel="apple-touch-icon" sizes="72x72" href="/icons/apple-icon-72x72.png">
  <link rel="apple-touch-icon" sizes="76x76" href="/icons/apple-icon-76x76.png">
  <link rel="apple-touch-icon" sizes="114x114" href="/icons/apple-icon-114x114.png">
  <link rel="apple-touch-icon" sizes="120x120" href="/icons/apple-icon-120x120.png">
  <link rel="apple-touch-icon" sizes="144x144" href="/icons/apple-icon-144x144.png">
  <link rel="apple-touch-icon" sizes="152x152" href="/icons/apple-icon-152x152.png">
  <link rel="apple-touch-icon" sizes="180x180" href="/icons/apple-icon-180x180.png">
  <link rel="icon" type="image/png" sizes="192x192" href="/icons/android-icon-192x192.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/icons/favicon-32x32.png">
  <link rel="icon" type="image/png" sizes="96x96" href="/icons/favicon-96x96.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/icons/favicon-16x16.png">
  <link rel="manifest" href="/icons/manifest.json">
  <meta name="msapplication-TileColor" content="#ffffff">
  <meta name="msapplication-TileImage" content="/icons/ms-icon-144x144.png">
  <meta name="theme-color" content="#ffffff">
  <meta name="description" content="Install a master boot record manager">
  <meta name="twitter:card" content="summary_large_image">
  <meta name="twitter:site" content="@CartaTech">
  <meta name="twitter:creator" content="@CartaTech">
  <meta name="twitter:title" content="install-mbr (8) manual">
  <meta name="twitter:description" content="Install a master boot record manager">
  <meta name="twitter:image" content="https://www.carta.tech/images/mbr-install-mbr-8.png">
  <meta property="og:url" content="https://www.carta.tech/man-pages/man8/install-mbr.8.html" />
  <meta property="og:type" content="website" />
  <meta property="og:title" content="install-mbr (8) manual" />
  <meta property="og:description" content="Install a master boot record manager" />
  <meta property="fb:app_id" content="1241677679199500" />
  <meta property="og:image" content="https://www.carta.tech/images/mbr-install-mbr-8.png" />
  <meta property="og:image:width" content="600" />
  <meta property="og:image:height" content="315" />
</head>
<body>
  <div class="container final">
          <div class="page-header">
        <h1 class="font-effect-destruction">install-mbr<small> (8)</small></h1>
        <p class="lead">Install a master boot record manager</p>
      </div>

    <ol class="breadcrumb" itemscope itemtype="http://schema.org/BreadcrumbList">
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/">
      <span itemprop="name">Carta.tech</span>
    </a>
    <meta itemprop="position" content="1" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/">
      <span itemprop="name">Man Pages</span>
    </a>
    <meta itemprop="position" content="2" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/man8/">
      <span itemprop="name">System administration commands</span>
    </a>
    <meta itemprop="position" content="3" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/man8/install-mbr.8.html">
      <span itemprop="name">install-mbr: Install a master boot record manager</span>
    </a>
    <meta itemprop="position" content="4" />
  </li>
</ol>
<ol class="breadcrumb" itemscope itemtype="http://schema.org/BreadcrumbList">
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/">
      <span itemprop="name">Carta.tech</span>
    </a>
    <meta itemprop="position" content="1" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/packages/">
      <span itemprop="name">Packages</span>
    </a>
    <meta itemprop="position" content="2" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/packages/mbr/">
      <span itemprop="name">mbr</span>
    </a>
    <meta itemprop="position" content="3" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/man8/install-mbr.8.html">
      <span itemprop="name">install-mbr: Install a master boot record manager</span>
    </a>
    <meta itemprop="position" content="4" />
  </li>
</ol>
    
      <section>
        <h2 class="font-effect-shadow-multiple">SYNOPSIS</h2>
        <div class="sectioncontent">
<p><strong>install-mbr</strong> &lt;<em>target</em>&gt;  [<strong>--force</strong>]  [<strong>--install</strong> &lt;<em>path</em>&gt;]  [<strong>--keep</strong>]  [<strong>--list</strong>]  [<strong>--no-act</strong>]  [<strong>--offset</strong> &lt;<em>offset</em>&gt;]  [<strong>--y2kbug</strong>[<strong>=utc</strong>|<strong>=local</strong>]]  [<strong>--parameters</strong> &lt;<em>path</em>&gt;]  [<strong>--reset</strong>]  [<strong>--table</strong> &lt;<em>path</em>&gt;]  [<strong>--verbose</strong>]  [<strong>--version</strong>]  [<strong>--help</strong>]  [<strong>--drive</strong> &lt;<em>drive</em>&gt;]  [<strong>--enable</strong> &lt;<em>options</em>&gt;]  [<strong>--interrupt</strong> &lt;<em>keys</em>&gt;]  [<strong>--partition</strong> &lt;<em>partition</em>&gt;]  [<strong>--timeout</strong> &lt;<em>timeout</em>&gt;]</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">DESCRIPTION</h2>
        <div class="sectioncontent">
<p><strong>install-mbr</strong> installs and configures a Master Boot Record manager on a device.  The behaviour of the boot manager is determined by the options given on the command line. &lt;<em>target</em>&gt; is the path specifying the device (or file) that the boot manager should be installed onto.</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">MBR BEHAVIOUR</h2>
        <div class="sectioncontent">
<p>When the MBR is first loaded it waits for a configurable length of time (1 second by default), monitoring the keyboard for key presses. The types of key which cause the MBR to be interrupted can be configured through the -i option to install-mbr.</p><p>If the MBR is interrupted, it will display its prompt.  Otherwise it will load the first sector of the default partition and execute it. If a disk error occurs or the boot signature is missing, the prompt will be displayed.</p><h3>The boot prompt</h3>
<p>The boot prompt looks something like this:</p><ul>
<li><p>14FA:</p></li>
</ul><p>This is the list of valid keys which may be pressed followed by a colon.  Numeric keys indicate primary partitions on the disk beginning with partition 1 and 'F' indicates the floppy disk.  Extended partitions cannot be booted.  The 'A' means that 'advanced' mode may be entered, in which case any partition may be booted.  The only other valid key which may be pressed is RETURN, which continues booting with the default partition.</p><p>The prompt for advanced mode looks like this and works just the same as the normal prompt.</p><ul>
<li><p>1234F:</p></li>
</ul><p>The list of valid partitions and the default partition can be configured through the -e and -p options to install-mbr.</p>

        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">OPTIONS</h2>
        <div class="sectioncontent">
<h3>Installation options</h3>
<p>These options change the way the installation program operates.</p>
<dl class='dl-vertical'>
  <dt>
    <p><strong>--force</strong>, <strong>-f</strong></p>
  </dt>
  <dd>
    <p>This option currently overrides a check to make sure the specified target is valid. <strong>--install</strong> &lt;<em>path</em>&gt;, <strong>-I</strong> &lt;<em>path</em>&gt;</p><p>This option may be used to install code other than that which is built in to <strong>install-mbr</strong>. It is mainly useful for testing, but may be used to install older versions of the MBR.</p>
  </dd>
  <dt>
    <p><strong>--keep</strong>, <strong>-k</strong></p>
  </dt>
  <dd>
    <p>This option instructs the installer to modify the parameters stored in the MBR without updating the code.</p>
  </dd>
  <dt>
    <p><strong>--list</strong>, <strong>-l</strong></p>
  </dt>
  <dd>
    <p>This option may be used to view the parameters being installed in the MBR.  It implies the <strong>--no-act </strong>and<strong> --keep</strong> flags unless an option other than <strong>--offset</strong>,<strong> --verbose </strong>or<strong> --list</strong> is given.  This allows the contents of the MBR to be examined.</p>
  </dd>
  <dt>
    <p><strong>--no-act</strong>, <strong>-n</strong></p>
  </dt>
  <dd>
    <p>This option ensures that the target is not modified, as it is opened in read-only mode. <strong>--offset</strong> &lt;<em>offset</em>&gt;, <strong>-o</strong> &lt;<em>offset</em>&gt;</p><p>This option may be used to install the MBR somewhere other than the start of the target.  The offset specifies the number of bytes from the start of the target at which the MBR should be installed.  For example, an offset of 128 may be used for DOSEMU disk images.</p>
  </dd>
  <dt>
    <p><strong>--y2kbug</strong>[<strong>=utc</strong>|<strong>=local</strong>|<strong>=off</strong>], <strong>-y</strong>[<strong>u</strong>|<strong>l</strong>|<strong>-</strong>]</p>
  </dt>
  <dd>
    <p>This option specifies the status of the Y2K bug fix parameter.  When set, an alternative MBR is installed that fixes a Y2K bug in some BIOSes that causes them to always boot up the machine with the year ranging from 94 to 99.  This MBR stores the current month and year and sets the year based on this when the computer is booted.  It also increases the year automatically when the current month is lower than the month of the last boot.  The initial year and month are set based on the current system time converted to UTC or the local time as specified by the argument.  If the argument is not specified, the default is read from /etc/default/rcS.  Due to space limitations, the alternative version of the MBR does not display the word MBR as it boots.  If the argument is <strong>=off </strong>or<strong> -</strong> the Y2K bug fix is disabled. <strong>WARNING:</strong> The Y2K bug fix will work fine until you want to set the date backwards.  When you do want to do this, you will need to reinstall the MBR.  You cannot just set the date in the BIOS (since the whole point of this option is that the year provided by the BIOS is ignored).</p><p><strong>--parameters</strong> &lt;<em>path</em>&gt;, <strong>-P</strong> &lt;<em>path</em>&gt;</p><p>This option may be used to copy parameters from somewhere other than the target.  The path specifies a location where a version of this MBR has been installed and parameters are read from there.  It could be used to copy parameters from one disk to another disk.</p>
  </dd>
  <dt>
    <p><strong>--reset</strong>, <strong>-r</strong></p>
  </dt>
  <dd>
    <p>This option is used to reset the boot parameters to the state found in the code being installed (or code which would be installed if <strong>--keep</strong> were not specified). <strong>--table</strong> &lt;<em>path</em>&gt;, <strong>-T</strong> &lt;<em>path</em>&gt;</p><p>The master boot record currently uses the partition table in the sector which contains it to locate boot sectors (This behaviour may change with future versions of the MBR, in which case the option may be withdrawn).  The <strong>--table</strong> option is used to copy a partition table from another location to the target location.  Any data stored on the target disk may be lost (as the partition table is overwritten), so this option should be used with extreme caution.  As the partition table is copied, any changes made to the original partition table will not be noticed.  This option is only provided to make installation to floppy easy.</p>
  </dd>
  <dt>
    <p><strong>--verbose</strong>, <strong>-v</strong></p>
  </dt>
  <dd>
    <p>When invoked with this option, <strong>install-mbr</strong> will display some information about what it is doing.</p>
  </dd>
  <dt>
    <p><strong>--version</strong>, <strong>-V</strong></p>
  </dt>
  <dd>
    <p>This option will cause <strong>install-mbr</strong> to display it's version number and exit.</p>
  </dd>
  <dt>
    <p><strong>--help</strong>, <strong>-h</strong></p>
  </dt>
  <dd>
    <p>This option will cause <strong>install-mbr</strong> to display a help message and exit.</p>
  </dd>

</dl>

<h3>Parameter options</h3>
<p>These options change the parameters stored within the Master Boot Record. <strong>--drive</strong> &lt;<em>drive</em>&gt;, <strong>-d</strong> &lt;<em>drive</em>&gt;</p><p>This option instructs the MBR to boot a drive other than the first hard disk.  It may be specified in decimal or hexadecimal if prefixed with 0x.  Hard disks are numbered starting from 128 (0x80).</p><p><strong>--enable</strong> &lt;<em>option</em>&gt;, <strong>-e</strong> &lt;<em>option</em>&gt;</p><p>This option sets the list of boot sectors which may be loaded (or advanced mode).  A boot sector may be loaded from one of the first 4 partitions of the disk, or from the first floppy drive.  Use <strong>--enable +</strong>&lt;<em>spec</em>&gt; to add a boot sector to the list or <strong>--enable -</strong>&lt;<em>spec</em>&gt; to remove a boot sector from the list.  Use <strong>--enable =</strong>&lt;<em>spec</em>&gt; to set the list to &lt;<em>spec</em>&gt;. &lt;<em>spec</em>&gt; may contain:</p>
<dl class='dl-vertical'>
  <dt>
    <p><strong>1</strong>, <strong>2</strong>, <strong>3</strong>, <strong>4</strong></p>
  </dt>
  <dd>
    <p>	The specified partition number.</p>
  </dd>
  <dt>
    <p><strong>F</strong></p>
  </dt>
  <dd>
    <p>	The first floppy disk.</p>
  </dd>
  <dt>
    <p><strong>A</strong></p>
  </dt>
  <dd>
    <p>	Advanced mode (not a boot sector).</p>
  </dd>

</dl>
<p><strong>--interrupt</strong> &lt;<em>mode</em>&gt;, <strong>-i</strong> &lt;<em>mode</em>&gt;</p><p>This option sets the list of events which will cause the MBR to display it's prompt.  Use -i +&lt;event&gt; to add an event to the list or -i -&lt;event&gt; to remove an event from the list.  Values of &lt;event&gt; are:</p>
<dl class='dl-vertical'>
  <dt>
    <p><strong>s</strong></p>
  </dt>
  <dd>
    <p>A shift or control key is pressed.</p>
  </dd>
  <dt>
    <p><strong>k</strong></p>
  </dt>
  <dd>
    <p>A non shift-like key is pressed</p>
  </dd>
  <dt>
    <p><strong>a</strong></p>
  </dt>
  <dd>
    <p>The prompt is always displayed.</p>
  </dd>
  <dt>
    <p><strong>n</strong></p>
  </dt>
  <dd>
    <p>Never display the prompt (unless an error occurs).</p>
  </dd>

</dl>
<p><strong>-p</strong> &lt;<em>partn</em>&gt;, <strong>--partition</strong> &lt;<em>partn</em>&gt;</p><p>This specifies the default boot sector to load.  Valid values of &lt;<em>partn</em>&gt; are:</p>
<dl class='dl-vertical'>
  <dt>
    <p><strong>1</strong>, <strong>2</strong>, <strong>3</strong>, <strong>4</strong></p>
  </dt>
  <dd>
    <p>The specified partition number.</p>
  </dd>
  <dt>
    <p><strong>F</strong></p>
  </dt>
  <dd>
    <p>The first floppy disk.</p>
  </dd>
  <dt>
    <p><strong>D</strong></p>
  </dt>
  <dd>
    <p>The partition marked with the bootable flag in the partition table.</p>
  </dd>

</dl>
<p><strong>-t</strong> &lt;<em>timeout</em>&gt;, <strong>--timeout</strong> &lt;<em>timeout</em>&gt;</p><p>This option changes the time which the MBR waits for before booting the default partition to the value specified in 1/18 seconds (approx). The maximum timeout that can be specified is 65534 which is about an hour.</p>

        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">EXAMPLES</h2>
        <div class="sectioncontent">
<p><strong>install-mbr /dev/fd0 -T /dev/hda</strong></p><p>Install the default MBR image on <strong>/dev/fd0</strong>, taking the partition table from <strong>/dev/hda</strong>.</p><p><strong>install-mbr -kr /dev/hda</strong></p><p>Reset the parameters on <strong>/dev/hda</strong> without installing any new code.</p><p><strong>install-mbr -I my-mbr -T /dev/hda -P my-parameters /dev/fd0</strong></p><p>Install to <strong>/dev/fd0</strong>, taking code from <strong>my-mbr</strong>, partition table from <strong>/dev/hda</strong> and parameters from my-parameters.</p><p><strong>install-mbr -l -o 128 hdimage</strong></p><p>List the parameters stored at offset 128 in <strong>hdimage</strong> (may be a DOSEMU image).</p><p><strong>install-mbr -d 0x81 -T /dev/hdb /dev/fd0</strong></p><p>Install on <strong>/dev/fd0</strong> to boot from BIOS drive 129 (0x81) with partition table copied from <strong>/dev/hdb</strong>.</p><p><strong>install-mbr -e 13 /dev/hda</strong></p><p><strong>install-mbr -e 2 -e =13 /dev/hda</strong></p><p><strong>install-mbr -e1 -e3 /dev/hda</strong></p><p>Enable booting from partitions 1 and 3 on <strong>/dev/hda</strong>. Other locations are disabled.</p><p><strong>install-mbr -e +f-a -i sk /dev/hda</strong></p><p>Enabled booting from the floppy drive, and disable advanced mode. Display the prompt if any shift, control or non shift-like key is pressed.  Other settings are untouched.</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">DIAGNOSTICS</h2>
        <div class="sectioncontent">

<dl class='dl-vertical'>
  <dt>
    <p><strong>Cannot handle MBR version n (backwards compatible to n)</strong></p>
  </dt>
  <dd>
    <p>This error means that the version of MBR which is being installed is not known about by this installer.  Such files cannot have their parameters read or written.  If such a newer version is installed, it can be downgraded by specifying the <strong>--reset</strong> option (without specifying <strong>--keep</strong>).</p>
  </dd>

</dl>

        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">RELATED TO install-mbr&hellip;</h2>
        <div class="sectioncontent">
<p><a href="../man8/grub.8.html"><strong>grub</strong>(8)</a>, <a href="../man8/lilo.8.html"><strong>lilo</strong>(8)</a></p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">BUGS</h2>
        <div class="sectioncontent">
<p>The operation of <strong>--list</strong> may be confusing.</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">AUTHOR</h2>
        <div class="sectioncontent">
<p><strong>install-mbr</strong> was written for the Debian project by Neil Turton &lt;neilt+mbr@chiark.greenend.org.uk&gt;.</p>
        </div>
      </section>
<nav>
  <ul class="pager">
   <li class="previous"><a href="install-keymap.8.html"><span aria-hidden="true">&larr;</span> install-keymap.8: Install-keymap  expand a given keymap and install it as boot-time keymap</a></li>
   <li class="next"><a href="install-sgmlcatalog.8.html">install-sgmlcatalog.8: Maintain transitional sgml catalog <span aria-hidden="true">&rarr;</span></a></li>
  </ul>
</nav>

  </div>
  <!-- jQuery (necessary for Bootstrap's JavaScript plugins) -->
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.2/jquery.min.js"></script>
  <!-- Include all compiled plugins (below), or include individual files as needed -->
  <script src="/js/bootstrap.min.js"></script>
  <script>
    (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
      (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
      m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
    })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

    ga('create', 'UA-60781387-1', 'auto');
    ga('send', 'pageview');

  </script>
</body>
</html>
