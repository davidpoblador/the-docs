<!DOCTYPE html>
<html lang="en">
<head>
  <link href="https://fonts.googleapis.com/css?family=Fira+Mono:400,700&effect=destruction%7Cshadow-multiple" rel="stylesheet" type="text/css">
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>queue-repair: Deal with the qmail queue directory structure</title>
  <link href="/css/bootstrap.min.css" rel="stylesheet">
  <link href="/css/manpage.css" rel="stylesheet">
  <link rel="apple-touch-icon" sizes="57x57" href="/icons/apple-icon-57x57.png">
  <link rel="apple-touch-icon" sizes="60x60" href="/icons/apple-icon-60x60.png">
  <link rel="apple-touch-icon" sizes="72x72" href="/icons/apple-icon-72x72.png">
  <link rel="apple-touch-icon" sizes="76x76" href="/icons/apple-icon-76x76.png">
  <link rel="apple-touch-icon" sizes="114x114" href="/icons/apple-icon-114x114.png">
  <link rel="apple-touch-icon" sizes="120x120" href="/icons/apple-icon-120x120.png">
  <link rel="apple-touch-icon" sizes="144x144" href="/icons/apple-icon-144x144.png">
  <link rel="apple-touch-icon" sizes="152x152" href="/icons/apple-icon-152x152.png">
  <link rel="apple-touch-icon" sizes="180x180" href="/icons/apple-icon-180x180.png">
  <link rel="icon" type="image/png" sizes="192x192" href="/icons/android-icon-192x192.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/icons/favicon-32x32.png">
  <link rel="icon" type="image/png" sizes="96x96" href="/icons/favicon-96x96.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/icons/favicon-16x16.png">
  <link rel="manifest" href="/icons/manifest.json">
  <meta name="msapplication-TileColor" content="#ffffff">
  <meta name="msapplication-TileImage" content="/icons/ms-icon-144x144.png">
  <meta name="theme-color" content="#ffffff">
  <meta name="description" content="Deal with the qmail queue directory structure">
  <meta name="twitter:card" content="summary_large_image">
  <meta name="twitter:site" content="@CartaTech">
  <meta name="twitter:creator" content="@CartaTech">
  <meta name="twitter:title" content="queue-repair (8) manual">
  <meta name="twitter:description" content="Deal with the qmail queue directory structure">
  <meta name="twitter:image" content="https://www.carta.tech/images/qmail-tools-queue-repair-8.png">
  <meta property="og:url" content="https://www.carta.tech/man-pages/man8/queue-repair.8.html" />
  <meta property="og:type" content="website" />
  <meta property="og:title" content="queue-repair (8) manual" />
  <meta property="og:description" content="Deal with the qmail queue directory structure" />
  <meta property="fb:app_id" content="1241677679199500" />
  <meta property="og:image" content="https://www.carta.tech/images/qmail-tools-queue-repair-8.png" />
  <meta property="og:image:width" content="600" />
  <meta property="og:image:height" content="315" />
</head>
<body>
  <div class="container final">
          <div class="page-header">
        <h1 class="font-effect-destruction">queue-repair<small> (8)</small></h1>
        <p class="lead">Deal with the qmail queue directory structure</p>
      </div>

    <ol class="breadcrumb" itemscope itemtype="http://schema.org/BreadcrumbList">
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/">
      <span itemprop="name">Carta.tech</span>
    </a>
    <meta itemprop="position" content="1" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/">
      <span itemprop="name">Man Pages</span>
    </a>
    <meta itemprop="position" content="2" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/man8/">
      <span itemprop="name">System administration commands</span>
    </a>
    <meta itemprop="position" content="3" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/man8/queue-repair.8.html">
      <span itemprop="name">queue-repair: Deal with the qmail queue directory structure</span>
    </a>
    <meta itemprop="position" content="4" />
  </li>
</ol>
<ol class="breadcrumb" itemscope itemtype="http://schema.org/BreadcrumbList">
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/">
      <span itemprop="name">Carta.tech</span>
    </a>
    <meta itemprop="position" content="1" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/packages/">
      <span itemprop="name">Packages</span>
    </a>
    <meta itemprop="position" content="2" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/packages/qmail-tools/">
      <span itemprop="name">qmail-tools</span>
    </a>
    <meta itemprop="position" content="3" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/man8/queue-repair.8.html">
      <span itemprop="name">queue-repair: Deal with the qmail queue directory structure</span>
    </a>
    <meta itemprop="position" content="4" />
  </li>
</ol>
    
      <section>
        <h2 class="font-effect-shadow-multiple">SYNOPSIS</h2>
        <div class="sectioncontent">
<p><strong>queue-repair</strong> [ -htrcbn ] [ -n <em>split</em> ] [ <em>conf-qmail</em> ]</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">DESCRIPTION</h2>
        <div class="sectioncontent">
<p><strong>queue-repair</strong> deals with the qmail queue structure; it can create a new queue, move and properly rename a queue, dynamically change the conf-split value, convert big-todo queues to non-big-todo and vice versa, and repair a corrupted queue.</p><p><em>conf-qmail</em> defaults to /var/lib/qmail/ on Debian.</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">OPTIONS</h2>
        <div class="sectioncontent">

<dl class='dl-vertical'>
  <dt>
    <p><strong>-h|--help</strong></p>
  </dt>
  <dd>
    <p>Display usage information and built-in defaults, then exit.</p>
  </dd>
  <dt>
    <p><strong>-t|--test</strong></p>
  </dt>
  <dd>
    <p>Run in test-only mode. <strong>queue-repair</strong> will attempt to report all problems that it finds, without correcting them. This is the default.</p>
  </dd>
  <dt>
    <p><strong>-r|--repair</strong></p>
  </dt>
  <dd>
    <p>Run in repair mode. <strong>queue-repair</strong> will attempt to correct all problems that it finds, except if the basic queue directories (queue, queue/mess, queue/info, etc) are not found.</p>
  </dd>
  <dt>
    <p><strong>-c|--create</strong></p>
  </dt>
  <dd>
    <p>Run in create-and-repair mode. <strong>queue-repair will attempt to correct all problems that it finds,</strong> including creation of a new queue structure from scratch.</p>
  </dd>
  <dt>
    <p><strong>-s|--split </strong><em>split</em></p>
  </dt>
  <dd>
    <p>Specify <em>split</em> as the value of conf-split. This is the number of split subdirectories for those queue directories which are hashed. The default for qmail is 23. Appropriate values depend on the volume of mail handled, OS filesystem efficiency, and other factors, but this should always be a prime number.</p><p>If you do not specify conf-split, <strong>queue-repair</strong> will attempt to determine the current value from the existing queue. This option can be used, however, to change the conf-split value of an existing queue (qmail will still have to be recompiled with the new value). When creating a new queue, this option must always be specified.</p>
  </dd>
  <dt>
    <p><strong>-b|--bigtoto</strong></p>
  </dt>
  <dd>
    <p>Use big-todo. <strong>queue-repair</strong> should be able to automatically determine if you're using qmail patched with the big-todo patch. This option can be used, however, to convert a non-big-todo queue to a big-todo queue (qmail will still have to be recompiled with the big-todo patch).</p><p>If neither this option nor --no-bigtodo is used, <strong>queue-repair</strong> will attempt to determine this automatically. When creating a new queue, either this option or --no-bigtodo must always be specified.</p>
  </dd>
  <dt>
    <p><strong>-n|--no-bigtodo</strong></p>
  </dt>
  <dd>
    <p>Do not use big-todo. <strong>queue-repair</strong> should be able to automatically determine if you're using qmail patched with the big-todo patch. This option can be used, however, to convert a big-todo queue to a non big-todo queue (qmail will still have to be recompiled without the big-todo patch).</p><p>If neither this option nor --bigtodo is used, <strong>queue-repair</strong> will attempt to determine this automatically. When creating a new queue, either this option or --bigtodo must always be specified.</p>
  </dd>
  <dt>
    <p><strong>--i-want-a-broken-conf-split</strong></p>
  </dt>
  <dd>
    <p>Force the use of a non-prime value for conf-split.</p>
  </dd>

</dl>

        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">RELATED TO queue-repair&hellip;</h2>
        <div class="sectioncontent">
<p><a href="../man7/qmail.7.html"><strong>qmail</strong>(7)</a></p>
        </div>
      </section>
<nav>
  <ul class="pager">
   <li class="previous"><a href="queue-pr.8.html"><span aria-hidden="true">&larr;</span> queue-pr.8: Incoming mail control for gnats</a></li>
   <li class="next"><a href="quot.8.html">quot.8: Summarize filesystem ownership <span aria-hidden="true">&rarr;</span></a></li>
  </ul>
</nav>

  </div>
  <!-- jQuery (necessary for Bootstrap's JavaScript plugins) -->
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.2/jquery.min.js"></script>
  <!-- Include all compiled plugins (below), or include individual files as needed -->
  <script src="/js/bootstrap.min.js"></script>
  <script>
    (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
      (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
      m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
    })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

    ga('create', 'UA-60781387-1', 'auto');
    ga('send', 'pageview');

  </script>
</body>
</html>
