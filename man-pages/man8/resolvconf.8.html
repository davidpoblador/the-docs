<!DOCTYPE html>
<html lang="en">
<head>
  <link href="https://fonts.googleapis.com/css?family=Fira+Mono:400,700&effect=destruction%7Cshadow-multiple" rel="stylesheet" type="text/css">
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>resolvconf: Manage nameserver information</title>
  <link href="/css/bootstrap.min.css" rel="stylesheet">
  <link href="/css/manpage.css" rel="stylesheet">
  <link rel="apple-touch-icon" sizes="57x57" href="/icons/apple-icon-57x57.png">
  <link rel="apple-touch-icon" sizes="60x60" href="/icons/apple-icon-60x60.png">
  <link rel="apple-touch-icon" sizes="72x72" href="/icons/apple-icon-72x72.png">
  <link rel="apple-touch-icon" sizes="76x76" href="/icons/apple-icon-76x76.png">
  <link rel="apple-touch-icon" sizes="114x114" href="/icons/apple-icon-114x114.png">
  <link rel="apple-touch-icon" sizes="120x120" href="/icons/apple-icon-120x120.png">
  <link rel="apple-touch-icon" sizes="144x144" href="/icons/apple-icon-144x144.png">
  <link rel="apple-touch-icon" sizes="152x152" href="/icons/apple-icon-152x152.png">
  <link rel="apple-touch-icon" sizes="180x180" href="/icons/apple-icon-180x180.png">
  <link rel="icon" type="image/png" sizes="192x192" href="/icons/android-icon-192x192.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/icons/favicon-32x32.png">
  <link rel="icon" type="image/png" sizes="96x96" href="/icons/favicon-96x96.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/icons/favicon-16x16.png">
  <link rel="manifest" href="/icons/manifest.json">
  <meta name="msapplication-TileColor" content="#ffffff">
  <meta name="msapplication-TileImage" content="/icons/ms-icon-144x144.png">
  <meta name="theme-color" content="#ffffff">
  <meta name="description" content="Manage nameserver information">
  <meta name="twitter:card" content="summary_large_image">
  <meta name="twitter:site" content="@CartaTech">
  <meta name="twitter:creator" content="@CartaTech">
  <meta name="twitter:title" content="resolvconf (8) manual">
  <meta name="twitter:description" content="Manage nameserver information">
  <meta name="twitter:image" content="https://www.carta.tech/images/resolvconf-resolvconf-8.png">
  <meta property="og:url" content="https://www.carta.tech/man-pages/man8/resolvconf.8.html" />
  <meta property="og:type" content="website" />
  <meta property="og:title" content="resolvconf (8) manual" />
  <meta property="og:description" content="Manage nameserver information" />
  <meta property="fb:app_id" content="1241677679199500" />
  <meta property="og:image" content="https://www.carta.tech/images/resolvconf-resolvconf-8.png" />
  <meta property="og:image:width" content="600" />
  <meta property="og:image:height" content="315" />
</head>
<body>
  <div class="container final">
          <div class="page-header">
        <h1 class="font-effect-destruction">resolvconf<small> (8)</small></h1>
        <p class="lead">Manage nameserver information</p>
      </div>

    <ol class="breadcrumb" itemscope itemtype="http://schema.org/BreadcrumbList">
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/">
      <span itemprop="name">Carta.tech</span>
    </a>
    <meta itemprop="position" content="1" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/">
      <span itemprop="name">Man Pages</span>
    </a>
    <meta itemprop="position" content="2" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/man8/">
      <span itemprop="name">System administration commands</span>
    </a>
    <meta itemprop="position" content="3" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/man8/resolvconf.8.html">
      <span itemprop="name">resolvconf: Manage nameserver information</span>
    </a>
    <meta itemprop="position" content="4" />
  </li>
</ol>
<ol class="breadcrumb" itemscope itemtype="http://schema.org/BreadcrumbList">
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/">
      <span itemprop="name">Carta.tech</span>
    </a>
    <meta itemprop="position" content="1" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/packages/">
      <span itemprop="name">Packages</span>
    </a>
    <meta itemprop="position" content="2" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/packages/resolvconf/">
      <span itemprop="name">resolvconf</span>
    </a>
    <meta itemprop="position" content="3" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/man8/resolvconf.8.html">
      <span itemprop="name">resolvconf: Manage nameserver information</span>
    </a>
    <meta itemprop="position" content="4" />
  </li>
</ol>
    
      <section>
        <h2 class="font-effect-shadow-multiple">SYNOPSIS</h2>
        <div class="sectioncontent">
<p>cat <em>FILE</em> | <strong>resolvconf</strong> <strong>-a</strong> <em>IFACE.PROG</em></p><p><strong>resolvconf</strong> <strong>-d</strong> <em>IFACE.PROG</em></p><p><strong>resolvconf</strong> <strong>-u</strong></p><p><strong>resolvconf</strong> <strong>--enable-updates</strong> | <strong>--disable-updates</strong> | <strong>--updates-are-enabled</strong></p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">DESCRIPTION</h2>
        <div class="sectioncontent">
<p>The resolvconf package comprises a simple database for run-time nameserver information and a simple framework for notifying applications of changes in that information. Resolvconf thus sets itself up as the intermediary between programs that supply nameserver information and applications that use that information.</p><p>Information is added to or removed from the database using the <strong>resolvconf</strong> program. See the <strong>OPTIONS</strong> section below for a discussion of the available options.</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">SUPPLIERS OF NAMESERVER INFORMATION</h2>
        <div class="sectioncontent">
<p>Normally the <strong>resolvconf</strong> program is run only by network interface configuration programs such as <a href="../man8/ifup.8.html"><strong>ifup</strong>(8)</a>, <strong>ifdown</strong>, <a href="../man8/NetworkManager.8.html"><strong>NetworkManager</strong>(8)</a>, <a href="../man8/dhclient.8.html"><strong>dhclient</strong>(8)</a>, and <a href="../man8/pppd.8.html"><strong>pppd</strong>(8)</a>; and by local nameservers such as <a href="../man8/dnsmasq.8.html"><strong>dnsmasq</strong>(8)</a>. These programs obtain nameserver information from some source and push it to <strong>resolvconf</strong>.</p><h3>dhclient</h3>
<p>The <strong>dhclient</strong> program, for example, may receive nameserver addresses and domain search list information during its negotiation with the DHCP server; if so, its hook script <em>/etc/dhcp/dhclient-enter-hooks.d/resolvconf</em> pushes this information to <strong>resolvconf.</strong></p>
<h3>ifup</h3>
<p>The <strong>ifup</strong> program can be used to configure network interfaces according to settings in <em>/etc/network/interfaces</em>. To make <strong>ifup</strong> push nameserver information to <strong>resolvconf</strong> when it configures an interface the administrator must add <strong>dns-</strong> option lines to the relevant <strong>iface</strong> stanza in <a href="../man5/interfaces.5.html"><strong>interfaces</strong>(5)</a>. The following option names are accepted: <strong>dns-nameserver</strong>, <strong>dns-search</strong>, and <strong>dns-sortlist</strong>.</p><p>To add a nameserver IP address, add an option line consisting of <strong>dns-nameserver</strong> and the address. To add multiple nameserver addresses, include multiple such <strong>dns-nameserver</strong> lines.</p>
<pre>
    dns-nameserver 192.168.1.254
    dns-nameserver 8.8.8.8
</pre>
<p>To add search domain names, add a line beginning with <strong>dns-search</strong>.</p>
<pre>
    dns-search foo.org bar.com
</pre>
<p>The <strong>dns-nameservers</strong> option is also accepted and, unlike <strong>dns-nameserver</strong>, can be given multiple arguments, separated by spaces.</p><p>The <strong>dns-domain</strong> option is deprecated in favor of <strong>dns-search</strong>.</p><p>The resulting stanza might look like the following example.</p>
<pre>
    iface eth0 inet static
        address 192.168.1.3
        netmask 255.255.255.0
        gateway 192.168.1.1
        dns-nameserver 192.168.1.254
        dns-nameserver 8.8.8.8
        dns-search foo.org bar.com
</pre>
<p>N.B.: On a machine where resolvconf has just been or is about to be installed and which previously relied on a static <em>/etc/resolv.conf</em> file,</p>
<dl class='dl-vertical'>
  <dt>
    \[bu]
  </dt>
  <dd>
    <p>the nameserver information in that static file, (which is to say the information on <strong>nameserver</strong>, <strong>domain</strong>, <strong>search</strong> and <strong>sortlist</strong> lines) should be migrated to the appropriate <strong>iface</strong> stanza(s) in <em>/etc/network/<a href="../man5/interfaces.5.html"><strong>interfaces</strong>(5)</a></em> as just described;</p>
  </dd>
  <dt>
    \[bu]
  </dt>
  <dd>
    <p>options (which is to say, any <strong>options</strong> lines) should be migrated to <em>/etc/resolvconf/resolv.conf.d/base</em>.</p>
  </dd>

</dl>

<h3>Command line</h3>
<p>The administrator <em>can</em> run <strong>resolvconf</strong> from the command line to add or delete nameserver information, but this is not normally necessary or advisable.</p>

        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">CONSUMERS OF NAMESERVER INFORMATION</h2>
        <div class="sectioncontent">
<p>Nameserver information provided to <strong>resolvconf</strong> is stored for use by subscribers to <strong>resolvconf</strong>'s notification service. Subscriber packages that need to know when nameserver information has changed should install a script in <em>/etc/resolvconf/update.d/</em> (or in <em>/etc/resolvconf/update-libc.d/</em>: see below). For example, DNS caches such as <a href="../man8/dnsmasq.8.html"><strong>dnsmasq</strong>(8)</a> and <a href="../man8/pdnsd.8.html"><strong>pdnsd</strong>(8)</a> subscribe to the notification service so that they know whither to forward queries. Client hook scripts will find the files containing nameserver information in the current directory.</p><h3>libc</h3>
<p>The most important software package that subscribes to the notification service is the GNU C Library <a href="../man3/resolver.3.html"><strong>resolver</strong>(3)</a>. This library is used by many applications that need to resolve domain names. When nameserver information is updated, the script <em>/etc/resolvconf/update.d/libc</em> generates a new version of the resolver configuration file, <em>/etc/resolvconf/run/resolv.conf</em>, as described below. If the new version of the file differs from the previously generated one then the hook scripts found in <em>/etc/resolvconf/update-libc.d/</em> are executed.</p><p>The dynamically generated resolver configuration file always starts with the contents of <em>/etc/resolvconf/resolv.conf.d/head</em> and ends with the contents of <em>/etc/resolvconf/resolv.conf.d/tail</em>. Between <em>head</em> and <em>tail</em> the <em>libc</em> script inserts dynamic nameserver information compiled from, first, information provided for configured interfaces; second, static information from <em>/etc/resolvconf/resolv.conf.d/base</em>. Specifically, it writes:</p>
<dl class='dl-vertical'>
  <dt>
      1)
  </dt>
  <dd>
    <p>up to three <strong>nameserver</strong> lines, ordered according to <em>/etc/resolvconf/interface-order</em>, possibly fewer if one of the addresses is a loopback address and the <strong>TRUNCATE_NAMESERVER_LIST_AFTER_LOOPBACK_ADDRESS</strong> environment variable is affirmatively set, as discussed in the <strong>ENVIRONMENT VARIABLES</strong> section;</p>
  </dd>
  <dt>
      2)
  </dt>
  <dd>
    <p>up to one <strong>search</strong> line containing the combined domain search list from all "domain" and "search" input lines, also ordered according to <a href="../man5/interface-order.5.html"><strong>interface-order</strong>(5)</a>;</p>
  </dd>
  <dt>
      3)
  </dt>
  <dd>
    <p>all other non-comment input lines.</p>
  </dd>

</dl>
<p>To make the resolver use this dynamically generated resolver configuration file the administrator should ensure that <em>/etc/resolv.conf</em> is a symbolic link to <em>/etc/resolvconf/run/resolv.conf</em>. This link is normally created on installation of the resolvconf package. The link is never modified by the <strong>resolvconf</strong> program itself. If you find that <em>/etc/resolv.conf</em> is not being updated, please check to make sure that the link is intact.</p><p>The GNU C Library resolver library isn't the only resolver library available. However, any resolver library that reads <em>/etc/resolv.conf</em> (and most of them do, in order to be compatible) should work fine with resolvconf.</p><p>Subscriber packages that need to know only when the resolver configuration file has changed should install a script in <em>/etc/resolvconf/update-libc.d/</em> rather than in <em>/etc/resolvconf/update.d/</em>. (For example, two packages that install <em>update-libc.d/</em> hook scripts are <strong>fetchmail</strong> and <strong>squid</strong>.) This is important for synchronization purposes: scripts in <em>update-libc.d/</em> are run <em>after</em> <em>resolv.conf</em> has been updated; the same is not necessarily true of scripts in <em>update.d/</em>.</p>

        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">OPTIONS</h2>
        <div class="sectioncontent">

<dl class='dl-vertical'>
  <dt>
    <p><strong>-a</strong> <em>IFACE.PROG</em></p>
  </dt>
  <dd>
    <p>Add or overwrite the record <em>IFACE.PROG</em> then run the update scripts if updating is enabled. When this option is used the information must be provided to <strong>resolvconf</strong> on its standard input in the format of the <a href="../man5/resolv.conf.5.html"><strong>resolv.conf</strong>(5)</a> file. Each line in the file must be terminated by a newline.</p>
  </dd>
  <dt>
    <p><strong>-d</strong> <em>IFACE.PROG</em></p>
  </dt>
  <dd>
    <p>Delete the record <em>IFACE.PROG</em> then run the update scripts if updating is enabled.</p>
  </dd>

</dl>
<p>The string <em>IFACE.PROG</em> may not contain spaces, slashes, an initial dot, an initial hyphen or an initial tilde. It is conventionally formed from <em>IFACE</em>, the name of the interface involved, a dot, and <em>IPROG</em>, the name of the interface configuration program, e.g., "eth0.dhclient".</p>
<dl class='dl-vertical'>
  <dt>
    <p><strong>-u</strong></p>
  </dt>
  <dd>
    <p>Just run the update scripts (if updating is enabled).</p>
  </dd>
  <dt>
    <p>With <strong>-a</strong>, <strong>-d</strong> or <strong>-u</strong>:</p>
  </dt>
  <dd>
    <p>if updating is not enabled, schedule a delayed update. The delayed update will be carried out when updates are enabled.</p>
  </dd>
  <dt>
    <p><strong>--enable-updates</strong></p>
  </dt>
  <dd>
    <p>Set the flag indicating that <strong>resolvconf</strong> should run update scripts when invoked in the future with <strong>-a</strong>, <strong>-d</strong> or <strong>-u</strong>. If a delayed update was scheduled then run update scripts.</p>
  </dd>
  <dt>
    <p><strong>--disable-updates</strong></p>
  </dt>
  <dd>
    <p>Clear the flag.</p>
  </dd>
  <dt>
    <p><strong>--updates-are-enabled</strong></p>
  </dt>
  <dd>
    <p>Return 0 if the flag is set, otherwise return 1.</p>
  </dd>

</dl>

        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">ENVIRONMENT VARIABLES</h2>
        <div class="sectioncontent">
<p>The following variables can be set in the configuration file <em>/etc/default/resolvconf</em>. If the file does not exist you will have to create it.</p>
<dl class='dl-vertical'>
  <dt>
    <p><strong>REPORT_ABSENT_SYMLINK</strong></p>
  </dt>
  <dd>
    <p>If set to "yes" then <strong>resolvconf</strong> will print a message when <em>/etc/resolv.conf</em> is not a symbolic link to the <strong>resolvconf</strong>-generated resolver configuration file. Set to "no" to prevent the printing of this message. The default is "yes".</p>
  </dd>
  <dt>
    <p><strong>TRUNCATE_NAMESERVER_LIST_AFTER_LOOPBACK_ADDRESS</strong></p>
  </dt>
  <dd>
    <p>If set to "yes" then the <em>libc</em> script will include no more nameserver addresses after the first nameserver address that is a loopback address. (In IPv4 a loopback address is any one that starts with "127.". In IPv6 the loopback address is "::1".)</p><ul>
<li><p>The advantage of truncating the nameserver list after a loopback address is that doing so inhibits unnecessary changes to <em>resolv.conf</em> and thus reduces the number of instances in which the <em>update-libc.d/</em> scripts have to be run. When an interface is brought up or down the local caching nameserver that listens on the loopback address is still informed of the change and adapts accordingly; the clients of the resolver which use the local caching nameserver do not need to be notified of the change. A disadvantage of this mode of operation is that applications have no secondary or tertiary nameserver address to fall back on should the local caching nameserver crash. Insofar as a local nameserver crash can be regarded as an unlikely event, this is a relatively minor disadvantage. Set to "no" to disable truncation. The default is "yes".</p></li><li><p>A deprecated synonym for this variable is <strong>TRUNCATE_NAMESERVER_LIST_AFTER_127</strong>.</p></li>
</ul>
  </dd>

</dl>

        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">FILES</h2>
        <div class="sectioncontent">

<dl class='dl-vertical'>
  <dt>
    <p><em>/etc/default/resolvconf</em></p>
  </dt>
  <dd>
    <p>See the ENVIRONMENT VARIABLES section.</p>
  </dd>
  <dt>
    <p><em>/etc/resolvconf/run</em></p>
  </dt>
  <dd>
    <p>This is a symbolic link to a location where nameserver information is stored. The location must be on a filesystem that is writable early in the boot sequence. In Debian the default location is <em>/run/resolvconf</em> and in the future this will be the only supported location; configurability of the location via <em>/etc/resolvconf/run</em> will be dropped. Nevertheless, clients should not make any assumptions about the location or the canonical path of this directory or the hierarchy that is constructed under it.</p>
  </dd>
  <dt>
    <p><em>/etc/resolvconf/interface-order</em></p>
  </dt>
  <dd>
    <p>Determines the order of precedence of nameserver addresses and search domain names. See above and <a href="../man5/interface-order.5.html"><strong>interface-order</strong>(5)</a>.</p>
  </dd>
  <dt>
    <p><em>/etc/resolvconf/resolv.conf.d/base</em></p>
  </dt>
  <dd>
    <p>File containing basic resolver information. The lines in this file are included in the resolver configuration file even when no interfaces are configured.</p>
  </dd>
  <dt>
    <p><em>/etc/resolvconf/resolv.conf.d/head</em></p>
  </dt>
  <dd>
    <p>File to be prepended to the dynamically generated resolver configuration file. Normally this is just a comment line.</p>
  </dd>
  <dt>
    <p><em>/etc/resolvconf/resolv.conf.d/tail</em></p>
  </dt>
  <dd>
    <p>File to be appended to the dynamically generated resolver configuration file. To append nothing, make this an empty file. This file is a good place to put a resolver <strong>options</strong> line if one is needed, e.g.,</p>
<pre>
    options inet6
</pre>

  </dd>
  <dt>
    <p><em>/etc/resolvconf/resolv.conf.d/original</em></p>
  </dt>
  <dd>
    <p>Copy of the <em>/etc/resolv.conf</em> file before the resolvconf package was installed. This file has no effect on the functioning of resolvconf; it is retained so that <em>/etc/resolv.conf</em> can be restored to its original state if the resolvconf package is removed.</p><p>Note also that a copy of this file is included in the database until the first reboot after installation of the resolvconf package; this ensures that nameservers reachable before installation of resolvconf are still reachable after installation of resolvconf even though at that point not all suppliers of nameserver information may have supplied their information to <a href="../man8/resolvconf.8.html"><strong>resolvconf</strong>(8)</a>.</p><p>Note also that the administrator can choose to create a symbolic link in <em>/etc/resolvconf/resolv.conf.d/</em> from <em>tail</em> to <em>original</em> so that the contents of <em>original</em> are always added to the end of the dynamically generated file.</p>
  </dd>

</dl>

        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">BUGS</h2>
        <div class="sectioncontent">
<p>Currently <strong>resolvconf</strong> does not check the sanity of the information provided to it.</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">AUTHOR</h2>
        <div class="sectioncontent">
<p>Written by Thomas Hood &lt;jdthood@gmail.com&gt; with contributions by Nathan Stratton Treadway.</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">COPYRIGHT</h2>
        <div class="sectioncontent">
<p>Copyright &copy; 2004-2013 Thomas Hood.</p><p>This is free software; see the source for copying conditions.</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">RELATED TO resolvconf&hellip;</h2>
        <div class="sectioncontent">
<p><a href="../man5/interface-order.5.html"><strong>interface-order</strong>(5)</a>, <a href="../man5/resolv.conf.5.html"><strong>resolv.conf</strong>(5)</a>, <a href="../man3/resolver.3.html"><strong>resolver</strong>(3)</a>.</p><p>Read the resolvconf package <em>README</em> file for more in-depth information.</p>
        </div>
      </section>
<nav>
  <ul class="pager">
   <li class="previous"><a href="resizepart.8.html"><span aria-hidden="true">&larr;</span> resizepart.8: Simple wrapper around the "resize partition" ioctl</a></li>
   <li class="next"><a href="restart.8.html">restart.8: Init daemon control tool <span aria-hidden="true">&rarr;</span></a></li>
  </ul>
</nav>

  </div>
  <!-- jQuery (necessary for Bootstrap's JavaScript plugins) -->
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.2/jquery.min.js"></script>
  <!-- Include all compiled plugins (below), or include individual files as needed -->
  <script src="/js/bootstrap.min.js"></script>
  <script>
    (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
      (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
      m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
    })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

    ga('create', 'UA-60781387-1', 'auto');
    ga('send', 'pageview');

  </script>
</body>
</html>
