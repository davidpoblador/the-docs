<!DOCTYPE html>
<html lang="en">
<head>
  <link href="https://fonts.googleapis.com/css?family=Fira+Mono:400,700&effect=destruction%7Cshadow-multiple" rel="stylesheet" type="text/css">
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>dump: Ext2/3/4 filesystem backup</title>
  <link href="/css/bootstrap.min.css" rel="stylesheet">
  <link href="/css/manpage.css" rel="stylesheet">
  <link rel="apple-touch-icon" sizes="57x57" href="/icons/apple-icon-57x57.png">
  <link rel="apple-touch-icon" sizes="60x60" href="/icons/apple-icon-60x60.png">
  <link rel="apple-touch-icon" sizes="72x72" href="/icons/apple-icon-72x72.png">
  <link rel="apple-touch-icon" sizes="76x76" href="/icons/apple-icon-76x76.png">
  <link rel="apple-touch-icon" sizes="114x114" href="/icons/apple-icon-114x114.png">
  <link rel="apple-touch-icon" sizes="120x120" href="/icons/apple-icon-120x120.png">
  <link rel="apple-touch-icon" sizes="144x144" href="/icons/apple-icon-144x144.png">
  <link rel="apple-touch-icon" sizes="152x152" href="/icons/apple-icon-152x152.png">
  <link rel="apple-touch-icon" sizes="180x180" href="/icons/apple-icon-180x180.png">
  <link rel="icon" type="image/png" sizes="192x192" href="/icons/android-icon-192x192.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/icons/favicon-32x32.png">
  <link rel="icon" type="image/png" sizes="96x96" href="/icons/favicon-96x96.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/icons/favicon-16x16.png">
  <link rel="manifest" href="/icons/manifest.json">
  <meta name="msapplication-TileColor" content="#ffffff">
  <meta name="msapplication-TileImage" content="/icons/ms-icon-144x144.png">
  <meta name="theme-color" content="#ffffff">
  <meta name="description" content="Ext2/3/4 filesystem backup">
  <meta name="twitter:card" content="summary_large_image">
  <meta name="twitter:site" content="@CartaTech">
  <meta name="twitter:creator" content="@CartaTech">
  <meta name="twitter:title" content="dump (8) manual">
  <meta name="twitter:description" content="Ext2/3/4 filesystem backup">
  <meta name="twitter:image" content="https://www.carta.tech/images/dump-dump-8.png">
  <meta property="og:url" content="https://www.carta.tech/man-pages/man8/dump.8.html" />
  <meta property="og:type" content="website" />
  <meta property="og:title" content="dump (8) manual" />
  <meta property="og:description" content="Ext2/3/4 filesystem backup" />
  <meta property="fb:app_id" content="1241677679199500" />
  <meta property="og:image" content="https://www.carta.tech/images/dump-dump-8.png" />
  <meta property="og:image:width" content="600" />
  <meta property="og:image:height" content="315" />
</head>
<body>
  <div class="container final">
          <div class="page-header">
        <h1 class="font-effect-destruction">dump<small> (8)</small></h1>
        <p class="lead">Ext2/3/4 filesystem backup</p>
      </div>

    <ol class="breadcrumb" itemscope itemtype="http://schema.org/BreadcrumbList">
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/">
      <span itemprop="name">Carta.tech</span>
    </a>
    <meta itemprop="position" content="1" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/">
      <span itemprop="name">Man Pages</span>
    </a>
    <meta itemprop="position" content="2" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/man8/">
      <span itemprop="name">System administration commands</span>
    </a>
    <meta itemprop="position" content="3" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/man8/dump.8.html">
      <span itemprop="name">dump: Ext2/3/4 filesystem backup</span>
    </a>
    <meta itemprop="position" content="4" />
  </li>
</ol>
<ol class="breadcrumb" itemscope itemtype="http://schema.org/BreadcrumbList">
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/">
      <span itemprop="name">Carta.tech</span>
    </a>
    <meta itemprop="position" content="1" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/packages/">
      <span itemprop="name">Packages</span>
    </a>
    <meta itemprop="position" content="2" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/packages/dump/">
      <span itemprop="name">dump</span>
    </a>
    <meta itemprop="position" content="3" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/man8/dump.8.html">
      <span itemprop="name">dump: Ext2/3/4 filesystem backup</span>
    </a>
    <meta itemprop="position" content="4" />
  </li>
</ol>
    
      <section>
        <h2 class="font-effect-shadow-multiple">SYNOPSIS</h2>
        <div class="sectioncontent">
<p><strong>dump</strong> [<strong>-</strong><em>level#</em>] [<strong>-ackMnqSuv]</strong> [<strong>-A </strong><em>file</em>] [<strong>-B </strong><em>records</em>] [<strong>-b </strong><em>blocksize</em>] [<strong>-d </strong><em>density</em>] [<strong>-D </strong><em>file</em>] [<strong>-e </strong><em>inode numbers</em>] [<strong>-E </strong><em>file</em>] [<strong>-f </strong><em>file</em>] [<strong>-F </strong><em>script</em>] [<strong>-h </strong><em>level</em>] [<strong>-I </strong><em>nr errors</em>] [<strong>-j</strong><em>compression level</em>] [<strong>-L </strong><em>label</em>] [<strong>-Q </strong><em>file</em>] [<strong>-s </strong><em>feet</em>] [<strong>-T </strong><em>date</em>] [<strong>-y</strong>] [<strong>-z</strong><em>compression level</em>] <em>files-to-dump</em></p><p><strong>dump</strong> [<strong>-W </strong>| <strong>-w</strong>]</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">DESCRIPTION</h2>
        <div class="sectioncontent">
<p><strong>Dump</strong> examines files on an ext2/3/4 filesystem and determines which files need to be backed up. These files are copied to the given disk, tape or other storage medium for safe keeping (see the <strong>-f</strong> option below for doing remote backups). A dump that is larger than the output medium is broken into multiple volumes. On most media the size is determined by writing until an end-of-media indication is returned.</p><p>On media that cannot reliably return an end-of-media indication (such as some cartridge tape drives), each volume is of a fixed size; the actual size is determined by specifying cartridge media, or via the tape size, density and/or block count options below. By default, the same output file name is used for each volume after prompting the operator to change media.</p><p><em>files-to-dump</em> is either a mountpoint of a filesystem or a list of files and directories to be backed up as a subset of a filesystem. In the former case, either the path to a mounted filesystem or the device of an unmounted filesystem can be used. In the latter case, certain restrictions are placed on the backup: <strong>-u</strong> is not allowed, the only dump level that is supported is <strong>0</strong> and all the files and directories must reside on the same filesystem.</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">OPTIONS</h2>
        <div class="sectioncontent">
<p>The following options are supported by <strong>dump:</strong></p>
<dl class='dl-vertical'>
  <dt>
    <p><strong>-level#</strong></p>
  </dt>
  <dd>
    <p>The dump level (any integer). A level 0, full backup, specified by <strong>-0</strong> guarantees the entire file system is copied (but see also the <strong>-h</strong> option below). A level number above 0, incremental backup, tells <strong>dump</strong> to copy all files new or modified since the last dump of a lower level. The default level is 0. Historically only levels 0 to 9 were usable in dump, this version is able to understand any integer as a dump level.</p>
  </dd>
  <dt>
    <p><strong>-a</strong></p>
  </dt>
  <dd>
    <p>&ldquo;auto-size&rdquo;. Bypass all tape length calculations, and write until an end-of-media indication is returned.  This works best for most modern tape drives, and is the default. Use of this option is particularly recommended when appending to an existing tape, or using a tape drive with hardware compression (where you can never be sure about the compression ratio).</p>
  </dd>
  <dt>
    <p><strong>-A</strong><em> archive_file</em></p>
  </dt>
  <dd>
    <p>Archive a dump table-of-contents in the specified <em>archive_file</em> to be used by <a href="../man8/restore.8.html"><strong>restore</strong>(8)</a> to determine whether a file is in the dump file that is being restored.</p>
  </dd>
  <dt>
    <p><strong>-b</strong><em> blocksize</em></p>
  </dt>
  <dd>
    <p>The number of kilobytes per dump record. The default blocksize is 10, unless the <strong>-d</strong> option has been used to specify a tape density of 6250BPI or more, in which case the default blocksize is 32. Th maximal value is 1024. Note however that, since the IO system slices all requests into chunks of <strong>MAXBSIZE</strong> (which can be as low as 64kB), you can experience problems with <a href="../man8/dump.8.html"><strong>dump</strong>(8)</a> and <a href="../man8/restore.8.html"><strong>restore</strong>(8)</a> when using a higher value, depending on your kernel and/or libC versions.</p>
  </dd>
  <dt>
    <p><strong>-B</strong><em> records</em></p>
  </dt>
  <dd>
    <p>The number of 1 kB blocks per volume. Not normally required, as <strong>dump</strong> can detect end-of-media. When the specified size is reached, <strong>dump</strong> waits for you to change the volume.  This option overrides the calculation of tape size based on length and density. If compression is on this limits the size of the compressed output per volume.  Multiple values may be given as a single argument separated by commas.  Each value will be used for one dump volume in the order listed; if <strong>dump</strong> creates more volumes than the number of values given, the last value will be used for the remaining volumes. This is useful for filling up already partially filled media (and then continuing with full size volumes on empty media) or mixing media of different sizes.</p>
  </dd>
  <dt>
    <p><strong>-c</strong></p>
  </dt>
  <dd>
    <p>Change the defaults for use with a cartridge tape drive, with a density of 8000 bpi, and a length of 1700 feet. Specifying a cartridge drive overrides the end-of-media detection.</p>
  </dd>
  <dt>
    <p><strong>-d</strong><em> density</em></p>
  </dt>
  <dd>
    <p>Set tape density to <em>density</em>. The default is 1600BPI. Specifying a tape density overrides the end-of-media detection.</p>
  </dd>
  <dt>
    <p><strong>-D</strong><em> file</em></p>
  </dt>
  <dd>
    <p>Set the path name of the file storing the information about the previous full and incremental dumps. The default location is <em>/var/lib/dumpdates</em>.</p>
  </dd>
  <dt>
    <p><strong>-e</strong><em> inodes</em></p>
  </dt>
  <dd>
    <p>Exclude <em>inodes</em> from the dump. The <em>inodes</em> parameter is a comma separated list of inode numbers (you can use <a href="../man1/stat.1.html"><strong>stat</strong>(1)</a> to find the inode number for a file or directory).</p>
  </dd>
  <dt>
    <p><strong>-E</strong><em> file</em></p>
  </dt>
  <dd>
    <p>Read list of inodes to be excluded from the dump from the text file <em>file</em>. The file <em>file</em> should be an ordinary file containing inode numbers separated by newlines.</p>
  </dd>
  <dt>
    <p><strong>-f</strong><em> file</em></p>
  </dt>
  <dd>
    <p>Write the backup to <em>file</em>; <em>file</em> may be a special device file like <em>/dev/st0</em> (a tape drive), <em>/dev/rsd1c</em> (a floppy disk drive), an ordinary file, or <em>-</em> (the standard output). Multiple file names may be given as a single argument separated by commas. Each file will be used for one dump volume in the order listed; if the dump requires more volumes than the number of names given, the last file name will used for all remaining volumes after prompting for media changes. If the name of the file is of the form <em>host:file</em> or <em>user@host:file</em> <strong>dump</strong> writes to the named file on the remote host (which should already exist, dump doesn't create a new remote file) using <strong>rmt</strong>(8). The default path name of the remote <strong>rmt</strong>(8) program is <em>/etc/rmt</em>; this can be overridden by the environment variable <strong>RMT</strong>.</p>
  </dd>
  <dt>
    <p><strong>-F</strong><em> script</em></p>
  </dt>
  <dd>
    <p>Run script at the end of each tape (except for the last one). The device name and the current volume number are passed on the command line. The script must return 0 if <strong>dump</strong> should continue without asking the user to change the tape, 1 if <strong>dump</strong> should continue but ask the user to change the tape. Any other exit code will cause <strong>dump</strong> to abort. For security reasons, <strong>dump</strong> reverts back to the real user ID and the real group ID before running the script.</p>
  </dd>
  <dt>
    <p><strong>-h</strong><em> level</em></p>
  </dt>
  <dd>
    <p>Honor the user <strong>nodump</strong> flag <strong>UF_NODUMP</strong> only for dumps at or above the given <em>level</em>. The default honor level is 1, so that incremental backups omit such files but full backups retain them.</p>
  </dd>
  <dt>
    <p><strong>-I</strong><em> nr errors</em></p>
  </dt>
  <dd>
    <p>By default, <strong>dump</strong> will ignore the first 32 read errors on the file system before asking for operator intervention. You can change this using this flag to any value. This is useful when running <strong>dump</strong> on an active filesystem where read errors simply indicate an inconsistency between the mapping and dumping passes.</p><ul>
<li><p>A value of 0 means that all read errors will be ignored.</p></li>
</ul>
  </dd>
  <dt>
    <p><strong>-j</strong><em>compression level</em></p>
  </dt>
  <dd>
    <p>Compress every block to be written on the tape using bzlib library. This option will work only when dumping to a file or pipe or, when dumping to a tape drive, if the tape drive is capable of writing variable length blocks. You will need at least the 0.4b24 version of <strong>restore</strong> in order to extract compressed tapes. Tapes written using compression will not be compatible with the BSD tape format. The (optional) parameter specifies the compression level bzlib will use. The default compression level is 2. If the optional parameter is specified, there should be no white space between the option letter and the parameter.</p>
  </dd>
  <dt>
    <p><strong>-k</strong></p>
  </dt>
  <dd>
    <p>Use Kerberos authentication to talk to remote tape servers. (Only available if this option was enabled when <strong>dump</strong> was compiled.)</p>
  </dd>
  <dt>
    <p><strong>-L</strong><em> label</em></p>
  </dt>
  <dd>
    <p>The user-supplied text string <em>label</em> is placed into the dump header, where tools like <a href="../man8/restore.8.html"><strong>restore</strong>(8)</a> and <strong>file</strong>(8) can access it. Note that this label is limited to be at most <strong>LBLSIZE</strong> (currently 16) characters, which must include the terminating &#92;0.</p>
  </dd>
  <dt>
    <p><strong>-m</strong></p>
  </dt>
  <dd>
    <p>If this flag is specified, <strong>dump</strong> will optimise the output for inodes having been changed but not modified since the last dump ('changed' and 'modified' have the meaning defined in <a href="../man2/stat.2.html"><strong>stat</strong>(2)</a> ). For those inodes, <strong>dump</strong> will save only the metadata, instead of saving the entire inode contents. Inodes which are either directories or have been modified since the last dump are saved in a regular way. Uses of this flag must be consistent, meaning that either every dump in an incremental dump set have the flag, or no one has it.</p><ul>
<li><p>If you use this option, be aware that many programs that unpack files from archives (e.g. tar, rpm, unzip, dpkg) may set files' mtimes to dates in the past.  Files installed in this way may not be dumped correctly using "dump -m" if the modified mtime is earlier than the previous level dump.</p></li><li><p>Tapes written using such 'metadata only' inodes will not be compatible with the BSD tape format or older versions of <strong>restore.</strong></p></li>
</ul>
  </dd>
  <dt>
    <p><strong>-M</strong></p>
  </dt>
  <dd>
    <p>Enable the multi-volume feature. The name specified with <strong>f</strong> is treated as a prefix and <strong>dump</strong> writes in sequence to <em>&lt;prefix&gt;001, &lt;prefix&gt;002</em> etc. This can be useful when dumping to files on an ext2/3/4 partition, in order to bypass the 2GB file size limitation.</p>
  </dd>
  <dt>
    <p><strong>-n</strong></p>
  </dt>
  <dd>
    <p>Whenever <strong>dump</strong> requires operator attention, notify all operators in the group <strong>operator</strong> by means similar to a <a href="../man1/wall.1.html"><strong>wall</strong>(1)</a>.</p>
  </dd>
  <dt>
    <p><strong>-q</strong></p>
  </dt>
  <dd>
    <p>Make <strong>dump</strong> abort immediately whenever operator attention is required, without prompting in case of write errors, tape changes etc.</p>
  </dd>
  <dt>
    <p><strong>-Q</strong><em> file</em></p>
  </dt>
  <dd>
    <p>Enable the Quick File Access support. Tape positions for each inode are stored into the file <em>file</em> which is used by <strong>restore</strong> (if called with parameter <strong>-Q</strong> and the filename) to directly position the tape at the file <strong>restore</strong> is currently working on. This saves hours when restoring single files from large backups, saves the tapes and the drive's head.</p><ul>
<li><p>It is recommended to set up the st driver to return logical tape positions rather than physical before calling <strong>dump/restore</strong> with parameter <strong>-Q</strong>. Since not all tape devices support physical tape positions those tape devices return an error during <strong>dump/restore</strong> when the st driver is set to the default physical setting.  Please see the <strong>st</strong>(4) man page, option <strong>MTSETDRVBUFFER</strong> , or the <strong>mt</strong>(1) man page, on how to set the driver to return logical tape positions.</p></li><li><p>Before calling <strong>restore</strong> with parameter <strong>-Q</strong>, always make sure the st driver is set to return the same type of tape position used during the call to <strong>dump</strong>. Otherwise <strong>restore</strong> may be confused.</p></li><li><p>This option can be used when dumping to local tapes (see above) or to local files.</p></li>
</ul>
  </dd>
  <dt>
    <p><strong>-s</strong><em> feet</em></p>
  </dt>
  <dd>
    <p>Attempt to calculate the amount of tape needed at a particular density. If this amount is exceeded, <strong>dump</strong> prompts for a new tape. It is recommended to be a bit conservative on this option. The default tape length is 2300 feet. Specifying the tape size overrides end-of-media detection.</p>
  </dd>
  <dt>
    <p><strong>-S</strong></p>
  </dt>
  <dd>
    <p>Size estimate. Determine the amount of space that is needed to perform the dump without actually doing it, and display the estimated number of bytes it will take. This is useful with incremental dumps to determine how many volumes of media will be needed.</p>
  </dd>
  <dt>
    <p><strong>-T</strong><em> date</em></p>
  </dt>
  <dd>
    <p>Use the specified date as the starting time for the dump instead of the time determined from looking in <em>/var/lib/dumpdates .</em> The format of <em>date</em> is the same as that of <a href="../man3/ctime.3.html"><strong>ctime</strong>(3)</a> followed by an rfc822 timezone specification: either a plus or minus sign followed by two digits for the number of hours and two digits for the minutes. For example, -0800 for eight hours west of Greenwich or +0230 for two hours and a half east of Greenwich. This timezone offset takes into account daylight savings time (if applicable to the timezone): UTC offsets when daylight savings time is in effect will be different than offsets when daylight savings time is not in effect. For backward compatibility, if no timezone is specified, a local time is assumed. This option is useful for automated dump scripts that wish to dump over a specific period of time. The <strong>-T</strong> option is mutually exclusive from the <strong>-u</strong> option.</p>
  </dd>
  <dt>
    <p><strong>-u</strong></p>
  </dt>
  <dd>
    <p>Update the file <em>/var/lib/dumpdates</em> after a successful dump. The format of <em>/var/lib/dumpdates</em> is readable by people, consisting of one free format record per line: filesystem name, increment level and <a href="../man3/ctime.3.html"><strong>ctime</strong>(3)</a> format dump date followed by a rfc822 timezone specification (see the <strong>-u</strong> option for details). If no timezone offset is specified, times are interpreted as local. Whenever the file is written, all dates in the file are converted to the local time zone, without changing the UTC times. There may be only one entry per filesystem at each level. The file <em>/var/lib/dumpdates</em> may be edited to change any of the fields, if necessary.</p>
  </dd>
  <dt>
    <p><strong>-v</strong></p>
  </dt>
  <dd>
    <p>The <strong>-v</strong> (verbose) makes <strong>dump</strong> to print extra information which could be helpful in debug sessions.</p>
  </dd>
  <dt>
    <p><strong>-W</strong></p>
  </dt>
  <dd>
    <p><strong>Dump</strong> tells the operator what file systems need to be dumped. This information is gleaned from the files <em>/var/lib/dumpdates</em> and <em>/etc/fstab</em>. The <strong>-W</strong> option causes <strong>dump</strong> to print out, for all file systems in <em>/var/lib/dumpdates ,</em> and recognized file systems in <em>/etc/mtab</em> and <em>/etc/fstab</em>. the most recent dump date and level, and highlights those that should be dumped. If the <strong>-W</strong> option is set, all other options are ignored, and <strong>dump</strong> exits immediately.</p>
  </dd>
  <dt>
    <p><strong>-w</strong></p>
  </dt>
  <dd>
    <p>Is like <strong>-W</strong>, but prints only recognized filesystems in <em>/etc/mtab</em> and <em>/etc/fstab</em> which need to be dumped.</p>
  </dd>
  <dt>
    <p><strong>-y</strong></p>
  </dt>
  <dd>
    <p>Compress every block to be written to the tape using the lzo library. This doesn't compress as well as the zlib library but it's much faster. This option will work only when dumping to a file or pipe or, when dumping to a tape drive, if the tape drive is capable of writing variable length blocks. You will need at least the 0.4b34 version of <strong>restore</strong> in order to extract compressed tapes. Tapes written using compression will not be compatible with the BSD tape format.</p>
  </dd>
  <dt>
    <p><strong>-z</strong><em>compression level</em></p>
  </dt>
  <dd>
    <p>Compress every block to be written on the tape using zlib library. This option will work only when dumping to a file or pipe or, when dumping to a tape drive, if the tape drive is capable of writing variable length blocks. You will need at least the 0.4b22 version of <strong>restore</strong> in order to extract compressed tapes. Tapes written using compression will not be compatible with the BSD tape format. The (optional) parameter specifies the compression level zlib will use. The default compression level is 2. If the optional parameter is specified, there should be no white space between the option letter and the parameter.</p>
  </dd>

</dl>
<p><strong>Dump</strong> requires operator intervention on these conditions: end of tape, end of dump, tape write error, tape open error or disk read error (if there is more than a threshold of nr errors). In addition to alerting all operators implied by the <strong>-n</strong> key, <strong>dump</strong> interacts with the operator on dump's control terminal at times when <strong>dump</strong> can no longer proceed, or if something is grossly wrong. All questions <strong>dump</strong> poses <em>must</em> be answered by typing &ldquo;yes&rdquo; or &ldquo;no&rdquo;, appropriately.</p><p>Since making a dump involves a lot of time and effort for full dumps, <strong>dump</strong> checkpoints itself at the start of each tape volume. If writing that volume fails for some reason, <strong>dump</strong> will, with operator permission, restart itself from the checkpoint after the old tape has been rewound and removed, and a new tape has been mounted.</p><p><strong>Dump</strong> tells the operator what is going on at periodic intervals, including usually low estimates of the number of blocks to write, the number of tapes it will take, the time to completion, and the time to the tape change. The output is verbose, so that others know that the terminal controlling <strong>dump</strong> is busy, and will be for some time.</p><p>In the event of a catastrophic disk event, the time required to restore all the necessary backup tapes or files to disk can be kept to a minimum by staggering the incremental dumps. An efficient method of staggering incremental dumps to minimize the number of tapes follows:</p>
<dl class='dl-vertical'>
  <dt>
    &ndash;
  </dt>
  <dd>
    <p>Always start with a level 0 backup, for example:</p><p><strong>/sbin/dump -0u -f /dev/st0 /usr/src</strong></p>
  </dd>
  <dt>
    
  </dt>
  <dd>
    <p>This should be done at set intervals, say once a month or once every two months, and on a set of fresh tapes that is saved forever.</p>
  </dd>
  <dt>
    &ndash;
  </dt>
  <dd>
    <p>After a level 0, dumps of active file systems are taken on a daily basis, with this sequence of dump levels:</p><p><strong>3 2 5 4 7 6 9 8 9 9 ...</strong></p>
  </dd>
  <dt>
    
  </dt>
  <dd>
    <p>For the daily dumps, it should be possible to use a fixed number of tapes for each day, used on a weekly basis. Each week, a level 1 dump is taken, and the daily Hanoi sequence repeats beginning with 3. For weekly dumps, another fixed set of tapes per dumped file system is used, also on a cyclical basis.</p>
  </dd>

</dl>
<p>After several months or so, the daily and weekly tapes should get rotated out of the dump cycle and fresh tapes brought in.</p><p>Another backup strategy is the Tower of Hanoi sequence, which reuses older tapes in a way that for newer dates the available restore points are more frequent, then for older dates (see http://en.wikipedia.org/wiki/Backup_rotation_scheme for additional information).</p><p>(The 4.3BSD option syntax is implemented for backward compatibility but is not documented here.)</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">ENVIRONMENT</h2>
        <div class="sectioncontent">

<dl class='dl-vertical'>
  <dt>
    <p><strong>TAPE</strong></p>
  </dt>
  <dd>
    <p>If no <strong>-f</strong> option was specified, <strong>dump</strong> will use the device specified via <strong>TAPE</strong> as the dump device. <strong>TAPE</strong> may be of the form <em>tapename</em>, <em>host:tapename</em>, or <em>user@host:tapename</em>.</p>
  </dd>
  <dt>
    <p><strong>RMT</strong></p>
  </dt>
  <dd>
    <p>The environment variable <strong>RMT</strong> will be used to determine the pathname of the remote <strong>rmt</strong>(8) program.</p>
  </dd>
  <dt>
    <p><strong>RSH</strong></p>
  </dt>
  <dd>
    <p><strong>Dump</strong> uses the contents of this variable to determine the name of the remote shell command to use when doing remote backups (rsh, ssh etc.). If this variable is not set, <a href="../man3/rcmd.3.html"><strong>rcmd</strong>(3)</a> will be used, but only root will be able to do remote backups.</p>
  </dd>

</dl>

        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">FILES</h2>
        <div class="sectioncontent">

<dl class='dl-vertical'>
  <dt>
    <p><em>/dev/st0</em></p>
  </dt>
  <dd>
    <p>default tape unit to dump to</p>
  </dd>
  <dt>
    <p><em>/var/lib/dumpdates</em></p>
  </dt>
  <dd>
    <p>dump date records</p>
  </dd>
  <dt>
    <p><em>/etc/fstab</em></p>
  </dt>
  <dd>
    <p>dump table: file systems and frequency</p>
  </dd>
  <dt>
    <p><em>/etc/mtab</em></p>
  </dt>
  <dd>
    <p>dump table: mounted file systems</p>
  </dd>
  <dt>
    <p><em>/etc/group</em></p>
  </dt>
  <dd>
    <p>to find group <em>operator</em></p>
  </dd>

</dl>

        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">RELATED TO dump&hellip;</h2>
        <div class="sectioncontent">
<p><a href="../man5/fstab.5.html"><strong>fstab</strong>(5)</a>, <a href="../man8/restore.8.html"><strong>restore</strong>(8)</a>, <strong>rmt</strong>(8)</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">DIAGNOSTICS</h2>
        <div class="sectioncontent">
<p>Many, and verbose.</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">COMPATIBILITY</h2>
        <div class="sectioncontent">
<p>The format of the <em>/var/lib/dumpdates</em> file has changed in release 0.4b34, however, the file will be read correctly with either pre-0.4b34 or 0.4b34 and later versions of <strong>dump</strong> provided that the machine on which <strong>dump</strong> is run did not change timezones (which should be a fairly rare occurrence).</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">EXIT STATUS</h2>
        <div class="sectioncontent">
<p><strong>Dump</strong> exits with zero status on success. Startup errors are indicated with an exit code of 1; abnormal termination is indicated with an exit code of 3.</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">BUGS</h2>
        <div class="sectioncontent">
<p>It might be considered a bug that this version of dump can only handle ext2/3/4 filesystems.  Specifically, it does not work with FAT filesystems.</p><p>Fewer than 32 read errors (change this with <strong>-I</strong>) on the filesystem are ignored. If noticing read errors is important, the output from dump can be parsed to look for lines that contain the text 'read error'.</p><p>When a read error occurs, <strong>dump</strong> prints out the corresponding physical disk block and sector number and the ext2/3/4 logical block number. It doesn't print out the corresponding file name or even the inode number. The user has to use <a href="../man8/debugfs.8.html"><strong>debugfs</strong>(8)</a>, commands <strong>ncheck</strong> and <strong>icheck</strong> to translate the <strong>ext2blk</strong> number printed out by <strong>dump</strong> into an inode number, then into a file name.</p><p>Each reel requires a new process, so parent processes for reels already written just hang around until the entire tape is written.</p><p>The estimated number of tapes is not correct if compression is on.</p><p>It would be nice if <strong>dump</strong> knew about the dump sequence, kept track of the tapes scribbled on, told the operator which tape to mount when, and provided more assistance for the operator running <strong>restore</strong>.</p><p><strong>Dump</strong> cannot do remote backups without being run as root, due to its security history. Presently, it works if you set it setuid (like it used to be), but this might constitute a security risk. Note that you can set <strong>RSH</strong> to use a remote shell program instead.</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">AUTHOR</h2>
        <div class="sectioncontent">
<p>The <strong>dump/restore</strong> backup suite was ported to Linux's Second Extended File System by Remy Card &lt;card@Linux.EU.Org&gt;. He maintained the initial versions of <strong>dump</strong> (up and including 0.4b4, released in January 1997).</p><p>Starting with 0.4b5, the new maintainer is Stelian Pop &lt;stelian@popies.net&gt;.</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">AVAILABILITY</h2>
        <div class="sectioncontent">
<p>The <strong>dump/restore</strong> backup suite is available from &lt;http://dump.sourceforge.net&gt;</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">HISTORY</h2>
        <div class="sectioncontent">
<p>A <strong>dump</strong> command appeared in <strong>Version 6 AT&T UNIX.</strong></p>
        </div>
      </section>
<nav>
  <ul class="pager">
   <li class="previous"><a href="dummy_server.8.html"><span aria-hidden="true">&larr;</span> dummy_server.8: A simple server that binds to a user-specified port and does nothing</a></li>
   <li class="next"><a href="dump-acct.8.html">dump-acct.8: Print an acct file in human-readable format. <span aria-hidden="true">&rarr;</span></a></li>
  </ul>
</nav>

  </div>
  <!-- jQuery (necessary for Bootstrap's JavaScript plugins) -->
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.2/jquery.min.js"></script>
  <!-- Include all compiled plugins (below), or include individual files as needed -->
  <script src="/js/bootstrap.min.js"></script>
  <script>
    (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
      (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
      m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
    })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

    ga('create', 'UA-60781387-1', 'auto');
    ga('send', 'pageview');

  </script>
</body>
</html>
