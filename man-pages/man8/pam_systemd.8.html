<!DOCTYPE html>
<html lang="en">
<head>
  <link href="https://fonts.googleapis.com/css?family=Fira+Mono:400,700&effect=destruction%7Cshadow-multiple" rel="stylesheet" type="text/css">
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>pam_systemd: Register user sessions in the systemd login manager</title>
  <link href="/css/bootstrap.min.css" rel="stylesheet">
  <link href="/css/manpage.css" rel="stylesheet">
  <link rel="apple-touch-icon" sizes="57x57" href="/icons/apple-icon-57x57.png">
  <link rel="apple-touch-icon" sizes="60x60" href="/icons/apple-icon-60x60.png">
  <link rel="apple-touch-icon" sizes="72x72" href="/icons/apple-icon-72x72.png">
  <link rel="apple-touch-icon" sizes="76x76" href="/icons/apple-icon-76x76.png">
  <link rel="apple-touch-icon" sizes="114x114" href="/icons/apple-icon-114x114.png">
  <link rel="apple-touch-icon" sizes="120x120" href="/icons/apple-icon-120x120.png">
  <link rel="apple-touch-icon" sizes="144x144" href="/icons/apple-icon-144x144.png">
  <link rel="apple-touch-icon" sizes="152x152" href="/icons/apple-icon-152x152.png">
  <link rel="apple-touch-icon" sizes="180x180" href="/icons/apple-icon-180x180.png">
  <link rel="icon" type="image/png" sizes="192x192" href="/icons/android-icon-192x192.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/icons/favicon-32x32.png">
  <link rel="icon" type="image/png" sizes="96x96" href="/icons/favicon-96x96.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/icons/favicon-16x16.png">
  <link rel="manifest" href="/icons/manifest.json">
  <meta name="msapplication-TileColor" content="#ffffff">
  <meta name="msapplication-TileImage" content="/icons/ms-icon-144x144.png">
  <meta name="theme-color" content="#ffffff">
  <meta name="description" content="Register user sessions in the systemd login manager">
  <meta name="twitter:card" content="summary_large_image">
  <meta name="twitter:site" content="@CartaTech">
  <meta name="twitter:creator" content="@CartaTech">
  <meta name="twitter:title" content="pam_systemd (8) manual">
  <meta name="twitter:description" content="Register user sessions in the systemd login manager">
  <meta name="twitter:image" content="https://www.carta.tech/images/libpam-systemd-pam_systemd-8.png">
  <meta property="og:url" content="https://www.carta.tech/man-pages/man8/pam_systemd.8.html" />
  <meta property="og:type" content="website" />
  <meta property="og:title" content="pam_systemd (8) manual" />
  <meta property="og:description" content="Register user sessions in the systemd login manager" />
  <meta property="fb:app_id" content="1241677679199500" />
  <meta property="og:image" content="https://www.carta.tech/images/libpam-systemd-pam_systemd-8.png" />
  <meta property="og:image:width" content="600" />
  <meta property="og:image:height" content="315" />
</head>
<body>
  <div class="container final">
          <div class="page-header">
        <h1 class="font-effect-destruction">pam_systemd<small> (8)</small></h1>
        <p class="lead">Register user sessions in the systemd login manager</p>
      </div>

    <ol class="breadcrumb" itemscope itemtype="http://schema.org/BreadcrumbList">
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/">
      <span itemprop="name">Carta.tech</span>
    </a>
    <meta itemprop="position" content="1" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/">
      <span itemprop="name">Man Pages</span>
    </a>
    <meta itemprop="position" content="2" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/man8/">
      <span itemprop="name">System administration commands</span>
    </a>
    <meta itemprop="position" content="3" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/man8/pam_systemd.8.html">
      <span itemprop="name">pam_systemd: Register user sessions in the systemd login manager</span>
    </a>
    <meta itemprop="position" content="4" />
  </li>
</ol>
<ol class="breadcrumb" itemscope itemtype="http://schema.org/BreadcrumbList">
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/">
      <span itemprop="name">Carta.tech</span>
    </a>
    <meta itemprop="position" content="1" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/packages/">
      <span itemprop="name">Packages</span>
    </a>
    <meta itemprop="position" content="2" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/packages/libpam-systemd/">
      <span itemprop="name">libpam-systemd</span>
    </a>
    <meta itemprop="position" content="3" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/man8/pam_systemd.8.html">
      <span itemprop="name">pam_systemd: Register user sessions in the systemd login manager</span>
    </a>
    <meta itemprop="position" content="4" />
  </li>
</ol>
    
      <section>
        <h2 class="font-effect-shadow-multiple">SYNOPSIS</h2>
        <div class="sectioncontent">
<p>pam_systemd.so</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">DESCRIPTION</h2>
        <div class="sectioncontent">
<p><strong>pam_systemd</strong> registers user sessions with the systemd login manager <a href="../man8/systemd-logind.service.8.html"><strong>systemd-logind.service</strong>(8)</a>, and hence the systemd control group hierarchy.</p><p>On login, this module ensures the following:</p><p>If it does not exist yet, the user runtime directory /run/user/$USER is created and its ownership changed to the user that is logging in.</p><p>The <em>$XDG_SESSION_ID</em> environment variable is initialized. If auditing is available and <strong>pam_loginuid.so</strong> run before this module (which is highly recommended), the variable is initialized from the auditing session id (/proc/self/sessionid). Otherwise an independent session counter is used.</p><p>A new systemd scope unit is created for the session. If this is the first concurrent session of the user, an implicit slice below user.slice is automatically created and the scope placed in it. In instance of the system service user@.service which runs the systemd user manager instance.</p><p>On logout, this module ensures the following:</p><p>If this is enabled, all processes of the session are terminated. If the last concurrent session of a user ends, his user systemd instance will be terminated too, and so will the user&apos;s slice unit.</p><p>If the last concurrent session of a user ends, the <em>$XDG_RUNTIME_DIR</em> directory and all its contents are removed, too.</p><p>If the system was not booted up with systemd as init system, this module does nothing and immediately returns PAM_SUCCESS.</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">OPTIONS</h2>
        <div class="sectioncontent">
<p>The following options are understood:</p><p><strong>class=</strong></p><p>Takes a string argument which sets the session class. The XDG_SESSION_CLASS environmental variable takes precedence. One of "user", "greeter", "lock-screen" or "background". See <a href="../man3/sd_session_get_class.3.html"><strong>sd_session_get_class</strong>(3)</a> for details about the session class.</p><p><strong>type=</strong></p><p>Takes a string argument which sets the session type. The XDG_SESSION_TYPE environmental variable takes precedence. One of "unspecified", "tty", "x11", "wayland" or "mir". See <a href="../man3/sd_session_get_type.3.html"><strong>sd_session_get_type</strong>(3)</a> for details about the session type.</p><p><strong>debug</strong><strong>[=]</strong></p><p>Takes an optional boolean argument. If yes or without the argument, the module will log debugging information as it operates.</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">MODULE TYPES PROVIDED</h2>
        <div class="sectioncontent">
<p>Only <strong>session</strong> is provided.</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">ENVIRONMENT</h2>
        <div class="sectioncontent">
<p>The following environment variables are set for the processes of the user&apos;s session:</p><p><em>$XDG_SESSION_ID</em></p><p>A session identifier, suitable to be used in filenames. The string itself should be considered opaque, although often it is just the audit session ID as reported by /proc/self/sessionid. Each ID will be assigned only once during machine uptime. It may hence be used to uniquely label files or other resources of this session.</p><p><em>$XDG_RUNTIME_DIR</em></p><p>Path to a user-private user-writable directory that is bound to the user login time on the machine. It is automatically created the first time a user logs in and removed on his final logout. If a user logs in twice at the same time, both sessions will see the same <em>$XDG_RUNTIME_DIR</em> and the same contents. If a user logs in once, then logs out again, and logs in again, the directory contents will have been lost in between, but applications should not rely on this behavior and must be able to deal with stale files. To store session-private data in this directory, the user should include the value of <em>$XDG_SESSION_ID</em> in the filename. This directory shall be used for runtime file system objects such as <strong>AF_UNIX</strong> sockets, FIFOs, PID files and similar. It is guaranteed that this directory is local and offers the greatest possible file system feature set the operating system provides.</p><p>The following environment variables are read by the module and may be used by the PAM service to pass metadata to the module:</p><p><em>$XDG_SESSION_TYPE</em></p><p>The session type. This may be used instead of <strong>session=</strong> on the module parameter line, and is usually preferred.</p><p><em>$XDG_SESSION_CLASS</em></p><p>The session class. This may be used instead of <strong>class=</strong> on the module parameter line, and is usually preferred.</p><p><em>$XDG_SESSION_DESKTOP</em></p><p>A single, short identifier string for the desktop environment. This may be used to indicate the session desktop used, where this applies and if this information is available. For example: "GNOME", or "KDE". It is recommended to use the same identifiers and capitalization as for <em>$XDG_CURRENT_DESKTOP</em>, as defined by the \m[blue]<strong>Desktop Entry Specification</strong>\m[]\s-2\u[1]\d\s+2.</p><p><em>$XDG_SEAT</em></p><p>The seat name the session shall be registered for, if any.</p><p><em>$XDG_VTNR</em></p><p>The VT number the session shall be registered for, if any. (Only applies to seats with a VT available, such as "seat0")</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">EXAMPLE</h2>
        <div class="sectioncontent">

<pre>
#%PAM-1.0
auth       required     pam_unix.so
auth       required     pam_nologin.so
account    required     pam_unix.so
password   required     pam_unix.so
session    required     pam_unix.so
session    required     pam_loginuid.so
session    required     pam_systemd.so
</pre>

        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">RELATED TO pam_systemd&hellip;</h2>
        <div class="sectioncontent">
<p><a href="../man1/systemd.1.html"><strong>systemd</strong>(1)</a>, <a href="../man8/systemd-logind.service.8.html"><strong>systemd-logind.service</strong>(8)</a>, <a href="../man5/logind.conf.5.html"><strong>logind.conf</strong>(5)</a>, <a href="../man1/loginctl.1.html"><strong>loginctl</strong>(1)</a>, <a href="../man5/pam.conf.5.html"><strong>pam.conf</strong>(5)</a>, <a href="../man5/pam.d.5.html"><strong>pam.d</strong>(5)</a>, <strong>pam</strong>(8), <a href="../man8/pam_loginuid.8.html"><strong>pam_loginuid</strong>(8)</a>, <a href="../man5/systemd.scope.5.html"><strong>systemd.scope</strong>(5)</a>, <a href="../man5/systemd.slice.5.html"><strong>systemd.slice</strong>(5)</a>, <strong>systemd.service</strong>(5)</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">NOTES</h2>
        <div class="sectioncontent">

<dl class='dl-vertical'>
  <dt>
     1.
  </dt>
  <dd>
    <p>Desktop Entry Specification</p><p>http://standards.freedesktop.org/desktop-entry-spec/latest/</p>
  </dd>

</dl>

        </div>
      </section>
<nav>
  <ul class="pager">
   <li class="previous"><a href="pam_succeed_if.8.html"><span aria-hidden="true">&larr;</span> pam_succeed_if.8: Test account characteristics</a></li>
   <li class="next"><a href="pam_tally.8.html">pam_tally.8: The login counter (tallying) module <span aria-hidden="true">&rarr;</span></a></li>
  </ul>
</nav>

  </div>
  <!-- jQuery (necessary for Bootstrap's JavaScript plugins) -->
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.2/jquery.min.js"></script>
  <!-- Include all compiled plugins (below), or include individual files as needed -->
  <script src="/js/bootstrap.min.js"></script>
  <script>
    (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
      (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
      m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
    })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

    ga('create', 'UA-60781387-1', 'auto');
    ga('send', 'pageview');

  </script>
</body>
</html>
