<!DOCTYPE html>
<html lang="en">
<head>
  <link href="https://fonts.googleapis.com/css?family=Fira+Mono:400,700&effect=destruction%7Cshadow-multiple" rel="stylesheet" type="text/css">
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>scsiformat: Low level format an scsi disk device</title>
  <link href="/css/bootstrap.min.css" rel="stylesheet">
  <link href="/css/manpage.css" rel="stylesheet">
  <link rel="apple-touch-icon" sizes="57x57" href="/icons/apple-icon-57x57.png">
  <link rel="apple-touch-icon" sizes="60x60" href="/icons/apple-icon-60x60.png">
  <link rel="apple-touch-icon" sizes="72x72" href="/icons/apple-icon-72x72.png">
  <link rel="apple-touch-icon" sizes="76x76" href="/icons/apple-icon-76x76.png">
  <link rel="apple-touch-icon" sizes="114x114" href="/icons/apple-icon-114x114.png">
  <link rel="apple-touch-icon" sizes="120x120" href="/icons/apple-icon-120x120.png">
  <link rel="apple-touch-icon" sizes="144x144" href="/icons/apple-icon-144x144.png">
  <link rel="apple-touch-icon" sizes="152x152" href="/icons/apple-icon-152x152.png">
  <link rel="apple-touch-icon" sizes="180x180" href="/icons/apple-icon-180x180.png">
  <link rel="icon" type="image/png" sizes="192x192" href="/icons/android-icon-192x192.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/icons/favicon-32x32.png">
  <link rel="icon" type="image/png" sizes="96x96" href="/icons/favicon-96x96.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/icons/favicon-16x16.png">
  <link rel="manifest" href="/icons/manifest.json">
  <meta name="msapplication-TileColor" content="#ffffff">
  <meta name="msapplication-TileImage" content="/icons/ms-icon-144x144.png">
  <meta name="theme-color" content="#ffffff">
  <meta name="description" content="Low level format an scsi disk device">
  <meta name="twitter:card" content="summary_large_image">
  <meta name="twitter:site" content="@CartaTech">
  <meta name="twitter:creator" content="@CartaTech">
  <meta name="twitter:title" content="scsiformat (8) manual">
  <meta name="twitter:description" content="Low level format an scsi disk device">
  <meta name="twitter:image" content="https://www.carta.tech/images/scsitools-scsiformat-8.png">
  <meta property="og:url" content="https://www.carta.tech/man-pages/man8/scsiformat.8.html" />
  <meta property="og:type" content="website" />
  <meta property="og:title" content="scsiformat (8) manual" />
  <meta property="og:description" content="Low level format an scsi disk device" />
  <meta property="fb:app_id" content="1241677679199500" />
  <meta property="og:image" content="https://www.carta.tech/images/scsitools-scsiformat-8.png" />
  <meta property="og:image:width" content="600" />
  <meta property="og:image:height" content="315" />
</head>
<body>
  <div class="container final">
          <div class="page-header">
        <h1 class="font-effect-destruction">scsiformat<small> (8)</small></h1>
        <p class="lead">Low level format an scsi disk device</p>
      </div>

    <ol class="breadcrumb" itemscope itemtype="http://schema.org/BreadcrumbList">
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/">
      <span itemprop="name">Carta.tech</span>
    </a>
    <meta itemprop="position" content="1" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/">
      <span itemprop="name">Man Pages</span>
    </a>
    <meta itemprop="position" content="2" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/man8/">
      <span itemprop="name">System administration commands</span>
    </a>
    <meta itemprop="position" content="3" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/man8/scsiformat.8.html">
      <span itemprop="name">scsiformat: Low level format an scsi disk device</span>
    </a>
    <meta itemprop="position" content="4" />
  </li>
</ol>
<ol class="breadcrumb" itemscope itemtype="http://schema.org/BreadcrumbList">
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/">
      <span itemprop="name">Carta.tech</span>
    </a>
    <meta itemprop="position" content="1" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/packages/">
      <span itemprop="name">Packages</span>
    </a>
    <meta itemprop="position" content="2" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/packages/scsitools/">
      <span itemprop="name">scsitools</span>
    </a>
    <meta itemprop="position" content="3" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/man8/scsiformat.8.html">
      <span itemprop="name">scsiformat: Low level format an scsi disk device</span>
    </a>
    <meta itemprop="position" content="4" />
  </li>
</ol>
    
      <section>
        <h2 class="font-effect-shadow-multiple">SYNOPSIS</h2>
        <div class="sectioncontent">
<p><strong>scsiformat [-</strong><em>options...</em><strong>] </strong><em>device</em></p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">DESCRIPTION</h2>
        <div class="sectioncontent">
<p>Low level formats the SCSI device identified by the scsi disk or generic scsi device node <em>device</em>. You must be root to perform this operation. <strong>scsiformat</strong> will ask a simple question to get your confirmation and check if partitions on <em>device</em> are still mounted. Possible swap spaces on <em>device</em> are <a href="../man8/swapoff.8.html"><strong>swapoff</strong>(8)</a>'ed prior to formatting.</p><p>During formatting a file like <em>/tmp/scsiformat.xx:xx:xx:xx:xxxxxxxx</em> is used to hold some status information.</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">OPTIONS</h2>
        <div class="sectioncontent">
<p><strong>scsiformat</strong> supports the following option switches:</p><h3>a) Controlling a/synchronous operation</h3>

<dl class='dl-vertical'>
  <dt>
    <p><strong>-b </strong><em>n</em></p>
  </dt>
  <dd>
    <p>block during the format operation. This makes any display of real progress indicators impossible. However, cheesy SCSI devices	will need it. Scsiformat assumes that the operation will need about <em>n</em> seconds and provides some progress indication according to that. <strong>-b0</strong> does not print any process indication, just sits and blocks until formatting completes.</p><ul>
<li><p>Read the <strong>BUGS</strong> section below!</p></li>
</ul>
  </dd>
  <dt>
    <p><strong>-T</strong></p>
  </dt>
  <dd>
    <p>just check for a running format command and output statistics. A file <em>/tmp/scsiformat.*</em> is used to hold the starting time of the format operation. If formatting completed, this file is removed by the formatting <strong>scsiformat</strong> call (which forks of a child just for this purpose). The exit state of <strong>scsiformat</strong> is true as long as the format operation is still in progress. A left over <em>/tmp/scsiformat.*</em> file will make scsiformat think a program still runs. It will not accept and remove files older than 48h nevertheless.</p>
  </dd>
  <dt>
    <p><strong>-t </strong><em>n</em></p>
  </dt>
  <dd>
    <p>check progress every <em>n</em> seconds (default is 5). <strong>-t0</strong> makes scsiformat return without displaying progress.</p>
  </dd>

</dl>

<h3>b) Interleave factor</h3>

<dl class='dl-vertical'>
  <dt>
    <p><strong>-i </strong><em>n</em></p>
  </dt>
  <dd>
    <p>sets the sector interleave factor to be used. Usually you should stick with the default <strong>-i0</strong> which selects a vendor specific default.</p>
  </dd>

</dl>

<h3>c) Initialisation pattern</h3>
<p>By default the target will initialise the formatted sectors with a vendor specific test pattern.</p>
<dl class='dl-vertical'>
  <dt>
    <p><strong>-I</strong><em> sequence of bytes in hex</em></p>
  </dt>
  <dd>
    <p>the bytes given in hex characters are repeated and used to init all blocks on the device.</p>
  </dd>
  <dt>
    <p><strong>-L</strong></p>
  </dt>
  <dd>
    <p>The first four bytes of each logical block are set to the number of the logical block.</p>
  </dd>
  <dt>
    <p><strong>-P</strong></p>
  </dt>
  <dd>
    <p>The first four bytes of each physical block are set to the number of logical block, it will occur in.</p>
  </dd>

</dl>

<h3>c) Defect management</h3>

<dl class='dl-vertical'>
  <dt>
    <p><strong>-e</strong></p>
  </dt>
  <dd>
    <p>Erase the grown defect list prior to formatting. You can issue new defects for the grown defect list nevertheless and media certification may add defects too.</p>
  </dd>
  <dt>
    <p><strong>-p</strong></p>
  </dt>
  <dd>
    <p>Ignore the vendor's primary defect list. This is not recommended as the vendor probably had a reason to specify these primary defects.</p>
  </dd>
  <dt>
    <p><strong>-c</strong></p>
  </dt>
  <dd>
    <p>Do not perform a media surface certification. This may speed up formatting but is also not recommended.</p>
  </dd>
  <dt>
    <p><strong>-s</strong></p>
  </dt>
  <dd>
    <p>Stop when unable to access primary or grown defects due to some internal error in the target device. When not given, formatting continues but returns a recovered error upon completion. (Which is probably not well supported by <strong>scsiformat</strong>).</p>
  </dd>
  <dt>
    <p><strong>-S</strong></p>
  </dt>
  <dd>
    <p>Erase MODE SELECT settings stored in NVRAM. These are those you can set with <a href="../man8/scsiinfo.8.html"><strong>scsiinfo</strong>(8)</a> or <a href="../man8/scsi-config.8.html"><strong>scsi-config</strong>(8)</a>.</p>
  </dd>
  <dt>
    <p><strong>-d </strong><em>int</em><strong>, ...</strong></p>
  </dt>
  <dd>
    <p>A comma separated list of logical blocks to mark as defect. Using this defect format is discouraged as there no clear concept of what a logical block is here because the format command may move around logical blocks and change the number of available blocks.</p><p>The number can be preceded by <strong>0</strong> or <strong>0x</strong> for octal or hexadecimal notation.</p>
  </dd>
  <dt>
    <p><strong>-D </strong><em>int</em><strong>:</strong><em>int</em><strong>:</strong><em>int</em><strong>, ...</strong></p>
  </dt>
  <dd>
    <p>A comma separated list of expressions of the form <strong>C:H:S</strong> specifying a defect at physical location Cylinder:Head:Sector. A Sector <strong>S</strong> of <strong>-1</strong> marks the whole track as bad.</p><p>The number can be preceded by <strong>0</strong> or <strong>0x</strong> for octal or hexadecimal notation.</p>
  </dd>
  <dt>
    <p><strong>-B </strong><em>int</em><strong>:</strong><em>int</em><strong>:</strong><em>int</em><strong>, ...</strong></p>
  </dt>
  <dd>
    <p>A comma separated list of expressions of the from <strong>C:H:B</strong> specifying defects at Cylinder:Head:Bytes from Index. Again, a Bytes from Index value <strong>B</strong> of <strong>-1</strong> marks the whole track as bad.</p><p>The number can be preceded by <strong>0</strong> or <strong>0x</strong> for octal or hexadecimal notation.</p>
  </dd>

</dl>
<p>You can specify more than one of the <strong>-d</strong>, <strong>-D</strong>, <strong>-B</strong> options but you must stick to one defect format!</p>
<h3>d) Simple partitioning</h3>
<p>For your convenience, <strong>scsiformat</strong> allow to preset the partition table in a simple way which often suffices for removable medias. This is not intended as a replacement for <a href="../man8/fdisk.8.html"><strong>fdisk</strong>(8)</a> though.</p>
<dl class='dl-vertical'>
  <dt>
    <p><strong>-f </strong><em>arg</em></p>
  </dt>
  <dd>
    <p>perform simple partitioning. <strong>-fdos</strong> sets up begin and start of the partition on cylinder boundaries. <strong>-ftight</strong> does use as much of the disk as possible (but may confuse OS's other than Linux).</p><p>If you do not specify <strong>-f</strong> at all, <strong>scsiformat</strong> will not initialise the partition table. As it has to tell the kernel that the disk was reformatted and the kernel will try to to read the partition table, you are like to get some kernel warnings then.</p>
  </dd>
  <dt>
    <p><strong>-G </strong><em>heads</em><strong>x</strong><em>sectors</em></p>
  </dt>
  <dd>
    <p>set the disk geometry (Heads x Sectors) as DOS will see it for use in the partition table. If you don't specify it, scsiformat will ask the kernel what it thinks DOS will get from the adapters BIOS. This call might fail or return bogus data though. A wrong setting will not affect linux, but other OS's and esp. DOS and the BIOS (for booting).</p>
  </dd>
  <dt>
    <p><strong>-y </strong><em>type</em></p>
  </dt>
  <dd>
    <p>set the type for the partition to set. <em>type</em> is a two digit hex number. See <a href="../man8/fdisk.8.html"><strong>fdisk</strong>(8)</a>,<strong>command</strong> <strong>t for a list. Defaults to</strong> <strong>83</strong> (Linux native).</p>
  </dd>
  <dt>
    <p><strong>-M </strong><em>size</em></p>
  </dt>
  <dd>
    <p>Create a primary partition number 1 of maximal size <em>size</em>MB. When <em>size</em> is <strong>0</strong>, no partition is created, and thus the partition table is simply initialised to be valid (but empty). If the size exceeds the disk capacity, a partition as large as possible is made. Defaults to <strong>99999</strong>.</p>
  </dd>

</dl>

<h3>e) Miscellaneous</h3>

<dl class='dl-vertical'>
  <dt>
    <p><strong>-H</strong></p>
  </dt>
  <dd>
    <p>print some command line help to stdout.</p>
  </dd>
  <dt>
    <p><strong>-v</strong></p>
  </dt>
  <dd>
    <p>print version information.</p>
  </dd>
  <dt>
    <p><strong>-F </strong><em>arg</em></p>
  </dt>
  <dd>
    <p>forced operation, do not ask prior to format. <em>arg</em> must be <strong>'Ene&nbsp;Mene&nbsp;Meck,&nbsp;und&nbsp;Du&nbsp;bist&nbsp;weg!'</strong> with proper spaces and capitalisation. (this is a German child rhyme kissing someone goodbye...)</p>
  </dd>
  <dt>
    <p><strong>-V</strong></p>
  </dt>
  <dd>
    <p>print some debugging information.</p>
  </dd>
  <dt>
    <p><strong>-X</strong></p>
  </dt>
  <dd>
    <p>all output is printed in numerics, useful for GUI interfaces like <a href="../man8/tk_scsiformat.8.html"><strong>tk_scsiformat</strong>(8)</a>. Also makes all operations non blocking. (By forking of a child process for those scsi operations which would block).</p>
  </dd>
  <dt>
    <p><strong>-o</strong></p>
  </dt>
  <dd>
    <p>The settings of the flags <strong>-c</strong>, <strong>-p</strong>, <strong>-s</strong>, <strong>-S</strong>, <strong>-I</strong>, <strong>-L</strong>, <strong>-P</strong> are obeyed.  If you specify one of these, <strong>-o</strong> is silently added. Without <strong>-o</strong> or one of these flags some factory default is used. Specifying <strong>-o</strong> explicitly will allow you to not use any of these options which might not be the default chosen by the target device otherwise.</p>
  </dd>

</dl>


        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">RETURN CODES</h2>
        <div class="sectioncontent">
<p>Apart from the codes returned by the <strong>-T</strong> flag, <strong>scsiformat</strong> will generally return 1 for system errors, 2 for user errors, and 0 for successful operation.</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">BUGS</h2>
        <div class="sectioncontent">
<p>Old status files in <em>/tmp</em> will confuse the <strong>-T</strong> option. However, they are removed after 48 hours.</p><p>I was unable to get hold of a disk supporting querying the progress status (and which I could stand to lose all data on). Therefore I commented out the support for this from the source code using a <strong>BLOCKING_ONLY</strong>#define. You are welcome to try and make this work.</p><p>Restrictions of the <strong>SCSI_IOCTL_SEND_COMMAND</strong> <a href="../man2/ioctl.2.html"><strong>ioctl</strong>(2)</a> call for the <strong>sd</strong>(4) device make it impossible to issue a <strong>FORMAT_UNIT</strong> command with more than 4096 bytes of arguments. This could be avoided by using the proper generic scsi device <em>/dev/sg*</em> instead, at least where the kernel is compiled to support it. Most of the time this is not needed though and thus I'm myself to lazy to do it.</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">FILES</h2>
        <div class="sectioncontent">
<p><em>/tmp/scsiformat.xx:xx:xx:xx:xxxxxxxx</em></p><p><em>/dev/sd*</em></p><p><em>/dev/sg*</em></p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">RELATED TO scsiformat&hellip;</h2>
        <div class="sectioncontent">
<p><a href="../man8/tk_scsiformat.8.html"><strong>tk_scsiformat</strong>(8)</a>, <a href="../man8/scsiinfo.8.html"><strong>scsiinfo</strong>(8)</a>, <a href="../man8/scsi-config.8.html"><strong>scsi-config</strong>(8)</a>, <a href="../man8/fdisk.8.html"><strong>fdisk</strong>(8)</a>, <strong>sd</strong>(4).</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">AUTHOR</h2>
        <div class="sectioncontent">
<p>Michael Weller &lt;eowmob@exp-math.uni-essen.de&gt;</p>
        </div>
      </section>
<nav>
  <ul class="pager">
   <li class="previous"><a href="scsidev.8.html"><span aria-hidden="true">&larr;</span> scsidev.8: Populate /dev/scsi with device names that are persistent against scsi configuration changes.</a></li>
   <li class="next"><a href="scsiinfo.8.html">scsiinfo.8: Query information from a scsi device <span aria-hidden="true">&rarr;</span></a></li>
  </ul>
</nav>

  </div>
  <!-- jQuery (necessary for Bootstrap's JavaScript plugins) -->
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.2/jquery.min.js"></script>
  <!-- Include all compiled plugins (below), or include individual files as needed -->
  <script src="/js/bootstrap.min.js"></script>
  <script>
    (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
      (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
      m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
    })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

    ga('create', 'UA-60781387-1', 'auto');
    ga('send', 'pageview');

  </script>
</body>
</html>
