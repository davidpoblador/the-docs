<!DOCTYPE html>
<html lang="en">
<head>
  <link href="https://fonts.googleapis.com/css?family=Fira+Mono:400,700&effect=destruction%7Cshadow-multiple" rel="stylesheet" type="text/css">
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>userdbpw: Create an encrypted password</title>
  <link href="/css/bootstrap.min.css" rel="stylesheet">
  <link href="/css/manpage.css" rel="stylesheet">
  <link rel="apple-touch-icon" sizes="57x57" href="/icons/apple-icon-57x57.png">
  <link rel="apple-touch-icon" sizes="60x60" href="/icons/apple-icon-60x60.png">
  <link rel="apple-touch-icon" sizes="72x72" href="/icons/apple-icon-72x72.png">
  <link rel="apple-touch-icon" sizes="76x76" href="/icons/apple-icon-76x76.png">
  <link rel="apple-touch-icon" sizes="114x114" href="/icons/apple-icon-114x114.png">
  <link rel="apple-touch-icon" sizes="120x120" href="/icons/apple-icon-120x120.png">
  <link rel="apple-touch-icon" sizes="144x144" href="/icons/apple-icon-144x144.png">
  <link rel="apple-touch-icon" sizes="152x152" href="/icons/apple-icon-152x152.png">
  <link rel="apple-touch-icon" sizes="180x180" href="/icons/apple-icon-180x180.png">
  <link rel="icon" type="image/png" sizes="192x192" href="/icons/android-icon-192x192.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/icons/favicon-32x32.png">
  <link rel="icon" type="image/png" sizes="96x96" href="/icons/favicon-96x96.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/icons/favicon-16x16.png">
  <link rel="manifest" href="/icons/manifest.json">
  <meta name="msapplication-TileColor" content="#ffffff">
  <meta name="msapplication-TileImage" content="/icons/ms-icon-144x144.png">
  <meta name="theme-color" content="#ffffff">
  <meta name="description" content="Create an encrypted password">
  <meta name="twitter:card" content="summary_large_image">
  <meta name="twitter:site" content="@CartaTech">
  <meta name="twitter:creator" content="@CartaTech">
  <meta name="twitter:title" content="userdbpw (8) manual">
  <meta name="twitter:description" content="Create an encrypted password">
  <meta name="twitter:image" content="https://www.carta.tech/images/courier-authlib-userdb-userdbpw-8.png">
  <meta property="og:url" content="https://www.carta.tech/man-pages/man8/userdbpw.8.html" />
  <meta property="og:type" content="website" />
  <meta property="og:title" content="userdbpw (8) manual" />
  <meta property="og:description" content="Create an encrypted password" />
  <meta property="fb:app_id" content="1241677679199500" />
  <meta property="og:image" content="https://www.carta.tech/images/courier-authlib-userdb-userdbpw-8.png" />
  <meta property="og:image:width" content="600" />
  <meta property="og:image:height" content="315" />
</head>
<body>
  <div class="container final">
          <div class="page-header">
        <h1 class="font-effect-destruction">userdbpw<small> (8)</small></h1>
        <p class="lead">Create an encrypted password</p>
      </div>

    <ol class="breadcrumb" itemscope itemtype="http://schema.org/BreadcrumbList">
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/">
      <span itemprop="name">Carta.tech</span>
    </a>
    <meta itemprop="position" content="1" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/">
      <span itemprop="name">Man Pages</span>
    </a>
    <meta itemprop="position" content="2" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/man8/">
      <span itemprop="name">System administration commands</span>
    </a>
    <meta itemprop="position" content="3" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/man8/userdbpw.8.html">
      <span itemprop="name">userdbpw: Create an encrypted password</span>
    </a>
    <meta itemprop="position" content="4" />
  </li>
</ol>
<ol class="breadcrumb" itemscope itemtype="http://schema.org/BreadcrumbList">
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/">
      <span itemprop="name">Carta.tech</span>
    </a>
    <meta itemprop="position" content="1" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/packages/">
      <span itemprop="name">Packages</span>
    </a>
    <meta itemprop="position" content="2" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/packages/courier-authlib-userdb/">
      <span itemprop="name">courier-authlib-userdb</span>
    </a>
    <meta itemprop="position" content="3" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/man8/userdbpw.8.html">
      <span itemprop="name">userdbpw: Create an encrypted password</span>
    </a>
    <meta itemprop="position" content="4" />
  </li>
</ol>
    
      <section>
        <h2 class="font-effect-shadow-multiple">SYNOPSIS</h2>
        <div class="sectioncontent">
<p><strong>userdbpw</strong> [[-md5] | [-hmac-md5] | [-hmac-sha1]] |<strong>userdb</strong> {<em>name</em>} set {<em>field</em>}</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">DESCRIPTION</h2>
        <div class="sectioncontent">
<p><strong>userdbpw</strong> enables secure entry of encrypted passwords into /etc/courier/userdb.</p><p><strong>userdbpw</strong> reads a single line of text on standard input, encrypts it, and prints the encrypted result to standard output.</p><p>If standard input is attached to a terminal device, <strong>userdbpw</strong> explicitly issues a "Password: " prompt on standard error, and turns off echo while the password is entered.</p><p>The <strong>-md5</strong> option is available on systems that use MD5-hashed passwords (such as systems that use the current version of the PAM library for authenticating, with MD5 passwords enabled). This option creates an MD5 password hash, instead of using the traditional <strong>crypt()</strong> function.</p><p><strong>-hmac-md5</strong> and <strong>-hmac-sha1</strong> options are available only if the userdb library is installed by an application that uses a challenge/response authentication mechanism. <strong>-hmac-md5</strong> creates an intermediate HMAC context using the MD5 hash function. <strong>-hmac-sha1</strong> uses the SHA1 hash function instead. Whether either HMAC function is actually available depends on the actual application that installs the <strong>userdb</strong> library.</p><p>Note that even though the result of HMAC hashing looks like an encrypted password, it&apos;s really not. HMAC-based challenge/response authentication mechanisms require the cleartext password to be available as cleartext. Computing an intermediate HMAC context does scramble the cleartext password, however if its compromised, it WILL be possible for an attacker to succesfully authenticate. Therefore, applications that use challenge/response authentication will store intermediate HMAC contexts in the "pw" fields in the userdb database, which will be compiled into the userdbshadow.dat database, which has group and world permissions turned off. The userdb library also requires that the cleartext userdb source for the userdb.dat and userdbshadow.dat databases is also stored with the group and world permissions turned off.</p><p><strong>userdbpw</strong> is usually used together in a pipe with <strong>userdb</strong>, which reads from standard input. For example:</p>
<pre>
<strong>userdbpw -md5 | userdb users/john set systempw</strong>
</pre>
<p>or:</p>
<pre>
<strong>userdbpw -hmac-md5 | userdb users/john set hmac-md5pw</strong>
</pre>
<p>These commands set the <strong>systempw</strong> field in the record for the user <strong>john</strong> in /etc/courier/userdb/users file, and the <strong>hmac-md5pw</strong> field. Don&apos;t forget to run <strong>makeuserdb</strong> for the change to take effect.</p><p>The following command does the same thing:</p>
<pre>
<strong>userdb users/john set systempw=</strong><strong></strong><strong>SECRETPASSWORD</strong>
</pre>
<p>However, this command passes the secret password as an argument to the <strong>userdb</strong> command, which can be viewed by anyone who happens to run <strong>ps</strong>(1) at the same time. Using <strong>userdbpw</strong> allows the secret password to be specified in a way that cannot be easily viewed by <strong>ps</strong>(1).</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">RELATED TO userdbpw&hellip;</h2>
        <div class="sectioncontent">
<p>\m[blue]<strong></strong><a href="../man8/userdb.8.html"><strong>userdb</strong>(8)</a>\m[]\s-2\u[1]\d\s+2, \m[blue]<strong></strong><a href="../man8/makeuserdb.8.html"><strong>makeuserdb</strong>(8)</a>\m[]\s-2\u[2]\d\s+2</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">NOTES</h2>
        <div class="sectioncontent">

<dl class='dl-vertical'>
  <dt>
     1.
  </dt>
  <dd>
    <p><a href="../man8/userdb.8.html"><strong>userdb</strong>(8)</a></p><p>[set $man.base.url.for.relative.links]/userdb.html</p>
  </dd>
  <dt>
     2.
  </dt>
  <dd>
    <p><a href="../man8/makeuserdb.8.html"><strong>makeuserdb</strong>(8)</a></p><p>[set $man.base.url.for.relative.links]/makeuserdb.html</p>
  </dd>

</dl>

        </div>
      </section>
<nav>
  <ul class="pager">
   <li class="previous"><a href="userdb.8.html"><span aria-hidden="true">&larr;</span> userdb.8: Manipulate /etc/courier/userdb</a></li>
   <li class="next"><a href="userdel.8.html">userdel.8: Delete a user account and related files <span aria-hidden="true">&rarr;</span></a></li>
  </ul>
</nav>

  </div>
  <!-- jQuery (necessary for Bootstrap's JavaScript plugins) -->
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.2/jquery.min.js"></script>
  <!-- Include all compiled plugins (below), or include individual files as needed -->
  <script src="/js/bootstrap.min.js"></script>
  <script>
    (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
      (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
      m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
    })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

    ga('create', 'UA-60781387-1', 'auto');
    ga('send', 'pageview');

  </script>
</body>
</html>
