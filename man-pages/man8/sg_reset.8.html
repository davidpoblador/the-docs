<!DOCTYPE html>
<html lang="en">
<head>
  <link href="https://fonts.googleapis.com/css?family=Fira+Mono:400,700&effect=destruction%7Cshadow-multiple" rel="stylesheet" type="text/css">
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>sg_reset: Sends scsi device, target, bus or host reset; or checks reset state</title>
  <link href="/css/bootstrap.min.css" rel="stylesheet">
  <link href="/css/manpage.css" rel="stylesheet">
  <link rel="apple-touch-icon" sizes="57x57" href="/icons/apple-icon-57x57.png">
  <link rel="apple-touch-icon" sizes="60x60" href="/icons/apple-icon-60x60.png">
  <link rel="apple-touch-icon" sizes="72x72" href="/icons/apple-icon-72x72.png">
  <link rel="apple-touch-icon" sizes="76x76" href="/icons/apple-icon-76x76.png">
  <link rel="apple-touch-icon" sizes="114x114" href="/icons/apple-icon-114x114.png">
  <link rel="apple-touch-icon" sizes="120x120" href="/icons/apple-icon-120x120.png">
  <link rel="apple-touch-icon" sizes="144x144" href="/icons/apple-icon-144x144.png">
  <link rel="apple-touch-icon" sizes="152x152" href="/icons/apple-icon-152x152.png">
  <link rel="apple-touch-icon" sizes="180x180" href="/icons/apple-icon-180x180.png">
  <link rel="icon" type="image/png" sizes="192x192" href="/icons/android-icon-192x192.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/icons/favicon-32x32.png">
  <link rel="icon" type="image/png" sizes="96x96" href="/icons/favicon-96x96.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/icons/favicon-16x16.png">
  <link rel="manifest" href="/icons/manifest.json">
  <meta name="msapplication-TileColor" content="#ffffff">
  <meta name="msapplication-TileImage" content="/icons/ms-icon-144x144.png">
  <meta name="theme-color" content="#ffffff">
  <meta name="description" content="Sends scsi device, target, bus or host reset; or checks reset state">
  <meta name="twitter:card" content="summary_large_image">
  <meta name="twitter:site" content="@CartaTech">
  <meta name="twitter:creator" content="@CartaTech">
  <meta name="twitter:title" content="sg_reset (8) manual">
  <meta name="twitter:description" content="Sends scsi device, target, bus or host reset; or checks reset state">
  <meta name="twitter:image" content="https://www.carta.tech/images/sg3-utils-sg_reset-8.png">
  <meta property="og:url" content="https://www.carta.tech/man-pages/man8/sg_reset.8.html" />
  <meta property="og:type" content="website" />
  <meta property="og:title" content="sg_reset (8) manual" />
  <meta property="og:description" content="Sends scsi device, target, bus or host reset; or checks reset state" />
  <meta property="fb:app_id" content="1241677679199500" />
  <meta property="og:image" content="https://www.carta.tech/images/sg3-utils-sg_reset-8.png" />
  <meta property="og:image:width" content="600" />
  <meta property="og:image:height" content="315" />
</head>
<body>
  <div class="container final">
          <div class="page-header">
        <h1 class="font-effect-destruction">sg_reset<small> (8)</small></h1>
        <p class="lead">Sends scsi device, target, bus or host reset; or checks reset state</p>
      </div>

    <ol class="breadcrumb" itemscope itemtype="http://schema.org/BreadcrumbList">
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/">
      <span itemprop="name">Carta.tech</span>
    </a>
    <meta itemprop="position" content="1" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/">
      <span itemprop="name">Man Pages</span>
    </a>
    <meta itemprop="position" content="2" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/man8/">
      <span itemprop="name">System administration commands</span>
    </a>
    <meta itemprop="position" content="3" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/man8/sg_reset.8.html">
      <span itemprop="name">sg_reset: Sends scsi device, target, bus or host reset; or checks reset state</span>
    </a>
    <meta itemprop="position" content="4" />
  </li>
</ol>
<ol class="breadcrumb" itemscope itemtype="http://schema.org/BreadcrumbList">
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/">
      <span itemprop="name">Carta.tech</span>
    </a>
    <meta itemprop="position" content="1" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/packages/">
      <span itemprop="name">Packages</span>
    </a>
    <meta itemprop="position" content="2" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/packages/sg3-utils/">
      <span itemprop="name">sg3-utils</span>
    </a>
    <meta itemprop="position" content="3" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/man8/sg_reset.8.html">
      <span itemprop="name">sg_reset: Sends scsi device, target, bus or host reset; or checks reset state</span>
    </a>
    <meta itemprop="position" content="4" />
  </li>
</ol>
    
      <section>
        <h2 class="font-effect-shadow-multiple">SYNOPSIS</h2>
        <div class="sectioncontent">
<p><strong>sg_reset</strong> [<em>--bus</em>] [<em>--device</em>] [<em>--help</em>] [<em>--host</em>] [<em>--no-esc</em>] [<em>--target</em>] [<em>--verbose</em>] [<em>--version</em>] <em>DEVICE</em></p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">DESCRIPTION</h2>
        <div class="sectioncontent">
<p>The sg_reset utility with no options (just a <em>DEVICE</em>) reports on the reset state (e.g. if a reset is underway) of the <em>DEVICE</em>. When given a <em>--device</em>, <em>--target</em>, <em>--bus</em> or <em>--host</em> option it requests a device, target, bus or host reset respectively.</p><p>A device reset is applied to the Logical Unit (LU) corresponding to <em>DEVICE</em>. It is most likely implemented by a Low level Driver (LLD) in Linux as a LOGICAL UNIT RESET task management function.</p><p>The ability to reset a SCSI target was added in Linux kernel 2.6.27 . A LLD may send Low level Drivers (LLDs) the I_T NEXUS RESET task management function. Alternatively it may use a transport mechanism to do the same thing (e.g. a hard reset on the link containing a SAS target).</p><p>In the Linux kernel 2.6 and 3 series this utility can be called on sd, sr (cd/dvd), st or sg device nodes; if the user has appropriate permissions.</p><p>Users of this utility can check whether a reset recovery is already underway before trying to send a new reset with this utility. Calling this utility with no options, just the <em>DEVICE</em>, will do such a check.</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">OPTIONS</h2>
        <div class="sectioncontent">

<dl class='dl-vertical'>
  <dt>
    <p><strong>-b</strong>, <strong>--bus</strong></p>
  </dt>
  <dd>
    <p>attempt a SCSI bus reset. A bus reset is a SCSI Parallel Interface (SPI) concept not found in modern transports. A recent LLD may implement it as a series of resets on targets that might be considered as siblings to the target on the <em>DEVICE</em> path.</p>
  </dd>
  <dt>
    <p><strong>-d</strong>, <strong>--device</strong></p>
  </dt>
  <dd>
    <p>attempt a SCSI device reset. This would typically involve sending a LOGICAL UNIT RESET task management function to <em>DEVICE</em>.</p>
  </dd>
  <dt>
    <p><strong>-h</strong>, <strong>--help</strong></p>
  </dt>
  <dd>
    <p>print the usage message then exit.</p>
  </dd>
  <dt>
    <p><strong>-H</strong>, <strong>--host</strong></p>
  </dt>
  <dd>
    <p>attempt a host reset. The "host" in this context is often called a Host Bus Adapter (HBA) and contains one or more SCSI initiators.</p>
  </dd>
  <dt>
    <p><strong>-N</strong>, <strong>--no-esc</strong></p>
  </dt>
  <dd>
    <p>without this option, if a device reset (<em>--device</em>) fails then it will escalate to a target reset. And if a target reset (<em>--target</em>) fails then it will escalate to a bus reset. And if a bus reset (<em>--bus</em>) fails then it will escalate to a host reset. With this option only the requested reset is attempted. An alternate option name of <em>--no-escalate</em> is also accepted.</p>
  </dd>
  <dt>
    <p><strong>-t</strong>, <strong>--target</strong></p>
  </dt>
  <dd>
    <p>attempt a SCSI target reset. A SCSI target contains one or more LUs. This would typically involve sending a I_T NEXUS RESET task management function to <em>DEVICE</em> There may be a transport action that is equivalent (e.g. in SAS a hard reset on the link that contains the target).</p>
  </dd>
  <dt>
    <p><strong>-v</strong>, <strong>--verbose</strong></p>
  </dt>
  <dd>
    <p>increase the degree of verbosity (debug messages).</p>
  </dd>
  <dt>
    <p><strong>-V</strong>, <strong>--version</strong></p>
  </dt>
  <dd>
    <p>prints the version string then exits.</p>
  </dd>

</dl>

        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">NOTES</h2>
        <div class="sectioncontent">
<p>The error recovery code within the Linux kernel (SCSI mid-level) when faced with a SCSI command timing out and no response from the device (LU) does the following. First it tries a device reset and if that is not successful tries a target reset. If that is not successful it tries a bus reset. If that is not successful it tries a host reset. The "device,target,bus,host" order is the reset escalation that the <em>--no-esc</em> option attempts to stop. In large storage configurations the escalation may be (very) undesirable.</p><p>This utility calls the SG_SCSI_RESET ioctl and as of lk 3.10.7 the <em>--no-esc</em> option is not supported. Patches to implement this functionality have not been accepted. If you want it, post your concern to linux-scsi@vger.kernel.org which is the linux-scsi list.</p><p>SAM-4 and 5 define a hard reset, a LOGICAL UNIT RESET and a I_T NEXUS RESET. A hard reset is defined to be a power on condition, a microcode change or a transport reset event. LOGICAL UNIT RESET and I_T NEXUS RESET can be requested via task management functions (and support for LOGICAL UNIT RESET is mandatory). In Linux the SCSI subsystem leaves it up to the LLDs as to exactly what type (if any) of reset is performed. The "bus reset" is SCSI Parallel Interface (SPI) concept that may not map well to recent SCSI transports so it may be a dummy operation. A "host reset" attempts to re-initialize the HBA that the request passes through en route to the <em>DEVICE</em>. Note that a "host reset" and a "bus reset" may cause collateral damage.</p><p>This utility does not allow individual SCSI commands to be aborted. SAM-4 defines ABORT TASK and ABORT TASK SET task management functions for that.</p><p>Prior to SAM-3 there was a TARGET RESET task management function. And in SAM-4 I_T NEXUS RESET appeared which seems closely related: the "I_T" stands for Initiator-Target.</p><p>Transports may have their own types of resets not supported by this utility. For example SAS has a link reset in which both ends of a physical link (e.g. between a SAS expander and a SAS tape drive) renegotiate their connection.</p><p>Prior to version 0.57 of this utility the command line had short options only (e.g. <em>-d</em> but not <em>--device</em>). Also <em>-h</em> invoked a host reset while in the current version <em>-h</em> is equivalent to <em>--help</em> and both <em>-H</em> and <em>--host</em> invoke a host reset. For backward compatibility define the environment variable SG3_UTILS_OLD_OPTS or SG_RESET_OLD_OPTS . In this case <em>-h</em> will invoke a host reset and the output will be verbose as it was previously (equivalent to using the <em>--verbose</em> option now). For example:</p>
<pre>
    SG_RESET_OLD_OPTS=1 sg_reset -h /dev/sg1
</pre>
<p>sg_reset: starting host reset</p><p>sg_reset: completed host reset</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">AUTHORS</h2>
        <div class="sectioncontent">
<p>Written by Douglas Gilbert.</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">COPYRIGHT</h2>
        <div class="sectioncontent">
<p>Copyright &copy; 1999-2013 Douglas Gilbert</p><p>This software is distributed under the GPL version 2. There is NO warranty; not even for MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.</p>
        </div>
      </section>
<nav>
  <ul class="pager">
   <li class="previous"><a href="sg_requests.8.html"><span aria-hidden="true">&larr;</span> sg_requests.8: Send one or more scsi request sense commands</a></li>
   <li class="next"><a href="sg_reset_wp.8.html">sg_reset_wp.8: Send scsi reset write pointer command <span aria-hidden="true">&rarr;</span></a></li>
  </ul>
</nav>

  </div>
  <!-- jQuery (necessary for Bootstrap's JavaScript plugins) -->
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.2/jquery.min.js"></script>
  <!-- Include all compiled plugins (below), or include individual files as needed -->
  <script src="/js/bootstrap.min.js"></script>
  <script>
    (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
      (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
      m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
    })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

    ga('create', 'UA-60781387-1', 'auto');
    ga('send', 'pageview');

  </script>
</body>
</html>
