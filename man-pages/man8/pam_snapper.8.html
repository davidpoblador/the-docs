<!DOCTYPE html>
<html lang="en">
<head>
  <link href="https://fonts.googleapis.com/css?family=Fira+Mono:400,700&effect=destruction%7Cshadow-multiple" rel="stylesheet" type="text/css">
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>pam_snapper: Pam module which creates filesystem snapshots via "snapper"</title>
  <link href="/css/bootstrap.min.css" rel="stylesheet">
  <link href="/css/manpage.css" rel="stylesheet">
  <link rel="apple-touch-icon" sizes="57x57" href="/icons/apple-icon-57x57.png">
  <link rel="apple-touch-icon" sizes="60x60" href="/icons/apple-icon-60x60.png">
  <link rel="apple-touch-icon" sizes="72x72" href="/icons/apple-icon-72x72.png">
  <link rel="apple-touch-icon" sizes="76x76" href="/icons/apple-icon-76x76.png">
  <link rel="apple-touch-icon" sizes="114x114" href="/icons/apple-icon-114x114.png">
  <link rel="apple-touch-icon" sizes="120x120" href="/icons/apple-icon-120x120.png">
  <link rel="apple-touch-icon" sizes="144x144" href="/icons/apple-icon-144x144.png">
  <link rel="apple-touch-icon" sizes="152x152" href="/icons/apple-icon-152x152.png">
  <link rel="apple-touch-icon" sizes="180x180" href="/icons/apple-icon-180x180.png">
  <link rel="icon" type="image/png" sizes="192x192" href="/icons/android-icon-192x192.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/icons/favicon-32x32.png">
  <link rel="icon" type="image/png" sizes="96x96" href="/icons/favicon-96x96.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/icons/favicon-16x16.png">
  <link rel="manifest" href="/icons/manifest.json">
  <meta name="msapplication-TileColor" content="#ffffff">
  <meta name="msapplication-TileImage" content="/icons/ms-icon-144x144.png">
  <meta name="theme-color" content="#ffffff">
  <meta name="description" content="Pam module which creates filesystem snapshots via "snapper"">
  <meta name="twitter:card" content="summary_large_image">
  <meta name="twitter:site" content="@CartaTech">
  <meta name="twitter:creator" content="@CartaTech">
  <meta name="twitter:title" content="pam_snapper (8) manual">
  <meta name="twitter:description" content="Pam module which creates filesystem snapshots via "snapper"">
  <meta name="twitter:image" content="https://www.carta.tech/images/snapper-pam_snapper-8.png">
  <meta property="og:url" content="https://www.carta.tech/man-pages/man8/pam_snapper.8.html" />
  <meta property="og:type" content="website" />
  <meta property="og:title" content="pam_snapper (8) manual" />
  <meta property="og:description" content="Pam module which creates filesystem snapshots via "snapper"" />
  <meta property="fb:app_id" content="1241677679199500" />
  <meta property="og:image" content="https://www.carta.tech/images/snapper-pam_snapper-8.png" />
  <meta property="og:image:width" content="600" />
  <meta property="og:image:height" content="315" />
</head>
<body>
  <div class="container final">
          <div class="page-header">
        <h1 class="font-effect-destruction">pam_snapper<small> (8)</small></h1>
        <p class="lead">Pam module which creates filesystem snapshots via "snapper"</p>
      </div>

    <ol class="breadcrumb" itemscope itemtype="http://schema.org/BreadcrumbList">
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/">
      <span itemprop="name">Carta.tech</span>
    </a>
    <meta itemprop="position" content="1" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/">
      <span itemprop="name">Man Pages</span>
    </a>
    <meta itemprop="position" content="2" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/man8/">
      <span itemprop="name">System administration commands</span>
    </a>
    <meta itemprop="position" content="3" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/man8/pam_snapper.8.html">
      <span itemprop="name">pam_snapper: Pam module which creates filesystem snapshots via "snapper"</span>
    </a>
    <meta itemprop="position" content="4" />
  </li>
</ol>
<ol class="breadcrumb" itemscope itemtype="http://schema.org/BreadcrumbList">
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/">
      <span itemprop="name">Carta.tech</span>
    </a>
    <meta itemprop="position" content="1" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/packages/">
      <span itemprop="name">Packages</span>
    </a>
    <meta itemprop="position" content="2" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/packages/snapper/">
      <span itemprop="name">snapper</span>
    </a>
    <meta itemprop="position" content="3" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/man8/pam_snapper.8.html">
      <span itemprop="name">pam_snapper: Pam module which creates filesystem snapshots via "snapper"</span>
    </a>
    <meta itemprop="position" content="4" />
  </li>
</ol>
    
      <section>
        <h2 class="font-effect-shadow-multiple">SYNOPSIS</h2>
        <div class="sectioncontent">
<p><strong>pam_snapper.so</strong> [debug] [homeprefix=<em>prefix</em>] [ignoreservices=<em>services</em>] [ignoreusers=<em>users</em>] [rootasroot] [ignoreroot] [openonly] [closeonly] [cleanup=<em>algorithm</em>]</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">DESCRIPTION</h2>
        <div class="sectioncontent">
<p>Create a snapshot at every login of a user, thus he or she always has a save starting point.</p><p>As many users do not logout for some time, it is a good idea to enable snapper&apos;s time based snapshots in addition.</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">OPTIONS</h2>
        <div class="sectioncontent">
<p><strong>debug</strong></p><p>Switch on debugging in the module.</p><p><strong>homeprefix=</strong><strong></strong><em>prefix</em></p><p>Prefix for the name of the snapper configuration. The username will be appended to this prefix.</p><p>Default: "home_"</p><p><strong>ignoreservices=</strong><strong></strong><em>comma separated list of services</em></p><p>Default: "crond"</p><p><strong>ignoreusers=</strong><strong></strong><em>comma separated list of users</em></p><p>Default: (none)</p><p><strong>rootasroot</strong></p><p>Perform a snapshot using the snapper configuration "root" if the user "root" logs in. In other words: the homeprefix is not used in this case. As the snapper configuration "root" is used for the system (the root filesystem), this means that with every login of the user "root" the complete "/" filesystem will be snapshotted. This can be useful to help administrators rolling back in case their activity / configuration changes have been accidentally wrong.</p><p>"rootasroot" and "ignoreroot" are mutually exclusive.</p><p><strong>ignoreroot</strong></p><p>No snapshot is taken, if the user "root" opens/closes a session.</p><p>"rootasroot" and "ignoreroot" are mutually exclusive.</p><p><strong>openonly</strong></p><p>Only create a single snapshot when opening the PAM session.</p><p>Default: create pre- and post-snapshots</p><p><strong>closeonly</strong></p><p>Only create a single snapshot when closing the PAM session.</p><p>Default: create pre- and post-snapshots</p><p><strong>cleanup=</strong><strong></strong><em>cleanup-algorithm</em></p><p>Set snapper cleanup algorithm.</p><p>Default: (none)</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">MODULE TYPES PROVIDED</h2>
        <div class="sectioncontent">
<p>Only the module type "session" is provided.</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">RETURN VALUES</h2>
        <div class="sectioncontent">
<p>PAM_SUCCESS</p><p>pam_snapper will always return PAM_SUCCESS, to not prevent users from login, in case a snapshot fails. This may change in the future.</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">EXAMPLES</h2>
        <div class="sectioncontent">
<h3>Basic usage</h3>
<p>Create a btrfs subvolume for the new user and a snapper configuration, e.g. using the tool /usr/lib/pam_snapper/pam_snapper_useradd.sh.</p><p>Add the following line to /etc/pam.d/common-session:</p>
<pre>
session    optional    pam_snapper.so

</pre>


        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">RELATED TO pam_snapper&hellip;</h2>
        <div class="sectioncontent">
<p><a href="../man8/snapper.8.html"><strong>snapper</strong>(8)</a>, <a href="../man5/pam.conf.5.html"><strong>pam.conf</strong>(5)</a>, <strong>pam</strong>(8), pam_snapper_homeconvert, pam_snapper_pamconfig, pam_snapper_useradd, pam_snapper_userdel</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">HOMEPAGE</h2>
        <div class="sectioncontent">
<p>\m[blue]<strong>http://snapper.io/</strong>\m[]</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">AUTHORS</h2>
        <div class="sectioncontent">
<p>pam-snapper was written by Matthias G. Eckermann &lt;mge@suse.com&gt; as part of SUSE Hackweek#9 in April 2013.</p><p>This module would not have been possible without the work of Arvin Schnell on the snapper project. pam-snapper inherits DBUS handling from "snapper_dbus_cli.c" by David Disseldorp.</p><p>The module builds on the Linux PAM stack and its documentation, written by Thorsten Kukuk.</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">LICENSE</h2>
        <div class="sectioncontent">
<p>Copyright (c) 2013 SUSE</p><p>All Rights Reserved.</p><p>This program is free software; you can redistribute it and/or modify it under the terms of version 2 of the GNU General Public License as published by the Free Software Foundation.</p><p>This program is distributed in the hope that it will be useful, but WITHOUT ANY WARRANTY without even the implied warranty of MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the GNU General Public License for more details.</p><p>You should have received a copy of the GNU General Public License along with this program; if not, contact SUSE.</p><p>To contact SUSE about this file by physical or electronic mail, you may find current contact information at www.suse.com.</p>
        </div>
      </section>
<nav>
  <ul class="pager">
   <li class="previous"><a href="pam_shells.8.html"><span aria-hidden="true">&larr;</span> pam_shells.8: Pam module to check for valid login shell</a></li>
   <li class="next"><a href="pam_sshauth.8.html">pam_sshauth.8: Pam module which authenticates against an ssh server <span aria-hidden="true">&rarr;</span></a></li>
  </ul>
</nav>

  </div>
  <!-- jQuery (necessary for Bootstrap's JavaScript plugins) -->
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.2/jquery.min.js"></script>
  <!-- Include all compiled plugins (below), or include individual files as needed -->
  <script src="/js/bootstrap.min.js"></script>
  <script>
    (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
      (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
      m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
    })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

    ga('create', 'UA-60781387-1', 'auto');
    ga('send', 'pageview');

  </script>
</body>
</html>
