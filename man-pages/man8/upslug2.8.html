<!DOCTYPE html>
<html lang="en">
<head>
  <link href="https://fonts.googleapis.com/css?family=Fira+Mono:400,700&effect=destruction%7Cshadow-multiple" rel="stylesheet" type="text/css">
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>upslug2: Utility to upgrade the firmware of a nslu2 via the network</title>
  <link href="/css/bootstrap.min.css" rel="stylesheet">
  <link href="/css/manpage.css" rel="stylesheet">
  <link rel="apple-touch-icon" sizes="57x57" href="/icons/apple-icon-57x57.png">
  <link rel="apple-touch-icon" sizes="60x60" href="/icons/apple-icon-60x60.png">
  <link rel="apple-touch-icon" sizes="72x72" href="/icons/apple-icon-72x72.png">
  <link rel="apple-touch-icon" sizes="76x76" href="/icons/apple-icon-76x76.png">
  <link rel="apple-touch-icon" sizes="114x114" href="/icons/apple-icon-114x114.png">
  <link rel="apple-touch-icon" sizes="120x120" href="/icons/apple-icon-120x120.png">
  <link rel="apple-touch-icon" sizes="144x144" href="/icons/apple-icon-144x144.png">
  <link rel="apple-touch-icon" sizes="152x152" href="/icons/apple-icon-152x152.png">
  <link rel="apple-touch-icon" sizes="180x180" href="/icons/apple-icon-180x180.png">
  <link rel="icon" type="image/png" sizes="192x192" href="/icons/android-icon-192x192.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/icons/favicon-32x32.png">
  <link rel="icon" type="image/png" sizes="96x96" href="/icons/favicon-96x96.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/icons/favicon-16x16.png">
  <link rel="manifest" href="/icons/manifest.json">
  <meta name="msapplication-TileColor" content="#ffffff">
  <meta name="msapplication-TileImage" content="/icons/ms-icon-144x144.png">
  <meta name="theme-color" content="#ffffff">
  <meta name="description" content="Utility to upgrade the firmware of a nslu2 via the network">
  <meta name="twitter:card" content="summary_large_image">
  <meta name="twitter:site" content="@CartaTech">
  <meta name="twitter:creator" content="@CartaTech">
  <meta name="twitter:title" content="upslug2 (8) manual">
  <meta name="twitter:description" content="Utility to upgrade the firmware of a nslu2 via the network">
  <meta name="twitter:image" content="https://www.carta.tech/images/upslug2-upslug2-8.png">
  <meta property="og:url" content="https://www.carta.tech/man-pages/man8/upslug2.8.html" />
  <meta property="og:type" content="website" />
  <meta property="og:title" content="upslug2 (8) manual" />
  <meta property="og:description" content="Utility to upgrade the firmware of a nslu2 via the network" />
  <meta property="fb:app_id" content="1241677679199500" />
  <meta property="og:image" content="https://www.carta.tech/images/upslug2-upslug2-8.png" />
  <meta property="og:image:width" content="600" />
  <meta property="og:image:height" content="315" />
</head>
<body>
  <div class="container final">
          <div class="page-header">
        <h1 class="font-effect-destruction">upslug2<small> (8)</small></h1>
        <p class="lead">Utility to upgrade the firmware of a nslu2 via the network</p>
      </div>

    <ol class="breadcrumb" itemscope itemtype="http://schema.org/BreadcrumbList">
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/">
      <span itemprop="name">Carta.tech</span>
    </a>
    <meta itemprop="position" content="1" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/">
      <span itemprop="name">Man Pages</span>
    </a>
    <meta itemprop="position" content="2" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/man8/">
      <span itemprop="name">System administration commands</span>
    </a>
    <meta itemprop="position" content="3" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/man8/upslug2.8.html">
      <span itemprop="name">upslug2: Utility to upgrade the firmware of a nslu2 via the network</span>
    </a>
    <meta itemprop="position" content="4" />
  </li>
</ol>
<ol class="breadcrumb" itemscope itemtype="http://schema.org/BreadcrumbList">
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/">
      <span itemprop="name">Carta.tech</span>
    </a>
    <meta itemprop="position" content="1" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/packages/">
      <span itemprop="name">Packages</span>
    </a>
    <meta itemprop="position" content="2" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/packages/upslug2/">
      <span itemprop="name">upslug2</span>
    </a>
    <meta itemprop="position" content="3" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/man8/upslug2.8.html">
      <span itemprop="name">upslug2: Utility to upgrade the firmware of a nslu2 via the network</span>
    </a>
    <meta itemprop="position" content="4" />
  </li>
</ol>
    
      <section>
        <h2 class="font-effect-shadow-multiple">SYNOPSIS</h2>
        <div class="sectioncontent">
<p><strong>upslug2</strong> [options]</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">DESCRIPTION</h2>
        <div class="sectioncontent">
<p><strong>upslug2</strong> is a command line program intended to allow the upgrade the firmware of a Linksys NSLU2 (Network Storage Link for USB 2.0 Disk Drives) to new or different versions.  When a NSLU2 in the local network is put in upgrade mode, <strong>upslug2</strong> can connect to it and upload a new firmware.</p><p><strong>upslug2</strong> will accept a full firmware image but it can also upgrade the flash from individual files holding the kernel, ramdisk and root filesystem. <strong>upslug2</strong> provides status information during the upgrade process and verifies the written image after the upgrade.</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">OPTIONS</h2>
        <div class="sectioncontent">

<dl class='dl-vertical'>
  <dt>
    <p><strong>-C</strong>, <strong>--Complete-reprogram</strong></p>
  </dt>
  <dd>
    <p>Reprogram the complete flash, including the RedBoot boot loader and the SysConf partition holding configuration information.  Using this option may result in the NSLU2 becoming permanently unusable!  By default, <strong>upslug2</strong> will not touch these two partitions since this allows flashing a new firmware if an uploaded firmware does not work.  This is not possible if RedBoot itself is damaged.  Use with caution.</p>
  </dd>
  <dt>
    <p><strong>-d</strong>, <strong>--device</strong></p>
  </dt>
  <dd>
    <p>The network device on the host machine connected to the network on which the NSLU2 is located. (Default: eth0).</p>
  </dd>
  <dt>
    <p><strong>-e</strong>, <strong>--endian</strong></p>
  </dt>
  <dd>
    <p>The endianness of the files to be uploaded. <strong>upslug2</strong> will usually detected the endianness automatically but this option can be used to force byte swapping to occur.  This option accepts three values, separated by comma: endianness of kernel, data and RedBoot FIS directory. Valid values are <strong>l</strong> (little endian), <strong>p</strong> (pdp endian) and <strong>b</strong> (big endian). (Default: ,b,b)</p>
  </dd>
  <dt>
    <p><strong>-f</strong>, <strong>--from</strong></p>
  </dt>
  <dd>
    <p>The MAC address of the host system.</p>
  </dd>
  <dt>
    <p><strong>-h</strong>, <strong>--help</strong></p>
  </dt>
  <dd>
    <p>Show summary of options.</p>
  </dd>
  <dt>
    <p><strong>-i</strong>, <strong>--image</strong></p>
  </dt>
  <dd>
    <p>The complete flash image to use.</p>
  </dd>
  <dt>
    <p><strong>-j</strong>, <strong>--rootfs</strong></p>
  </dt>
  <dd>
    <p>A root filesystem, usually of type jffs.</p>
  </dd>
  <dt>
    <p><strong>-k</strong>, <strong>--kernel</strong></p>
  </dt>
  <dd>
    <p>A compressed kernel zImage image.</p>
  </dd>
  <dt>
    <p><strong>-n</strong>, <strong>--no-reboot</strong></p>
  </dt>
  <dd>
    <p>Do not reboot after upgrade</p>
  </dd>
  <dt>
    <p><strong>-p</strong>, <strong>--payload</strong></p>
  </dt>
  <dd>
    <p>FIS directory payload.  There are about 140 Kb in the last block (between the FIS dir and the trailer at the end) which can be used for data.</p>
  </dd>
  <dt>
    <p><strong>-r</strong>, <strong>--ramdisk</strong></p>
  </dt>
  <dd>
    <p>A compressed ramdisk image.</p>
  </dd>
  <dt>
    <p><strong>-R</strong>, <strong>--ram-payload</strong></p>
  </dt>
  <dd>
    <p>A ram paylod (replaced ramdisk). (FIXME: if it replaced the ramdisk, why cannot you just use the -r option? What's the difference)</p>
  </dd>
  <dt>
    <p><strong>-t</strong>, <strong>--target</strong></p>
  </dt>
  <dd>
    <p>The MAC address of the NSLU2 to upgrade.  Without this option, <strong>upslug2</strong> will only perform an upgrade if there is just one NSLU2 in upgrade mode.</p>
  </dd>
  <dt>
    <p><strong>-U</strong>, <strong>--no-verify</strong></p>
  </dt>
  <dd>
    <p>Do not verify the image, only upgrade.</p>
  </dd>
  <dt>
    <p><strong>-v</strong>, <strong>--verify</strong></p>
  </dt>
  <dd>
    <p>Do not write to flash, only verify the image.</p>
  </dd>

</dl>
<h3>Options to specify firmware information</h3>
<p>The following options should be used when individual kernel, ramdisk and root filesystem files are specified rather than a complete firmware image.</p>
<dl class='dl-vertical'>
  <dt>
    <p><strong>-E</strong>, <strong>--extra-version</strong></p>
  </dt>
  <dd>
    <p>Extra version information, a 2 byte value. (Default: 0x90f7)</p>
  </dd>
  <dt>
    <p><strong>-F</strong>, <strong>--firmware-version</strong></p>
  </dt>
  <dd>
    <p>The firmware version, a 2 byte value. (Default: 0x2329)</p>
  </dd>
  <dt>
    <p><strong>-P</strong>, <strong>--product-id</strong></p>
  </dt>
  <dd>
    <p>The product ID, a 2 byte value. (Default: 1)</p>
  </dd>
  <dt>
    <p><strong>-T</strong>, <strong>--protocol-id</strong></p>
  </dt>
  <dd>
    <p>The protocol ID, a 2 byte value. (Default: 0)</p>
  </dd>

</dl>


        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">USING UPSLUG2</h2>
        <div class="sectioncontent">
<p>In order to use <strong>upslug2</strong> the NSLU2 which is to be upgraded has to be put in upgrade mode:</p><p>1. Disconnect any disks and/or devices from the USB ports.</p><p>2. Power off the NSLU2</p><p>3. Press and hold the reset button (accessible through the small hole on the back just above the power input).</p><p>4. Press and release the power button to power on the NSLU2.</p><p>5. Wait for 10 seconds watching the ready/status LED. After 10 seconds it will change from amber to red. Immediately release the reset button.</p><p>6. The NSLU2 ready/status LED will flash alternately red/green (there is a 1 second delay before the first green). The NSLU2 is now in upgrade mode.</p><p>If you decide not to flash the image the NSLU2 can be rebooted by disconnecting the power.  If the ready/status LED does not turn green after step four it will remain red for several seconds then flash amber. This happens if you do not release the reset button in time - pull the power, reconnect it and repeat from the second step.</p><p>Once the NSLU2 is in upgrade mode it will remain in this state until either the power is connected or a new image has been flashed. If the flash fails the NSLU2 will (eventually) return to upgrade mode</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">EXAMPLES</h2>
        <div class="sectioncontent">
<p>The most common use of <strong>upslug2</strong> is the following:</p><p>upslug2 --image NSLU2_V23R63.bin</p><p>This specifies a complete firmware image which will be written to flash.</p><p>Alternatively, kernel, ramdisk and root filesystem can be specified individually:</p><p>upslug2 -k nslu2-zImage -r ramdisk -\j root.jffs</p><p>In this case, the options <strong>-E</strong>, <strong>-F</strong>, <strong>-P</strong> and <strong>-T</strong> should typically be specified as well.</p><p>By default, <strong>upslug2</strong> will search for the NSLU2 on the network on your eth0 network interface. If the network is on a different interface, you can easily specify it:</p><p>upslug2 -d eth1 --image NSLU2_V23R63.bin</p><p>If there are potentially more than one NSLU2 in your network which may be in upgrade mode, you can specify its MAC address:</p><p>upslug2 -t 00:11:85:12:34:56 --image NSLU2_V23R63.bin</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">RELATED TO upslug2&hellip;</h2>
        <div class="sectioncontent">
<p><a href="../man1/slugimage.1.html"><strong>slugimage</strong>(1)</a></p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">AUTHOR</h2>
        <div class="sectioncontent">
<p>John Bowler &lt;jbowler@acm.org&gt;</p>
        </div>
      </section>
<nav>
  <ul class="pager">
   <li class="previous"><a href="upslog.8.html"><span aria-hidden="true">&larr;</span> upslog.8: Ups status logger</a></li>
   <li class="next"><a href="upsmon.8.html">upsmon.8: Ups monitor and shutdown controller <span aria-hidden="true">&rarr;</span></a></li>
  </ul>
</nav>

  </div>
  <!-- jQuery (necessary for Bootstrap's JavaScript plugins) -->
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.2/jquery.min.js"></script>
  <!-- Include all compiled plugins (below), or include individual files as needed -->
  <script src="/js/bootstrap.min.js"></script>
  <script>
    (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
      (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
      m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
    })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

    ga('create', 'UA-60781387-1', 'auto');
    ga('send', 'pageview');

  </script>
</body>
</html>
