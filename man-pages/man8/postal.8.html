<!DOCTYPE html>
<html lang="en">
<head>
  <link href="https://fonts.googleapis.com/css?family=Fira+Mono:400,700&effect=destruction%7Cshadow-multiple" rel="stylesheet" type="text/css">
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>postal: Program to test smtp mail server throughput.</title>
  <link href="/css/bootstrap.min.css" rel="stylesheet">
  <link href="/css/manpage.css" rel="stylesheet">
  <link rel="apple-touch-icon" sizes="57x57" href="/icons/apple-icon-57x57.png">
  <link rel="apple-touch-icon" sizes="60x60" href="/icons/apple-icon-60x60.png">
  <link rel="apple-touch-icon" sizes="72x72" href="/icons/apple-icon-72x72.png">
  <link rel="apple-touch-icon" sizes="76x76" href="/icons/apple-icon-76x76.png">
  <link rel="apple-touch-icon" sizes="114x114" href="/icons/apple-icon-114x114.png">
  <link rel="apple-touch-icon" sizes="120x120" href="/icons/apple-icon-120x120.png">
  <link rel="apple-touch-icon" sizes="144x144" href="/icons/apple-icon-144x144.png">
  <link rel="apple-touch-icon" sizes="152x152" href="/icons/apple-icon-152x152.png">
  <link rel="apple-touch-icon" sizes="180x180" href="/icons/apple-icon-180x180.png">
  <link rel="icon" type="image/png" sizes="192x192" href="/icons/android-icon-192x192.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/icons/favicon-32x32.png">
  <link rel="icon" type="image/png" sizes="96x96" href="/icons/favicon-96x96.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/icons/favicon-16x16.png">
  <link rel="manifest" href="/icons/manifest.json">
  <meta name="msapplication-TileColor" content="#ffffff">
  <meta name="msapplication-TileImage" content="/icons/ms-icon-144x144.png">
  <meta name="theme-color" content="#ffffff">
  <meta name="description" content="Program to test smtp mail server throughput.">
  <meta name="twitter:card" content="summary_large_image">
  <meta name="twitter:site" content="@CartaTech">
  <meta name="twitter:creator" content="@CartaTech">
  <meta name="twitter:title" content="postal (8) manual">
  <meta name="twitter:description" content="Program to test smtp mail server throughput.">
  <meta name="twitter:image" content="https://www.carta.tech/images/postal-postal-8.png">
  <meta property="og:url" content="https://www.carta.tech/man-pages/man8/postal.8.html" />
  <meta property="og:type" content="website" />
  <meta property="og:title" content="postal (8) manual" />
  <meta property="og:description" content="Program to test smtp mail server throughput." />
  <meta property="fb:app_id" content="1241677679199500" />
  <meta property="og:image" content="https://www.carta.tech/images/postal-postal-8.png" />
  <meta property="og:image:width" content="600" />
  <meta property="og:image:height" content="315" />
</head>
<body>
  <div class="container final">
          <div class="page-header">
        <h1 class="font-effect-destruction">postal<small> (8)</small></h1>
        <p class="lead">Program to test smtp mail server throughput.</p>
      </div>

    <ol class="breadcrumb" itemscope itemtype="http://schema.org/BreadcrumbList">
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/">
      <span itemprop="name">Carta.tech</span>
    </a>
    <meta itemprop="position" content="1" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/">
      <span itemprop="name">Man Pages</span>
    </a>
    <meta itemprop="position" content="2" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/man8/">
      <span itemprop="name">System administration commands</span>
    </a>
    <meta itemprop="position" content="3" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/man8/postal.8.html">
      <span itemprop="name">postal: Program to test smtp mail server throughput.</span>
    </a>
    <meta itemprop="position" content="4" />
  </li>
</ol>
<ol class="breadcrumb" itemscope itemtype="http://schema.org/BreadcrumbList">
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/">
      <span itemprop="name">Carta.tech</span>
    </a>
    <meta itemprop="position" content="1" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/packages/">
      <span itemprop="name">Packages</span>
    </a>
    <meta itemprop="position" content="2" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/packages/postal/">
      <span itemprop="name">postal</span>
    </a>
    <meta itemprop="position" content="3" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/man8/postal.8.html">
      <span itemprop="name">postal: Program to test smtp mail server throughput.</span>
    </a>
    <meta itemprop="position" content="4" />
  </li>
</ol>
    
      <section>
        <h2 class="font-effect-shadow-multiple">SYNOPSIS</h2>
        <div class="sectioncontent">
<p><strong>postal</strong> <em>[-m maximum-message-size] [-M minimum-message-size] [-t threads]</em> <em>[-c messages-per-connection] [-r messages-per-minute] [-s ssl-percentage]</em> <em>[-L] [-l local-address] [-a] [-b [no]netscape] [-[z|Z] debug-file]</em> <em>[-f sender-file] smtp-server user-list-filename</em></p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">DESCRIPTION</h2>
        <div class="sectioncontent">
<p>This manual page documents briefly the <strong>postal</strong> program.</p><p>It is designed to test the performance of SMTP email servers by sending random messages to the specified server as fast as possible.</p><p>The <strong>smtp-server</strong> parameter specifies the IP address or name of the mail server that the mail is to be sent to.  Mail sent by <strong>Postal</strong> will not use MX records, this is to allow testing outbound relays etc.  If you want to specify a port other than port 25 then enclose the host address in square brackets and have the port address immediately following.  If you want a DNS lookup for every connection (for testing round-robin DNS) then immediately precede the host address with a '+' character.  To specify multiple servers for round-robin use then separate the addresses with commas.  Note that <strong>localhost</strong> is used for connecting to the same machine.</p><p>The <strong>user-list-filename</strong> is the name of a file which contains a list of user's email addresses.  This can be just user-names or fully qualified email addresses.  Whatever you specify will be sent exactly in the SMTP protocol so make sure you do whatever is appropriate.  If unsure then use fully qualified addresses (IE user@example.com).</p><p>The <strong>sender-file</strong> contains a list of users that will be in the From: field and envelope sender of the messages.  If it is not specified then the user-list-filename will be used for the sender list.</p><p>The <strong>maximum-message-size</strong> indicates the size in Kilobytes that will be the maximum size of the message body.  The size of each message body will be a random number between 0 and the maximum size.  Specify "0" if you want just headers to test the connection rate.  The default value is 10.</p><p>The <strong>threads</strong> parameter is the number of threads that should be created to attempt separate connections.  A well configured mail server won't accept an unlimited number of connections so make sure you don't specify a number larger than the number your mail server is configured to handle.  Also for sensible results make sure that you don't use enough to make your server thrash as the results won't be representative of real-world use.  The default value is 1, this default is not suitable for real tests, it's just for testing your configuration.  If you specify multiple server addresses for round-robin use then this number of threads will be created per server, IE 4 servers and <strong>-p5</strong> will give 20 threads total.</p><p>The <strong>messages-per-connection</strong> parameter is for sending more than one message per SMTP connection.  The default value is "1".  A value of -1 means to send an indefinite number of messages on one connection (~4 billion).  If a value &gt; 1 is specified then the number sent on each connection is a random number between 1 and the number specified.  For simulating a mail server connected directly to the net use a value of 2 or 3.  For simulating a mail server connected to a front-end relay use a large number.  For testing for bugs in your mail server use the value 0 and leave it running for a week.  ;)  A value of 0 means to disconnect without sending any messages.  Good for testing a LocalDirector.</p><p>The <strong>max-messages-per-minute</strong> parameter is for limiting the throughput of the program.  This is designed to be used when you want to test the performance of other programs when the system is under load.  The default is effectively 24000 messages per minute.</p><p>The <strong>local-address</strong> parameter specifies which local IP address(es) are used to make the outbound connections.  Specified in the same way as the remote address.  This is good for testing LocalDirectors or other devices that perform differently depending on which source IP address was used.</p><p>The -L command specifies that LMTP is to be used instead of SMTP.</p><p>The <strong>-a</strong> command turns on all logging.  All message data received will be logged.  This will make it slow and it may not be able to saturate a fast Ethernet link...</p><p>The <strong>-b</strong> switch allows you to specify breakage strings.  Currently the only option is for Netscape mail server which strips spaces from the start of subject lines. <strong>-b netscape</strong> means to avoid leading spaces on subject fields to not break Netscape. <strong>-b nonetscape</strong> means to always put extra space to test for the bug in Netscape and similar products.  Some people say that the RFCs are open to interpretation on this issue, I am interested to see whether anyone else interprets it the way that Netscape does.</p><p>The <strong>-s</strong> switch specifies the percentage of connections which are to use <strong>TLS</strong> AKA <strong>SSL.</strong> Use 0 for no SSL, or 100 for always SSL, or any number in between.  Default is 0.</p><p>The <strong>-z</strong> switch allows you to specify a debugging file base.  From this base one file is created for each thread (with a ':' and the thread number appended), each file is used to log all IO performed by that thread for debugging purposes.</p><p>The <strong>-Z</strong> switch is the same but creates a separate file for each connection as well with an additional ':' appended followed by the connection number.</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">NOTES</h2>
        <div class="sectioncontent">
<p>When testing mail servers please use domains defined in http://www.rfc-editor.org/rfc/rfc2606.txt - example.com, example.net, and example.org  are all good options.  Please don't use anything related to a valid name, since that will cause pain for you and others on the net.</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">RETURN CODES</h2>
        <div class="sectioncontent">

<dl class='dl-vertical'>
  <dt>
    <p><strong>0</strong></p>
  </dt>
  <dd>
    <p>No Error</p>
  </dd>
  <dt>
    <p><strong>1</strong></p>
  </dt>
  <dd>
    <p>Bad Parameters</p>
  </dd>
  <dt>
    <p><strong>2</strong></p>
  </dt>
  <dd>
    <p>System Error, lack of memory or some other resource</p>
  </dd>

</dl>

        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">AUTHOR</h2>
        <div class="sectioncontent">
<p>This program, it's manual page, and the Debian package were written by Russell Coker &lt;russell@coker.com.au&gt;.</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">AVAILABILITY</h2>
        <div class="sectioncontent">
<p>The source is available from http://doc.coker.com.au/projects/postal/ .</p><p>See http://etbe.coker.com.au/category/benchmark for further information.</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">RELATED TO postal&hellip;</h2>
        <div class="sectioncontent">
<p><a href="../man8/bhm.8.html"><strong>bhm</strong>(8)</a>,<strong>postal-list</strong>(8),<a href="../man8/rabid.8.html"><strong>rabid</strong>(8)</a></p>
        </div>
      </section>
<nav>
  <ul class="pager">
   <li class="previous"><a href="portsentry.8.html"><span aria-hidden="true">&larr;</span> portsentry.8: Detect portscan activity</a></li>
   <li class="next"><a href="postfix-nochroot.8.html">postfix-nochroot.8: Change /etc/postfix/master.cf to not use chroot <span aria-hidden="true">&rarr;</span></a></li>
  </ul>
</nav>

  </div>
  <!-- jQuery (necessary for Bootstrap's JavaScript plugins) -->
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.2/jquery.min.js"></script>
  <!-- Include all compiled plugins (below), or include individual files as needed -->
  <script src="/js/bootstrap.min.js"></script>
  <script>
    (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
      (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
      m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
    })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

    ga('create', 'UA-60781387-1', 'auto');
    ga('send', 'pageview');

  </script>
</body>
</html>
