<!DOCTYPE html>
<html lang="en">
<head>
  <link href="https://fonts.googleapis.com/css?family=Fira+Mono:400,700&effect=destruction%7Cshadow-multiple" rel="stylesheet" type="text/css">
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>gfs_controld: Daemon that manages mounting, unmounting, recovery and posix locks</title>
  <link href="/css/bootstrap.min.css" rel="stylesheet">
  <link href="/css/manpage.css" rel="stylesheet">
  <link rel="apple-touch-icon" sizes="57x57" href="/icons/apple-icon-57x57.png">
  <link rel="apple-touch-icon" sizes="60x60" href="/icons/apple-icon-60x60.png">
  <link rel="apple-touch-icon" sizes="72x72" href="/icons/apple-icon-72x72.png">
  <link rel="apple-touch-icon" sizes="76x76" href="/icons/apple-icon-76x76.png">
  <link rel="apple-touch-icon" sizes="114x114" href="/icons/apple-icon-114x114.png">
  <link rel="apple-touch-icon" sizes="120x120" href="/icons/apple-icon-120x120.png">
  <link rel="apple-touch-icon" sizes="144x144" href="/icons/apple-icon-144x144.png">
  <link rel="apple-touch-icon" sizes="152x152" href="/icons/apple-icon-152x152.png">
  <link rel="apple-touch-icon" sizes="180x180" href="/icons/apple-icon-180x180.png">
  <link rel="icon" type="image/png" sizes="192x192" href="/icons/android-icon-192x192.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/icons/favicon-32x32.png">
  <link rel="icon" type="image/png" sizes="96x96" href="/icons/favicon-96x96.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/icons/favicon-16x16.png">
  <link rel="manifest" href="/icons/manifest.json">
  <meta name="msapplication-TileColor" content="#ffffff">
  <meta name="msapplication-TileImage" content="/icons/ms-icon-144x144.png">
  <meta name="theme-color" content="#ffffff">
  <meta name="description" content="Daemon that manages mounting, unmounting, recovery and posix locks">
  <meta name="twitter:card" content="summary_large_image">
  <meta name="twitter:site" content="@CartaTech">
  <meta name="twitter:creator" content="@CartaTech">
  <meta name="twitter:title" content="gfs_controld (8) manual">
  <meta name="twitter:description" content="Daemon that manages mounting, unmounting, recovery and posix locks">
  <meta name="twitter:image" content="https://www.carta.tech/images/gfs2-cluster-gfs_controld-8.png">
  <meta property="og:url" content="https://www.carta.tech/man-pages/man8/gfs_controld.8.html" />
  <meta property="og:type" content="website" />
  <meta property="og:title" content="gfs_controld (8) manual" />
  <meta property="og:description" content="Daemon that manages mounting, unmounting, recovery and posix locks" />
  <meta property="fb:app_id" content="1241677679199500" />
  <meta property="og:image" content="https://www.carta.tech/images/gfs2-cluster-gfs_controld-8.png" />
  <meta property="og:image:width" content="600" />
  <meta property="og:image:height" content="315" />
</head>
<body>
  <div class="container final">
          <div class="page-header">
        <h1 class="font-effect-destruction">gfs_controld<small> (8)</small></h1>
        <p class="lead">Daemon that manages mounting, unmounting, recovery and posix locks</p>
      </div>

    <ol class="breadcrumb" itemscope itemtype="http://schema.org/BreadcrumbList">
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/">
      <span itemprop="name">Carta.tech</span>
    </a>
    <meta itemprop="position" content="1" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/">
      <span itemprop="name">Man Pages</span>
    </a>
    <meta itemprop="position" content="2" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/man8/">
      <span itemprop="name">System administration commands</span>
    </a>
    <meta itemprop="position" content="3" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/man8/gfs_controld.8.html">
      <span itemprop="name">gfs_controld: Daemon that manages mounting, unmounting, recovery and posix locks</span>
    </a>
    <meta itemprop="position" content="4" />
  </li>
</ol>
<ol class="breadcrumb" itemscope itemtype="http://schema.org/BreadcrumbList">
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/">
      <span itemprop="name">Carta.tech</span>
    </a>
    <meta itemprop="position" content="1" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/packages/">
      <span itemprop="name">Packages</span>
    </a>
    <meta itemprop="position" content="2" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/packages/gfs2-cluster/">
      <span itemprop="name">gfs2-cluster</span>
    </a>
    <meta itemprop="position" content="3" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/man8/gfs_controld.8.html">
      <span itemprop="name">gfs_controld: Daemon that manages mounting, unmounting, recovery and posix locks</span>
    </a>
    <meta itemprop="position" content="4" />
  </li>
</ol>
    
      <section>
        <h2 class="font-effect-shadow-multiple">SYNOPSIS</h2>
        <div class="sectioncontent">
<p><strong></strong> gfs_controld [<em>OPTION</em>]...</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">DESCRIPTION</h2>
        <div class="sectioncontent">
<p>GFS lives in the kernel, and the cluster infrastructure (cluster membership and group management) lives in user space.  GFS in the kernel needs to adjust/recover for certain cluster events.  It's the job of gfs_controld to receive these events and reconfigure gfs as needed. gfs_controld controls and configures gfs through sysfs files that are considered gfs-internal interfaces; not a general API/ABI.</p><p>Mounting, unmounting and node failure are the main cluster events that gfs_controld controls.  It also manages the assignment of journals to different nodes.  The mount.gfs and umount.gfs programs communicate with gfs_controld to join/leave the mount group and receive the necessary options for the kernel mount.</p><p>GFS also sends all posix lock operations to gfs_controld for processing. gfs_controld manages cluster-wide posix locks for gfs and passes results back to gfs in the kernel.</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">CONFIGURATION FILE</h2>
        <div class="sectioncontent">
<p>Optional cluster.conf settings are placed in the &lt;gfs_controld&gt; section.</p><h3>Posix locks</h3>
<p>Heavy use of plocks can result in high network load.  The rate at which plocks are processed are limited by the <em>plock_rate_limit</em> setting, which limits the maximum plock performance, and limits potentially excessive network load.  This value is the maximum number of plock operations a single node will process every second.  To achieve maximum posix locking performance, the rate limiting should be disabled by setting it to 0.  The default value is 100.</p>
<pre>
  &lt;gfs_controld plock_rate_limit="100"/&gt;
</pre>
<p>To optimize performance for repeated locking of the same locks by processes on a single node, <em>plock_ownership</em> can be set to 1.  The default is 0.  If this is enabled, gfs_controld cannot interoperate with older versions that did not support this option.</p>
<pre>
  &lt;gfs_controld plock_ownership="1"/&gt;
</pre>
<p>Three options can be used to tune the behavior of the plock_ownership optimization.  All three relate to the caching of lock ownership state. Specifically, they define how aggressively cached ownership state is dropped. More caching of ownership state can result in better performance, at the expense of more memory usage.</p><p><em>drop_resources_time</em> is the frequency of drop attempts in milliseconds.  Default 10000 (10 sec).</p><p><em>drop_resources_count</em> is the maximum number of items to drop from the cache each time.  Default 10.</p><p><em>drop_resources_age</em> is the time in milliseconds a cached item should be unused before being considered for dropping.  Default 10000 (10 sec).</p>
<pre>
  &lt;gfs_controld drop_resources_time="10000" drop_resources_count="10"
   drop_resources_age="10000"/&gt;
</pre>


        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">OPTIONS</h2>
        <div class="sectioncontent">

<dl class='dl-vertical'>
  <dt>
    <p><strong>-D</strong></p>
  </dt>
  <dd>
    <p>Run the daemon in the foreground and print debug statements to stdout.</p>
  </dd>
  <dt>
    <p><strong>-P</strong></p>
  </dt>
  <dd>
    <p>Enable posix lock debugging messages.</p>
  </dd>
  <dt>
    <p><strong>-w</strong></p>
  </dt>
  <dd>
    <p>Disable the "withdraw" feature.</p>
  </dd>
  <dt>
    <p><strong>-p</strong></p>
  </dt>
  <dd>
    <p>Disable posix lock handling.</p>
  </dd>
  <dt>
    <p><strong>-l</strong> &lt;num&gt;</p>
  </dt>
  <dd>
    <p>Limit the rate at which posix lock messages are sent to &lt;num&gt; messages per second.  0 disables the limit and results in the maximum performance of posix locks. Default 100.</p>
  </dd>
  <dt>
    <p><strong>-o</strong> &lt;num&gt;</p>
  </dt>
  <dd>
    <p>Enable (1) or disable (0) plock ownership optimization. Default 0.  All nodes must run with the same value.</p>
  </dd>
  <dt>
    <p><strong>-t</strong> &lt;ms&gt;</p>
  </dt>
  <dd>
    <p>Ownership cache tuning, drop resources time (milliseconds). Default 10000.</p>
  </dd>
  <dt>
    <p><strong>-c</strong> &lt;ms&gt;</p>
  </dt>
  <dd>
    <p>Ownership cache tuning, drop resources count. Default 10.</p>
  </dd>
  <dt>
    <p><strong>-a</strong> &lt;ms&gt;</p>
  </dt>
  <dd>
    <p>Ownership cache tuning, drop resources age (milliseconds). Default 10000.</p>
  </dd>
  <dt>
    <p><strong>-h</strong></p>
  </dt>
  <dd>
    <p>Print out a help message describing available options, then exit.</p>
  </dd>
  <dt>
    <p><strong>-V</strong></p>
  </dt>
  <dd>
    <p>Print the version information and exit.</p>
  </dd>

</dl>

        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">DEBUGGING</h2>
        <div class="sectioncontent">
<p>The gfs_controld daemon keeps a circular buffer of debug messages that can be dumped with the 'group_tool dump gfs' command.</p><p>The state of all gfs posix locks can also be dumped from gfs_controld with the 'group_tool dump plocks &lt;fsname&gt;' command.</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">RELATED TO gfs_controld&hellip;</h2>
        <div class="sectioncontent">
<p><a href="../man8/groupd.8.html"><strong>groupd</strong>(8)</a>, <a href="../man8/group_tool.8.html"><strong>group_tool</strong>(8)</a></p>
        </div>
      </section>
<nav>
  <ul class="pager">
   <li class="previous"><a href="gfs2_tool.8.html"><span aria-hidden="true">&larr;</span> gfs2_tool.8: Interface to gfs2 ioctl/sysfs calls</a></li>
   <li class="next"><a href="gld.8.html">gld.8: Greylisting daemon for postfix <span aria-hidden="true">&rarr;</span></a></li>
  </ul>
</nav>

  </div>
  <!-- jQuery (necessary for Bootstrap's JavaScript plugins) -->
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.2/jquery.min.js"></script>
  <!-- Include all compiled plugins (below), or include individual files as needed -->
  <script src="/js/bootstrap.min.js"></script>
  <script>
    (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
      (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
      m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
    })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

    ga('create', 'UA-60781387-1', 'auto');
    ga('send', 'pageview');

  </script>
</body>
</html>
