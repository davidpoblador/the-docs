<!DOCTYPE html>
<html lang="en">
<head>
  <link href="https://fonts.googleapis.com/css?family=Fira+Mono:400,700&effect=destruction%7Cshadow-multiple" rel="stylesheet" type="text/css">
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>fprobe-ulog: A netflow probe</title>
  <link href="/css/bootstrap.min.css" rel="stylesheet">
  <link href="/css/manpage.css" rel="stylesheet">
  <link rel="apple-touch-icon" sizes="57x57" href="/icons/apple-icon-57x57.png">
  <link rel="apple-touch-icon" sizes="60x60" href="/icons/apple-icon-60x60.png">
  <link rel="apple-touch-icon" sizes="72x72" href="/icons/apple-icon-72x72.png">
  <link rel="apple-touch-icon" sizes="76x76" href="/icons/apple-icon-76x76.png">
  <link rel="apple-touch-icon" sizes="114x114" href="/icons/apple-icon-114x114.png">
  <link rel="apple-touch-icon" sizes="120x120" href="/icons/apple-icon-120x120.png">
  <link rel="apple-touch-icon" sizes="144x144" href="/icons/apple-icon-144x144.png">
  <link rel="apple-touch-icon" sizes="152x152" href="/icons/apple-icon-152x152.png">
  <link rel="apple-touch-icon" sizes="180x180" href="/icons/apple-icon-180x180.png">
  <link rel="icon" type="image/png" sizes="192x192" href="/icons/android-icon-192x192.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/icons/favicon-32x32.png">
  <link rel="icon" type="image/png" sizes="96x96" href="/icons/favicon-96x96.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/icons/favicon-16x16.png">
  <link rel="manifest" href="/icons/manifest.json">
  <meta name="msapplication-TileColor" content="#ffffff">
  <meta name="msapplication-TileImage" content="/icons/ms-icon-144x144.png">
  <meta name="theme-color" content="#ffffff">
  <meta name="description" content="A netflow probe">
  <meta name="twitter:card" content="summary_large_image">
  <meta name="twitter:site" content="@CartaTech">
  <meta name="twitter:creator" content="@CartaTech">
  <meta name="twitter:title" content="fprobe-ulog (8) manual">
  <meta name="twitter:description" content="A netflow probe">
  <meta name="twitter:image" content="https://www.carta.tech/images/fprobe-ulog-fprobe-ulog-8.png">
  <meta property="og:url" content="https://www.carta.tech/man-pages/man8/fprobe-ulog.8.html" />
  <meta property="og:type" content="website" />
  <meta property="og:title" content="fprobe-ulog (8) manual" />
  <meta property="og:description" content="A netflow probe" />
  <meta property="fb:app_id" content="1241677679199500" />
  <meta property="og:image" content="https://www.carta.tech/images/fprobe-ulog-fprobe-ulog-8.png" />
  <meta property="og:image:width" content="600" />
  <meta property="og:image:height" content="315" />
</head>
<body>
  <div class="container final">
          <div class="page-header">
        <h1 class="font-effect-destruction">fprobe-ulog<small> (8)</small></h1>
        <p class="lead">A netflow probe</p>
      </div>

    <ol class="breadcrumb" itemscope itemtype="http://schema.org/BreadcrumbList">
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/">
      <span itemprop="name">Carta.tech</span>
    </a>
    <meta itemprop="position" content="1" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/">
      <span itemprop="name">Man Pages</span>
    </a>
    <meta itemprop="position" content="2" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/man8/">
      <span itemprop="name">System administration commands</span>
    </a>
    <meta itemprop="position" content="3" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/man8/fprobe-ulog.8.html">
      <span itemprop="name">fprobe-ulog: A netflow probe</span>
    </a>
    <meta itemprop="position" content="4" />
  </li>
</ol>
<ol class="breadcrumb" itemscope itemtype="http://schema.org/BreadcrumbList">
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/">
      <span itemprop="name">Carta.tech</span>
    </a>
    <meta itemprop="position" content="1" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/packages/">
      <span itemprop="name">Packages</span>
    </a>
    <meta itemprop="position" content="2" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/packages/fprobe-ulog/">
      <span itemprop="name">fprobe-ulog</span>
    </a>
    <meta itemprop="position" content="3" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/man8/fprobe-ulog.8.html">
      <span itemprop="name">fprobe-ulog: A netflow probe</span>
    </a>
    <meta itemprop="position" content="4" />
  </li>
</ol>
    
      <section>
        <h2 class="font-effect-shadow-multiple">SYNOPSIS</h2>
        <div class="sectioncontent">
<p><strong>fprobe-ulog</strong> [<em>options</em>] <em>remote:port[/[local][/type]] ...</em></p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">DESCRIPTION</h2>
        <div class="sectioncontent">
<p><strong>fprobe-ulog</strong> - libipulog-based tool that collect network traffic data and emit it as NetFlow flows towards the specified collector.</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">OPTIONS</h2>
        <div class="sectioncontent">

<dl class='dl-vertical'>
  <dt>
    <p><strong>-h</strong></p>
  </dt>
  <dd>
    <p>Display short help</p>
  </dd>
  <dt>
    <p><strong>-U </strong><em>&lt;mask&gt;</em></p>
  </dt>
  <dd>
    <p>ULOG group bitwise mask. [default=1]</p>
  </dd>
  <dt>
    <p><strong>-s </strong><em>&lt;seconds&gt;</em></p>
  </dt>
  <dd>
    <p>How often scan for expired flows. [default=5]</p>
  </dd>
  <dt>
    <p><strong>-g </strong><em>&lt;seconds&gt;</em></p>
  </dt>
  <dd>
    <p>Fragmented flow lifetime. [default=30]</p>
  </dd>
  <dt>
    <p><strong>-d </strong><em>&lt;seconds&gt;</em></p>
  </dt>
  <dd>
    <p>Idle flow lifetime (inactive timer). [default=60]</p>
  </dd>
  <dt>
    <p><strong>-e </strong><em>&lt;seconds&gt;</em></p>
  </dt>
  <dd>
    <p>Active flow lifetime (active timer). [default=300]</p>
  </dd>
  <dt>
    <p><strong>-n </strong><em>&lt;version&gt;</em></p>
  </dt>
  <dd>
    <p>NetFlow version for use (1, 5, 7). [default=5]</p>
  </dd>
  <dt>
    <p><strong>-a </strong><em>&lt;address&gt;</em></p>
  </dt>
  <dd>
    <p>Use <em>address</em> as source for NetFlow flow.</p>
  </dd>
  <dt>
    <p><strong>-X </strong><em>&lt;rule[,...]&gt;</em></p>
  </dt>
  <dd>
    <p>Comma separated list of interface name to SNMP-index conversion rules. Each <em>rule</em> consists of <em>interface base name</em> and <em>SNMP-index</em> base separated by colon (e.g. ppp:200). Final SNMP-index is sum of corresponding <em>SNMP-index base</em> and <em>interface number</em>.</p><p>In the above example SNMP-index of interface ppp11 is 211.</p><p>If interface name did not fit to any of conversion rules then SNMP-index will be taken from kernel.</p>
  </dd>
  <dt>
    <p><strong>-M</strong></p>
  </dt>
  <dd>
    <p>Use the netfilter mark as Type Of Service value.</p>
  </dd>
  <dt>
    <p><strong>-b </strong><em>&lt;flows&gt;</em></p>
  </dt>
  <dd>
    <p>Memory bulk size. [default=200 or 10000]</p><p>Note that maximum and default values depends on compiling options (<em>--with-membulk</em> parameter).</p>
  </dd>
  <dt>
    <p><strong>-m </strong><em>&lt;kilobytes&gt;</em></p>
  </dt>
  <dd>
    <p>Memory limit for flows cache (0=no limit). [default=0]</p>
  </dd>
  <dt>
    <p><strong>-q </strong><em>&lt;flows&gt;</em></p>
  </dt>
  <dd>
    <p>Pending queue length. [default=100]</p><p>Each captured packet at first puts into special buffer called `pending queue'. Purpose of this buffer is to separate most time-critical packet capture thread from other.</p>
  </dd>
  <dt>
    <p><strong>-B </strong><em>&lt;kilobytes&gt;</em></p>
  </dt>
  <dd>
    <p>Kernel capture buffer size (0=don't change). [default=0]</p><p>Increase kernel capture buffer size is most adequate way to prevent packets loss.</p><p>Note that maximum allowed size of the buffer in Linux limited and generally relatively small, so it should need to change the maximum: sysctl -w net/core/rmem_max=4194304</p>
  </dd>
  <dt>
    <p><strong>-r </strong><em>&lt;priority&gt;</em></p>
  </dt>
  <dd>
    <p>Real-time priority (0=disabled). [default=0]</p><p>If parameter greater then zero <strong>fprobe-ulog</strong> will use real-time scheduling policy to prevent packets loss. Note that possible values for this option depends on operating system.</p>
  </dd>
  <dt>
    <p><strong>-t </strong><em>&lt;B:N&gt;</em></p>
  </dt>
  <dd>
    <p>Emitting rate limit (0:0=no limit). [default=0:0]</p><p>Produce <em>N</em> nanosecond delay after each <em>B</em> bytes sent. This option may be useful with slow interfaces and slow collectors. Note that the suspension time may be longer than requested because the argument value is rounded up to an integer multiple of the sleep resolution (it depends on operating system and hardware) or because of the scheduling of other activity by the system.</p><p>See BUGS section.</p>
  </dd>
  <dt>
    <p><strong>-c </strong><em>&lt;directory&gt;</em></p>
  </dt>
  <dd>
    <p>Directory to chroot to.</p>
  </dd>
  <dt>
    <p><strong>-u </strong><em>&lt;user&gt;</em></p>
  </dt>
  <dd>
    <p>User to run as.</p>
  </dd>
  <dt>
    <p><strong>-v </strong><em>&lt;level&gt;</em></p>
  </dt>
  <dd>
    <p>Maximum displayed log level. (0=EMERG, 1=ALERT, 2=CRIT, 3=ERR, 4=WARNING, 5=NOTICE, 6=INFO, 7=DEBUG) [default=6]</p>
  </dd>
  <dt>
    <p><strong>-l </strong><em>&lt;[dst][:id]&gt;</em></p>
  </dt>
  <dd>
    <p>Log destination (0=none, 1=syslog, 2=stdout, 3=both) and log/pidfile identifier. [default=1]</p><p>This option allows to select opportune log destination and process identifier. The identifier helps to distinguish pidfile and logs of one <strong>fprobe-ulog</strong> process from other.</p><p>Note that if log destination contains `<em>stdout</em>' (equal 2 or 3) <strong>fprobe-ulog</strong> will run in foreground.</p>
  </dd>
  <dt>
    <p><strong>remote:port/local/type</strong></p>
  </dt>
  <dd>
    <p>Parameters <em>remote</em> and <em>port</em> are respectively define address and port of the NetFlow collector.</p><p>The <em>local</em> parameter allows binding certain local IP address with specified collector. If the parameter is omitted the value (if any) of <em>-a</em> option will be used.</p><p>The <em>type</em> parameter determines emitting behavior. It may be `m' for mirroring (by default) and `r' for collectors round-robin rotating.</p><p>You may specify multiple collectors.</p>
  </dd>

</dl>

        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">EXAMPLES</h2>
        <div class="sectioncontent">
<p><strong>fprobe-ulog -Xeth:100,ppp:200 localhost:2055</strong></p><p>Reasonable configuration to run under heavy load:</p><p><strong>fprobe-ulog -B4096 -r2 -q10000 -t10000:10000000 localhost:2055</strong></p><p>Send packets to collector at 10.1.1.1:2055 and distribute them between collectors at 10.1.1.2:2055 and at 10.1.1.3:2055 on a round-robin basis:</p><p><strong>fprobe-ulog 10.1.1.1:2055 10.1.1.2:2055//r 10.1.1.3:2055//r</strong></p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">BUGS</h2>
        <div class="sectioncontent">
<p><strong>Slow interfaces and slow collectors.</strong></p><p>There are may be problems with slow interfaces and slow collectors. It effects as emitted packets loss. On the one hand silent non-blocking sendto() implementation can't guarantee that packet was really sent to collector - it may be dropped by kernel due to outgoing buffer shortage (slow interface's problem) and on the other hand packet may be dropped on collector's machine due the similar reason - incoming buffer shortage (slow collector's problem).</p><p>Use <em>-t</em> option as workaround for this issue.</p><p><strong>Locally originated packets and their timestamps.</strong></p><p>Locally originated packets does not contains valid timestamps. Therefore <strong>fprobe-ulog</strong> fill timestamp by itself on act of receive such packet. Unfortunately, between capturing packet by netfilter code and receiving it by <strong>fprobe-ulog</strong> may occur certain lags, thus timestamps of locally originated packets generally inexact.</p><p>It is possible to fix this problem entirely by trivial kernel patch (see contrib/ipt_ULOG.patch).</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">RELATED TO fprobe-ulog&hellip;</h2>
        <div class="sectioncontent">
<p><a href="../man8/iptables.8.html"><strong>iptables</strong>(8)</a></strong></p><p><strong>http://freshmeat.net/projects/ulogd</strong></p><p><strong>http://www.cisco.com/go/netflow</strong></p>
        </div>
      </section>
<nav>
  <ul class="pager">
   <li class="previous"><a href="fprobe.8.html"><span aria-hidden="true">&larr;</span> fprobe.8: A netflow probe</a></li>
   <li class="next"><a href="fragiso.8.html">fragiso.8: Split rpm packages from an iso and reassemble the iso later on <span aria-hidden="true">&rarr;</span></a></li>
  </ul>
</nav>

  </div>
  <!-- jQuery (necessary for Bootstrap's JavaScript plugins) -->
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.2/jquery.min.js"></script>
  <!-- Include all compiled plugins (below), or include individual files as needed -->
  <script src="/js/bootstrap.min.js"></script>
  <script>
    (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
      (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
      m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
    })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

    ga('create', 'UA-60781387-1', 'auto');
    ga('send', 'pageview');

  </script>
</body>
</html>
