<!DOCTYPE html>
<html lang="en">
<head>
  <link href="https://fonts.googleapis.com/css?family=Fira+Mono:400,700&effect=destruction%7Cshadow-multiple" rel="stylesheet" type="text/css">
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>lcmaps_jobrep.mod: Jobrepository lcmaps plug-in</title>
  <link href="/css/bootstrap.min.css" rel="stylesheet">
  <link href="/css/manpage.css" rel="stylesheet">
  <link rel="apple-touch-icon" sizes="57x57" href="/icons/apple-icon-57x57.png">
  <link rel="apple-touch-icon" sizes="60x60" href="/icons/apple-icon-60x60.png">
  <link rel="apple-touch-icon" sizes="72x72" href="/icons/apple-icon-72x72.png">
  <link rel="apple-touch-icon" sizes="76x76" href="/icons/apple-icon-76x76.png">
  <link rel="apple-touch-icon" sizes="114x114" href="/icons/apple-icon-114x114.png">
  <link rel="apple-touch-icon" sizes="120x120" href="/icons/apple-icon-120x120.png">
  <link rel="apple-touch-icon" sizes="144x144" href="/icons/apple-icon-144x144.png">
  <link rel="apple-touch-icon" sizes="152x152" href="/icons/apple-icon-152x152.png">
  <link rel="apple-touch-icon" sizes="180x180" href="/icons/apple-icon-180x180.png">
  <link rel="icon" type="image/png" sizes="192x192" href="/icons/android-icon-192x192.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/icons/favicon-32x32.png">
  <link rel="icon" type="image/png" sizes="96x96" href="/icons/favicon-96x96.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/icons/favicon-16x16.png">
  <link rel="manifest" href="/icons/manifest.json">
  <meta name="msapplication-TileColor" content="#ffffff">
  <meta name="msapplication-TileImage" content="/icons/ms-icon-144x144.png">
  <meta name="theme-color" content="#ffffff">
  <meta name="description" content="Jobrepository lcmaps plug-in">
  <meta name="twitter:card" content="summary_large_image">
  <meta name="twitter:site" content="@CartaTech">
  <meta name="twitter:creator" content="@CartaTech">
  <meta name="twitter:title" content="lcmaps_jobrep.mod (8) manual">
  <meta name="twitter:description" content="Jobrepository lcmaps plug-in">
  <meta name="twitter:image" content="https://www.carta.tech/images/lcmaps-plugins-jobrep-lcmaps_jobrep.mod-8.png">
  <meta property="og:url" content="https://www.carta.tech/man-pages/man8/lcmaps_jobrep.mod.8.html" />
  <meta property="og:type" content="website" />
  <meta property="og:title" content="lcmaps_jobrep.mod (8) manual" />
  <meta property="og:description" content="Jobrepository lcmaps plug-in" />
  <meta property="fb:app_id" content="1241677679199500" />
  <meta property="og:image" content="https://www.carta.tech/images/lcmaps-plugins-jobrep-lcmaps_jobrep.mod-8.png" />
  <meta property="og:image:width" content="600" />
  <meta property="og:image:height" content="315" />
</head>
<body>
  <div class="container final">
          <div class="page-header">
        <h1 class="font-effect-destruction">lcmaps_jobrep.mod<small> (8)</small></h1>
        <p class="lead">Jobrepository lcmaps plug-in</p>
      </div>

    <ol class="breadcrumb" itemscope itemtype="http://schema.org/BreadcrumbList">
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/">
      <span itemprop="name">Carta.tech</span>
    </a>
    <meta itemprop="position" content="1" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/">
      <span itemprop="name">Man Pages</span>
    </a>
    <meta itemprop="position" content="2" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/man8/">
      <span itemprop="name">System administration commands</span>
    </a>
    <meta itemprop="position" content="3" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/man8/lcmaps_jobrep.mod.8.html">
      <span itemprop="name">lcmaps_jobrep.mod: Jobrepository lcmaps plug-in</span>
    </a>
    <meta itemprop="position" content="4" />
  </li>
</ol>
<ol class="breadcrumb" itemscope itemtype="http://schema.org/BreadcrumbList">
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/">
      <span itemprop="name">Carta.tech</span>
    </a>
    <meta itemprop="position" content="1" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/packages/">
      <span itemprop="name">Packages</span>
    </a>
    <meta itemprop="position" content="2" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/packages/lcmaps-plugins-jobrep/">
      <span itemprop="name">lcmaps-plugins-jobrep</span>
    </a>
    <meta itemprop="position" content="3" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/man8/lcmaps_jobrep.mod.8.html">
      <span itemprop="name">lcmaps_jobrep.mod: Jobrepository lcmaps plug-in</span>
    </a>
    <meta itemprop="position" content="4" />
  </li>
</ol>
    
      <section>
        <h2 class="font-effect-shadow-multiple">SYNOPSIS</h2>
        <div class="sectioncontent">
<p><strong>lcmaps_jobrep.mod</strong> [<strong>--test</strong>] --dsn <em>&lt;Database</em>Service<em>Name&gt;</em> --username <em>&lt;database</em>user&gt; --password <em>&lt;database</em>password&gt;</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">DESCRIPTION</h2>
        <div class="sectioncontent">
<p>The LCMAPS Jobrepository plug-in stores credentials and the resulting account mappings into a relational database. This plugin will link up all the known in-process information from LCMAPS core memory and stores it in a database. This plug-in uses ODBC (http://en.wikipedia.org/wiki/ODBC) to connect to the database.</p><p>The current state of the mappings between various credentials and Unix accounts is stored in an open database on disk, but this information can change over time through (regular) system administrative interventions. This state is now preserved in a relational database with the added benefit of being accessible by other systems, e.g. GridSAFE and build-up an easy to backup historic view on the mapping state.</p><p>Quite some systems seem to dig up data by trawling log files, e.g. to construct accounting data records. This method is subjected to the settings of the sub-systems which control the format of the log file output. Log trawling tools are interacting with the log files as a glorified API. This lowers the ability for tools, e.g. LCMAPS, to alter their log output. By offering the LCMAPS Jobrepository plug-in as an alternative with the added benefit of offering the data in a structured fine-grained database with the ability of an historic view the intend is to avoid the need and/or requirement for log file trawling.</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">DATABASE SCHEMA EXTENSIONS</h2>
        <div class="sectioncontent">
<p>The schema can be used to link up account mapping and/or credential mapping results originating from other credential types and link up more fine grained details from the specific work environment, i.e. a Gatekeeper and GridFTPd will be able to add service specific information together with the mapping results.</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">FUTURE</h2>
        <div class="sectioncontent">
<p>The LCMAPS Jobrepository plug-in is currently limited to MySQL and MariaDB despite its usage of the ODBC database interface. The intend is to remove this limitation and make the plug-in work with other database, e.g. PostgreSQL, Oracle and SQLite.</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">OPTIONS</h2>
        <div class="sectioncontent">

<dl class='dl-vertical'>
  <dt>
    <p><strong>--test</strong></p>
  </dt>
  <dd>
    <p>When enabled the plug-in will only test if the connection to the database can be established through the ODBC coupling. The test will verify the correctness of the DSN, Username and Password combination. The plug-in will announce an LCMAPS SUCCESS when the connection was established, and a FAILURE when it was not able to establish the connection.</p>
  </dd>
  <dt>
    <p><strong>--dsn</strong><em>&lt;Database</em><strong>Service</strong><em>Name&gt;</em></p>
  </dt>
  <dd>
    <p>This will select the Data Source Name (DSN) that has been set in a <strong>odbc.ini</strong> file. Use the <strong>odbc.ini</strong> file to configure the database driver, server/host, port number and database name. See below for an example odbc.ini file.</p>
  </dd>
  <dt>
    <p><strong>--username</strong><em>&lt;database</em><strong>username&gt;</strong></p>
  </dt>
  <dd>
    <p>Specifies the database username that the LCMAPS module must use to authorize itself with the database.</p>
  </dd>
  <dt>
    <p><strong>--password</strong><em>&lt;database</em><strong>password&gt;</strong></p>
  </dt>
  <dd>
    <p>Specifies the database password that the LCMAPS module must use to authorize itself with. You can omit the setting if you set the password in the odbc.ini file.</p><p><strong>WARNING</strong>: Be careful to assess the read permissions on the lcmaps.db file to be exclusive to the service using this file, i.e. it's probably best to make the file exclusive to root:root.</p>
  </dd>

</dl>

        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">RETURN VALUES</h2>
        <div class="sectioncontent">

<dl class='dl-vertical'>
  <dt>
    <p><strong>LCMAPS_MOD_SUCCESS</strong></p>
  </dt>
  <dd>
    <p>Success.</p>
  </dd>
  <dt>
    <p><strong>LCMAPS_MOD_FAIL</strong></p>
  </dt>
  <dd>
    <p>Failure.</p>
  </dd>

</dl>

        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">EXAMPLES</h2>
        <div class="sectioncontent">
<p>Notice the <strong>--dsn &lt;value&gt;</strong> matches the <strong>DSN</strong> shown in the .ini <strong>section header</strong>. Also notice that the posix_enf plug-in is executed <strong>after</strong> the jobrep plug-in. The motivation is to be able to use privilege separation and with that protect the database password.</p>
<dl class='dl-vertical'>
  <dt>
    <p><strong>Example lcmaps.db</strong></p>
  </dt>
  <dd>
    
<pre>
jobrep      = "lcmaps_jobrep.mod"
              "--dsn <strong>MySQL-test</strong>"
              "--username root"
              "--password worteltjes"

example_plugin_policy:
verifyproxy -&gt; vomslocalgroup
vomslocalgroup -&gt; vomspoolaccount
vomspoolaccount -&gt; tracking_groupid
tracking_groupid -&gt; jobrep
jobrep -&gt; posix_enf
</pre>

  </dd>
  <dt>
    <p><strong>Example /etc/odbc.ini file:</strong></p>
  </dt>
  <dd>
    
<pre>
[<strong>MySQL-test</strong>]
Description = MySQL test database
Driver      = MySQL
SERVER      = 127.0.0.1
PORT        = 3306
DATABASE    = jobrepository
</pre>

  </dd>

</dl>

        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">SUPPORTED&nbsp;INSTALLATIONS</h2>
        <div class="sectioncontent">

<dl class='dl-vertical'>
  <dt>
    <p><strong>Tested front-end tools and services</strong></p>
  </dt>
  <dd>
    <p>gLExec</p><p>globus-gridftp-server</p><p>globus-gatekeeper</p>
  </dd>
  <dt>
    <p><strong>Likely to work</strong></p>
  </dt>
  <dd>
    <p>SCAS</p><p>lcmaps-rest (only the Full-SSL interface)</p><p>gsi-openssh-server</p>
  </dd>
  <dt>
    <p><strong>Front-ends that will likely NOT work</strong></p>
  </dt>
  <dd>
    <p>WMProxy</p><p>StoRM backend</p>
  </dd>

</dl>

        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">LIMITATIONS</h2>
        <div class="sectioncontent">
<p>The front-ends which do not use an LCMAPS interface that provides certificates can currently not be supported. It is a requirement for the 1.5 version to be able to work from a certificate chain.</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">BUGS</h2>
        <div class="sectioncontent">
<p>Please report any errors to the Nikhef Grid Middleware Security Team &lt;grid-mw-security-support@nikhef.nl&gt;.</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">RELATED TO lcmaps_jobrep.mod&hellip;</h2>
        <div class="sectioncontent">
<p><strong>lcmaps</strong>(8), <a href="../man8/lcmaps_jobrep.mod.8.html"><strong>lcmaps_jobrep.mod</strong>(8)</a>, <a href="../man1/mysql.1.html"><strong>mysql</strong>(1)</a>.</p><p>More information can be found on-line at <strong>https://wiki.nikhef.nl/grid/Site_Access_Control</strong> the Nikhef Wiki on Site Access Control and <strong>https://wiki.nikhef.nl/grid/LCMAPS</strong> the Nikhef Wiki on LCMAPS and other plug-ins.</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">AUTHOR</h2>
        <div class="sectioncontent">
<p>The Jobrepository and the LCMAPS plug-ins were written by the Nikhef Grid Middleware Security Team &lt;grid-mw-security@nikhef.nl&gt;.</p>
        </div>
      </section>
<nav>
  <ul class="pager">
   <li class="previous"><a href="lcmaps_dummy_good.mod.8.html"><span aria-hidden="true">&larr;</span> lcmaps_dummy_good.mod.8: Dummy lcmaps plugin that always returns success</a></li>
   <li class="next"><a href="lcmaps_ldap_enf.mod.8.html">lcmaps_ldap_enf.mod.8: Lcmaps plugin to update ldap according to credentials <span aria-hidden="true">&rarr;</span></a></li>
  </ul>
</nav>

  </div>
  <!-- jQuery (necessary for Bootstrap's JavaScript plugins) -->
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.2/jquery.min.js"></script>
  <!-- Include all compiled plugins (below), or include individual files as needed -->
  <script src="/js/bootstrap.min.js"></script>
  <script>
    (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
      (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
      m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
    })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

    ga('create', 'UA-60781387-1', 'auto');
    ga('send', 'pageview');

  </script>
</body>
</html>
