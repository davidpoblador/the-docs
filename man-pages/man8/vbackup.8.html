<!DOCTYPE html>
<html lang="en">
<head>
  <link href="https://fonts.googleapis.com/css?family=Fira+Mono:400,700&effect=destruction%7Cshadow-multiple" rel="stylesheet" type="text/css">
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>vbackup: A modular backup program</title>
  <link href="/css/bootstrap.min.css" rel="stylesheet">
  <link href="/css/manpage.css" rel="stylesheet">
  <link rel="apple-touch-icon" sizes="57x57" href="/icons/apple-icon-57x57.png">
  <link rel="apple-touch-icon" sizes="60x60" href="/icons/apple-icon-60x60.png">
  <link rel="apple-touch-icon" sizes="72x72" href="/icons/apple-icon-72x72.png">
  <link rel="apple-touch-icon" sizes="76x76" href="/icons/apple-icon-76x76.png">
  <link rel="apple-touch-icon" sizes="114x114" href="/icons/apple-icon-114x114.png">
  <link rel="apple-touch-icon" sizes="120x120" href="/icons/apple-icon-120x120.png">
  <link rel="apple-touch-icon" sizes="144x144" href="/icons/apple-icon-144x144.png">
  <link rel="apple-touch-icon" sizes="152x152" href="/icons/apple-icon-152x152.png">
  <link rel="apple-touch-icon" sizes="180x180" href="/icons/apple-icon-180x180.png">
  <link rel="icon" type="image/png" sizes="192x192" href="/icons/android-icon-192x192.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/icons/favicon-32x32.png">
  <link rel="icon" type="image/png" sizes="96x96" href="/icons/favicon-96x96.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/icons/favicon-16x16.png">
  <link rel="manifest" href="/icons/manifest.json">
  <meta name="msapplication-TileColor" content="#ffffff">
  <meta name="msapplication-TileImage" content="/icons/ms-icon-144x144.png">
  <meta name="theme-color" content="#ffffff">
  <meta name="description" content="A modular backup program">
  <meta name="twitter:card" content="summary_large_image">
  <meta name="twitter:site" content="@CartaTech">
  <meta name="twitter:creator" content="@CartaTech">
  <meta name="twitter:title" content="vbackup (8) manual">
  <meta name="twitter:description" content="A modular backup program">
  <meta name="twitter:image" content="https://www.carta.tech/images/vbackup-vbackup-8.png">
  <meta property="og:url" content="https://www.carta.tech/man-pages/man8/vbackup.8.html" />
  <meta property="og:type" content="website" />
  <meta property="og:title" content="vbackup (8) manual" />
  <meta property="og:description" content="A modular backup program" />
  <meta property="fb:app_id" content="1241677679199500" />
  <meta property="og:image" content="https://www.carta.tech/images/vbackup-vbackup-8.png" />
  <meta property="og:image:width" content="600" />
  <meta property="og:image:height" content="315" />
</head>
<body>
  <div class="container final">
          <div class="page-header">
        <h1 class="font-effect-destruction">vbackup<small> (8)</small></h1>
        <p class="lead">A modular backup program</p>
      </div>

    <ol class="breadcrumb" itemscope itemtype="http://schema.org/BreadcrumbList">
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/">
      <span itemprop="name">Carta.tech</span>
    </a>
    <meta itemprop="position" content="1" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/">
      <span itemprop="name">Man Pages</span>
    </a>
    <meta itemprop="position" content="2" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/man8/">
      <span itemprop="name">System administration commands</span>
    </a>
    <meta itemprop="position" content="3" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/man8/vbackup.8.html">
      <span itemprop="name">vbackup: A modular backup program</span>
    </a>
    <meta itemprop="position" content="4" />
  </li>
</ol>
<ol class="breadcrumb" itemscope itemtype="http://schema.org/BreadcrumbList">
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/">
      <span itemprop="name">Carta.tech</span>
    </a>
    <meta itemprop="position" content="1" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/packages/">
      <span itemprop="name">Packages</span>
    </a>
    <meta itemprop="position" content="2" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/packages/vbackup/">
      <span itemprop="name">vbackup</span>
    </a>
    <meta itemprop="position" content="3" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/man8/vbackup.8.html">
      <span itemprop="name">vbackup: A modular backup program</span>
    </a>
    <meta itemprop="position" content="4" />
  </li>
</ol>
    
      <section>
        <h2 class="font-effect-shadow-multiple">SYNOPSIS</h2>
        <div class="sectioncontent">
<p><strong>vbackup</strong> [<em>OPTIONS</em>] [ --check ] <em>name</em></p><p><strong>vbackup</strong> [<em>OPTIONS</em>] { --list | --help [<em>module</em>] | --version }</p><p><strong>vbackup</strong> [<em>OPTIONS</em>] --rc --list [<em>name</em>]</p><p><strong>vbackup</strong> [<em>OPTIONS</em>] --rc --init <em>name</em></p><p><strong>vbackup</strong> [<em>OPTIONS</em>] --rc { --add | --delete } <em>config</em></p><p><strong>vbackup</strong> [<em>OPTIONS</em>] --rc { --enable | --disable } <em>config</em> <em>name</em></p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">DESCRIPTION</h2>
        <div class="sectioncontent">
<p><strong>vbackup</strong> is a program that performs system backups. The backup strategy is specified with a set of minimal configuration files that exist in directories under /etc/vbackup. See the quickstart section for quick first-time setup.</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">OPTIONS</h2>
        <div class="sectioncontent">

<dl class='dl-vertical'>
  <dt>
    <p><strong>-d &lt;level&gt;</strong></p>
  </dt>
  <dd>
    <p>Set the message level to &lt;level&gt; (default level is 8): 1: Fatal, 2: Error, 3: Warning, 4: Note, 5-7: Information (5: Rare messages, 6: Useful message, 7: Not so useful), 10-14: Debug messages that don't flood, 15-19: Debug messages that flood</p>
  </dd>
  <dt>
    <p><strong> --dir &lt;directory&gt;</strong></p>
  </dt>
  <dd>
    <p>Set the configuration directory. This is only useful in case you want to implement (e.g.) user backups, so each user may have her own configuration directory.</p>
  </dd>

</dl>

        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">COMMANDS</h2>
        <div class="sectioncontent">
<p>In all commands bellow: <strong>&lt;name&gt;</strong> refers to the name of a backup strategy (e.g. 0, 5, test0, test5, etc). <strong>&lt;config&gt;</strong> refers to a configuration file name and it is in the form XX-NAME.TYPE where XX is a number indicating a priority, NAME is an arbitrary name and TYPE is the coresponding module name (e.g. xfsdump) (example: 50-home.xfsdump, 20-mbr.mbr, 10-remote.nfsmount, etc). <strong>&lt;module&gt;</strong> refers to a module name (e.g. xfsdump)</p>
<dl class='dl-vertical'>
  <dt>
    <p><strong>--check &lt;name&gt;</strong></p>
  </dt>
  <dd>
    <p>Check configuration files for a specific backup strategy (name). Each module checks its own configuration file.</p>
  </dd>
  <dt>
    <p><strong>--list</strong></p>
  </dt>
  <dd>
    <p>List all available modules, their version and a brief description.</p>
  </dd>
  <dt>
    <p><strong>--help [&lt;module&gt;]</strong></p>
  </dt>
  <dd>
    <p>Show some help. If a module is passed as argument then it will display some help about that module. This is where the module configuration parameters are shown.</p>
  </dd>
  <dt>
    <p><strong>--version</strong></p>
  </dt>
  <dd>
    <p>Guess what...</p>
  </dd>
  <dt>
    <p><strong>--rc --list [&lt;name&gt;]</strong></p>
  </dt>
  <dd>
    <p>List available backup types in the rc.d directory or (if name is specified) list enable scripts in a backup strategy. This is similar to browser the directories with ls.</p>
  </dd>
  <dt>
    <p><strong>--rc --init &lt;name&gt;</strong></p>
  </dt>
  <dd>
    <p>Create/initialize a new backup strategy. It will ask a couple of questions and then it will create the directory and populate it with a vbackup.conf file based on the answers.</p>
  </dd>
  <dt>
    <p><strong>--rc --add &lt;config&gt;</strong></p>
  </dt>
  <dd>
    <p>Add a new configuration file to the rc.d directory. It will ask a number of questions and the create the configuration file based on the sample file.</p>
  </dd>
  <dt>
    <p><strong>--rc --delete &lt;config&gt;</strong></p>
  </dt>
  <dd>
    <p>Delete an existing configuration file from the rc.d directory.</p>
  </dd>
  <dt>
    <p><strong>--rc --enable &lt;config&gt; &lt;name&gt;</strong></p>
  </dt>
  <dd>
    <p>Enable a configuration file for a backup strategy by creating a symlink.</p>
  </dd>
  <dt>
    <p><strong>--rc --disable &lt;config&gt; &lt;name&gt;</strong></p>
  </dt>
  <dd>
    <p>Disable a configuration file for a backup strategy by remove the symlink.</p>
  </dd>

</dl>

        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">QUICKSTART</h2>
        <div class="sectioncontent">
<p>Use the <a href="../man8/vbackup-wizard.8.html"><strong>vbackup-wizard</strong>(8)</a> for quickstarting. Most probably that's what you will do the first time.</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">CONFIGURATION</h2>
        <div class="sectioncontent">
<p>The backup strategy is specified with a set of minimal configuration files that exist in directories under /etc/vbackup. Each directory is named backup.XXXXX where XXXXX is the name of the backup strategy.</p><p>For example, a simplistic backup strategy may have two directories named backup.0 and backup.5. Each of them will include configuration files that describe level 0 and level 5 system backups.</p><p>It is advised to have a directory named rc.d under /etc/vbackup that will hold all configuration files. After that, individual backup.XXXXX directories will only contain links to those files. It is absolutely sure that some files will be the same among different backup strategies and trying to keep them synchronized will be an uneeded pain.</p><p>Each configuration file must contain a vbackup.conf file that specifies some global configuration options (like a destination directory). Next, it must contain one or more module configuration files. The available modules can be seen using the <strong>--list</strong> parameter. Each configuration file is in the form <strong>something</strong>.<strong>modulename</strong>. It is suggested that <strong>something</strong> is in the form of <strong>NN-string</strong> where <strong>NN</strong> is a two (or more) digit number and <strong>string</strong> is a descriptive string. For example, a good name is "00-myserver.nfsmount". This clearly shows that a path in myserver will be mounted using nfs and it will help you when 2 years later you'll attempt to edit those files. The number prefix helps in determining the sorting order. <em>All configuration files are examined in a sorted order</em>.</p><p>The complete documentation is in the README files.</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">BACKUP</h2>
        <div class="sectioncontent">
<p>After having created at least one backup.XXXXX directory in /etc/vbackup, you can perform that backup by running "vbackup XXXXX". This will first source the vbackup.conf and it will then check for existing configuration files. For each one that is found, it will determine the appropriate backup module and run it.</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">MODULES</h2>
        <div class="sectioncontent">

<dl class='dl-vertical'>
  <dt>
    <p>dpkg</p>
  </dt>
  <dd>
    <p>Backup the debian package list. Small space requirement and very useful for restoring a debian system.</p>
  </dd>
  <dt>
    <p>exec</p>
  </dt>
  <dd>
    <p>Execute shell commands. Allows custom things to happen between steps (e.g. creating a tar of the whole backup directory or removing old backups).</p>
  </dd>
  <dt>
    <p>exist</p>
  </dt>
  <dd>
    <p>Check whether a file or directory exists. This can be used to determine whether a filesystem is actually mounted or not. <em>It is strongly advised to use this when you're not using mount or nfsmount!</em></p>
  </dd>
  <dt>
    <p>ftar</p>
  </dt>
  <dd>
    <p>Use tar to backup a filesystem but use find to locate the files to backup. This is simillar to the tar method but is not that good for incremental backups. If you restore a system that was incrementally backed up using this method it will have all files that were deleted between intermediate backups too. The advantage of this method is that you can use regular expression to filter files that will be backed up.</p>
  </dd>
  <dt>
    <p>mbr</p>
  </dt>
  <dd>
    <p>Backup MBRs from all disks and their Partition Tables. It will also backup MD and LVM information if any of those is detected. Extremely useful with very low space requirements.</p>
  </dd>
  <dt>
    <p>mount</p>
  </dt>
  <dd>
    <p>Mount a local filesystem, in case you have an unmounted filesystem to perform backups (for example a spare or external disk).</p>
  </dd>
  <dt>
    <p>mysql</p>
  </dt>
  <dd>
    <p>Backup some or all MySQL databases.</p>
  </dd>
  <dt>
    <p>nfsmount</p>
  </dt>
  <dd>
    <p>Mount a remote filesystem using NFS.</p>
  </dd>
  <dt>
    <p>off</p>
  </dt>
  <dd>
    <p>Don't do anything at all. Very useful for disabling configuration files. For example, if you rename 50-main.pgsql to 50-main.pgsql.off it will remain in the configuration directory by will be disabled.</p>
  </dd>
  <dt>
    <p>openldap</p>
  </dt>
  <dd>
    <p>Backup OpenLDAP database and configuration (if it's stored in LDAP).</p>
  </dd>
  <dt>
    <p>pgsql</p>
  </dt>
  <dd>
    <p>Backup some or all PostgreSQL databases.</p>
  </dd>
  <dt>
    <p>rm</p>
  </dt>
  <dd>
    <p>Remove a directory recursively. Useful when storing the backup to a temporary directory before (e.g.) moving it to another system or compressing it.</p>
  </dd>
  <dt>
    <p>rpm</p>
  </dt>
  <dd>
    <p>Backup RPM database.</p>
  </dd>
  <dt>
    <p>scp</p>
  </dt>
  <dd>
    <p>Copy files to a remote system using scp. Very good to copy backups to a remote systep. It will copy directories recursively so it can be used to copy a full backup to a remote system.</p>
  </dd>
  <dt>
    <p>tar</p>
  </dt>
  <dd>
    <p>Perform incremental backups using the listed-incremental format of GNU tar. <em>Use the --noplugin parameter when editing tar configuration files (!!!)</em>.</p>
  </dd>
  <dt>
    <p>umount</p>
  </dt>
  <dd>
    <p>Umount a filesystem that was previously mounted. This can be used for local and remote mounts. The configuration of this module is compatible with the configuration of mount and nfsmount modules. This means that you can just create a link to the coresponding mount configuration file to have it unount the filesystem. (For example, link 00-remote.nfsmount to 99-remount.umount)</p>
  </dd>
  <dt>
    <p>x509</p>
  </dt>
  <dd>
    <p>Encrypt a file or a directory using an x509 certificate. This way backups can be safely stored in remote systems.</p>
  </dd>
  <dt>
    <p>xfsdump</p>
  </dt>
  <dd>
    <p>Perform incremental backups using xfsdump. This is by far the very best way to backup an XFS filesystem (as a whole). It works extremely well, it is very reliable and it is able to do live backups. It is also very easy to restore all or part of the backed-up data using the interactive xfsrestore utility (xfsrestore -i).</p>
  </dd>

</dl>

        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">EXTENDING</h2>
        <div class="sectioncontent">
<p>You can extend vbackup by writing very simple scripts that will be combined with other scripts. Read the README.dev file for more information and have a look at other modules.</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">AUTHOR - COPYRIGHT</h2>
        <div class="sectioncontent">
<p>vbackup is written and maintained by Stefanos Harhalakis. Copyright (c) 2006-2012 Harhalakis Stefanos</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">CONTACT</h2>
        <div class="sectioncontent">
<p>For bugs, requests, ideas, comments or anything else (except spam) contact &lt;v13@v13.gr&gt;</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">LICENSE</h2>
        <div class="sectioncontent">
<p>This program is free software; you can redistribute it and/or modify it under the terms of the GNU General Public License as published by the Free Software Foundation; either version 3 of the License, or (at your option) any later version.</p><p>This program is distributed in the hope that it will be useful, but WITHOUT ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU General Public License for more details.</p><p>If GPLv3 doesn't fit your needs (BSD?) feel free to contact me and I may release it with another license too.</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">RELATED TO vbackup&hellip;</h2>
        <div class="sectioncontent">
<p><a href="../man8/vbackup-wizard.8.html"><strong>vbackup-wizard</strong>(8)</a></p>
        </div>
      </section>
<nav>
  <ul class="pager">
   <li class="previous"><a href="vattribute.8.html"><span aria-hidden="true">&larr;</span> vattribute.8: Sets/gets attributes of vservers</a></li>
   <li class="next"><a href="vbackup-wizard.8.html">vbackup-wizard.8: A wizard for basic vbackup configuration <span aria-hidden="true">&rarr;</span></a></li>
  </ul>
</nav>

  </div>
  <!-- jQuery (necessary for Bootstrap's JavaScript plugins) -->
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.2/jquery.min.js"></script>
  <!-- Include all compiled plugins (below), or include individual files as needed -->
  <script src="/js/bootstrap.min.js"></script>
  <script>
    (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
      (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
      m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
    })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

    ga('create', 'UA-60781387-1', 'auto');
    ga('send', 'pageview');

  </script>
</body>
</html>
