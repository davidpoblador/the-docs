<!DOCTYPE html>
<html lang="en">
<head>
  <link href="https://fonts.googleapis.com/css?family=Fira+Mono:400,700&effect=destruction%7Cshadow-multiple" rel="stylesheet" type="text/css">
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>dacs_transform: Rule-based document transformation</title>
  <link href="/css/bootstrap.min.css" rel="stylesheet">
  <link href="/css/manpage.css" rel="stylesheet">
  <link rel="apple-touch-icon" sizes="57x57" href="/icons/apple-icon-57x57.png">
  <link rel="apple-touch-icon" sizes="60x60" href="/icons/apple-icon-60x60.png">
  <link rel="apple-touch-icon" sizes="72x72" href="/icons/apple-icon-72x72.png">
  <link rel="apple-touch-icon" sizes="76x76" href="/icons/apple-icon-76x76.png">
  <link rel="apple-touch-icon" sizes="114x114" href="/icons/apple-icon-114x114.png">
  <link rel="apple-touch-icon" sizes="120x120" href="/icons/apple-icon-120x120.png">
  <link rel="apple-touch-icon" sizes="144x144" href="/icons/apple-icon-144x144.png">
  <link rel="apple-touch-icon" sizes="152x152" href="/icons/apple-icon-152x152.png">
  <link rel="apple-touch-icon" sizes="180x180" href="/icons/apple-icon-180x180.png">
  <link rel="icon" type="image/png" sizes="192x192" href="/icons/android-icon-192x192.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/icons/favicon-32x32.png">
  <link rel="icon" type="image/png" sizes="96x96" href="/icons/favicon-96x96.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/icons/favicon-16x16.png">
  <link rel="manifest" href="/icons/manifest.json">
  <meta name="msapplication-TileColor" content="#ffffff">
  <meta name="msapplication-TileImage" content="/icons/ms-icon-144x144.png">
  <meta name="theme-color" content="#ffffff">
  <meta name="description" content="Rule-based document transformation">
  <meta name="twitter:card" content="summary_large_image">
  <meta name="twitter:site" content="@CartaTech">
  <meta name="twitter:creator" content="@CartaTech">
  <meta name="twitter:title" content="dacs_transform (8) manual">
  <meta name="twitter:description" content="Rule-based document transformation">
  <meta name="twitter:image" content="https://www.carta.tech/images/dacs-dacs_transform-8.png">
  <meta property="og:url" content="https://www.carta.tech/man-pages/man8/dacs_transform.8.html" />
  <meta property="og:type" content="website" />
  <meta property="og:title" content="dacs_transform (8) manual" />
  <meta property="og:description" content="Rule-based document transformation" />
  <meta property="fb:app_id" content="1241677679199500" />
  <meta property="og:image" content="https://www.carta.tech/images/dacs-dacs_transform-8.png" />
  <meta property="og:image:width" content="600" />
  <meta property="og:image:height" content="315" />
</head>
<body>
  <div class="container final">
          <div class="page-header">
        <h1 class="font-effect-destruction">dacs_transform<small> (8)</small></h1>
        <p class="lead">Rule-based document transformation</p>
      </div>

    <ol class="breadcrumb" itemscope itemtype="http://schema.org/BreadcrumbList">
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/">
      <span itemprop="name">Carta.tech</span>
    </a>
    <meta itemprop="position" content="1" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/">
      <span itemprop="name">Man Pages</span>
    </a>
    <meta itemprop="position" content="2" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/man8/">
      <span itemprop="name">System administration commands</span>
    </a>
    <meta itemprop="position" content="3" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/man8/dacs_transform.8.html">
      <span itemprop="name">dacs_transform: Rule-based document transformation</span>
    </a>
    <meta itemprop="position" content="4" />
  </li>
</ol>
<ol class="breadcrumb" itemscope itemtype="http://schema.org/BreadcrumbList">
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/">
      <span itemprop="name">Carta.tech</span>
    </a>
    <meta itemprop="position" content="1" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/packages/">
      <span itemprop="name">Packages</span>
    </a>
    <meta itemprop="position" content="2" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/packages/dacs/">
      <span itemprop="name">dacs</span>
    </a>
    <meta itemprop="position" content="3" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/man8/dacs_transform.8.html">
      <span itemprop="name">dacs_transform: Rule-based document transformation</span>
    </a>
    <meta itemprop="position" content="4" />
  </li>
</ol>
    
      <section>
        <h2 class="font-effect-shadow-multiple">SYNOPSIS</h2>
        <div class="sectioncontent">
<p><strong>dacs_transform</strong> [<em>\m[blue]</em><strong>dacsoptions</strong>\m[]\s-2\u[1]\d\s+2]</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">DESCRIPTION</h2>
        <div class="sectioncontent">
<p>This web service is part of the <strong>DACS</strong> suite.</p><p><strong>dacs_transform</strong> can perform a variety of transformations on an original document to produce a new document. Transformations such as redaction, insertion, and replacement are available. What makes the program interesting is that any transformation can depend on a rule that is evaluated at run-time, allowing a new document to be tailored for a specific user or context.</p><p>The program looks for embedded markup (meta-information) called directives in the input document. A directive specifies a conditional (rule-based) or unconditional operation that is evaluated at that point in the document to determine the output text that is to be interpolated into the program&apos;s output. Text outside of a directive is copied verbatim to the program&apos;s output.</p><p>One application of this software is to produce different versions of documentation from the same input. For example, consider a requirement to produce technical documentation for a series of printers where the printers are substantially the same (their documentation shares a lot of the same text and graphics) but each model has unique features or capabilities. Instead of producing a single manual that describes all models, which makes the manual larger and more complicated than necessary, this software provides a convenient way to create model-specific documentation from the same input. This means that the documentation common to all printers is shared by all of the manuals, yet the manual for each printer is easily customized for the particular printer.</p><p><strong>Note</strong></p><p><strong>dacs_transform</strong> is similar in concept or purpose to the Apache modules \m[blue]<strong>mod_include</strong>\m[]\s-2\u[2]\d\s+2 and \m[blue]<strong>mod_rewrite</strong>\m[]\s-2\u[3]\d\s+2. It is not an Apache module, however, and can therefore be used with any web server, and provides rich, rule-based selection of regions for processing. It can be used in conjunction with \m[blue]<strong>mod_ext_filter</strong>\m[]\s-2\u[4]\d\s+2. It is also conceptually similar to languages like \m[blue]<strong>PHP</strong>\m[]\s-2\u[5]\d\s+2 where ordinary content and special processing directives can be combined within a document.</p><p>The \m[blue]<a href="../man1/dacstransform.1.html"><strong>dacstransform</strong>(1)</a></strong>\m[]\s-2\u[6]\d\s+2 command provides similar functionality from the command line. The \m[blue]<strong>transform()</strong>\m[]\s-2\u[7]\d\s+2 function is also available.</p><p><strong>dacs_transform</strong> and <strong>dacstransform</strong> can be particularly useful tools for generating both static and dynamic web pages from template files.</p><p>For security reasons, access to <strong>dacs_transform</strong> is disabled by default. Some configuration capabilities and features expected in a production version have not been implemented. If there are multiple identities, only one identity (<strong>REMOTE_USER</strong>) is available during rule processing.</p><h3>Regions</h3>
<p>A directive delimits a region within the source document. A directive that is <em>enabled</em> processes its region in some way, otherwise the directive and its region are <em>disabled</em> and produce no output. Whether a directive is enabled or disabled depends on the <strong>DACS</strong> rule that is named in the directive. Zero-length regions (i.e., regions with no content) are allowed.</p><p>The output that is produced by <strong>dacs_transform</strong> depends on input that is copied verbatim, the selection of regions in the original document, the document&apos;s rules, region evaluation, and the context in which the rules are evaluated. Rules can not only inspect the requesting user&apos;s identity (based on the environment variable <strong>REMOTE_USER</strong>), including roles (obtained from <strong>DACS_ROLES</strong>), they can employ C-like expressions and a variety of built-in functions (see \m[blue]<a href="../man5/dacs.exprs.5.html"><strong>dacs.exprs</strong>(5)</a></strong>\m[]\s-2\u[8]\d\s+2). Directives are <em>not</em> emitted as part of the transformed document.</p><p>Every conditional region is given a name. With the exception of reserved names, region names have no particular significance to <strong>dacs_transform</strong>; they are simply attributes to which rules may refer. Each document will usually have one or more rules associated with it.</p><p>For example, an author might assign a name representing a security level to each region in a document: public, secret, top-secret, and so on. For each of these security levels, a specified set of rules would be examined by <strong>dacs_transform</strong> to decide which identities are granted (or denied) access to the corresponding region. In this way, different users may be given different versions of the same source document; some users might not be able to view secret and top-secret content, other might be able to view all content.</p><p>A document that combined text written in different languages might name regions English, French, Russian, and so on; the English regions might be enabled by <strong>dacs_transform</strong> based on the user&apos;s <strong>DACS</strong> role or the user&apos;s stored preference for that language. Another document might contain region names corresponding to time zones: PST, MST, EST, and so on. A rule might then require the time zone associated with the location corresponding to the user&apos;s apparent IP address to match that of the region being tested. Or an audio stream or speech synthesis content might be automatically enabled if a user has a role that indicates she is visually impaired.</p><p>At present, no facility is available to assist with working with meta-information. It must either be added manually or generated by an application that understands how to insert meta-information in its output.</p><p><strong>Directive and Attribute Syntax</strong></p><p>In an HTML document served by <strong>dacs_transform</strong>, a region consists of a single directive or is delimited by a pair of directives. All other document content is ignored with respect to transformation. By default, directives are contained within HTML-style comments and the start of a directive is indicated by a line having the initial nine characters "&lt;!--DACS" and ending with the normal HTML end-of-comment syntax, "--&gt;". Such a line is unlikely to occur in a document by accident, but the syntax is \m[blue]<strong>configurable</strong>\m[]\s-2\u[9]\d\s+2.</p><p><strong>Note</strong></p><p>Whitespace is not ignored at the beginning or end of an input line.</p><p>Because the syntax for comments defined for HTML is also acceptable in SGML and XML (and any similar markup language that is based on SGML), <strong>dacs_transform</strong> can also work with those documents.</p><p>A directive cannot be "commented out" except by modifying the line on which it occurs so that the directive will not be recognized as such. That is, the context in which a directive occurs with respect to the original document is not considered by <strong>dacs_transform</strong>.</p><p>A directive contains one or more <em>attribute</em>="<em>value</em>" pairs. Exactly one attribute name must be a directive name that indicates the operation to be performed. An attribute name must be a \m[blue]<strong>syntactically valid variable name</strong>\m[]\s-2\u[10]\d\s+2. The <em>value</em> must be enclosed in matching double quotes, single quotes, or backticks (decimal ASCII code 96). Backtick quotes are treated differently in that the enclosed string is evaluated as an \m[blue]<strong>expression</strong>\m[]\s-2\u[11]\d\s+2. Variables from the <em>Env</em> and <em>Conf</em>\m[blue]<strong>namespaces</strong>\m[]\s-2\u[12]\d\s+2 are instantiated. The current directive&apos;s attributes are accessible in the <em>Attr</em> namespace; these attribute values are <em>unevaluated</em> and quoted.</p><p>This example input contains two regions:</p>
<pre>
&lt;!--DACS begin="English" --&gt;
Hello!
&lt;!--DACS end="English" --&gt;
&lt;!--DACS begin="French" --&gt;
Bonjour!
&lt;!--DACS end="French" --&gt;
</pre>
<p><strong>Note</strong></p><p>For all directives, the region name "*" is reserved and indicates that the region should be enabled without evaluating any rule. If an author wants to always insert some text or an identification string, for instance, this feature eliminates the need to create a rule that does nothing other than return <strong>True</strong>.</p><p>For all directives, a region name prefixed by the \m[blue]<strong>negation operator</strong>\m[]\s-2\u[13]\d\s+2 inverts the selection test.</p><p>For all directives, regardless of the region name, an attribute named "cond" may be provided. Its value is an expression that must evaluate to <strong>True</strong> for the region to be processed. If a rule also applies to the directive, both the rule and the expression must grant access.</p><p>Directive names, which are described below, are reserved and have special meaning to <strong>dacs_transform</strong>. Unrecognized attributes are ignored but can be referenced as arguments by rules. A given attribute cannot appear more than once within a directive. All attribute names are case-insensitive.</p><p><strong>Negation</strong></p><p>A region name prefixed by the negation operator ("!") indicates that the region should be enabled if the rule returns <strong>False</strong> and should be disabled if it returns <strong>True</strong>. Note that the negation character is not part of the region name. This syntax eliminates the need to write separate "if-true" and "if-false" versions of the same rule, although it is an inefficient substitute for an if/else construct.</p><p>For example, if a document only has public and secret regions, instead of defining one rule for public regions and another for secret regions, an author might simply define a single rule to identify secret regions and use negation:</p>
<pre>
&lt;!--DACS begin="!secret" --&gt;
This is public stuff, not secret stuff.
&lt;!--DACS end="!secret" --&gt;
</pre>
<p><strong>Recursion</strong></p><p>By default, content that is included during processing of an insert, insertv, or expand directive is recursively processed for directives. Recursion may be disabled on a case-by-case basis by specifying the recurse attribute with a value of "no" (case insensitively). It may also be explicitly enabled by specifying the attribute value "yes" (case insensitively).</p><p>A maximum stack depth is imposed, primarily to guard against infinite recursion. This limit is currently set to <strong>100</strong> at compile time.</p><p>Variables set by outer levels can be referenced by inner levels. If variables at different levels have the same name, however, only the innermost value is accessible.</p><p><strong>Directives</strong></p><p><strong>Directive Index:</strong></p><p>begin: start a region</p><p>debug: emit variables for debugging</p><p>end: end a region</p><p>expand: insert content and interpolate variables</p><p>filter: transform content</p><p>filterv: transform content, verbatim</p><p>id: insert an identification string</p><p>insert: insert content</p><p>insertv: insert content, verbatim</p><p>set: set or reset variables</p><p>begin</p><p>The begin directive starts a region with the specified name:</p>
<pre>
&lt;!--DACS begin="secret" --&gt;
</pre>
<p>If the region above named secret is enabled, its content is included in the program&apos;s output. Directives that appear in the region, including other begin directives, are processed. Variable references are not expanded; use the \m[blue]<strong>expand</strong>\m[]\s-2\u[14]\d\s+2 directive to interpolate variable references. Every begin directive must have a matching \m[blue]<strong>end</strong>\m[]\s-2\u[15]\d\s+2 directive.</p><p>The region name (the value of the begin attribute) is accessible in rules using <em>${Args::region}</em>.</p><p>debug</p><p>The debug directive can be helpful for understanding or debugging processing. It emits variables that exist at the point where an enabled debug directive is processed. This directive has no matching end directive; it is essentially a region with no content.</p><p>By default, all variables in the <em>Attrs</em>, <em>Conf</em>, and <em>DACS</em> namespaces are emitted. The attribute name show can be set to Attrs, Conf, or DACS to restrict output to the particular namespace. The value all is equivalent to the default. Alternatively, the attribute name Attrs can be set to "yes" (or "no") to select (or deselect) the <em>Attrs</em> namespace. The same applies for the Conf and DACS attributes. These attribute names are case sensitive but their values are not.</p><p>The emitted output is preceded by the directive prefix string in effect and followed by the directive suffix string in effect. It is assumed that no text is emitted in the debugging output that might accidentally be recognized as the suffix string.</p><p>end</p><p>The end of a region started by a \m[blue]<strong>begin</strong>\m[]\s-2\u[16]\d\s+2, \m[blue]<strong>filter</strong>\m[]\s-2\u[17]\d\s+2, \m[blue]<strong>filterv</strong>\m[]\s-2\u[18]\d\s+2 or \m[blue]<strong>expand</strong>\m[]\s-2\u[14]\d\s+2 directive is indicated using the end directive:</p>
<pre>
&lt;!--DACS begin="secret" --&gt;
This is some secret text.
&lt;!--DACS end="secret" --&gt;
</pre>
<p>When properly balanced, regions can be nested.</p><p>expand</p><p>This directive expands variable references in inserted content. Also, text containing variable references may appear in the original content, delimited by an end directive.</p><p>An expr, uri, or filename attribute may be used to specify the source of the input as with the \m[blue]<strong>insert</strong>\m[]\s-2\u[19]\d\s+2 directive. Variable references in the text from these sources are expanded. If one of these attributes is not specified, the directive must be terminated by an end directive.</p><p>Directives in the expanded text are recursively processed, modulo the recurse attribute (see \m[blue]<strong>Recursion</strong>\m[]\s-2\u[20]\d\s+2).</p>
<pre>
% cat inputfile
&lt;!--DACS expand="*" --&gt;
Nice dog, ${DACS::dog1}.
&lt;!--DACS end="*" --&gt;
Meow!
&lt;!--DACS expand="*" cond="${DACS::dog3} eq:i &apos;bandito&apos;" --&gt;
Good boy, ${DACS::dog2}.
&lt;!--DACS end="*" --&gt;
% dacstransform -Ddog1=Auggie -Ddog2=Harley -Ddog3=Bandito &lt; inputfile
Nice dog, Auggie.
Meow!
Good boy, Harley.
</pre>
<p>filter</p><p><strong>Note</strong></p><p>This feature is only partially implemented. In the current implementation, a filter directive must use the expr operation and may not include another filter region.</p><p>Original document content within a delimited region, if any, is replaced by new material using the filter directive. This directive must have a corresponding end directive. A newline is appended to the result; if this behaviour is undesirable, use \m[blue]<strong>filterv</strong>\m[]\s-2\u[18]\d\s+2.</p><p>Either the expr or uri operations must be specified.</p><p>If an expr attribute is present, the original document content, including its final newline character, is passed to the given \m[blue]<strong>expression</strong>\m[]\s-2\u[11]\d\s+2 as the value of the variable <em>${DACS::stdin}</em>. The value of the expression (a string) replaces the region&apos;s original content. An evaluation error causes the program to terminate.</p><p>If the uri attribute is present, it specifies a web service to which the region should be passed as input and the output of which should replace the original document content. By default, the URI is invoked using the POST method but if a method attribute is present it specifies the HTTP method to use. The http and https schemes are supported. The input is passed as an argument named <em>CONTENT</em>.</p><p>If no operation attribute is provided, the original content is evaluated as an \m[blue]<strong>expression</strong>\m[]\s-2\u[11]\d\s+2 and its value becomes the new content of the region.</p><p>To interpolate the current date you might use:</p>
<pre>
&lt;!--DACS filter="public" expr="strftime(&apos;%v&apos;)" --&gt;
&lt;!--DACS end="public" --&gt;
</pre>
<p>Or equivalently:</p>
<pre>
&lt;!--DACS filter="public" --&gt;
strftime("%v")
&lt;!--DACS end="public" --&gt;
</pre>
<p><strong>Tip</strong></p><p>To simply substitute variable values into the original content, use the \m[blue]<strong>expand</strong>\m[]\s-2\u[14]\d\s+2 directive or the \m[blue]<strong>expand()</strong>\m[]\s-2\u[21]\d\s+2 function. For example:</p>
<pre>
&lt;!--DACS filter="*" expr="expand(${DACS::stdin})" section="Hello, world" --&gt;
&lt;h1&gt;${Attr::section}&lt;/h1&gt;
&lt;!--DACS end="*" --&gt;
</pre>
<p>Or, alternatively:</p>
<pre>
&lt;!--DACS filter="*" section="Hello, world" --&gt;
expand("&lt;h1&gt;${Attr::section}&lt;/h1&gt;")
&lt;!--DACS end="*" --&gt;
</pre>
<p>In either variation, the three lines in the document are replaced by a single line:</p>
<pre>
&lt;h1&gt;Hello, world&lt;/h1&gt;
</pre>
<p><strong>Tip</strong></p><p>A filter directive with an expr or uri attribute and an empty region can be written more simply using an insert directive.</p><p>filterv</p><p>This directive is identical to \m[blue]<strong>filter</strong>\m[]\s-2\u[17]\d\s+2 except that no newline is appended.</p><p>id</p><p>If the region is enabled, the directive is replaced by the current time and date, and a <strong>DACS</strong> version identification string. This directive has no matching end directive; it is essentially a region with no content.</p><p>For example, the directive:</p>
<pre>
&lt;!--DACS id="*" --&gt;
</pre>
<p>will be replaced by a line similar to this:</p>
<pre>
&lt;--DACS Generated 6-Sep-2007@11:37:43 by dacstransform DACS 1.4.20
 Release date 13-Aug-07 09:39:03 (revid 2034) on example.com --&gt;
</pre>
<p>Note that the replacement line appears as a comment in the emitted document and will pass through <strong>dacs_transform</strong> unaltered.</p><p>insert</p><p>Document text is read from a specified source using the insert directive. Exactly one filename, uri, or expr attribute must be provided. Variable references in the inserted content are <em>not</em> expanded - if that is required, use the \m[blue]<strong>expand</strong>\m[]\s-2\u[14]\d\s+2 directive. Directives in the inserted content are not processed if \m[blue]<strong>recursion</strong>\m[]\s-2\u[20]\d\s+2 has been disabled.</p>
<pre>
&lt;!--DACS Interpolate browser-specific JavaScript --&gt;
&lt;!--DACS insert="mozilla" filename="/dacs/dacs_transform/js/js1.html" --&gt;
&lt;!--DACS insert="ie" filename="/dacs/dacs_transform/js/js2.html" --&gt;
&lt;!--DACS insert="netscape" filename="/dacs/dacs_transform/js/js3.html" --&gt;

&lt;!--DACS insert="*" uri="http://example.com/data" --&gt;
&lt;!--DACS insert="*" expr="strftime(&apos;%v&apos;)" --&gt;
&lt;!--DACS insert="*" expr="exec(&apos;/bin/date&apos;)" --&gt;
&lt;!--DACS insert="*" expr="${Attr::arg1} + ${Attr::arg2}" arg1="10" arg2="20" --&gt;
</pre>
<p>The region name (the value of the insert attribute) is accessible to rules as the value of <em>${Args::region}</em>. This directive has no matching end directive; it is essentially a region with no content. Like the begin and end directives, the insert directive names the region so that an appropriate rule can be applied.</p><p>The filename attribute gives the pathname of a file to be inserted into the document at the current location. When invoked as <strong>dacs_transform</strong>, the pathname must be absolute (i.e., it must begin with a slash character).</p><p>The uri attribute gives a URI that is invoked to obtain the document to be inserted. The GET method is used by default, but if a method attribute is present it specifies the HTTP method to use. The returned document is inserted at the current location. If the URI&apos;s scheme is file, it is equivalent to the filename attribute. The http and https schemes are also recognized.</p><p>A third choice is the expr attribute. The \m[blue]<strong>expression</strong>\m[]\s-2\u[11]\d\s+2 is evaluated and its result is inserted into the document; an evaluation error causes the program to terminate.</p><p>Because it is needed in many cases and harmless in many others, a newline character is emitted after the inserted text. If this behaviour is undesirable, use \m[blue]<strong>insertv</strong>\m[]\s-2\u[22]\d\s+2.</p><p>These directives demonstrates how to expand a variable reference found in a template file into the current document:</p>
<pre>
&lt;!--DACS insert="*" expr="expand(get(&apos;/tmp/h1_template&apos;))" s="Section 1"--&gt;
&lt;!--DACS insert="*" expr="expand(get(&apos;/tmp/h1_template&apos;))" s="Section 2"--&gt;
</pre>
<p>If the file /tmp/h1_template looks like:</p>
<pre>
&lt;h1&gt;${Attr::s}&lt;/h1&gt;
</pre>
<p>then these two lines would be inserted in the program&apos;s output:</p>
<pre>
&lt;h1&gt;Section 1&lt;/h1&gt;
&lt;h1&gt;Section 2&lt;/h1&gt;
</pre>
<p>Equivalent but slightly simpler directives can be used for this example:</p>
<pre>
&lt;!--DACS expand="*" filename="/tmp/h1_template" s="Section 1"--&gt;
&lt;!--DACS expand="*" filename="/tmp/h1_template" s="Section 2"--&gt;
</pre>
<p>insertv</p><p>This directive is identical to \m[blue]<strong>insert</strong>\m[]\s-2\u[19]\d\s+2 except that no newline is appended.</p><p>set</p><p>This directive is used to set variables that will exist for the remainder of the current scope (the document being processed) and any documents that are recursively processed. Setting a variable creates it or overrides its existing value. Any occurrences of the variable in an outer scope are unaffected, as are variables that are created from attributes associated with a directive.</p><p>This directive is useful to set a variable to a string that will be used more than once during document processing, or to establish configuration-related variables in a single location. This directive can prevent having to repeatedly pass the same string argument as an attribute in multiple directives.</p><p>If gfile looks like:</p>
<pre>
&lt;!--DACS set="*" foo="1" bar="2" --&gt;
&lt;!--DACS debug="*" show="attrs" --&gt;
&lt;!--DACS set="*" foo="3" bar="4" --&gt;
&lt;!--DACS debug="*" show="attrs" --&gt;
&lt;!--DACS insert="*" filename="gfile2" --&gt;
&lt;!--DACS debug="*" show="attrs" --&gt;
</pre>
<p>and gfile2 looks like:</p>
<pre>
&lt;!--DACS debug="*" show="attrs" --&gt;
&lt;!--DACS set="*" foo="5" bar="6" bazz="7" --&gt;
&lt;!--DACS debug="*" show="attrs" --&gt;
</pre>
<p>then processing gfile will emit this output:</p>
<pre>
&lt;!--DACS Debug:
Attrs:
debug="*"
show="attrs"
set="*"
foo="1"
bar="2"
--&gt;

&lt;!--DACS Debug:
Attrs:
debug="*"
show="attrs"
set="*"
foo="3"
bar="4"
--&gt;

&lt;!--DACS Debug:
Attrs:
debug="*"
show="attrs"
insert="*"
filename="gfile2"
set="*"
foo="3"
bar="4"
--&gt;

&lt;!--DACS Debug:
Attrs:
debug="*"
show="attrs"
set="*"
foo="5"
bar="6"
bazz="7"
insert="*"
filename="gfile2"
--&gt;

&lt;!--DACS Debug:
Attrs:
debug="*"
show="attrs"
set="*"
foo="3"
bar="4"
--&gt;
</pre>
<p><strong>Configuration</strong></p><p>Configuration variables can be set to change some of the program&apos;s defaults:</p><p><em>transform_docs</em>: This is the full pathname of the root directory in which original documents are kept. By default, the program will use a subdirectory <em>${Conf::DACS_HOME}</em>dacs_transform/docs. (default: /usr/local/dacs/dacs_transform/docs)</p><p><strong>Security</strong></p><p>Change the default with care. In the absence of an appropriate access control rule, setting the pathname to "/" or the empty string, would provide access to any file on the server that can be read by this web service.</p><p><em>transform_acls</em>: This is the VFS specification for the rules. By default, the program will use <em>${Conf::DACS_HOME}</em>dacs_transform/acls. (default: [transform-acls]dacs-fs:/usr/local/dacs/dacs_transform/acls)</p><p><em>transform_annotation</em>: This is the annotation to interpolate in redacted text instead of the default.</p><p><em>transform_prefix</em>: Instead of the default prefix used to introduce a directive, the value of this variable is used. It must appear at the beginning of a line.</p><p><em>transform_suffix</em>: Instead of the default prefix used to end a directive, the value of this variable is used.</p><p><em>transform_rprefix</em>: A line whose beginning matches the specified regular expression introduces a directive.</p><p><em>transform_rsuffix</em>: The end of a directive is found by matching the specified regular expression.</p><p>IEEE Std 1003.2 ("POSIX.2") "extended" regular expressions are supported (\m[blue]<a href="../man3/regex.3.html"><strong>regex</strong>(3)</a></strong>\m[]\s-2\u[23]\d\s+2).</p>
<h3>Web Service Arguments</h3>
<p>In addition to the \m[blue]<strong>standard CGI arguments</strong>\m[]\s-2\u[24]\d\s+2, <strong>dacs_transform</strong> understands the following CGI arguments:</p><p><em>DOC</em></p><p>This value of this argument specifies the document to be transformed as a file on the server running <strong>dacs_transform</strong>. It is an absolute path that is remapped within a segregated area of the web server.</p><p><em>DOCURI</em></p><p>This argument specifies the document to be transformed as a URI. The URI must use the http or https scheme. The HTTP GET method is used to fetch the document and the URI may include query arguments. The URI must be properly URL-encoded.</p><p><em>ANNOTATE</em></p><p>If this argument is present and its value is "yes", each deleted region of text is denoted in the retrieved document; contiguous deleted regions are denoted only once. The default annotation assumes a document Content-Type of text/html.</p><p><em>CONTENT_TYPE</em></p><p>If this argument is present, this will be the MIME Content-Type of the returned document. If this argument is omitted, the program will try to guess the type based on the suffix of the name of the original document, or default to text/html.</p>

        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">DIAGNOSTICS</h2>
        <div class="sectioncontent">
<p>The program exits 0 if everything was fine, 1 if an error occurred.</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">RELATED TO dacs_transform&hellip;</h2>
        <div class="sectioncontent">
<p>\m[blue]<a href="../man1/dacstransform.1.html"><strong>dacstransform</strong>(1)</a></strong>\m[]\s-2\u[6]\d\s+2, \m[blue]<a href="../man5/dacs.exprs.5.html"><strong>dacs.exprs</strong>(5)</a></strong>\m[]\s-2\u[11]\d\s+2, \m[blue]<a href="../man5/dacs.acls.5.html"><strong>dacs.acls</strong>(5)</a></strong>\m[]\s-2\u[25]\d\s+2</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">BUGS</h2>
        <div class="sectioncontent">
<p>There is a lot of room for improvement and new features. Directive syntax slants towards the arcane; that may get worse before it gets better.</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">AUTHOR</h2>
        <div class="sectioncontent">
<p>Distributed Systems Software (\m[blue]<strong>www.dss.ca</strong>\m[]\s-2\u[26]\d\s+2)</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">COPYING</h2>
        <div class="sectioncontent">
<p>Copyright2003-2013 Distributed Systems Software. See the \m[blue]<strong>LICENSE</strong>\m[]\s-2\u[27]\d\s+2 file that accompanies the distribution for licensing information.</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">NOTES</h2>
        <div class="sectioncontent">

<dl class='dl-vertical'>
  <dt>
     1.
  </dt>
  <dd>
    <p>dacsoptions</p><p>http://dacs.dss.ca/man/dacs.1.html#dacsoptions</p>
  </dd>
  <dt>
     2.
  </dt>
  <dd>
    <p>mod_include</p><p>http://httpd.apache.org/docs/2.2/mod/mod_include.html</p>
  </dd>
  <dt>
     3.
  </dt>
  <dd>
    <p>mod_rewrite</p><p>http://httpd.apache.org/docs/2.2/mod/mod_rewrite.html</p>
  </dd>
  <dt>
     4.
  </dt>
  <dd>
    <p>mod_ext_filter</p><p>http://httpd.apache.org/docs/2.2/mod/mod_ext_filter.html</p>
  </dd>
  <dt>
     5.
  </dt>
  <dd>
    <p>PHP</p><p>http://www.php.net/</p>
  </dd>
  <dt>
     6.
  </dt>
  <dd>
    <p><a href="../man1/dacstransform.1.html"><strong>dacstransform</strong>(1)</a></p><p>http://dacs.dss.ca/man/dacstransform.1.html</p>
  </dd>
  <dt>
     7.
  </dt>
  <dd>
    <p>transform()</p><p>http://dacs.dss.ca/man/dacs.exprs.5.html#transform</p>
  </dd>
  <dt>
     8.
  </dt>
  <dd>
    <p><a href="../man5/dacs.exprs.5.html"><strong>dacs.exprs</strong>(5)</a></p><p>http://dacs.dss.ca/man//dacs/man/dacs.exprs.5.html</p>
  </dd>
  <dt>
     9.
  </dt>
  <dd>
    <p>configurable</p><p>http://dacs.dss.ca/man/#configuration</p>
  </dd>
  <dt>
    10.
  </dt>
  <dd>
    <p>syntactically valid variable name</p><p>http://dacs.dss.ca/man/dacs.exprs.5.html#variable_syntax</p>
  </dd>
  <dt>
    11.
  </dt>
  <dd>
    <p>expression</p><p>http://dacs.dss.ca/man/dacs.exprs.5.html</p>
  </dd>
  <dt>
    12.
  </dt>
  <dd>
    <p>namespaces</p><p>http://dacs.dss.ca/man/dacs.exprs.5.html#reserved_namespaces</p>
  </dd>
  <dt>
    13.
  </dt>
  <dd>
    <p>negation operator</p><p>http://dacs.dss.ca/man/#negation</p>
  </dd>
  <dt>
    14.
  </dt>
  <dd>
    <p>expand</p><p>http://dacs.dss.ca/man/#EXPAND</p>
  </dd>
  <dt>
    15.
  </dt>
  <dd>
    <p>end</p><p>http://dacs.dss.ca/man/#END</p>
  </dd>
  <dt>
    16.
  </dt>
  <dd>
    <p>begin</p><p>http://dacs.dss.ca/man/#BEGIN</p>
  </dd>
  <dt>
    17.
  </dt>
  <dd>
    <p>filter</p><p>http://dacs.dss.ca/man/#FILTER</p>
  </dd>
  <dt>
    18.
  </dt>
  <dd>
    <p>filterv</p><p>http://dacs.dss.ca/man/#FILTERV</p>
  </dd>
  <dt>
    19.
  </dt>
  <dd>
    <p>insert</p><p>http://dacs.dss.ca/man/#INSERT</p>
  </dd>
  <dt>
    20.
  </dt>
  <dd>
    <p>Recursion</p><p>http://dacs.dss.ca/man/#recursion</p>
  </dd>
  <dt>
    21.
  </dt>
  <dd>
    <p>expand()</p><p>http://dacs.dss.ca/man/dacs.exprs.5.html#expand</p>
  </dd>
  <dt>
    22.
  </dt>
  <dd>
    <p>insertv</p><p>http://dacs.dss.ca/man/#INSERTV</p>
  </dd>
  <dt>
    23.
  </dt>
  <dd>
    <p><a href="../man3/regex.3.html"><strong>regex</strong>(3)</a></p><p>http://www.freebsd.org/cgi/man.cgi?query=regex&apropos=0&esektion=3&emanpath=FreeBSD+9.1-RELEASE&format=html</p>
  </dd>
  <dt>
    24.
  </dt>
  <dd>
    <p>standard CGI arguments</p><p>http://dacs.dss.ca/man/dacs.services.8.html#standard_cgi_args</p>
  </dd>
  <dt>
    25.
  </dt>
  <dd>
    <p><a href="../man5/dacs.acls.5.html"><strong>dacs.acls</strong>(5)</a></p><p>http://dacs.dss.ca/man/dacs.acls.5.html</p>
  </dd>
  <dt>
    26.
  </dt>
  <dd>
    <p>www.dss.ca</p><p>http://www.dss.ca</p>
  </dd>
  <dt>
    27.
  </dt>
  <dd>
    <p>LICENSE</p><p>http://dacs.dss.ca/man/../misc/LICENSE</p>
  </dd>

</dl>

        </div>
      </section>
<nav>
  <ul class="pager">
   <li class="previous"><a href="dacs_token.8.html"><span aria-hidden="true">&larr;</span> dacs_token.8: Manage dacs one-time password token accounts</a></li>
   <li class="next"><a href="dacs_uproxy.8.html">dacs_uproxy.8: Minimal http proxying <span aria-hidden="true">&rarr;</span></a></li>
  </ul>
</nav>

  </div>
  <!-- jQuery (necessary for Bootstrap's JavaScript plugins) -->
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.2/jquery.min.js"></script>
  <!-- Include all compiled plugins (below), or include individual files as needed -->
  <script src="/js/bootstrap.min.js"></script>
  <script>
    (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
      (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
      m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
    })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

    ga('create', 'UA-60781387-1', 'auto');
    ga('send', 'pageview');

  </script>
</body>
</html>
