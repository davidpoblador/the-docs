<!DOCTYPE html>
<html lang="en">
<head>
  <link href="https://fonts.googleapis.com/css?family=Fira+Mono:400,700&effect=destruction%7Cshadow-multiple" rel="stylesheet" type="text/css">
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>fetch-crl: Retrieve certificate revocation lists</title>
  <link href="/css/bootstrap.min.css" rel="stylesheet">
  <link href="/css/manpage.css" rel="stylesheet">
  <link rel="apple-touch-icon" sizes="57x57" href="/icons/apple-icon-57x57.png">
  <link rel="apple-touch-icon" sizes="60x60" href="/icons/apple-icon-60x60.png">
  <link rel="apple-touch-icon" sizes="72x72" href="/icons/apple-icon-72x72.png">
  <link rel="apple-touch-icon" sizes="76x76" href="/icons/apple-icon-76x76.png">
  <link rel="apple-touch-icon" sizes="114x114" href="/icons/apple-icon-114x114.png">
  <link rel="apple-touch-icon" sizes="120x120" href="/icons/apple-icon-120x120.png">
  <link rel="apple-touch-icon" sizes="144x144" href="/icons/apple-icon-144x144.png">
  <link rel="apple-touch-icon" sizes="152x152" href="/icons/apple-icon-152x152.png">
  <link rel="apple-touch-icon" sizes="180x180" href="/icons/apple-icon-180x180.png">
  <link rel="icon" type="image/png" sizes="192x192" href="/icons/android-icon-192x192.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/icons/favicon-32x32.png">
  <link rel="icon" type="image/png" sizes="96x96" href="/icons/favicon-96x96.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/icons/favicon-16x16.png">
  <link rel="manifest" href="/icons/manifest.json">
  <meta name="msapplication-TileColor" content="#ffffff">
  <meta name="msapplication-TileImage" content="/icons/ms-icon-144x144.png">
  <meta name="theme-color" content="#ffffff">
  <meta name="description" content="Retrieve certificate revocation lists">
  <meta name="twitter:card" content="summary_large_image">
  <meta name="twitter:site" content="@CartaTech">
  <meta name="twitter:creator" content="@CartaTech">
  <meta name="twitter:title" content="fetch-crl (8) manual">
  <meta name="twitter:description" content="Retrieve certificate revocation lists">
  <meta name="twitter:image" content="https://www.carta.tech/images/fetch-crl-fetch-crl-8.png">
  <meta property="og:url" content="https://www.carta.tech/man-pages/man8/fetch-crl.8.html" />
  <meta property="og:type" content="website" />
  <meta property="og:title" content="fetch-crl (8) manual" />
  <meta property="og:description" content="Retrieve certificate revocation lists" />
  <meta property="fb:app_id" content="1241677679199500" />
  <meta property="og:image" content="https://www.carta.tech/images/fetch-crl-fetch-crl-8.png" />
  <meta property="og:image:width" content="600" />
  <meta property="og:image:height" content="315" />
</head>
<body>
  <div class="container final">
          <div class="page-header">
        <h1 class="font-effect-destruction">fetch-crl<small> (8)</small></h1>
        <p class="lead">Retrieve certificate revocation lists</p>
      </div>

    <ol class="breadcrumb" itemscope itemtype="http://schema.org/BreadcrumbList">
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/">
      <span itemprop="name">Carta.tech</span>
    </a>
    <meta itemprop="position" content="1" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/">
      <span itemprop="name">Man Pages</span>
    </a>
    <meta itemprop="position" content="2" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/man8/">
      <span itemprop="name">System administration commands</span>
    </a>
    <meta itemprop="position" content="3" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/man8/fetch-crl.8.html">
      <span itemprop="name">fetch-crl: Retrieve certificate revocation lists</span>
    </a>
    <meta itemprop="position" content="4" />
  </li>
</ol>
<ol class="breadcrumb" itemscope itemtype="http://schema.org/BreadcrumbList">
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/">
      <span itemprop="name">Carta.tech</span>
    </a>
    <meta itemprop="position" content="1" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/packages/">
      <span itemprop="name">Packages</span>
    </a>
    <meta itemprop="position" content="2" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/packages/fetch-crl/">
      <span itemprop="name">fetch-crl</span>
    </a>
    <meta itemprop="position" content="3" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/man8/fetch-crl.8.html">
      <span itemprop="name">fetch-crl: Retrieve certificate revocation lists</span>
    </a>
    <meta itemprop="position" content="4" />
  </li>
</ol>
    
      <section>
        <h2 class="font-effect-shadow-multiple">SYNOPSIS</h2>
        <div class="sectioncontent">
<p><strong>fetch-crl</strong> [<strong>-c</strong>config<strong>]</strong> [<strong>-v</strong>[<strong>v</strong>..<strong>]</strong>] [<strong>-q</strong>] [<strong>-h</strong>] [<strong>--inet6glue</strong>] [<strong>-l</strong>infopath<strong>]</strong> [<strong>-o</strong>outputpath<strong>]</strong> [<strong>-s</strong>statepath<strong>]</strong> [<strong>-a</strong>agingtolerance<strong>]</strong> [<strong>-T</strong>httptimeout<strong>]</strong> [<strong>-r</strong>randomwait<strong>]</strong> [<strong>-p</strong>parallelism<strong>]</strong> [<strong>--formats</strong>openssl<strong>|</strong>pem<strong>|</strong>der<strong>|</strong>nss<strong>]</strong>.. [<strong>--define</strong>key<strong>=</strong>value<strong>]</strong>.. [<strong>--cfgdir</strong>dirname<strong>]</strong></p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">DESCRIPTION</h2>
        <div class="sectioncontent">
<p>The <em>fetch-crl</em> utility will retrieve certificate revocation lists (CRLs) for a set of installed trust anchors, based on crl_url files or IGTF-style info files. It will install these for use with OpenSSL, NSS or third-party tools.</p><p>It works based on a list of trust anchors, for each of which one or more CRLs should be installed in a CRL store. And for each of these CRLs, one or more URLs can be specified from which the specific CRL can be retrieved. There are several supported formats for CRL stores:</p>
<dl class='dl-vertical'>
  <dt>
    openssl
  </dt>
  <dd>
    <p>has a directory in which <em>hash.</em> <em>i</em> files are stored, one CRL per file, and all CRLs for the trust anchors whose subject distinguished name hashes to <em>hash</em> are read and evaluated for each certificate issues by the CAs whose subject name hash matches <em>hash</em></p><p>OpenSSL in version 1 changes its subject name hashing algorithm, though, so that for one trust anchor <strong>two</strong> hashes could be used, depending on the specific OpenSSL version at hand. If OpenSSL version 1 or higher is used by <em>fetch-crl</em> and the default mode is used, each CRL is written out twice, once for each possible hash value. This mode in controlled by the <em>opensslmode</em> = { <em>dual</em> | <em>single</em> } configuration option in the configuration file.</p>
  </dd>
  <dt>
    pem
  </dt>
  <dd>
    <p>writes out the CRL in PEM (RFC 1421) format.</p>
  </dd>
  <dt>
    der
  </dt>
  <dd>
    <p>writes out the CRL in binary under distinguished encoding rules</p>
  </dd>
  <dt>
    nss
  </dt>
  <dd>
    <p>will use the crlutil from the Mozilla NSS tools to add or replace a CRL in the NSS cert8.db database.</p>
  </dd>

</dl>
<p>Each CRLs can be retrieved from one of several URLs. These URLs are listed by default in the trust anchor meta-data: the <em>.info</em> file or the <em>.crl_url</em> file, as shipped with the trust anchor. In the crl_url file, there is one URL per line; in the .info file, the <em>crl_url</em> attribute is a semi-colon separated list of URLs. These URLs are then tried in order to retrieve a fresh CRL. Once data has been successfully retrieved, this data is used as the CRL if it passes verification, signature checking and expiration checks. Http, https, ftp and file URLs are supported. If data for a CRL has been downloaded but this data fails any of the subsequent checks (signature validation, freshness), the CRL data is discarded and NO further URLs are tried for this CRL!</p><p>URLs can be pre-pended or post-pended to the default list via the configuration file. This can be used to prefer a local mirror repository over any URLs shipped by the trust anchor provider, without the need to modify the trust anchor metadata. By post-pending a URL, a 'last-resort' download location can be added in case the CA provided URLs cannot be used. The pre- and post-pended URLS are subject to token expansion of the tokens <em>@ALIAS@</em>, <em>@ANCHORNAME@</em>, and <em>@R@</em>, where <em>R</em> is the sequence number of the CRL on a per-trust anchor basis.</p><p>Retrieved CRLs may be PEM (RFC1421) or DER encoded. They are automatically converted as needed by fetch-crl, using the OpenSSL command-line tool.</p><p>Retrieving a CRL without having an accompanying CA root certificate in an OpenSSL-accessible form (like <em>@ALIAS@.0</em> or <em>@ANCHORNAME@.@R@</em> will result in a verification failures. The CA lookup directory and patterns can be configured via the configuration file</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">TOKEN EXPANSION</h2>
        <div class="sectioncontent">
<p>In paths and name templates, tokens are expanded to allow a single pattern to be used for all trust anchors. The <em>nametemplate_*</em>, <em>catemplate</em>, <em>prepend_url</em>, and <em>postpend_url</em> configuration settings are subject to token expansion.</p><p>The following tokens are recognised</p>
<dl class='dl-vertical'>
  <dt>
    @ALIAS@
  </dt>
  <dd>
    <p>The alias name of the trust anchor as defined in the <em>info</em> file. If there is no info file and the meta-data is retrieved from <em>crl_url</em> files, then the alias is set to the basename (excluding the .crl_url suffix) of the filename of the trust anchor.</p>
  </dd>
  <dt>
    @ANCHORNAME@
  </dt>
  <dd>
    <p>The file name of the trust anchor, without any .info or .url_crl suffix.</p>
  </dd>
  <dt>
    @R@
  </dt>
  <dd>
    <p>The CRL sequence number, counting from 0. Note that most trust anchors only have a single CRL, with sequence number "0".</p>
  </dd>

</dl>

        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">OPTIONS</h2>
        <div class="sectioncontent">

<dl class='dl-vertical'>
  <dt>
    <p><strong>-h --help</strong></p>
  </dt>
  <dd>
    <p>Show help text.</p>
  </dd>
  <dt>
    <p><strong>-l --infodir metadata-directory</strong></p>
  </dt>
  <dd>
    <p>The script will search this directory for files with the suffix '.info' or '.crl_url'. Note: the CRL files to download must be in either PEM or DER format.</p>
  </dd>
  <dt>
    <p><strong>-o --out outputDirectory</strong></p>
  </dt>
  <dd>
    <p>Directory where to put the downloaded and processed CRLs. The directory to be used as argument for this option is typically /etc/grid-security/certificates Default: infodir (meta-data directory)</p>
  </dd>
  <dt>
    <p><strong>-a --agingtolerance hours</strong></p>
  </dt>
  <dd>
    <p>The maximum age of the locally downloaded CRL before download failures trigger actual error messages. This error message suppression mechanism only works if the CRL has been downloaded at least once and either the crl_url files are named after the hash of the CRL issuer name, or a state directory is used to preserve state across invocations.</p><p>Default: 24 hour aging tolerance</p>
  </dd>
  <dt>
    <p><strong>-q --quiet</strong></p>
  </dt>
  <dd>
    <p>Quiet mode (do not print information messages)</p>
  </dd>
  <dt>
    <p><strong>-r --randomwait s</strong></p>
  </dt>
  <dd>
    <p>Wait up to <em>s</em> seconds before starting the retrieval process(es).</p>
  </dd>
  <dt>
    <p><strong>-p --parallelism n</strong></p>
  </dt>
  <dd>
    <p>Do the retrieval for several trust anchors in parallel, with up to <em>n</em> processes doing retrievals. At most <em>n</em> downloads will be active at any one time. Multiple CRLs for the same trust anchor are still downloaded sequentially.</p>
  </dd>
  <dt>
    <p><strong>--inet6glue</strong></p>
  </dt>
  <dd>
    <p>Load the Net::INET6Glue module to enable IPv6 support in LWP.</p>
  </dd>
  <dt>
    <p><strong>--define</strong><em>key</em><strong>=</strong><em>value</em></p>
  </dt>
  <dd>
    <p>Add definitions to the configuration at runtime. The key=value pair is appended to the main section of the configuration, unless a colon is used in the key: then the part before the colon is the config file section name, and the part thereafter the key inside that section. To merely set a valueless option, set to to the null-string "".</p>
  </dd>

</dl>

        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">CONFIGURATION</h2>
        <div class="sectioncontent">
<p>See <strong>http://wiki.nikhef.nl/grid/FetchCRL3</strong> or the included example file for a description of the configuration options. The default location of the configuration file is <em>/etc/fetch-crl.conf</em>. Supplementary configuration is read from all files located in <em>/etc/fetch-crl.d/</em>, or the directory designated by the <em>cfgdir</em> directive, whose collated contents are added to the existing configuration data.</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">NOTES</h2>
        <div class="sectioncontent">
<p>Defaults can be set in the fetch-crl system configuration file /etc/fetch-crl.conf.</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">RELATED TO fetch-crl&hellip;</h2>
        <div class="sectioncontent">
<p><strong>openssl</strong>(1), http://wiki.nikhef.nl/grid/FetchCRL3</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">DIAGNOSTICS</h2>
        <div class="sectioncontent">
<p>Exit status is normally 0; if an error occurs, exit status is 1 and diagnostics will be written to standard error.</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">LICENSE</h2>
        <div class="sectioncontent">
<p>Licensed under the Apache License, Version 2.0 (the "License");</p><p><strong>http://www.apache.org/licenses/LICENSE-2.0</strong></p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">BUGS</h2>
        <div class="sectioncontent">
<p>Although fetch-crl3 will install multiple CRLs in the CRL stores (called '.r0', '.r1', or labelled appropriately in an NSS store), if the number of CRLs decreases the left-overs are not automatically removed. So if the number of CRLs for a particular CA does down from <em>n</em> to <em>n-1</em>, the file '.r<em>n</em>' must be removed manually.</p>
        </div>
      </section>
<nav>
  <ul class="pager">
   <li class="previous"><a href="fenced.8.html"><span aria-hidden="true">&larr;</span> fenced.8: The i/o fencing daemon</a></li>
   <li class="next"><a href="cyrus-nntpd-fetchnews.8.html">fetchnews.8: Retrieve new articles from peer and feed to cyrus <span aria-hidden="true">&rarr;</span></a></li>
  </ul>
</nav>

  </div>
  <!-- jQuery (necessary for Bootstrap's JavaScript plugins) -->
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.2/jquery.min.js"></script>
  <!-- Include all compiled plugins (below), or include individual files as needed -->
  <script src="/js/bootstrap.min.js"></script>
  <script>
    (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
      (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
      m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
    })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

    ga('create', 'UA-60781387-1', 'auto');
    ga('send', 'pageview');

  </script>
</body>
</html>
