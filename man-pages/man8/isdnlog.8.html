<!DOCTYPE html>
<html lang="en">
<head>
  <link href="https://fonts.googleapis.com/css?family=Fira+Mono:400,700&effect=destruction%7Cshadow-multiple" rel="stylesheet" type="text/css">
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>isdnlog: Isdn log system (and more)</title>
  <link href="/css/bootstrap.min.css" rel="stylesheet">
  <link href="/css/manpage.css" rel="stylesheet">
  <link rel="apple-touch-icon" sizes="57x57" href="/icons/apple-icon-57x57.png">
  <link rel="apple-touch-icon" sizes="60x60" href="/icons/apple-icon-60x60.png">
  <link rel="apple-touch-icon" sizes="72x72" href="/icons/apple-icon-72x72.png">
  <link rel="apple-touch-icon" sizes="76x76" href="/icons/apple-icon-76x76.png">
  <link rel="apple-touch-icon" sizes="114x114" href="/icons/apple-icon-114x114.png">
  <link rel="apple-touch-icon" sizes="120x120" href="/icons/apple-icon-120x120.png">
  <link rel="apple-touch-icon" sizes="144x144" href="/icons/apple-icon-144x144.png">
  <link rel="apple-touch-icon" sizes="152x152" href="/icons/apple-icon-152x152.png">
  <link rel="apple-touch-icon" sizes="180x180" href="/icons/apple-icon-180x180.png">
  <link rel="icon" type="image/png" sizes="192x192" href="/icons/android-icon-192x192.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/icons/favicon-32x32.png">
  <link rel="icon" type="image/png" sizes="96x96" href="/icons/favicon-96x96.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/icons/favicon-16x16.png">
  <link rel="manifest" href="/icons/manifest.json">
  <meta name="msapplication-TileColor" content="#ffffff">
  <meta name="msapplication-TileImage" content="/icons/ms-icon-144x144.png">
  <meta name="theme-color" content="#ffffff">
  <meta name="description" content="Isdn log system (and more)">
  <meta name="twitter:card" content="summary_large_image">
  <meta name="twitter:site" content="@CartaTech">
  <meta name="twitter:creator" content="@CartaTech">
  <meta name="twitter:title" content="isdnlog (8) manual">
  <meta name="twitter:description" content="Isdn log system (and more)">
  <meta name="twitter:image" content="https://www.carta.tech/images/isdnlog-isdnlog-8.png">
  <meta property="og:url" content="https://www.carta.tech/man-pages/man8/isdnlog.8.html" />
  <meta property="og:type" content="website" />
  <meta property="og:title" content="isdnlog (8) manual" />
  <meta property="og:description" content="Isdn log system (and more)" />
  <meta property="fb:app_id" content="1241677679199500" />
  <meta property="og:image" content="https://www.carta.tech/images/isdnlog-isdnlog-8.png" />
  <meta property="og:image:width" content="600" />
  <meta property="og:image:height" content="315" />
</head>
<body>
  <div class="container final">
          <div class="page-header">
        <h1 class="font-effect-destruction">isdnlog<small> (8)</small></h1>
        <p class="lead">Isdn log system (and more)</p>
      </div>

    <ol class="breadcrumb" itemscope itemtype="http://schema.org/BreadcrumbList">
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/">
      <span itemprop="name">Carta.tech</span>
    </a>
    <meta itemprop="position" content="1" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/">
      <span itemprop="name">Man Pages</span>
    </a>
    <meta itemprop="position" content="2" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/man8/">
      <span itemprop="name">System administration commands</span>
    </a>
    <meta itemprop="position" content="3" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/man8/isdnlog.8.html">
      <span itemprop="name">isdnlog: Isdn log system (and more)</span>
    </a>
    <meta itemprop="position" content="4" />
  </li>
</ol>
<ol class="breadcrumb" itemscope itemtype="http://schema.org/BreadcrumbList">
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/">
      <span itemprop="name">Carta.tech</span>
    </a>
    <meta itemprop="position" content="1" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/packages/">
      <span itemprop="name">Packages</span>
    </a>
    <meta itemprop="position" content="2" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/packages/isdnlog/">
      <span itemprop="name">isdnlog</span>
    </a>
    <meta itemprop="position" content="3" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/man8/isdnlog.8.html">
      <span itemprop="name">isdnlog: Isdn log system (and more)</span>
    </a>
    <meta itemprop="position" content="4" />
  </li>
</ol>
    
      <section>
        <h2 class="font-effect-shadow-multiple">DESCRIPTION</h2>
        <div class="sectioncontent">
<p>Isdnlog gets information from your isdn card, decodes this information, and can do anything with it, such as logging, starting programs, and more. All options to isdnlog can be given as command line flags, or you can specify a file with options (recommended).</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">RESTRICTION</h2>
        <div class="sectioncontent">
<p>Isdnlog only works with the HiSax isdn driver. Other cards with their own driver are not supported. Additionally you need to enable d-channel logging (you can use "hisaxctrl &lt;DriverId&gt; 1 4" to do that, e.g. "hisaxctrl line0 1 4"). Isdnlog can only log outgoing calls that originate from your isdn card, and incoming calls. To get information about outgoing calls from other isdn devices (e.g. telephones), you need a second Teles isdn card, with crossed lines. Such a card is not usable for communicating, but can log outgoing calls from any device (see dual option below).</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">GENERAL OPTIONS</h2>
        <div class="sectioncontent">

<dl class='dl-vertical'>
  <dt>
    <p><strong>-V</strong></p>
  </dt>
  <dd>
    <p>show version information and exit.</p>
  </dd>
  <dt>
    <p><strong>-f</strong><em>FILE</em></p>
  </dt>
  <dd>
    <p>read options from the config file <em>FILE</em>. This file is also called the parameter file of isdnlog. The first line should be "[options]". You may use blank lines and comments (starting with a #). All config files for isdnlog have the format described in <a href="../man5/isdn.conf.5.html"><strong>isdn.conf</strong>(5)</a>. Debug options must be given on the command line, they cannot be stored in a file.</p>
  </dd>
  <dt>
    <p><strong>/dev/DEVICE</strong></p>
  </dt>
  <dd>
    <p>isdnlog will read from this device and from /dev/isdninfo. You should give /dev/isdnctrl0 for the first isdn card (or /dev/isdnctrl2 for the second).</p><p>Isdnlog has a replay mode for debugging, where you can simulate previous recorded events. In that case use "-" instead of a device.</p>
  </dd>
  <dt>
    <p><strong>-A</strong><em>x</em><strong>	amt="value"</strong></p>
  </dt>
  <dd>
    <p>Set digits necessary to get an outside line, when connected through a PABX. You can give several codes padded with a ":" (e.g. -A0:80:81:82).</p>
  </dd>
  <dt>
    <p><strong>areacode="value"</strong></p>
  </dt>
  <dd>
    <p>(There is no commandline option for this.) Overwrite area code from isdn.conf.  A machine connected to subscriber lines with different area codes and thus several isdnlogs running requires this non global setting.</p>
  </dd>
  <dt>
    <p><strong>-B</strong><em>vbn</em><strong>	vbn="value"</strong></p>
  </dt>
  <dd>
    <p>Set the provider preselection to the given value. More prefixes may be separated by a ":".</p><p>Values are e.g. "010" for DE, "10" for AT, "16:17" for NL, "9" for FR.</p>
  </dd>
  <dt>
    <p><strong>-R</strong><em>prefix</em><strong>	preselected="value"</strong></p>
  </dt>
  <dd>
    <p>Set the preselected provider (i.e the chosen provider, if no prefix is dialed) to value. Value should be without <em>vbn</em>.</p>
  </dd>
  <dt>
    <p><strong>skipProv=</strong><em>skiplist</em></p>
  </dt>
  <dd>
    <p>(There is no commandline option for this.) Ignore certain providers from the rate-file.  The format of <em>skiplist</em> is the same as for Q: tags in rate.conf and described in <strong>rate.conf</strong>(5).</p>
  </dd>
  <dt>
    <p><strong>-0</strong><em>x:y</em><strong>	trim="value[:value]"</strong></p>
  </dt>
  <dd>
    <p>Suppress leading digits. If isdnlog is connected through a PABX, it is sometimes not possible to let isdnlog distinguish between a national and an international call, even with help of the <strong>-A</strong> option.</p><p>This option requires two values separated with ":" as an argument. These values tell isdnlog how many leading digits to remove from incoming and outgoing calls respectively. If only one value is given, it is used for both incoming and outgoing calls.</p><p>Don't use this in combination with the <strong>-A</strong> option! This will confuse the system (and possibly you).</p><p>Example: a PABX in Germany shows the number of an incoming call from Hamburg as "00040...".  When calling out to Hamburg, it shows the number as "0040...". This means that on incoming calls, three zeroes must be removed, and on outgoing calls two zeroes must be removed (the number must be normalized to be without any leading zeroes in the case of a national number; international numbers must have one leading zero). So, in this case, the option <strong>-03:2</strong> would be correct.</p>
  </dd>
  <dt>
    <p><strong>-i</strong><em>x</em><strong>	internS0="value"</strong></p>
  </dt>
  <dd>
    <p>Telefon number shorter then <em>value</em> are considered to be internal numbers on your PABX.</p>
  </dd>
  <dt>
    <p><strong>-o	other={yes|no}</strong></p>
  </dt>
  <dd>
    <p>Normally "causes" (e.g. "non-selected user clearing") for other connected ISDN devices are not displayed, only those which are related to the connection will be shown. With this option the causes for the other devices are also displayed.</p>
  </dd>
  <dt>
    <p><strong>-u</strong><em>x</em><strong>	ignoreRR="value"</strong></p>
  </dt>
  <dd>
    <p>Ignore "housekeeping" frames. <em>x</em> may be 1 (ignore RR=Receiver ready) or 2 (ignore EMP=Euracom Management Protokoll) frames.</p>
  </dd>
  <dt>
    <p><strong>-U</strong><em>x[:y]</em><strong>	ignoreCOLP="value[:value]"</strong></p>
  </dt>
  <dd>
    <p>Ignore COLP/CLIP frames when value is 1 or greater. Value 0 is default, and tells isdnlog to not ignore COLP/CLIP frames. With value 2 the ignored COLP/CLIP number is displayed.</p><p>The first value applies to COLP the second to CLIP. If only one value is given, it applies to COLP and CLIP.</p><p>Sometimes the COLP number is a number in a different areacode to the number that was dialled, and then the cost calculation would be wrong.</p>
  </dd>
  <dt>
    <p><strong>ignoreUPD={yes|no}</strong></p>
  </dt>
  <dd>
    <p>(There is no commandline option for this.) A PABX may cause numerous messages like "Unexpected discriminator 0x47 -- ignored!" resulting from protocol discriminator values in layer 3 not known to isdnlog. Set ignoreUPD to yes to suppress this messages.</p>
  </dd>
  <dt>
    <p><strong>-2</strong><em>x</em><strong>	dual="value"</strong></p>
  </dt>
  <dd>
    <p>Enable dual mode. You need this if you have a second isdn card attached with crossed lines so it can listen to what other isdn devices like telephones are doing. With <em>x</em>=2 you can increase the debug output - every single digit will be displayed.</p><p>Some setups may require workarounds for reliable logging.  These workarounds are enabled by addition of the following numbers to the dual value.  They are intended for the dualmode but may also be useful without. In this case, specify only the sum of the following numbers without 1 or 2 for the dual mode.</p>
<dl class='dl-vertical'>
  <dt>
    <p>0x100</p>
  </dt>
  <dd>
    <p>Enable this when the destination number of an outgoing call contains the number of the previous call, e.g. calling 222 after calling 111 before results in 111222 for the second call.</p><p>This may also help in situations where an unanswered incoming call causes incorrect logging of the following outgoing call.</p>
  </dd>
  <dt>
    <p>0x200</p>
  </dt>
  <dd>
    <p>Enable this when outgoing calls are logged without a source number (own MSN).</p>
  </dd>
  <dt>
    <p>0x400</p>
  </dt>
  <dd>
    <p>Enable this when unanswered incoming calls are logged multiple times (revealed by isdnrep -E).</p>
  </dd>

</dl>

  </dd>
  <dt>
    <p><strong>-1</strong></p>
  </dt>
  <dd>
    <p>A HFC-based card is used for echo mode. Enable echo mode for the HFC card with</p><p><em>hisaxctrl id 10 1</em></p><p><em>hisaxctrl id 12 1</em></p>
  </dd>

</dl>

        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">DEBUG MODULE</h2>
        <div class="sectioncontent">

<dl class='dl-vertical'>
  <dt>
    <p><strong>-r</strong></p>
  </dt>
  <dd>
    <p>Replay a debug file (e.g. /tmp/isdnctrl0) to find bugs. With this flag you should give a filename with the debug information instead of a device. It will also work with files not created by isdnlog (e.g. "cat /dev/isdnctrl0").</p>
  </dd>
  <dt>
    <p><strong>-n	newline={yes|no}</strong></p>
  </dt>
  <dd>
    <p>Display throughput messages on the same line (only useful with logging to stderr or a console device).</p>
  </dd>
  <dt>
    <p><strong>-W</strong><em>X</em>	width="value"</p>
  </dt>
  <dd>
    <p>Limit all messages to X characters per line.</p>
  </dd>
  <dt>
    <p><strong>-v</strong><em>X</em>	log=X</p>
  </dt>
  <dd>
    <p>Isdnlog can copy all information to /tmp/DEVICE (e.g. /tmp/isdnctrl0 if you started isdnlog with /dev/isdnctrl0). Choose what debugging you want from the following list, add the corresponding numbers together and use that for X:</p>
<dl class='dl-vertical'>
  <dt>
    <p>1</p>
  </dt>
  <dd>
    <p>copy all "HEX:" lines from the hisax isdn device driver.</p>
  </dd>
  <dt>
    <p>2</p>
  </dt>
  <dd>
    <p>copy /dev/isdnctrl output (or whatever device you specified).</p>
  </dd>
  <dt>
    <p>4</p>
  </dt>
  <dd>
    <p>copy /dev/isdninfo output</p>
  </dd>
  <dt>
    <p>8</p>
  </dt>
  <dd>
    <p>copy transfer values ("ibyte","obyte").</p><p>Isdnlog will close and reopen this file after a "kill -HUP".</p>
  </dd>

</dl>

  </dd>
  <dt>
    <p><strong>-s	flush={yes|no}</strong></p>
  </dt>
  <dd>
    <p>Isdnlog will flush the debug file /tmp/DEVICE (e.g. /tmp/isdnctrl0) after each write access.</p>
  </dd>
  <dt>
    <p><strong>-P	pipe={yes|no}</strong></p>
  </dt>
  <dd>
    <p>Copy the debug information to stdout. This way you can run isdnlog as the source of a pipe like "isdnlog -P /dev/isdnctrl0 |prog ... ".</p>
  </dd>
  <dt>
    <p><strong>-D	daemon={yes|no}</strong></p>
  </dt>
  <dd>
    <p>Start isdnlog as daemon: it will fork into the background, and use syslog as the default logging method (if you did not specify -m).</p>
  </dd>
  <dt>
    <p><strong>-T</strong></p>
  </dt>
  <dd>
    <p>Trace mode: isdnlog will wait for a key after processing a line from /dev/isdnctrl0 (or whatever device you specified).</p>
  </dd>
  <dt>
    <p><strong>-K</strong></p>
  </dt>
  <dd>
    <p>Print for every pressed key the thruput. Can not used together with option -d.</p>
  </dd>
  <dt>
    <p><strong>-b</strong></p>
  </dt>
  <dd>
    <p>If you are using a bilingual network terminator (NT), you must give this flag, or isdnlog will show the own MSN's incorrectly.</p>
  </dd>

</dl>

        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">NUMBER REWRITE MODULE</h2>
        <div class="sectioncontent">
<p>You can define aliases for telephone numbers (see <a href="../man5/callerid.conf.5.html"><strong>callerid.conf</strong>(5)</a> and <a href="../man5/isdn.conf.5.html"><strong>isdn.conf</strong>(5)</a> for more information). Isdnlog will compare all numbers to the list of aliases, and when a match is found, the alias is displayed instead of the number.</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">LOG MODULE</h2>
        <div class="sectioncontent">
<p>Isdnlog can log information via syslog, to stdout, and send information to x11 clients. Calculate a code from these numbers by adding them, and activate logging with -s, -m or -x. You can use normal numbers or hex numbers. Default is stderr mode -m, unless daemon mode is enabled; then it's syslog mode -l.</p>
<dl class='dl-vertical'>
  <dt>
    <p>0x1</p>
  </dt>
  <dd>
    <p>Errors</p>
  </dd>
  <dt>
    <p>0x2</p>
  </dt>
  <dd>
    <p>Warnings</p>
  </dd>
  <dt>
    <p>0x4</p>
  </dt>
  <dd>
    <p>Notice</p>
  </dd>
  <dt>
    <p>0x8</p>
  </dt>
  <dd>
    <p>Log messages to /tmp/DEVICE (e.g. /tmp/isdnctrl0 if isdnlog is started with /dev/isdnctrl0)</p>
  </dd>
  <dt>
    <p>0x10</p>
  </dt>
  <dd>
    <p>Show telephone numbers immediately.</p>
  </dd>
  <dt>
    <p>0x20</p>
  </dt>
  <dd>
    <p>Show charge int and telephone costs with every charge signal (in Germany, and perhaps other countries, you have to pay to get these signals).</p>
  </dd>
  <dt>
    <p>0x40</p>
  </dt>
  <dd>
    <p>Show connect messages.</p>
  </dd>
  <dt>
    <p>0x80</p>
  </dt>
  <dd>
    <p>Show hang up messages.</p>
  </dd>
  <dt>
    <p>0x100</p>
  </dt>
  <dd>
    <p>Show cause message on hang up.</p>
  </dd>
  <dt>
    <p>0x200</p>
  </dt>
  <dd>
    <p>Show time messages.</p>
  </dd>
  <dt>
    <p>0x400</p>
  </dt>
  <dd>
    <p>Show throughput in bytes (every -wX seconds).</p>
  </dd>
  <dt>
    <p>0x800</p>
  </dt>
  <dd>
    <p>Show state of B-channels (use with -M monitor).</p>
  </dd>
  <dt>
    <p>0x1000</p>
  </dt>
  <dd>
    <p>Show service indicator.</p><p>You should log at least 0x7 (errors, warnings, notice) messages.</p>
  </dd>
  <dt>
    <p>0x2000</p>
  </dt>
  <dd>
    <p>Log estimated time till next charge signal.</p>
  </dd>
  <dt>
    <p>0x4000</p>
  </dt>
  <dd>
    <p>Show chargemax.</p>
  </dd>
  <dt>
    <p>0x8000</p>
  </dt>
  <dd>
    <p>Enable <em>core</em> file on SIGSEGV.</p>
  </dd>
  <dt>
    <p>0x10000 ... 0x800000, show more diagnostic and debug messages.</p>
  </dt>
  <dd>
    
  </dd>
  <dt>
    <p><strong>-m</strong><em>X</em><strong>	stdout="value"</strong></p>
  </dt>
  <dd>
    <p>Log to stderr.</p>
  </dd>
  <dt>
    <p><strong>-O</strong><em>X</em><strong>	outfile="path"</strong></p>
  </dt>
  <dd>
    <p>Log to file <em>X</em> instead of stderr. Isdnlog will close this device when it gets a signal -SIGHUP (-1). Only valid with -m option.</p><p>If the name starts with a "+", new data will be appended to the existing file. Default behaviour is to truncate the file when isdnlog opens it.</p>
  </dd>
  <dt>
    <p><strong>-C </strong><em>X</em><strong> 	console="path"</strong></p>
  </dt>
  <dd>
    <p>Log to console <em>X</em> instead of stderr. You can use -O and -C together, so that isdnlog copies output to both. Specify a full pathname. Beware: you must put a space between -C and X !</p>
  </dd>
  <dt>
    <p><strong>-M	monitor={yes|no}</strong></p>
  </dt>
  <dd>
    <p>With this flag, isdnlog will generate output for monitor programs like imon, imontty or isdnmon. You must also give -m with 0x800 enabled.</p>
  </dd>
  <dt>
    <p><strong>-l</strong><em>X</em><strong>	syslog="value"</strong></p>
  </dt>
  <dd>
    <p>Log to syslog. <em>X</em> is the log code. You can log to syslog and to stdout at the same time.</p>
  </dd>
  <dt>
    <p><strong>-x</strong><em>X</em><strong>	xisdn="value"</strong></p>
  </dt>
  <dd>
    <p>Pass information to x11 client. X is the log code. You can pass information to x11 clients and log to syslog and/or stdout at the same time.</p>
  </dd>
  <dt>
    <p><strong>-p</strong><em>PORT</em><strong> port="value"</strong></p>
  </dt>
  <dd>
    <p>Pass information to x11 client on this <em>PORT</em>.</p>
  </dd>
  <dt>
    <p><strong>-c</strong><em>X</em><strong>	calls="value"</strong></p>
  </dt>
  <dd>
    <p>Only with -x<em>X</em> : save the last <em>X</em> calls and pass this information to an x11 client. Default value is 100.</p>
  </dd>
  <dt>
    <p><strong>-L</strong><em>X</em><strong>	xlog="value"</strong></p>
  </dt>
  <dd>
    <p>Only with -x<em>X</em> : save the last <em>X</em> messages and pass this information to an x11 client. Default value is 500.</p>
  </dd>
  <dt>
    <p><strong>-w</strong><em>X</em><strong>	thruput="value"</strong></p>
  </dt>
  <dd>
    <p>If you enabled throughput logging (0x400), isdnlog will log the throughput every <em>X</em> seconds.</p>
  </dd>
  <dt>
    <p><strong>-I</strong><em>x:y</em><strong>	ciinterval="value[:value]"</strong></p>
  </dt>
  <dd>
    <p>Interval for printing of charge messages (0x20).</p><p>The first value is the interval for the calculated CI, the second value for the EH (AOC-D) messages. If only one value is given, both intervals are set to this value.</p>
  </dd>

</dl>

        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">LCR</h2>
        <div class="sectioncontent">

<dl class='dl-vertical'>
  <dt>
    <p><strong>-d</strong><em>x</em><strong>	abclcr="value"</strong></p>
  </dt>
  <dd>
    <p>Value is a bitmap:</p><p>0 ... off</p><p>1 ... calls to different area / country</p><p>2 ... local calls too</p><p>4 ... special numbers e.g. ISP</p><p>This needs a kernel patch to work. If the kernel patch is not found a simulation is done.</p><p>Note: depending on your telefon provider local area calls may or may not be routed to alternate providers. For changing the ISP a script is called. s. next option 'providerchange'</p>
  </dd>
  <dt>
    <p><strong>providerchange="path_top_script"</strong></p>
  </dt>
  <dd>
    <p>(There is no commandline option for this.) This script is called with 3 parameters, the new provider number (from rate-CC.dat), the number, which would be dialed, and the servicename. The script should adjust routing, name resolution and so on to connect to the ISP. If the script returns non zero, LCR will not be done.</p>
  </dd>

</dl>

        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">TIME MODULE</h2>
        <div class="sectioncontent">

<dl class='dl-vertical'>
  <dt>
    <p><strong>-t</strong><em>X</em><strong>	time={0|1|2}</strong></p>
  </dt>
  <dd>
    <p>Isdnlog will set your local system time to the time transmitted by your isdn service provider: -t1 = once, -t2 = every time.</p>
  </dd>

</dl>

        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">CHARGEHUP MODULE</h2>
        <div class="sectioncontent">

<dl class='dl-vertical'>
  <dt>
    <p><strong>-h</strong><em>X</em><strong>	hangup="value"</strong></p>
  </dt>
  <dd>
    <p>The isdn kernel system has a chargehup system, so it will hang up a few seconds before the next charge signal. If you don't get a charge signal from your phone company, isdnlog can emulate it.</p><p>On every outgoing connection, isdnlog will calculate the charge time from day of week, time of day and the distance zone of the connection.</p><p>The kernel needs to know how long the charge time is, and how many seconds before the next charge signal it should hang up. You have to set the second parameter with X in the form number:number (hang up seconds before next charge signal for charge times greater than or equal to 20 seconds : for charge times of less than 20 seconds).</p><p>With this information, isdnlog will call "isdnctrl chargeint &lt;device&gt; &lt;charge time&gt;" and "isdnctrl huptimeout &lt;device&gt; &lt;seconds before charge signal&gt;" (it actually communicates directly with isdn, without calling isdnctrl, but this would have the same effect).</p><p>You should run isdnlog with -t1 or better with -t2, so isdnlog sets the local time in sync with telephone switching office.</p><p>If there is a third number in value, this is the minimum connection time for providers charging a basic rate per connection.</p><p>e.g. hangup 3:5:60</p>
  </dd>

</dl>

        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">START MODULE</h2>
        <div class="sectioncontent">
<p>isdnlog can react on any event and start programs. This feature is disabled unless you activate it with:</p>
<dl class='dl-vertical'>
  <dt>
    <p><strong>-S	start={yes|no}</strong></p>
  </dt>
  <dd>
    <p>active "START" feature. Please read <a href="../man5/callerid.conf.5.html"><strong>callerid.conf</strong>(5)</a> for more information.</p>
  </dd>
  <dt>
    <p><strong>closefds={yes|no}</strong></p>
  </dt>
  <dd>
    <p>(There is no commandline option for this.) If set to yes, isdnlog will close all unnecessarily opened file descriptors before a "START" program is executed. This closing will also take place at isdnlog's restart after SIGHUP. Default is no.</p>
  </dd>

</dl>

        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">CONNECTION LOG MODULE</h2>
        <div class="sectioncontent">
<p>isdnlog will log all connections in /var/lib/isdn/calls. isdnrep can parse this file and calculate costs.</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">SEVERAL ISDN CARDS</h2>
        <div class="sectioncontent">
<p>If you have more than one isdn card, you need to run one isdnlog for each card. And every process must have a different name, so you should create a symbolic link isdnlog1 -&gt; isdnlog, and start isdnlog1 for the second card.</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">UNLOADING KERNEL MODULES</h2>
        <div class="sectioncontent">
<p>You cannot unload isdn kernel modules while an isdn device is in use, e.g. a PPP interface is defined or isdnlog is running. Look at /var/run for a file isdnlog.DEVICE.pid with the process id of isdnlog, and kill that. After that you should be able to unload your isdn kernel modules.</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">FILES</h2>
        <div class="sectioncontent">

<dl class='dl-vertical'>
  <dt>
    <p><strong>/dev/DEVICE</strong></p>
  </dt>
  <dd>
    <p>isdnlog requires a device as a parameter to read from (e.g. /dev/isdnctrl0 for the 1st isdn card).</p>
  </dd>
  <dt>
    <p><strong>/tmp/DEVICE</strong></p>
  </dt>
  <dd>
    <p>isdnlog can copy everything it reads to this file as debug information (e.g. /tmp/isdnctrl0 if you started isdnlog with /dev/isdnctrl0).</p>
  </dd>
  <dt>
    <p><strong>/var/run/isdnlog.DEVICE.pid</strong></p>
  </dt>
  <dd>
    <p>isdnlog creates this file with its process id. Useful to see if isdnlog is running.</p>
  </dd>
  <dt>
    <p><strong>/var/lock/LCK..DEVICE</strong></p>
  </dt>
  <dd>
    <p>isdnlog creates a lock file for the device, so no other processes will access that device.</p>
  </dd>
  <dt>
    <p><strong>/etc/isdn/isdn.conf</strong></p>
  </dt>
  <dd>
    <p>isdnlog config file. Options to isdnlog can be given on the command line, can be stored in this file in [options] (with command line option -f/etc/isdn/isdn.conf), or in a different config file, but isdnlog will look at this file for sections [global] [variables] [isdnlog].</p>
  </dd>

</dl>

        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">SIGNALS</h2>
        <div class="sectioncontent">

<dl class='dl-vertical'>
  <dt>
    <p><strong>SIGHUP (-1)</strong></p>
  </dt>
  <dd>
    <p>On SIGHUP isdnlog restarts, and does therefore reread it's config files.</p>
  </dd>
  <dt>
    <p><strong>SIGINT (-2), SIGTERM (-15), SIGQUIT (-3)</strong></p>
  </dt>
  <dd>
    <p>Isdnlog quits gracefully on receiving these termination signals.</p>
  </dd>
  <dt>
    <p><strong>SIGSEGV (-11)</strong></p>
  </dt>
  <dd>
    <p>If the log level contains 0x8000 (and your ulimits permit this) isdnlog will generate a <em>core</em> file before terminating.</p>
  </dd>

</dl>

        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">EXAMPLE</h2>
        <div class="sectioncontent">
<p>I start isdnlog with "isdnlog -f/etc/isdn/isdn.conf /dev/isdnctrl0". This file contains a [options] section:</p>
<pre>
[options]
#newline=no     # show all throughput messages in one line.
#width=80       # limit log messages to 80 characters per line
#amt=0:80:81    # digits to get a line through your PABX
log=15          # maximum debug mode
flush=no        # flush logfile after every write
pipe=no         # pipe log messages to stderr
daemon=yes      # run isdnlog as daemon
stdout=0x1ff7   # stderr logging level
outfile=+/var/log/isdn.log               # log to file
#console=       # log to a console
monitor=yes     # emulate output for  imon/imontty/...
syslog=0x1ff7   # syslog logging level
#xisdn=0x07ff   # x11 output level
#calls=         # store call information for x11 client
#xlog=          # store messages for x11 client
thruput=60      # if throughput logging is enabled: log every X seconds
time=2          # set time: 0 = never; 1 = once; 2 = every time
#hangup=        # simulate charge signals
start=yes       # enable starting programs

</pre>

        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">RELATED TO isdnlog&hellip;</h2>
        <div class="sectioncontent">
<p><a href="../man1/isdnconf.1.html"><strong>isdnconf</strong>(1)</a> <a href="../man5/isdn.conf.5.html"><strong>isdn.conf</strong>(5)</a> <a href="../man5/callerid.conf.5.html"><strong>callerid.conf</strong>(5)</a></strong></p><p><a href="../man5/rate-files.5.html"><strong>rate-files</strong>(5)</a> <strong>rate.conf</strong>(5)</strong></p><p><a href="../man5/isdnlog.5.html"><strong>isdnlog</strong>(5)</a> <strong>isdnrep</strong>(1) <a href="../man1/isdnrate.1.html"><strong>isdnrate</strong>(1)</a></strong></p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">AUTHOR</h2>
        <div class="sectioncontent">
<p>This manual page was written by Andreas Jellinghaus &lt;aj@dungeon.inka.de&gt;, for Debian GNU/Linux and isdn4linux, updated by Leopold Toetsch &lt;lt@toetsch.at&gt;.</p>
        </div>
      </section>
<nav>
  <ul class="pager">
   <li class="previous"><a href="isdnconfig.8.html"><span aria-hidden="true">&larr;</span> isdnconfig.8: Configure the debian isdnutils package</a></li>
   <li class="next"><a href="isisd.8.html">isisd.8: An is-is routing engine for use with quagga routing software. <span aria-hidden="true">&rarr;</span></a></li>
  </ul>
</nav>

  </div>
  <!-- jQuery (necessary for Bootstrap's JavaScript plugins) -->
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.2/jquery.min.js"></script>
  <!-- Include all compiled plugins (below), or include individual files as needed -->
  <script src="/js/bootstrap.min.js"></script>
  <script>
    (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
      (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
      m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
    })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

    ga('create', 'UA-60781387-1', 'auto');
    ga('send', 'pageview');

  </script>
</body>
</html>
