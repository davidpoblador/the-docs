<!DOCTYPE html>
<html lang="en">
<head>
  <link href="https://fonts.googleapis.com/css?family=Fira+Mono:400,700&effect=destruction%7Cshadow-multiple" rel="stylesheet" type="text/css">
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>md-mx-ctrl: Control mimedefang-multiplexor</title>
  <link href="/css/bootstrap.min.css" rel="stylesheet">
  <link href="/css/manpage.css" rel="stylesheet">
  <link rel="apple-touch-icon" sizes="57x57" href="/icons/apple-icon-57x57.png">
  <link rel="apple-touch-icon" sizes="60x60" href="/icons/apple-icon-60x60.png">
  <link rel="apple-touch-icon" sizes="72x72" href="/icons/apple-icon-72x72.png">
  <link rel="apple-touch-icon" sizes="76x76" href="/icons/apple-icon-76x76.png">
  <link rel="apple-touch-icon" sizes="114x114" href="/icons/apple-icon-114x114.png">
  <link rel="apple-touch-icon" sizes="120x120" href="/icons/apple-icon-120x120.png">
  <link rel="apple-touch-icon" sizes="144x144" href="/icons/apple-icon-144x144.png">
  <link rel="apple-touch-icon" sizes="152x152" href="/icons/apple-icon-152x152.png">
  <link rel="apple-touch-icon" sizes="180x180" href="/icons/apple-icon-180x180.png">
  <link rel="icon" type="image/png" sizes="192x192" href="/icons/android-icon-192x192.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/icons/favicon-32x32.png">
  <link rel="icon" type="image/png" sizes="96x96" href="/icons/favicon-96x96.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/icons/favicon-16x16.png">
  <link rel="manifest" href="/icons/manifest.json">
  <meta name="msapplication-TileColor" content="#ffffff">
  <meta name="msapplication-TileImage" content="/icons/ms-icon-144x144.png">
  <meta name="theme-color" content="#ffffff">
  <meta name="description" content="Control mimedefang-multiplexor">
  <meta name="twitter:card" content="summary_large_image">
  <meta name="twitter:site" content="@CartaTech">
  <meta name="twitter:creator" content="@CartaTech">
  <meta name="twitter:title" content="md-mx-ctrl (8) manual">
  <meta name="twitter:description" content="Control mimedefang-multiplexor">
  <meta name="twitter:image" content="https://www.carta.tech/images/mimedefang-md-mx-ctrl-8.png">
  <meta property="og:url" content="https://www.carta.tech/man-pages/man8/md-mx-ctrl.8.html" />
  <meta property="og:type" content="website" />
  <meta property="og:title" content="md-mx-ctrl (8) manual" />
  <meta property="og:description" content="Control mimedefang-multiplexor" />
  <meta property="fb:app_id" content="1241677679199500" />
  <meta property="og:image" content="https://www.carta.tech/images/mimedefang-md-mx-ctrl-8.png" />
  <meta property="og:image:width" content="600" />
  <meta property="og:image:height" content="315" />
</head>
<body>
  <div class="container final">
          <div class="page-header">
        <h1 class="font-effect-destruction">md-mx-ctrl<small> (8)</small></h1>
        <p class="lead">Control mimedefang-multiplexor</p>
      </div>

    <ol class="breadcrumb" itemscope itemtype="http://schema.org/BreadcrumbList">
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/">
      <span itemprop="name">Carta.tech</span>
    </a>
    <meta itemprop="position" content="1" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/">
      <span itemprop="name">Man Pages</span>
    </a>
    <meta itemprop="position" content="2" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/man8/">
      <span itemprop="name">System administration commands</span>
    </a>
    <meta itemprop="position" content="3" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/man8/md-mx-ctrl.8.html">
      <span itemprop="name">md-mx-ctrl: Control mimedefang-multiplexor</span>
    </a>
    <meta itemprop="position" content="4" />
  </li>
</ol>
<ol class="breadcrumb" itemscope itemtype="http://schema.org/BreadcrumbList">
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/">
      <span itemprop="name">Carta.tech</span>
    </a>
    <meta itemprop="position" content="1" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/packages/">
      <span itemprop="name">Packages</span>
    </a>
    <meta itemprop="position" content="2" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/packages/mimedefang/">
      <span itemprop="name">mimedefang</span>
    </a>
    <meta itemprop="position" content="3" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/man8/md-mx-ctrl.8.html">
      <span itemprop="name">md-mx-ctrl: Control mimedefang-multiplexor</span>
    </a>
    <meta itemprop="position" content="4" />
  </li>
</ol>
    
      <section>
        <h2 class="font-effect-shadow-multiple">SYNOPSIS</h2>
        <div class="sectioncontent">
<p><strong>md-mx-ctrl </strong>[<em>options</em>] <em>command</em></p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">DESCRIPTION</h2>
        <div class="sectioncontent">
<p><strong>md-mx-ctrl</strong> is a command-line tool for communicating with <a href="../man8/mimedefang-multiplexor.8.html"><strong>mimedefang-multiplexor</strong>(8)</a>.</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">OPTIONS</h2>
        <div class="sectioncontent">

<dl class='dl-vertical'>
  <dt>
    <p><strong>-h</strong></p>
  </dt>
  <dd>
    <p>Displays usage information.</p>
  </dd>
  <dt>
    <p><strong>-s </strong><em>path</em></p>
  </dt>
  <dd>
    <p>Specifies the path to the <strong>mimedefang-multiplexor</strong> socket.  If not specified, defaults to /var/spool/MIMEDefang/mimedefang-multiplexor.sock.</p>
  </dd>
  <dt>
    <p><strong>-i</strong></p>
  </dt>
  <dd>
    <p>This flag causes <strong>md-mx-ctrl</strong> to sit in a loop, reading commands on standard input and printing results to standard output.  It is intended for use by a monitoring program such as <strong>watch-mimedefang</strong>.</p>
  </dd>

</dl>

        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">COMMANDS</h2>
        <div class="sectioncontent">
<p>The following commands are available:</p>
<dl class='dl-vertical'>
  <dt>
    <p><strong>status</strong></p>
  </dt>
  <dd>
    <p>Prints the status of all slave Perl processes in human-readable format.</p>
  </dd>
  <dt>
    <p><strong>rawstatus</strong></p>
  </dt>
  <dd>
    <p>Prints the status of all slave Perl processes in a format easy to parse by computer.  The result is a single line with six words on it. The words are separated by a single space character.</p><p>Each character in the first word corresponds to a slave, and is "I" for an idle slave, "B" for a busy slave, "S" for a slave which is not running, and "K" for a slave which has been killed, but has not yet exited.  A slave is "idle" if there is a running Perl process waiting to do work.  "Busy" means the Perl process is currently filtering a message.  "S" means there is no associated Perl process with the slave, but one can be started if the load warrants.  Finally, "K" means the slave Perl process has been killed, but has yet to terminate.</p><p>The second word is the total number of messages processed since the multiplexor started up.  The third word is the total number of slaves which have been activated since the multiplexor started up.  (That is, it's a count of the number of times the multiplexor has forked and exec'd the Perl filter.)</p><p>The fourth word is the size of the queue for request queuing, and the fifth word is the actual number of requests in the queue.  The sixth word is the number of seconds elapsed since the multiplexor was started.</p>
  </dd>
  <dt>
    <p><strong>barstatus</strong></p>
  </dt>
  <dd>
    <p>Prints the status of busy slaves and queued requests in a nice "bar chart" format.  This lets you keep an eye on things with a script like this:</p>
<pre>
	while true ; do
		md-mx-ctrl barstatus
		sleep 1
	done
</pre>

  </dd>
  <dt>
    <p><strong>histo</strong></p>
  </dt>
  <dd>
    <p>Prints a histogram showing the number of slaves that were busy each time a request was processed.  A single line is printed for the numbers from 1 up to the maximum number of slaves.  Each line contains the count of busy slaves (1, 2, 3 up to MX_MAXIMUM), a space, and the number of times that many slaves were busy when a request was processed.</p>
  </dd>
  <dt>
    <p><strong>load</strong></p>
  </dt>
  <dd>
    <p>Prints a table showing "load averages" for the last 10 seconds, 1 minute, 5 minutes and 10 minutes.</p><p>Each row in the table corresponds to a time interval, displayed in the first column.  The remaining columns in the table are:</p><p><strong>Msgs:</strong> The number of messages scanned within the row's time interval.</p><p><strong>Msgs/Sec:</strong> The average number of messages scanned per second within the row's time interval.</p><p><strong>Avg Busy Slaves:</strong> The average number of busy slaves whenever a message was scanned.  (If you are processing any mail at all, this number will be at least 1, because there is always 1 busy slave when a message is scanned.)</p><p>If you have the <a href="../man1/watch.1.html"><strong>watch</strong>(1)</a> command on your system, you can keep an eye on the load with this command:</p>
<pre>
	watch -n 10 md-mx-ctrl load
</pre>
<p>If you do not have <strong>watch</strong>, the following shell script is a less fancy equivalent:</p>
<pre>
	#!/bin/sh
	while true; do
		clear
		date
		md-mx-ctrl load
		sleep 10
	done
</pre>

  </dd>
  <dt>
    <p><strong>rawload</strong></p>
  </dt>
  <dd>
    <p>Prints the load averages in computer-readable format.  The format consists of twenty-nine space-separated numbers:</p><p>The first four are integers representing the number of messages scanned in the last 10 seconds, 1 minute, 5 minutes and 10 minutes.</p><p>The second four are floating-point numbers representing the average number of busy slaves in the last 10 seconds, 1 minute, 5 minutes and 10 minutes.</p><p>The third four are floating-point numbers representing the average time per scan in milliseconds over the last 10 seconds, 1 minute, 5 minutes and 10 minutes.</p><p>The fourth four are the number of slave activations (new slaves started) over the last 10 seconds, 1 minute, 5 minutes and 10 minutes.</p><p>The fifth four are the number of slaves reaped (slaves that have exited) over the last 10 seconds, 1 minute, 5 minutes and 10 minutes.</p><p>The sixth four are the number of busy, idle, stopped and killed slaves.</p><p>The seventh four are the number of messages processed, the number of slave activations, the size of the request queue, and the number of requests actually on the queue.</p><p>The final number is the number of seconds since the multiplexor was started.</p>
  </dd>
  <dt>
    <p><strong>load-relayok</strong></p>
  </dt>
  <dd>
    <p>Similar to <strong>load</strong>, but shows timings for <strong>filter_relay</strong> calls.</p>
  </dd>
  <dt>
    <p><strong>load-senderok</strong></p>
  </dt>
  <dd>
    <p>Similar to <strong>load</strong>, but shows timings for <strong>filter_sender</strong> calls.</p>
  </dd>
  <dt>
    <p><strong>load-recipok</strong></p>
  </dt>
  <dd>
    <p>Similar to <strong>load</strong>, but shows timings for <strong>filter_recipient</strong> calls.</p>
  </dd>
  <dt>
    <p><strong>rawload-relayok</strong></p>
  </dt>
  <dd>
    <p>Similar to <strong>rawload</strong>, but shows timings for <strong>filter_relay</strong> calls. Note that the slave activation and reap statistics are present, but always 0.  They are only valid in a <strong>rawload</strong> command.</p>
  </dd>
  <dt>
    <p><strong>rawload-senderok</strong></p>
  </dt>
  <dd>
    <p>Similar to <strong>rawload</strong>, but shows timings for <strong>filter_sender</strong> calls. Note that the slave activation and reap statistics are present, but always 0.  They are only valid in a <strong>rawload</strong> command.</p>
  </dd>
  <dt>
    <p><strong>rawload-recipok</strong></p>
  </dt>
  <dd>
    <p>Similar to <strong>rawload</strong>, but shows timings for <strong>filter_recipient</strong> calls. Note that the slave activation and reap statistics are present, but always 0.  They are only valid in a <strong>rawload</strong> command.</p>
  </dd>
  <dt>
    <p><strong>load1 </strong><em>nsecs</em></p>
  </dt>
  <dd>
    <p>The <strong>load1</strong> command displays the load for various commands over the last <em>nsecs</em> seconds, where <em>nsecs</em> is an integer from 10 to 600.  The <strong>load1</strong> command combines the output of <strong>load</strong>, <strong>load-relayok</strong>, <strong>load-senderokf</strong> and <strong>load-recipok</strong> into one display.</p><p>You might use the command like this:</p>
<pre>
	watch -n 10 md-mx-ctrl load1 60
</pre>

  </dd>
  <dt>
    <p><strong>rawload1 </strong><em>nsecs</em></p>
  </dt>
  <dd>
    <p>Returns the <strong>load1</strong> data in human-readable format.  The result is a line containing twenty-six space-separated numbers:</p><p>The first three numbers are the number of scans performed in the last <em>nsecs</em> seconds, the average number of busy slaves when a scan was initiated and the average number of milliseconds per scan.</p><p>The second three are the same measurements for <strong>filter_relay</strong> calls.</p><p>The third three are the same measurements for <strong>filter_sender</strong> calls.</p><p>The fourth three are the same measurements for <strong>filter_relay</strong> calls.</p><p>The thirteenth through sixteenth numbers are the number of busy, idle, stopped and killed slaves, respectively.</p><p>The seventeenth number is the number of scans since <strong>mimedefang-multiplexor</strong> was started.</p><p>The eighteenth number is the number of times a new slave has been activated since program startup.</p><p>The nineteenth number is the size of the request queue and the twentieth number is the actual number of queued requests.</p><p>The twenty-first number is the time since program startup and the twenty-second number is a copy of <em>nsecs</em> for convenience.</p><p>The twenty-third through twenty-sixth numbers are the number of slaves currently executing a scan, relayok, senderok and recipok command respectively.</p>
  </dd>
  <dt>
    <p><strong>slaves</strong></p>
  </dt>
  <dd>
    <p>Displays a list of slaves and their process IDs.  Each line of output consists of a slave number, a status (I, B, K, or S), and for idle or busy slaves, the process-ID of the slave.  For busy slaves, the line may contain additional information about what the slave is doing.</p>
  </dd>
  <dt>
    <p><strong>busyslaves</strong></p>
  </dt>
  <dd>
    <p>Similar to <strong>slaves</strong>, but only outputs a line for each busy slave.</p>
  </dd>
  <dt>
    <p><strong>slaveinfo </strong><em>n</em></p>
  </dt>
  <dd>
    <p>Displays information about slave number <em>n</em>.</p>
  </dd>
  <dt>
    <p><strong>reread</strong></p>
  </dt>
  <dd>
    <p>Forces <strong>mimedefang-multiplexor</strong> to kill all idle slaves, and terminate and restart busy slaves when they become idle.  This forces a reread of filter rules.</p>
  </dd>
  <dt>
    <p><strong>msgs</strong></p>
  </dt>
  <dd>
    <p>Prints the total number of messages scanned since the multiplexor started.</p>
  </dd>

</dl>

        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">ADDITIONAL COMMANDS</h2>
        <div class="sectioncontent">
<p>You can supply any other command and arguments to <strong>md-mx-ctrl</strong>. It percent-encodes each command-line argument, glues the encoded arguments together with a single space between each, and sends the result to the multiplexor as a command.  This allows you to send arbitrary commands to your Perl slaves.  See the section "EXTENDING MIMEDEFANG" in <a href="../man5/mimedefang-filter.5.html"><strong>mimedefang-filter</strong>(5)</a> for additional details.</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">PERMISSIONS</h2>
        <div class="sectioncontent">
<p><strong>md-mx-ctrl</strong> uses the multiplexor's socket; therefore, it probably needs to be run as <em>root</em> or the same user as <strong>mimedefang-multiplexor</strong>.</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">AUTHOR</h2>
        <div class="sectioncontent">
<p><strong>md-mx-ctrl</strong> was written by David F. Skoll &lt;dfs@roaringpenguin.com&gt;. The <strong>mimedefang</strong> home page is <em>http://www.mimedefang.org/</em>.</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">RELATED TO md-mx-ctrl&hellip;</h2>
        <div class="sectioncontent">
<p><a href="../man8/mimedefang.pl.8.html"><strong>mimedefang.pl</strong>(8)</a>, <a href="../man5/mimedefang-filter.5.html"><strong>mimedefang-filter</strong>(5)</a>, <a href="../man8/mimedefang.8.html"><strong>mimedefang</strong>(8)</a>, <a href="../man7/mimedefang-protocol.7.html"><strong>mimedefang-protocol</strong>(7)</a>, <a href="../man8/watch-mimedefang.8.html"><strong>watch-mimedefang</strong>(8)</a></p>
        </div>
      </section>
<nav>
  <ul class="pager">
   <li class="previous"><a href="mcstransd.8.html"><span aria-hidden="true">&larr;</span> mcstransd.8: Mcs (multiple category system) daemon.  translates selinux mcs/mls labels to human readable form.</a></li>
   <li class="next"><a href="mdadm.8.html">mdadm.8: Manage md devices aka linux software raid <span aria-hidden="true">&rarr;</span></a></li>
  </ul>
</nav>

  </div>
  <!-- jQuery (necessary for Bootstrap's JavaScript plugins) -->
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.2/jquery.min.js"></script>
  <!-- Include all compiled plugins (below), or include individual files as needed -->
  <script src="/js/bootstrap.min.js"></script>
  <script>
    (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
      (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
      m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
    })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

    ga('create', 'UA-60781387-1', 'auto');
    ga('send', 'pageview');

  </script>
</body>
</html>
