<!DOCTYPE html>
<html lang="en">
<head>
  <link href="https://fonts.googleapis.com/css?family=Fira+Mono:400,700&effect=destruction%7Cshadow-multiple" rel="stylesheet" type="text/css">
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>ifscheme: Scheme control for network interfaces</title>
  <link href="/css/bootstrap.min.css" rel="stylesheet">
  <link href="/css/manpage.css" rel="stylesheet">
  <link rel="apple-touch-icon" sizes="57x57" href="/icons/apple-icon-57x57.png">
  <link rel="apple-touch-icon" sizes="60x60" href="/icons/apple-icon-60x60.png">
  <link rel="apple-touch-icon" sizes="72x72" href="/icons/apple-icon-72x72.png">
  <link rel="apple-touch-icon" sizes="76x76" href="/icons/apple-icon-76x76.png">
  <link rel="apple-touch-icon" sizes="114x114" href="/icons/apple-icon-114x114.png">
  <link rel="apple-touch-icon" sizes="120x120" href="/icons/apple-icon-120x120.png">
  <link rel="apple-touch-icon" sizes="144x144" href="/icons/apple-icon-144x144.png">
  <link rel="apple-touch-icon" sizes="152x152" href="/icons/apple-icon-152x152.png">
  <link rel="apple-touch-icon" sizes="180x180" href="/icons/apple-icon-180x180.png">
  <link rel="icon" type="image/png" sizes="192x192" href="/icons/android-icon-192x192.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/icons/favicon-32x32.png">
  <link rel="icon" type="image/png" sizes="96x96" href="/icons/favicon-96x96.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/icons/favicon-16x16.png">
  <link rel="manifest" href="/icons/manifest.json">
  <meta name="msapplication-TileColor" content="#ffffff">
  <meta name="msapplication-TileImage" content="/icons/ms-icon-144x144.png">
  <meta name="theme-color" content="#ffffff">
  <meta name="description" content="Scheme control for network interfaces">
  <meta name="twitter:card" content="summary_large_image">
  <meta name="twitter:site" content="@CartaTech">
  <meta name="twitter:creator" content="@CartaTech">
  <meta name="twitter:title" content="ifscheme (8) manual">
  <meta name="twitter:description" content="Scheme control for network interfaces">
  <meta name="twitter:image" content="https://www.carta.tech/images/ifscheme-ifscheme-8.png">
  <meta property="og:url" content="https://www.carta.tech/man-pages/man8/ifscheme.8.html" />
  <meta property="og:type" content="website" />
  <meta property="og:title" content="ifscheme (8) manual" />
  <meta property="og:description" content="Scheme control for network interfaces" />
  <meta property="fb:app_id" content="1241677679199500" />
  <meta property="og:image" content="https://www.carta.tech/images/ifscheme-ifscheme-8.png" />
  <meta property="og:image:width" content="600" />
  <meta property="og:image:height" content="315" />
</head>
<body>
  <div class="container final">
          <div class="page-header">
        <h1 class="font-effect-destruction">ifscheme<small> (8)</small></h1>
        <p class="lead">Scheme control for network interfaces</p>
      </div>

    <ol class="breadcrumb" itemscope itemtype="http://schema.org/BreadcrumbList">
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/">
      <span itemprop="name">Carta.tech</span>
    </a>
    <meta itemprop="position" content="1" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/">
      <span itemprop="name">Man Pages</span>
    </a>
    <meta itemprop="position" content="2" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/man8/">
      <span itemprop="name">System administration commands</span>
    </a>
    <meta itemprop="position" content="3" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/man8/ifscheme.8.html">
      <span itemprop="name">ifscheme: Scheme control for network interfaces</span>
    </a>
    <meta itemprop="position" content="4" />
  </li>
</ol>
<ol class="breadcrumb" itemscope itemtype="http://schema.org/BreadcrumbList">
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/">
      <span itemprop="name">Carta.tech</span>
    </a>
    <meta itemprop="position" content="1" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/packages/">
      <span itemprop="name">Packages</span>
    </a>
    <meta itemprop="position" content="2" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/packages/ifscheme/">
      <span itemprop="name">ifscheme</span>
    </a>
    <meta itemprop="position" content="3" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/man8/ifscheme.8.html">
      <span itemprop="name">ifscheme: Scheme control for network interfaces</span>
    </a>
    <meta itemprop="position" content="4" />
  </li>
</ol>
    
      <section>
        <h2 class="font-effect-shadow-multiple">SYNOPSIS</h2>
        <div class="sectioncontent">
<p><strong>ifscheme [</strong><em>-v</em><strong>] [[</strong><em>-s</em><strong>] newscheme]</strong></p>
<dl class='dl-vertical'>
  <dt>
    <p><strong>mapping &lt;interface&gt; script ifscheme-mapping</strong></p>
  </dt>
  <dd>
    
  </dd>

</dl>

        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">DESCRIPTION</h2>
        <div class="sectioncontent">
<p><em>ifscheme</em> allows you to change network configuraton schemes or query the current scheme. It integrates with the <a href="../man8/ifup.8.html"><strong>ifup</strong>(8)</a> command and <a href="../man5/interfaces.5.html"><strong>interfaces</strong>(5)</a><strong>.</strong> For example, you might use this program to configure a "home" scheme and a "work" scheme for a network device on a laptop. When you move between home and work, a simple command can reconfigure your networking.</p><p>If you run the program with no parameters, it will tell what the current network scheme is.</p><p>The ifscheme-mapping utility is used to tell the ifup and ifdown utilities about the current scheme.</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">OPTIONS</h2>
        <div class="sectioncontent">

<dl class='dl-vertical'>
  <dt>
    <p><strong>-v</strong></p>
  </dt>
  <dd>
    
  </dd>
  <dt>
    <p><strong>--verbose</strong></p>
  </dt>
  <dd>
    <p>Run in verbose mode. This is passed in to the ifup and ifdown programs as well.</p>
  </dd>
  <dt>
    <p><strong>-l</strong></p>
  </dt>
  <dd>
    
  </dd>
  <dt>
    <p><strong>--list</strong></p>
  </dt>
  <dd>
    <p>list all schemes available/defined in /etc/network/interfaces.</p>
  </dd>
  <dt>
    <p><strong>newscheme</strong></p>
  </dt>
  <dd>
    
  </dd>
  <dt>
    <p><strong>-s newscheme</strong></p>
  </dt>
  <dd>
    
  </dd>
  <dt>
    <p><strong>--scheme newscheme</strong></p>
  </dt>
  <dd>
    <p>Change to a new network configuration scheme. When the scheme is changed, network interfaces that were using the old scheme will be taken down and brought back up to use the new configuration scheme. -s or --scheme are mandatory if newscheme begins with a -.</p>
  </dd>

</dl>

        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">CONFIGURATION</h2>
        <div class="sectioncontent">
<p>To make the program do anything useful when a scheme is selected, you must edit /etc/network/interfaces to add a mapping for the interface (or interfaces) that can be controlled on a per-scheme basis. Suppose you want to control eth0 in this way. You might have an existing eth0 configuraton in there, such as:</p>
<pre>
  auto eth0
</pre>

<pre>
  iface eth0 inet static
  	address 192.168.1.5
  	netmask 255.255.255.0
  	gateway 192.168.1.1
</pre>
<p>To change this so you can chose between static routing and dhcp, replace it with the following (it helps to ifdown the interface first).</p>
<pre>
  auto eth0
</pre>

<pre>
  mapping eth0
  	script ifscheme-mapping
</pre>

<pre>
  iface eth0-home inet static
  	address 192.168.1.5
  	netmask 255.255.255.0
  	gateway 192.168.1.1
</pre>

<pre>
  iface eth0-work inet dhcp
</pre>
<p>Now if you run "ifscheme home" and ifup the interface, you'll get the eth0-home configuration stanza. If you run "ifscheme work", it will be changed to the eth0-work stanza. You can add additional stanzas as desired, but the label must always be of the form &lt;hardware interface&gt;-&lt;scheme name&gt;.</p><p>If you have a second interface (perhaps a wireless network card on eth1), you can duplicate the above for that interface, changing the eth0 and the configuration details as appropriate, but remember to add an iface stanza for every scheme name for the second interface.</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">FILES</h2>
        <div class="sectioncontent">

<dl class='dl-vertical'>
  <dt>
    <p><em>/etc/network/interfaces</em></p>
  </dt>
  <dd>
    <p>the interfaces definition file</p>
  </dd>
  <dt>
    <p><em>/etc/network/run/scheme</em></p>
  </dt>
  <dd>
    <p>the current scheme</p>
  </dd>
  <dt>
    <p><em>/etc/network/run/ifstate</em></p>
  </dt>
  <dd>
    <p>a record of the current state of the interfaces, managed by ifup and ifdown</p>
  </dd>

</dl>

        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">BUGS</h2>
        <div class="sectioncontent">
<p>All schemed interfaces will have the same scheme.</p><p>Any schemed interface which does not have an entry for the current scheme and is not configured when the scheme is changed will not be successfully configured when it is brought up.</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">RELATED TO ifscheme&hellip;</h2>
        <div class="sectioncontent">
<p><a href="../man5/interfaces.5.html"><strong>interfaces</strong>(5)</a> <a href="../man8/ifup.8.html"><strong>ifup</strong>(8)</a> <a href="../man8/ifdown.8.html"><strong>ifdown</strong>(8)</a></p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">DISTRIBUTION</h2>
        <div class="sectioncontent">
<p>Redistribution is subject to the GNU public license.</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">AUTHORS</h2>
        <div class="sectioncontent">
<p>Joey Hess &lt;joey@kitenet.net&gt;, Peter Wilson &lt;pwilson@cs.hmc.edu&gt;</p>
        </div>
      </section>
<nav>
  <ul class="pager">
   <li class="previous"><a href="ifrename.8.html"><span aria-hidden="true">&larr;</span> ifrename.8: Rename network interfaces based on various static criteria</a></li>
   <li class="next"><a href="ifscheme-mapping.8.html">ifscheme-mapping.8: Scheme control for network interfaces <span aria-hidden="true">&rarr;</span></a></li>
  </ul>
</nav>

  </div>
  <!-- jQuery (necessary for Bootstrap's JavaScript plugins) -->
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.2/jquery.min.js"></script>
  <!-- Include all compiled plugins (below), or include individual files as needed -->
  <script src="/js/bootstrap.min.js"></script>
  <script>
    (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
      (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
      m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
    })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

    ga('create', 'UA-60781387-1', 'auto');
    ga('send', 'pageview');

  </script>
</body>
</html>
