<!DOCTYPE html>
<html lang="en">
<head>
  <link href="https://fonts.googleapis.com/css?family=Fira+Mono:400,700&effect=destruction%7Cshadow-multiple" rel="stylesheet" type="text/css">
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>masqmail: An offline mail transfer agent</title>
  <link href="/css/bootstrap.min.css" rel="stylesheet">
  <link href="/css/manpage.css" rel="stylesheet">
  <link rel="apple-touch-icon" sizes="57x57" href="/icons/apple-icon-57x57.png">
  <link rel="apple-touch-icon" sizes="60x60" href="/icons/apple-icon-60x60.png">
  <link rel="apple-touch-icon" sizes="72x72" href="/icons/apple-icon-72x72.png">
  <link rel="apple-touch-icon" sizes="76x76" href="/icons/apple-icon-76x76.png">
  <link rel="apple-touch-icon" sizes="114x114" href="/icons/apple-icon-114x114.png">
  <link rel="apple-touch-icon" sizes="120x120" href="/icons/apple-icon-120x120.png">
  <link rel="apple-touch-icon" sizes="144x144" href="/icons/apple-icon-144x144.png">
  <link rel="apple-touch-icon" sizes="152x152" href="/icons/apple-icon-152x152.png">
  <link rel="apple-touch-icon" sizes="180x180" href="/icons/apple-icon-180x180.png">
  <link rel="icon" type="image/png" sizes="192x192" href="/icons/android-icon-192x192.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/icons/favicon-32x32.png">
  <link rel="icon" type="image/png" sizes="96x96" href="/icons/favicon-96x96.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/icons/favicon-16x16.png">
  <link rel="manifest" href="/icons/manifest.json">
  <meta name="msapplication-TileColor" content="#ffffff">
  <meta name="msapplication-TileImage" content="/icons/ms-icon-144x144.png">
  <meta name="theme-color" content="#ffffff">
  <meta name="description" content="An offline mail transfer agent">
  <meta name="twitter:card" content="summary_large_image">
  <meta name="twitter:site" content="@CartaTech">
  <meta name="twitter:creator" content="@CartaTech">
  <meta name="twitter:title" content="masqmail (8) manual">
  <meta name="twitter:description" content="An offline mail transfer agent">
  <meta name="twitter:image" content="https://www.carta.tech/images/masqmail-masqmail-8.png">
  <meta property="og:url" content="https://www.carta.tech/man-pages/man8/masqmail.8.html" />
  <meta property="og:type" content="website" />
  <meta property="og:title" content="masqmail (8) manual" />
  <meta property="og:description" content="An offline mail transfer agent" />
  <meta property="fb:app_id" content="1241677679199500" />
  <meta property="og:image" content="https://www.carta.tech/images/masqmail-masqmail-8.png" />
  <meta property="og:image:width" content="600" />
  <meta property="og:image:height" content="315" />
</head>
<body>
  <div class="container final">
          <div class="page-header">
        <h1 class="font-effect-destruction">masqmail<small> (8)</small></h1>
        <p class="lead">An offline mail transfer agent</p>
      </div>

    <ol class="breadcrumb" itemscope itemtype="http://schema.org/BreadcrumbList">
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/">
      <span itemprop="name">Carta.tech</span>
    </a>
    <meta itemprop="position" content="1" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/">
      <span itemprop="name">Man Pages</span>
    </a>
    <meta itemprop="position" content="2" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/man8/">
      <span itemprop="name">System administration commands</span>
    </a>
    <meta itemprop="position" content="3" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/man8/masqmail.8.html">
      <span itemprop="name">masqmail: An offline mail transfer agent</span>
    </a>
    <meta itemprop="position" content="4" />
  </li>
</ol>
<ol class="breadcrumb" itemscope itemtype="http://schema.org/BreadcrumbList">
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/">
      <span itemprop="name">Carta.tech</span>
    </a>
    <meta itemprop="position" content="1" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/packages/">
      <span itemprop="name">Packages</span>
    </a>
    <meta itemprop="position" content="2" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/packages/masqmail/">
      <span itemprop="name">masqmail</span>
    </a>
    <meta itemprop="position" content="3" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/man8/masqmail.8.html">
      <span itemprop="name">masqmail: An offline mail transfer agent</span>
    </a>
    <meta itemprop="position" content="4" />
  </li>
</ol>
    
      <section>
        <h2 class="font-effect-shadow-multiple">SYNOPSIS</h2>
        <div class="sectioncontent">
<p><strong>/usr/sbin/masqmail </strong>[<strong>-C </strong><em>file</em>] [<strong>-odq</strong>] [<strong>-bd</strong>] [<strong>-q</strong><em>interval</em>]</p><p><strong>/usr/sbin/masqmail </strong>[<strong>-odq</strong>] [<strong>-bs</strong>]</p><p><strong>/usr/sbin/masqmail </strong>[<strong>-bp</strong>]</p><p><strong>/usr/sbin/masqmail </strong>[<strong>-q</strong>]</p><p><strong>/usr/sbin/masqmail </strong>[<strong>-qo </strong>[<em>name</em>]]</p><p><strong>/usr/sbin/masqmail </strong>[<strong>-odq</strong>] [<strong>-g </strong>[<em>name</em>]]</p><p><strong>/usr/sbin/masqmail </strong>[<strong>-odq</strong>] [<strong>-go </strong>[<em>name</em>]]</p><p><strong>/usr/sbin/masqmail </strong>[<strong>-t</strong>] [<strong>-oi</strong>] [<strong>-f </strong><em>address</em>] [<strong>--</strong>] <em>address...</em></p><p><strong>/usr/sbin/mailq</strong></p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">DESCRIPTION</h2>
        <div class="sectioncontent">
<p>Masqmail is a mail server designed for hosts that do not have a permanent internet connection e.g. a home network or a single host at home. It has special support for connections to different ISPs. It replaces sendmail or other MTAs such as qmail or exim. It can also act as a POP3 client (if this functionality has not been disabled at build configuration time).</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">OPTIONS</h2>
        <div class="sectioncontent">
<p>Since masqmail is intended to replace sendmail, it uses the same command line options, but not all are implemented. There are also two additional options, which are unique to masqmail (<strong>-qo </strong><em>connection</em> and <strong>-g</strong>)</p>
<dl class='dl-vertical'>
  <dt>
    <p><strong>--</strong></p>
  </dt>
  <dd>
    <p>Not a `real' option, it means that all following arguments are to be understood as arguments and not as options even if they begin with a leading dash `-'. Mutt is known to call sendmail with this option.</p>
  </dd>
  <dt>
    <p><strong>-bd</strong></p>
  </dt>
  <dd>
    <p>Run as daemon, accepting connections, usually on port 25 if not configured differently. This is usually used in the startup script at system boot and together with the <strong>-q</strong> option (see below).</p>
  </dd>
  <dt>
    <p><strong>-bi</strong></p>
  </dt>
  <dd>
    <p>Old sendmail rebuilds its alias database when invoked with this option. Masqmail ignores it. Masqmail reads directly from the file given with `alias_file' in the config file.</p>
  </dd>
  <dt>
    <p><strong>-bp</strong></p>
  </dt>
  <dd>
    <p>Show the messages in the queue. Same as calling masqmail as `mailq'.</p>
  </dd>
  <dt>
    <p><strong>-bs</strong></p>
  </dt>
  <dd>
    <p>Accept SMTP commands from stdin. Some mailers (e.g. pine) use this option as an interface. It can also be used to call masqmail from inetd.</p>
  </dd>
  <dt>
    <p><strong>-B </strong><em>arg</em></p>
  </dt>
  <dd>
    <p><em>arg</em> is usually 8BITMIME. Some mailers use this to indicate that the message contains characters &gt; 127. Masqmail is 8-bit clean and ignores this, so you do not have to recompile elm, which is very painful ;-). Note though that this violates some conventions: masqmail does not convert 8 bit messages to any MIME format if it encounters a mail server which does not advertise its 8BITMIME capability, masqmail does not advertise this itself. This is the same practice as that of exim (but different to sendmail).</p>
  </dd>
  <dt>
    <p><strong>-bV </strong></p>
  </dt>
  <dd>
    <p>Show version information.</p>
  </dd>
  <dt>
    <p><strong>-C </strong><em>filename</em></p>
  </dt>
  <dd>
    <p>Use another configuration than <em>/etc/masqmail/masqmail.conf</em>. Useful for debugging purposes. If not invoked by a privileged user, masqmail will drop all privileges.</p>
  </dd>
  <dt>
    <p><strong>-d </strong><em>number</em></p>
  </dt>
  <dd>
    <p>Set the debug level. This takes precedence before the value of `debug_level' in the configuration file. Read the warning in the description of the latter.</p>
  </dd>
  <dt>
    <p><strong>-f [</strong><em>address</em><strong>]</strong></p>
  </dt>
  <dd>
    <p>Set the return path address to <em>address</em>. Only root, the user mail and anyone in group mail is allowed to do that.</p>
  </dd>
  <dt>
    <p><strong>-F [</strong><em>string</em><strong>]</strong></p>
  </dt>
  <dd>
    <p>Set the full sender name (in the From: header) to <em>string</em>.</p>
  </dd>
  <dt>
    <p><strong>-g [</strong><em>name</em><strong>]</strong></p>
  </dt>
  <dd>
    <p>Get mail (using pop3 or apop), using the configurations given with get.<em>name</em> in the main configuration. Without <em>name</em>, all get configurations will be used. See also <a href="../man5/masqmail.get.5.html"><strong>masqmail.get</strong>(5)</a></strong></p>
  </dd>
  <dt>
    <p><strong>-go [</strong><em>interval</em><strong>] [</strong><em>name</em><strong>]</strong></p>
  </dt>
  <dd>
    <p>Can be followed by a connection name. Use this option in your script which starts as soon as a link to the internet has been set up (usually ip-up). When masqmail is called with this option, the specified get configuration(s) is(are) read and mail will be retrieved from servers on the internet. The <em>name</em> is defined in the configuration (see <strong>online_gets.</strong><em>name</em>).</p><p>If called with an interval option (recognized by a digit as the first characater), masqmail starts as a daemon and tries to get mail in these intervals. It checks for the online status first. Example: `masqmail -go 5m' will retrieve mail every five minutes.</p><p>If called without <em>name</em>, the online status is determined with the configured method (see <strong>online_detect</strong> in <a href="../man5/masqmail.conf.5.html"><strong>masqmail.conf</strong>(5)</a></strong>).</p>
  </dd>
  <dt>
    <p><strong>-i</strong></p>
  </dt>
  <dd>
    <p>Same as <strong>-oi</strong>, see below.</p>
  </dd>
  <dt>
    <p><strong>-Mrm </strong><em>list</em></p>
  </dt>
  <dd>
    <p>Remove given messages from the queue. Only allowed for privileged users. The identifiers of messages are listed in the output of <em>masqmail -bp</em> (<em>mailq</em>).</p>
  </dd>
  <dt>
    <p><strong>-oem</strong></p>
  </dt>
  <dd>
    <p>If the <strong>-oi</strong> ist not also given, always return with a non zero return code. Maybe someone tells me what this is good for...</p>
  </dd>
  <dt>
    <p><strong>-odb</strong></p>
  </dt>
  <dd>
    <p>Deliver in background. Masqmail always does this, which makes this option pretty much useless.</p>
  </dd>
  <dt>
    <p><strong>-odq</strong></p>
  </dt>
  <dd>
    <p>Do not attempt to deliver immediately. Any messages will be queued until the next queue running process picks them up and delivers them. You get the same effect by setting the do_queue option in /etc/masqmail/masqmail.conf.</p>
  </dd>
  <dt>
    <p><strong>-oi</strong></p>
  </dt>
  <dd>
    <p>A dot as a single character in a line does not terminate the message.</p>
  </dd>
  <dt>
    <p><strong>-q [</strong><em>interval</em><strong>]</strong></p>
  </dt>
  <dd>
    <p>If not given with an argument, run a queue process, i.e. try to deliver all messages in the queue. Masqmail sends only to those addresses that are on the local net, not to those that are outside. Use <strong>-qo</strong> for those.</p><p>If you have configured inetd to start masqmail, you can use this option in a cron job which starts in regular time intervals, to mimic the same effect as starting masqmail with <strong>-bd -q30m</strong>.</p><p>An argument may be a time interval i.e. a numerical value followed by one of the letters. s,m,h,d,w which are interpreted as seconds, minutes, hours, days or weeks respectively. Example: <strong>-q30m</strong>. Masqmail starts as a daemon and a queue runner process will be started automatically once in this time interval. This is usually used together with <strong>-bd</strong> (see above).</p>
  </dd>
  <dt>
    <p><strong>-qo [</strong><em>name</em><strong>]</strong></p>
  </dt>
  <dd>
    <p>Can be followed by a connection name. Use this option in your script which starts as soon as a link to the internet has been set up (usually ip-up). When masqmail is called with this option, the specified route configuration is read and the queued mail with destinations on the internet will be sent. The <em>name</em> is defined in the configuration (see <strong>online_routes.</strong><em>name</em>).</p><p>If called without <em>name</em> the online status is determined with the configured method (see <strong>online_detect</strong> in <a href="../man5/masqmail.conf.5.html"><strong>masqmail.conf</strong>(5)</a></strong>)</p>
  </dd>
  <dt>
    <p><strong>-t</strong></p>
  </dt>
  <dd>
    <p>Read recipients from headers. Delete `Bcc:' headers. (Since 0.2.25, masqmail deletes Bcc: headers in all cases.) If any arguments are given, these are interpreted as recipient addresses and the message will not be sent to these, although they might appear in To:, Cc:, or Bcc: headers. I.e. the set of argument recipients is ``substracted'' from the set of header recipients.</p><p>This behavior is similar to exim's and smail's. Postfix, in contrast, adds the arguments to the set of header recipients. Sendmail seems to behave differently, depending on the version. See <a href="../man8/exim.8.html"><strong>exim</strong>(8)</a> for further information.</p>
  </dd>
  <dt>
    <p><strong>-v</strong></p>
  </dt>
  <dd>
    <p>Log also to stdout. Currently, some log messages are marked as `write to stdout' and additionally, all messages with priority `LOG_ALERT' and `LOG_WARNING' will be written to stdout if this option is given. It is disabled in daemon mode.</p>
  </dd>

</dl>

        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">ENVIRONMENT FOR PIPES AND MDAS</h2>
        <div class="sectioncontent">
<p>For security reasons, before any pipe command from an alias expansion or an mda is called, the environment variables will be completely discarded and newly set up. These are:</p><p>SENDER, RETURN_PATH &ndash; the return path.</p><p>SENDER_DOMAIN &ndash; the domain part of the return path.</p><p>SENDER_LOCAL &ndash; the local part of the return path.</p><p>RECEIVED_HOST &ndash; the host the message was received from (unless local).</p><p>LOCAL_PART, USER, LOGNAME &ndash; the local part of the (original) recipient.</p><p>MESSAGE_ID &ndash; the unique message id. This is not necessarily identical with the Message ID as given in the Message ID: header.</p><p>QUALIFY_DOMAIN &ndash; the domain which will be appended to unqualified addresses.</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">FILES</h2>
        <div class="sectioncontent">
<p><em>/etc/masqmail/masqmail.conf</em> is the main configuration for masqmail. Depending on the settings in this file, you will also have other configuration files in <em>/etc/masqmail/</em>.</p><p><em>/var/spool/masqmail/</em> is the spool directory where masqmail stores its spooled messages and the uniq pop ids.</p><p><em>/var/spool/mail/</em> is the directory where locally delivered mail will be put, if not configured differently in <em>masqmail.conf</em>.</p><p><em>/var/log/masqmail/</em> is the directory where masqmail stores its log mesages. This can also be somewhere else if configured differently by your sysadmin or the package mantainer.</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">CONFORMING TO</h2>
        <div class="sectioncontent">
<p>RFC 821, 822, 1869, 1870, 2197, 2554 (SMTP)</p><p>RFC 1725, 1939 (POP3)</p><p>RFC 1321 (MD5)</p><p>RFC 2195 (CRAM-MD5)</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">AUTHOR</h2>
        <div class="sectioncontent">
<p>Masqmail was written by Oliver Kurth. It is now maintained by Markus Schnalke &lt;meillo@marmaro.de&gt;.</p><p>You will find the newest version of masqmail at <strong>http://marmaro.de/prog/masqmail/</strong>. There is also a mailing list, you will find information about it at masqmail's main site.</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">BUGS</h2>
        <div class="sectioncontent">
<p>Please report them to the mailing list.</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">RELATED TO masqmail&hellip;</h2>
        <div class="sectioncontent">
<p><a href="../man5/masqmail.conf.5.html"><strong>masqmail.conf</strong>(5)</a></strong>, <a href="../man5/masqmail.route.5.html"><strong>masqmail.route</strong>(5)</a></strong>, <a href="../man5/masqmail.get.5.html"><strong>masqmail.get</strong>(5)</a></strong>, <a href="../man5/masqmail.aliases.5.html"><strong>masqmail.aliases</strong>(5)</a></strong></p>
        </div>
      </section>
<nav>
  <ul class="pager">
   <li class="previous"><a href="mapscrn.8.html"><span aria-hidden="true">&larr;</span> mapscrn.8: Load screen output mapping table</a></li>
   <li class="next"><a href="massagevendor.8.html">massagevendor.8: Convert the ethernet vendor codes master list to arpwatch format <span aria-hidden="true">&rarr;</span></a></li>
  </ul>
</nav>

  </div>
  <!-- jQuery (necessary for Bootstrap's JavaScript plugins) -->
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.2/jquery.min.js"></script>
  <!-- Include all compiled plugins (below), or include individual files as needed -->
  <script src="/js/bootstrap.min.js"></script>
  <script>
    (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
      (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
      m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
    })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

    ga('create', 'UA-60781387-1', 'auto');
    ga('send', 'pageview');

  </script>
</body>
</html>
