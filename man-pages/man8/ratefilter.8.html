<!DOCTYPE html>
<html lang="en">
<head>
  <link href="https://fonts.googleapis.com/css?family=Fira+Mono:400,700&effect=destruction%7Cshadow-multiple" rel="stylesheet" type="text/css">
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>ratefilter: Rate-limiting mail filter</title>
  <link href="/css/bootstrap.min.css" rel="stylesheet">
  <link href="/css/manpage.css" rel="stylesheet">
  <link rel="apple-touch-icon" sizes="57x57" href="/icons/apple-icon-57x57.png">
  <link rel="apple-touch-icon" sizes="60x60" href="/icons/apple-icon-60x60.png">
  <link rel="apple-touch-icon" sizes="72x72" href="/icons/apple-icon-72x72.png">
  <link rel="apple-touch-icon" sizes="76x76" href="/icons/apple-icon-76x76.png">
  <link rel="apple-touch-icon" sizes="114x114" href="/icons/apple-icon-114x114.png">
  <link rel="apple-touch-icon" sizes="120x120" href="/icons/apple-icon-120x120.png">
  <link rel="apple-touch-icon" sizes="144x144" href="/icons/apple-icon-144x144.png">
  <link rel="apple-touch-icon" sizes="152x152" href="/icons/apple-icon-152x152.png">
  <link rel="apple-touch-icon" sizes="180x180" href="/icons/apple-icon-180x180.png">
  <link rel="icon" type="image/png" sizes="192x192" href="/icons/android-icon-192x192.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/icons/favicon-32x32.png">
  <link rel="icon" type="image/png" sizes="96x96" href="/icons/favicon-96x96.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/icons/favicon-16x16.png">
  <link rel="manifest" href="/icons/manifest.json">
  <meta name="msapplication-TileColor" content="#ffffff">
  <meta name="msapplication-TileImage" content="/icons/ms-icon-144x144.png">
  <meta name="theme-color" content="#ffffff">
  <meta name="description" content="Rate-limiting mail filter">
  <meta name="twitter:card" content="summary_large_image">
  <meta name="twitter:site" content="@CartaTech">
  <meta name="twitter:creator" content="@CartaTech">
  <meta name="twitter:title" content="ratefilter (8) manual">
  <meta name="twitter:description" content="Rate-limiting mail filter">
  <meta name="twitter:image" content="https://www.carta.tech/images/courier-mta-ratefilter-8.png">
  <meta property="og:url" content="https://www.carta.tech/man-pages/man8/ratefilter.8.html" />
  <meta property="og:type" content="website" />
  <meta property="og:title" content="ratefilter (8) manual" />
  <meta property="og:description" content="Rate-limiting mail filter" />
  <meta property="fb:app_id" content="1241677679199500" />
  <meta property="og:image" content="https://www.carta.tech/images/courier-mta-ratefilter-8.png" />
  <meta property="og:image:width" content="600" />
  <meta property="og:image:height" content="315" />
</head>
<body>
  <div class="container final">
          <div class="page-header">
        <h1 class="font-effect-destruction">ratefilter<small> (8)</small></h1>
        <p class="lead">Rate-limiting mail filter</p>
      </div>

    <ol class="breadcrumb" itemscope itemtype="http://schema.org/BreadcrumbList">
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/">
      <span itemprop="name">Carta.tech</span>
    </a>
    <meta itemprop="position" content="1" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/">
      <span itemprop="name">Man Pages</span>
    </a>
    <meta itemprop="position" content="2" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/man8/">
      <span itemprop="name">System administration commands</span>
    </a>
    <meta itemprop="position" content="3" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/man8/ratefilter.8.html">
      <span itemprop="name">ratefilter: Rate-limiting mail filter</span>
    </a>
    <meta itemprop="position" content="4" />
  </li>
</ol>
<ol class="breadcrumb" itemscope itemtype="http://schema.org/BreadcrumbList">
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/">
      <span itemprop="name">Carta.tech</span>
    </a>
    <meta itemprop="position" content="1" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/packages/">
      <span itemprop="name">Packages</span>
    </a>
    <meta itemprop="position" content="2" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/packages/courier-mta/">
      <span itemprop="name">courier-mta</span>
    </a>
    <meta itemprop="position" content="3" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/man8/ratefilter.8.html">
      <span itemprop="name">ratefilter: Rate-limiting mail filter</span>
    </a>
    <meta itemprop="position" content="4" />
  </li>
</ol>
    
      <section>
        <h2 class="font-effect-shadow-multiple">SYNOPSIS</h2>
        <div class="sectioncontent">
<p><strong>filterctl</strong> {[start] | [stop]} ratefilter</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">DESCRIPTION</h2>
        <div class="sectioncontent">
<p>Enable this filter to enforce a maximum number of messages accepted from the same sender.</p><p><strong>ratefilter</strong> uses the following configuration files. Changes to the following files do not take effect until the filter has been stopped and restarted.</p><p>/etc/courier/filters/ratefilter-interval</p><p>This file contains a single numerical value that sets the rate limiting time interval setting, in seconds. The default value is sixty seconds. Sixty seconds is also the minimum acceptable interval.</p><p>/etc/courier/filters/ratefilter-maxrcpts</p><p>This file contains a single numerical value that sets how many receipients the same sender can send mail to, within the controlling time interval. The default value is 100 recipients.</p><p>/etc/courier/filters/ratefilter-minuid</p><p>When <strong>ratefilter</strong> is enabled for locally originating mail, this sets the minimum system userid that has rate limiting enforced. The default value is 100. Mail sent by processes with lower uids are not subject to rate limiting.</p><p>/etc/courier/filters/ratefilter-mode</p><p>If this file exists and contains the word "all", <strong>ratefilter</strong> creates its listening socket in /var/lib/courier/allfilters, otherwise the socket gets created in /var/lib/courier/filters, see \m[blue]<strong></strong><a href="../man8/courierfilter.8.html"><strong>courierfilter</strong>(8)</a>\m[]\s-2\u[1]\d\s+2 for more information.</p><p>The enablefiltering settings controls whether local or ESMTP mail is subject to rate limiting, see \m[blue]<strong></strong><a href="../man8/courier.8.html"><strong>courier</strong>(8)</a>\m[]\s-2\u[2]\d\s+2 for more information.</p><p>In this context, &ldquo;local&rdquo; mail refers to mail that gets sent when a process executes the \m[blue]<strong></strong><a href="../man1/sendmail.1.html"><strong>sendmail</strong>(1)</a>\m[]\s-2\u[3]\d\s+2 command. This does not include mail sent via connection to local port 25, this is considered ESMTP mail.</p><p>Local mail gets rate limited based on the sending process&apos;s userid. Each numerical userid gets treated as an individual sender. ESMTP mail&apos;s sender is taken from the authenticated ESMTP&apos;s userid. Non-authenticated ESMTP mail is not subject to rate limiting.</p><p>Rate limiting is implemented by dividing chronological time into intervals that are half the time interval given in the ratefilter-interval setting. For example, with the default interval of sixty seconds, chronological time gets divided into thirty second intervals.</p><p><strong>ratefilter</strong> counts the number of receipients in each message (and not just the number of messages) from each sender, in each time interval.</p><p><strong>ratefilter</strong> rejects the message when the total number of recipients from all messages from the same sender in the current and the previous time interval exceeds the ratefilter-maxrcpts setting. The rejected message&apos;s number of recipients also get counted, for the purpose of rejecting future messages.</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">RELATED TO ratefilter&hellip;</h2>
        <div class="sectioncontent">
<p>\m[blue]<strong></strong><a href="../man8/courierfilter.8.html"><strong>courierfilter</strong>(8)</a>\m[]\s-2\u[1]\d\s+2.</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">AUTHOR</h2>
        <div class="sectioncontent">
<p><strong>Sam Varshavchik</strong></p><p>Author</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">NOTES</h2>
        <div class="sectioncontent">

<dl class='dl-vertical'>
  <dt>
     1.
  </dt>
  <dd>
    <p><a href="../man8/courierfilter.8.html"><strong>courierfilter</strong>(8)</a></p><p>[set $man.base.url.for.relative.links]/courierfilter.html</p>
  </dd>
  <dt>
     2.
  </dt>
  <dd>
    <p><a href="../man8/courier.8.html"><strong>courier</strong>(8)</a></p><p>[set $man.base.url.for.relative.links]/courier.html</p>
  </dd>
  <dt>
     3.
  </dt>
  <dd>
    <p><a href="../man1/sendmail.1.html"><strong>sendmail</strong>(1)</a></p><p>[set $man.base.url.for.relative.links]/sendmail.html</p>
  </dd>

</dl>

        </div>
      </section>
<nav>
  <ul class="pager">
   <li class="previous"><a href="rasterisk.8.html"><span aria-hidden="true">&larr;</span> rasterisk.8: All-purpose telephony server.</a></li>
   <li class="next"><a href="raw.8.html">raw.8: Bind a linux raw character device <span aria-hidden="true">&rarr;</span></a></li>
  </ul>
</nav>

  </div>
  <!-- jQuery (necessary for Bootstrap's JavaScript plugins) -->
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.2/jquery.min.js"></script>
  <!-- Include all compiled plugins (below), or include individual files as needed -->
  <script src="/js/bootstrap.min.js"></script>
  <script>
    (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
      (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
      m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
    })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

    ga('create', 'UA-60781387-1', 'auto');
    ga('send', 'pageview');

  </script>
</body>
</html>
