<!DOCTYPE html>
<html lang="en">
<head>
  <link href="https://fonts.googleapis.com/css?family=Fira+Mono:400,700&effect=destruction%7Cshadow-multiple" rel="stylesheet" type="text/css">
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>lcmaps_verify_proxy.mod: Lcmaps plugin to verify a certificate chain including proxies</title>
  <link href="/css/bootstrap.min.css" rel="stylesheet">
  <link href="/css/manpage.css" rel="stylesheet">
  <link rel="apple-touch-icon" sizes="57x57" href="/icons/apple-icon-57x57.png">
  <link rel="apple-touch-icon" sizes="60x60" href="/icons/apple-icon-60x60.png">
  <link rel="apple-touch-icon" sizes="72x72" href="/icons/apple-icon-72x72.png">
  <link rel="apple-touch-icon" sizes="76x76" href="/icons/apple-icon-76x76.png">
  <link rel="apple-touch-icon" sizes="114x114" href="/icons/apple-icon-114x114.png">
  <link rel="apple-touch-icon" sizes="120x120" href="/icons/apple-icon-120x120.png">
  <link rel="apple-touch-icon" sizes="144x144" href="/icons/apple-icon-144x144.png">
  <link rel="apple-touch-icon" sizes="152x152" href="/icons/apple-icon-152x152.png">
  <link rel="apple-touch-icon" sizes="180x180" href="/icons/apple-icon-180x180.png">
  <link rel="icon" type="image/png" sizes="192x192" href="/icons/android-icon-192x192.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/icons/favicon-32x32.png">
  <link rel="icon" type="image/png" sizes="96x96" href="/icons/favicon-96x96.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/icons/favicon-16x16.png">
  <link rel="manifest" href="/icons/manifest.json">
  <meta name="msapplication-TileColor" content="#ffffff">
  <meta name="msapplication-TileImage" content="/icons/ms-icon-144x144.png">
  <meta name="theme-color" content="#ffffff">
  <meta name="description" content="Lcmaps plugin to verify a certificate chain including proxies">
  <meta name="twitter:card" content="summary_large_image">
  <meta name="twitter:site" content="@CartaTech">
  <meta name="twitter:creator" content="@CartaTech">
  <meta name="twitter:title" content="lcmaps_verify_proxy.mod (8) manual">
  <meta name="twitter:description" content="Lcmaps plugin to verify a certificate chain including proxies">
  <meta name="twitter:image" content="https://www.carta.tech/images/lcmaps-plugins-verify-proxy-lcmaps_verify_proxy.mod-8.png">
  <meta property="og:url" content="https://www.carta.tech/man-pages/man8/lcmaps_verify_proxy.mod.8.html" />
  <meta property="og:type" content="website" />
  <meta property="og:title" content="lcmaps_verify_proxy.mod (8) manual" />
  <meta property="og:description" content="Lcmaps plugin to verify a certificate chain including proxies" />
  <meta property="fb:app_id" content="1241677679199500" />
  <meta property="og:image" content="https://www.carta.tech/images/lcmaps-plugins-verify-proxy-lcmaps_verify_proxy.mod-8.png" />
  <meta property="og:image:width" content="600" />
  <meta property="og:image:height" content="315" />
</head>
<body>
  <div class="container final">
          <div class="page-header">
        <h1 class="font-effect-destruction">lcmaps_verify_proxy.mod<small> (8)</small></h1>
        <p class="lead">Lcmaps plugin to verify a certificate chain including proxies</p>
      </div>

    <ol class="breadcrumb" itemscope itemtype="http://schema.org/BreadcrumbList">
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/">
      <span itemprop="name">Carta.tech</span>
    </a>
    <meta itemprop="position" content="1" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/">
      <span itemprop="name">Man Pages</span>
    </a>
    <meta itemprop="position" content="2" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/man8/">
      <span itemprop="name">System administration commands</span>
    </a>
    <meta itemprop="position" content="3" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/man8/lcmaps_verify_proxy.mod.8.html">
      <span itemprop="name">lcmaps_verify_proxy.mod: Lcmaps plugin to verify a certificate chain including proxies</span>
    </a>
    <meta itemprop="position" content="4" />
  </li>
</ol>
<ol class="breadcrumb" itemscope itemtype="http://schema.org/BreadcrumbList">
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/">
      <span itemprop="name">Carta.tech</span>
    </a>
    <meta itemprop="position" content="1" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/packages/">
      <span itemprop="name">Packages</span>
    </a>
    <meta itemprop="position" content="2" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/packages/lcmaps-plugins-verify-proxy/">
      <span itemprop="name">lcmaps-plugins-verify-proxy</span>
    </a>
    <meta itemprop="position" content="3" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/man8/lcmaps_verify_proxy.mod.8.html">
      <span itemprop="name">lcmaps_verify_proxy.mod: Lcmaps plugin to verify a certificate chain including proxies</span>
    </a>
    <meta itemprop="position" content="4" />
  </li>
</ol>
    
      <section>
        <h2 class="font-effect-shadow-multiple">SYNOPSIS</h2>
        <div class="sectioncontent">
<p><strong>lcmaps_verify_proxy.mod</strong></p><p>[<strong>--allow-limited-proxy</strong>] [<strong>-certdir</strong>|<strong>-cadir</strong> <em>&lt;certificate_directory&gt;</em>] [<strong>--disallow-limited-proxy</strong>] [<strong>--discard_private_key_absence</strong>] [<strong>--max-proxy-level-ttl=&lt;level&gt;</strong>|<strong>--max-proxy-level-ttl@&lt;level&gt;</strong> <em>&lt;timeperiod&gt;</em>] [<strong>--max-voms-ttl</strong> <em>&lt;timeperiod&gt;</em>] [<strong>--never_discard_private_key_absence</strong>] [<strong>--only-enforce-lifetime-checks</strong>] [<strong>--require-limited-proxy</strong>]</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">DESCRIPTION</h2>
        <div class="sectioncontent">
<p>This plugin will test if the presented proxy certificate is authentic. This is done using OpenSSL methods to verify the certificate chain, check if the End-Entity Certificate is not revoked by checking CRLs or OCSP(*). In an <strong>lcmaps.db</strong> (5) file it is advised to run this plug-in as the first plug-in and fail the policy if there is no other way of verifying the input credentials.</p><p>Additional this plug-in can impose other policies, like proxy and VOMS life-time restrictions or require that the certificate chain is offered in a certain way, e.g. by offering a Limited proxy or (optionally) without a private key.</p><p>The plug-in takes its input from the LCMAPS framework. The certificate chain is coming from the registered (derived) STACK_OF(X509) * and the private key (when available) is taken from the registered PEM string credentials.</p><p>A certificate chain will be checked and verified by OpenSSL, but additionally to these checks this plug-in also performs semantic checks on the certificate chain based on how GT2, GT3 and RFC 3820 proxy certificates are to be constructed and used.</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">OPTIONS</h2>
        <div class="sectioncontent">

<dl class='dl-vertical'>
  <dt>
    <p><strong>--allow-limited-proxy</strong></p>
  </dt>
  <dd>
    <p>When enabled allow the certificate chain to contain a limited proxy certificate.  GT2, GT3 and RFC Limited proxies are treated as equal.</p>
  </dd>
  <dt>
    <p><strong>-certdir | -cadir </strong><em>&lt;certificate_directory&gt;</em></p>
  </dt>
  <dd>
    <p>This option sets the directory used to find the CA certificates, CRLs and other files used in the verification process of the presented certificate chain. Setting this option is muted by the option <strong>--only-enforce-lifetime-checks</strong>.</p>
  </dd>
  <dt>
    <p><strong>--disallow-limited-proxy</strong></p>
  </dt>
  <dd>
    <p>When enabled all uses of limited proxies will be prohibited and treated as a failure condition. GT2, GT3 and RFC Limited proxies are treated as equal.</p>
  </dd>
  <dt>
    <p><strong>--discard_private_key_absence</strong></p>
  </dt>
  <dd>
    <p>When enabled the plug-in verification process will not fail on the absence of the private key. Having a private key to present is part of the proof of possession of the certificate chain its delegations, therefore a fundamental part of the user credentials. Discarding the private key check is useful in cases where another process has already establish trust in the user credentials by performing the private key proof of possession steps. Example: This feature can be enabled in deployments where gLExec is part of the CREAM CE. The CREAM CE's SSL handshake is taking ensuring that fully verified credentials get passed down. Counter example: This feature is not-enabled on a gLExec-on-the-WN deployment, as gLExec will need to ensure that the pilot-job payload credentials are fully verified before account mapping should occur.</p>
  </dd>
  <dt>
    <p><strong>--max-proxy-level-ttl=&lt;level&gt; | --max-proxy-level-ttl@&lt;level&gt; </strong><em>&lt;timeperiod&gt;</em></p>
  </dt>
  <dd>
    <p>Set a maximum to the allowed validity period of the proxy certificate for a specific delegation <strong>&lt;level&gt;</strong>. The first delegation after an EEC certificate is <strong>&lt;level&gt;</strong> 0. This delegation level could be used in a MyProxy. A typical setting would be <strong>14d-00:00</strong> to allow for a MyProxy certificate with a validity period of two weeks.</p><p>A special <strong>&lt;level&gt;</strong> is indicated by an <strong>l</strong> or <strong>L</strong>. This is the leaf proxy or also known as the final delegation. A safe setting for this would be <strong>1d-00:00</strong> to allow a proxy certificate validity period of 1 day/24 hours.</p><p>Set the &lt;timeperiod&gt; in the following format: <strong>[0-99]d-[0-23][00-59]</strong>. For example <strong>2d-13:37</strong>.</p>
  </dd>
  <dt>
    <p><strong>--max-voms-ttl </strong><em>&lt;timeperiod&gt;</em></p>
  </dt>
  <dd>
    <p>Set a maximum to the allowed validity period of the VOMS credentials (when present). Using VOMS credentials with a validity period longer then the set timeperiod&gt; will result in a failure.</p>
  </dd>
  <dt>
    <p><strong>--never_discard_private_key_absence</strong></p>
  </dt>
  <dd>
    <p>This setting will override the option <strong>--discard_private_key_absence</strong> and option to set the environment variable $VERIFY_PROXY_DISCARD_PRIVATE_KEY_ABSENCE which performs the same behavior.</p>
  </dd>
  <dt>
    <p><strong>--only-enforce-lifetime-checks</strong></p>
  </dt>
  <dd>
    <p>When enable this option will bypass all verification steps and will only perform the lifetime checks configured by <strong>--max-proxy-level-ttl</strong> and/or <strong>--max-voms-ttl</strong>. This option is ideal to be used in a Globus Gatekeeper, GridFTPd and/or GSI-OpenSSHd deployment.</p>
  </dd>
  <dt>
    <p><strong>--require-limited-proxy</strong></p>
  </dt>
  <dd>
    <p>Explicitly require the certificate chain to have a <strong>limited proxy</strong> as a final delegation. The plug-in will fail if the certificate chain does not have a <strong>limited proxy</strong>.</p>
  </dd>

</dl>

        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">RETURN VALUES</h2>
        <div class="sectioncontent">

<dl class='dl-vertical'>
  <dt>
    <p><strong>LCMAPS_MOD_SUCCESS</strong></p>
  </dt>
  <dd>
    <p>Success.</p>
  </dd>
  <dt>
    <p><strong>LCMAPS_MOD_FAIL</strong></p>
  </dt>
  <dd>
    <p>Failure.</p>
  </dd>

</dl>

        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">BUGS</h2>
        <div class="sectioncontent">
<p>OCSP is not functional and will be added when either CAB/Forum or the IGTF publish a clear profile.</p><p>Please report any errors to the Nikhef Grid Middleware Security Team &lt;grid-mw-security-support@nikhef.nl&gt;.</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">RELATED TO lcmaps_verify_proxy.mod&hellip;</h2>
        <div class="sectioncontent">
<p><strong>lcmaps.db</strong>(5), <a href="../man3/lcmaps.3.html"><strong>lcmaps</strong>(3)</a>.</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">AUTHORS</h2>
        <div class="sectioncontent">
<p>LCMAPS and the LCMAPS plug-ins were written by the Grid Middleware Security Team &lt;grid-mw-security@nikhef.nl&gt;.</p>
        </div>
      </section>
<nav>
  <ul class="pager">
   <li class="previous"><a href="lcmaps_posix_enf.mod.8.html"><span aria-hidden="true">&larr;</span> lcmaps_posix_enf.mod.8: Lcmaps plugin to switch user identity</a></li>
   <li class="next"><a href="lcmaps_voms.mod.8.html">lcmaps_voms.mod.8: Lcmaps plugin extract voms attributes from the certificate chain - deprecated <span aria-hidden="true">&rarr;</span></a></li>
  </ul>
</nav>

  </div>
  <!-- jQuery (necessary for Bootstrap's JavaScript plugins) -->
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.2/jquery.min.js"></script>
  <!-- Include all compiled plugins (below), or include individual files as needed -->
  <script src="/js/bootstrap.min.js"></script>
  <script>
    (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
      (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
      m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
    })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

    ga('create', 'UA-60781387-1', 'auto');
    ga('send', 'pageview');

  </script>
</body>
</html>
