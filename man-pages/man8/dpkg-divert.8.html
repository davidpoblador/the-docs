<!DOCTYPE html>
<html lang="en">
<head>
  <link href="https://fonts.googleapis.com/css?family=Fira+Mono:400,700&effect=destruction%7Cshadow-multiple" rel="stylesheet" type="text/css">
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>dpkg-divert: Override a package's version of a file</title>
  <link href="/css/bootstrap.min.css" rel="stylesheet">
  <link href="/css/manpage.css" rel="stylesheet">
  <link rel="apple-touch-icon" sizes="57x57" href="/icons/apple-icon-57x57.png">
  <link rel="apple-touch-icon" sizes="60x60" href="/icons/apple-icon-60x60.png">
  <link rel="apple-touch-icon" sizes="72x72" href="/icons/apple-icon-72x72.png">
  <link rel="apple-touch-icon" sizes="76x76" href="/icons/apple-icon-76x76.png">
  <link rel="apple-touch-icon" sizes="114x114" href="/icons/apple-icon-114x114.png">
  <link rel="apple-touch-icon" sizes="120x120" href="/icons/apple-icon-120x120.png">
  <link rel="apple-touch-icon" sizes="144x144" href="/icons/apple-icon-144x144.png">
  <link rel="apple-touch-icon" sizes="152x152" href="/icons/apple-icon-152x152.png">
  <link rel="apple-touch-icon" sizes="180x180" href="/icons/apple-icon-180x180.png">
  <link rel="icon" type="image/png" sizes="192x192" href="/icons/android-icon-192x192.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/icons/favicon-32x32.png">
  <link rel="icon" type="image/png" sizes="96x96" href="/icons/favicon-96x96.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/icons/favicon-16x16.png">
  <link rel="manifest" href="/icons/manifest.json">
  <meta name="msapplication-TileColor" content="#ffffff">
  <meta name="msapplication-TileImage" content="/icons/ms-icon-144x144.png">
  <meta name="theme-color" content="#ffffff">
  <meta name="description" content="Override a package's version of a file">
  <meta name="twitter:card" content="summary_large_image">
  <meta name="twitter:site" content="@CartaTech">
  <meta name="twitter:creator" content="@CartaTech">
  <meta name="twitter:title" content="dpkg-divert (8) manual">
  <meta name="twitter:description" content="Override a package's version of a file">
  <meta name="twitter:image" content="https://www.carta.tech/images/dpkg-dpkg-divert-8.png">
  <meta property="og:url" content="https://www.carta.tech/man-pages/man8/dpkg-divert.8.html" />
  <meta property="og:type" content="website" />
  <meta property="og:title" content="dpkg-divert (8) manual" />
  <meta property="og:description" content="Override a package's version of a file" />
  <meta property="fb:app_id" content="1241677679199500" />
  <meta property="og:image" content="https://www.carta.tech/images/dpkg-dpkg-divert-8.png" />
  <meta property="og:image:width" content="600" />
  <meta property="og:image:height" content="315" />
</head>
<body>
  <div class="container final">
          <div class="page-header">
        <h1 class="font-effect-destruction">dpkg-divert<small> (8)</small></h1>
        <p class="lead">Override a package's version of a file</p>
      </div>

    <ol class="breadcrumb" itemscope itemtype="http://schema.org/BreadcrumbList">
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/">
      <span itemprop="name">Carta.tech</span>
    </a>
    <meta itemprop="position" content="1" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/">
      <span itemprop="name">Man Pages</span>
    </a>
    <meta itemprop="position" content="2" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/man8/">
      <span itemprop="name">System administration commands</span>
    </a>
    <meta itemprop="position" content="3" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/man8/dpkg-divert.8.html">
      <span itemprop="name">dpkg-divert: Override a package's version of a file</span>
    </a>
    <meta itemprop="position" content="4" />
  </li>
</ol>
<ol class="breadcrumb" itemscope itemtype="http://schema.org/BreadcrumbList">
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/">
      <span itemprop="name">Carta.tech</span>
    </a>
    <meta itemprop="position" content="1" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/packages/">
      <span itemprop="name">Packages</span>
    </a>
    <meta itemprop="position" content="2" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/packages/dpkg/">
      <span itemprop="name">dpkg</span>
    </a>
    <meta itemprop="position" content="3" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/man8/dpkg-divert.8.html">
      <span itemprop="name">dpkg-divert: Override a package's version of a file</span>
    </a>
    <meta itemprop="position" content="4" />
  </li>
</ol>
    
      <section>
        <h2 class="font-effect-shadow-multiple">SYNOPSIS</h2>
        <div class="sectioncontent">
<p><strong>dpkg-divert</strong> [<em>option</em>...] <em>command</em></p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">DESCRIPTION</h2>
        <div class="sectioncontent">
<p><strong>dpkg-divert</strong> is the utility used to set up and update the list of diversions.</p><p>File <em>diversions</em> are a way of forcing <a href="../man1/dpkg.1.html"><strong>dpkg</strong>(1)</a> not to install a file into its location, but to a <em>diverted</em> location. Diversions can be used through the Debian package scripts to move a file away when it causes a conflict. System administrators can also use it to override some package's configuration file, or whenever some files (which aren't marked as 'conffiles') need to be preserved by <strong>dpkg</strong>, when installing a newer version of a package which contains those files.</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">COMMANDS</h2>
        <div class="sectioncontent">

<dl class='dl-vertical'>
  <dt>
    <p>[<strong>--add</strong>] <em>file</em></p>
  </dt>
  <dd>
    <p>Add a diversion for <em>file</em>.</p>
  </dd>
  <dt>
    <p><strong>--remove</strong><em> file</em></p>
  </dt>
  <dd>
    <p>Remove a diversion for <em>file</em>.</p>
  </dd>
  <dt>
    <p><strong>--list</strong><em> glob-pattern</em></p>
  </dt>
  <dd>
    <p>List diversions matching <em>glob-pattern</em>.</p>
  </dd>
  <dt>
    <p><strong>--listpackage</strong><em> file</em></p>
  </dt>
  <dd>
    <p>Print the name of the package that diverts <em>file</em>.  Prints LOCAL if <em>file</em> is locally diverted and nothing if <em>file</em> is not diverted.</p>
  </dd>
  <dt>
    <p><strong>--truename</strong><em> file</em></p>
  </dt>
  <dd>
    <p>Print the real name for a diverted file.</p>
  </dd>

</dl>

        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">OPTIONS</h2>
        <div class="sectioncontent">

<dl class='dl-vertical'>
  <dt>
    <p><strong>--admindir</strong><em> directory</em></p>
  </dt>
  <dd>
    <p>Set the <strong>dpkg</strong> data directory to <em>directory</em> (default: <em>/var/lib/dpkg</em>).</p>
  </dd>
  <dt>
    <p><strong>--divert</strong><em> divert-to</em></p>
  </dt>
  <dd>
    <p><em>divert-to</em> is the location where the versions of <em>file</em>, as provided by other packages, will be diverted.</p>
  </dd>
  <dt>
    <p><strong>--local</strong></p>
  </dt>
  <dd>
    <p>Specifies that all packages' versions of this file are diverted. This means, that there are no exceptions, and whatever package is installed, the file is diverted. This can be used by an admin to install a locally modified version.</p>
  </dd>
  <dt>
    <p><strong>--package</strong><em> package</em></p>
  </dt>
  <dd>
    <p><em>package</em> is the name of a package whose copy of <em>file</em> will not be diverted. i.e. <em>file</em> will be diverted for all packages except <em>package</em>.</p>
  </dd>
  <dt>
    <p><strong>--quiet</strong></p>
  </dt>
  <dd>
    <p>Quiet mode, i.e. no verbose output.</p>
  </dd>
  <dt>
    <p><strong>--rename</strong></p>
  </dt>
  <dd>
    <p>Actually move the file aside (or back). <strong>dpkg-divert</strong> will abort operation in case the destination file already exists.</p>
  </dd>
  <dt>
    <p><strong>--test</strong></p>
  </dt>
  <dd>
    <p>Test mode, i.e. don't actually perform any changes, just demonstrate.</p>
  </dd>
  <dt>
    <p><strong>-?</strong>, <strong>--help</strong></p>
  </dt>
  <dd>
    <p>Show the usage message and exit.</p>
  </dd>
  <dt>
    <p><strong>--version</strong></p>
  </dt>
  <dd>
    <p>Show the version and exit.</p>
  </dd>

</dl>

        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">ENVIRONMENT</h2>
        <div class="sectioncontent">

<dl class='dl-vertical'>
  <dt>
    <p><strong>DPKG_ADMINDIR</strong></p>
  </dt>
  <dd>
    <p>If set and the <strong>--admindir</strong> option has not been specified, it will be used as the <strong>dpkg</strong> data directory.</p>
  </dd>
  <dt>
    <p><strong>DPKG_MAINTSCRIPT_PACKAGE</strong></p>
  </dt>
  <dd>
    <p>If set and the <strong>--local</strong> and <strong>--package</strong> options have not been specified, <strong>dpkg-divert</strong> will use it as the package name.</p>
  </dd>

</dl>

        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">FILES</h2>
        <div class="sectioncontent">

<dl class='dl-vertical'>
  <dt>
    <p><em>/var/lib/dpkg/diversions</em></p>
  </dt>
  <dd>
    <p>File which contains the current list of diversions of the system. It is located in the <strong>dpkg</strong> administration directory, along with other files important to <strong>dpkg</strong>, such as <em>status</em> or <em>available</em>.</p><p>Note: <strong>dpkg-divert</strong> preserves the old copy of this file, with extension <em>-old</em>, before replacing it with the new one.</p>
  </dd>

</dl>

        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">NOTES</h2>
        <div class="sectioncontent">
<p>When adding, default is <strong>--local</strong> and <strong>--divert</strong> <em>original</em><strong>.distrib</strong>. When removing, <strong>--package</strong> or <strong>--local</strong> and <strong>--divert</strong> must match if specified.</p><p>Directories can't be diverted with <strong>dpkg-divert</strong>.</p><p>Care should be taken when diverting shared libraries, <a href="../man8/ldconfig.8.html"><strong>ldconfig</strong>(8)</a> creates a symbolic link based on the DT_SONAME field embedded in the library. Because <strong>ldconfig</strong> doesn't honour diverts (only <strong>dpkg</strong> does), the symlink may end up pointing at the diverted library, if a diverted library has the same SONAME as the undiverted one.</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">EXAMPLES</h2>
        <div class="sectioncontent">
<p>To divert all copies of a <em>/usr/bin/example</em> to <em>/usr/bin/example.foo</em>, i.e. directs all packages providing <em>/usr/bin/example</em> to install it as <em>/usr/bin/example.foo</em>, performing the rename if required: dpkg-divert --divert /usr/bin/example.foo --rename /usr/bin/example</p><p>To remove that diversion: dpkg-divert --rename --remove /usr/bin/example</p><p>To divert any package trying to install <em>/usr/bin/example</em> to <em>/usr/bin/example.foo</em>, except your own <em>wibble</em> package: dpkg-divert --package wibble --divert /usr/bin/example.foo --rename /usr/bin/example</p><p>To remove that diversion: dpkg-divert --package wibble --rename --remove /usr/bin/example</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">RELATED TO dpkg-divert&hellip;</h2>
        <div class="sectioncontent">
<p><a href="../man1/dpkg.1.html"><strong>dpkg</strong>(1)</a>.</p>
        </div>
      </section>
<nav>
  <ul class="pager">
   <li class="previous"><a href="dphys-swapfile.8.html"><span aria-hidden="true">&larr;</span> dphys-swapfile.8: Set up, mount/unmount, and delete an swap file</a></li>
   <li class="next"><a href="dpkg-hold.8.html">dpkg-hold.8: Mark packages as `hold' to prevent installation <span aria-hidden="true">&rarr;</span></a></li>
  </ul>
</nav>

  </div>
  <!-- jQuery (necessary for Bootstrap's JavaScript plugins) -->
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.2/jquery.min.js"></script>
  <!-- Include all compiled plugins (below), or include individual files as needed -->
  <script src="/js/bootstrap.min.js"></script>
  <script>
    (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
      (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
      m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
    })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

    ga('create', 'UA-60781387-1', 'auto');
    ga('send', 'pageview');

  </script>
</body>
</html>
