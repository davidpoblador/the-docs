<!DOCTYPE html>
<html lang="en">
<head>
  <link href="https://fonts.googleapis.com/css?family=Fira+Mono:400,700&effect=destruction%7Cshadow-multiple" rel="stylesheet" type="text/css">
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>gnt-backup: None</title>
  <link href="/css/bootstrap.min.css" rel="stylesheet">
  <link href="/css/manpage.css" rel="stylesheet">
  <link rel="apple-touch-icon" sizes="57x57" href="/icons/apple-icon-57x57.png">
  <link rel="apple-touch-icon" sizes="60x60" href="/icons/apple-icon-60x60.png">
  <link rel="apple-touch-icon" sizes="72x72" href="/icons/apple-icon-72x72.png">
  <link rel="apple-touch-icon" sizes="76x76" href="/icons/apple-icon-76x76.png">
  <link rel="apple-touch-icon" sizes="114x114" href="/icons/apple-icon-114x114.png">
  <link rel="apple-touch-icon" sizes="120x120" href="/icons/apple-icon-120x120.png">
  <link rel="apple-touch-icon" sizes="144x144" href="/icons/apple-icon-144x144.png">
  <link rel="apple-touch-icon" sizes="152x152" href="/icons/apple-icon-152x152.png">
  <link rel="apple-touch-icon" sizes="180x180" href="/icons/apple-icon-180x180.png">
  <link rel="icon" type="image/png" sizes="192x192" href="/icons/android-icon-192x192.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/icons/favicon-32x32.png">
  <link rel="icon" type="image/png" sizes="96x96" href="/icons/favicon-96x96.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/icons/favicon-16x16.png">
  <link rel="manifest" href="/icons/manifest.json">
  <meta name="msapplication-TileColor" content="#ffffff">
  <meta name="msapplication-TileImage" content="/icons/ms-icon-144x144.png">
  <meta name="theme-color" content="#ffffff">
  <meta name="description" content="None">
  <meta name="twitter:card" content="summary_large_image">
  <meta name="twitter:site" content="@CartaTech">
  <meta name="twitter:creator" content="@CartaTech">
  <meta name="twitter:title" content="gnt-backup (8) manual">
  <meta name="twitter:description" content="None">
  <meta name="twitter:image" content="https://www.carta.tech/images/ganeti-2.12-gnt-backup-8.png">
  <meta property="og:url" content="https://www.carta.tech/man-pages/man8/gnt-backup.8.html" />
  <meta property="og:type" content="website" />
  <meta property="og:title" content="gnt-backup (8) manual" />
  <meta property="og:description" content="None" />
  <meta property="fb:app_id" content="1241677679199500" />
  <meta property="og:image" content="https://www.carta.tech/images/ganeti-2.12-gnt-backup-8.png" />
  <meta property="og:image:width" content="600" />
  <meta property="og:image:height" content="315" />
</head>
<body>
  <div class="container final">
          <div class="page-header">
        <h1 class="font-effect-destruction">gnt-backup<small> (8)</small></h1>
        <p class="lead">None</p>
      </div>

    <ol class="breadcrumb" itemscope itemtype="http://schema.org/BreadcrumbList">
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/">
      <span itemprop="name">Carta.tech</span>
    </a>
    <meta itemprop="position" content="1" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/">
      <span itemprop="name">Man Pages</span>
    </a>
    <meta itemprop="position" content="2" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/man8/">
      <span itemprop="name">System administration commands</span>
    </a>
    <meta itemprop="position" content="3" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/man8/gnt-backup.8.html">
      <span itemprop="name">gnt-backup: None</span>
    </a>
    <meta itemprop="position" content="4" />
  </li>
</ol>
<ol class="breadcrumb" itemscope itemtype="http://schema.org/BreadcrumbList">
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/">
      <span itemprop="name">Carta.tech</span>
    </a>
    <meta itemprop="position" content="1" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/packages/">
      <span itemprop="name">Packages</span>
    </a>
    <meta itemprop="position" content="2" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/packages/ganeti-2.12/">
      <span itemprop="name">ganeti-2.12</span>
    </a>
    <meta itemprop="position" content="3" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/man8/gnt-backup.8.html">
      <span itemprop="name">gnt-backup: None</span>
    </a>
    <meta itemprop="position" content="4" />
  </li>
</ol>
    
      <section>
        <h2 class="font-effect-shadow-multiple">Name</h2>
        <div class="sectioncontent">
<p>gnt-backup - Ganeti instance import/export</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">Synopsis</h2>
        <div class="sectioncontent">
<p><strong>gnt-backup</strong> {command} [arguments...]</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">DESCRIPTION</h2>
        <div class="sectioncontent">
<p>The <strong>gnt-backup</strong> is used for importing and exporting instances and their configuration from a Ganeti system. It is useful for backing up instances and also to migrate them between clusters.</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">COMMANDS</h2>
        <div class="sectioncontent">
<h3>EXPORT</h3>
<p><strong>export</strong> {-n <em>node</em>}</p><p>[--shutdown-timeout=<em>N</em>] [--noshutdown] [--remove-instance]</p><p>[--ignore-remove-failures] [--submit] [--print-job-id]</p><p>[--transport-compression=<em>compression-mode</em>]</p><p>[--zero-free-space] [--zeroing-timeout-fixed]</p><p>[--zeroing-timeout-per-mib]</p><p>{<em>instance</em>}</p><p>Exports an instance to the target node. All the instance data and its configuration will be exported under the /var/lib/ganeti/export/$instance directory on the target node.</p><p>The --transport-compression option is used to specify which compression mode is used to try and speed up moves during the export. Valid values are \[aq]none\[aq], and any values defined in the \[aq]compression_tools\[aq] cluster parameter.</p><p>The --shutdown-timeout is used to specify how much time to wait before forcing the shutdown (xm destroy in xen, killing the kvm process, for kvm). By default two minutes are given to each instance to stop.</p><p>The --noshutdown option will create a snapshot disk of the instance without shutting it down first. While this is faster and involves no downtime, it cannot be guaranteed that the instance data will be in a consistent state in the exported dump.</p><p>The --remove option can be used to remove the instance after it was exported. This is useful to make one last backup before removing the instance.</p><p>The --zero-free-space option can be used to zero the free space of the instance prior to exporting it, saving space if compression is used. The --zeroing-timeout-fixed and --zeroing-timeout-per-mib options control the timeout, the former determining the minimum time to wait, and the latter how much longer to wait per MiB of data the instance has.</p><p>Should the snapshotting or transfer of any of the instance disks fail, the backup will not complete and any previous backups will be preserved. The exact details of the failures will be shown during the command execution (and will be stored in the job log). It is recommended that for any non-zero exit code, the backup is considered invalid, and retried.</p><p>See <a href="../man7/ganeti.7.html"><strong>ganeti</strong>(7)</a> for a description of --submit and other common options.</p><p>Example:</p><ul>
<li>
<pre>
#&nbsp;gnt-backup&nbsp;export&nbsp;-n&nbsp;node1.example.com&nbsp;instance3.example.com

</pre>
</li>
</ul>
<h3>IMPORT</h3>
<p><strong>import</strong></p><p>{-n <em>node[:secondary-node]</em> | --iallocator <em>name</em>}</p><p>[--compress=<em>compression-mode</em>]</p><p>[--disk <em>N</em>:size=<em>VAL</em> [,vg=<em>VG</em>], [,mode=<em>ro|rw</em>]...]</p><p>[--net <em>N</em> [:options...] | --no-nics]</p><p>[-B <em>BEPARAMS</em>]</p><p>[-H <em>HYPERVISOR</em> [: option=<em>value</em>... ]]</p><p>[--src-node=<em>source-node</em>] [--src-dir=<em>source-dir</em>]</p><p>[-t [diskless | plain | drbd | file]]</p><p>[--identify-defaults]</p><p>[--ignore-ipolicy]</p><p>[--submit] [--print-job-id]</p><p>{<em>instance</em>}</p><p>Imports a new instance from an export residing on <em>source-node</em> in <em>source-dir</em>. <em>instance</em> must be in DNS and resolve to a IP in the same network as the nodes in the cluster. If the source node and directory are not passed, the last backup in the cluster is used, as visible with the <strong>list</strong> command.</p><p>The disk option specifies the parameters for the disks of the instance. The numbering of disks starts at zero. For each disk, at least the size needs to be given, and optionally the access mode (read-only or the default of read-write) and LVM volume group can also be specified. The size is interpreted (when no unit is given) in mebibytes. You can also use one of the suffixes m, g or t to specificy the exact the units used; these suffixes map to mebibytes, gibibytes and tebibytes.</p><p>Alternatively, a single-disk instance can be created via the -s option which takes a single argument, the size of the disk. This is similar to the Ganeti 1.2 version (but will only create one disk).</p><p>If no disk information is passed, the disk configuration saved at export time will be used.</p><p>The minimum disk specification is therefore empty (export information will be used), a single disk can be specified as --disk&nbsp;0:size=20G (or -s&nbsp;20G when using the -s option), and a three-disk instance can be specified as --disk&nbsp;0:size=20G&nbsp;--disk&nbsp;1:size=4G&nbsp;--disk&nbsp;2:size=100G.</p><p>The NICs of the instances can be specified via the --net option. By default, the NIC configuration of the original (exported) instance will be reused. Each NIC can take up to three parameters (all optional):</p>
<dl class='dl-vertical'>
  <dt>
    <p><strong>mac</strong></p>
  </dt>
  <dd>
    <p>either a value or generate to generate a new unique MAC, or auto to reuse the old MAC</p>
  </dd>
  <dt>
    <p><strong>ip</strong></p>
  </dt>
  <dd>
    <p>specifies the IP address assigned to the instance from the Ganeti side (this is not necessarily what the instance will use, but what the node expects the instance to use)</p>
  </dd>
  <dt>
    <p><strong>mode</strong></p>
  </dt>
  <dd>
    <p>specifies the connection mode for this NIC: routed, bridged or openvswitch</p>
  </dd>
  <dt>
    <p><strong>link</strong></p>
  </dt>
  <dd>
    <p>in bridged and openvswitch mode specifies the interface to attach this NIC to, in routed mode it\[aq]s intended to differentiate between different routing tables/instance groups (but the meaning is dependent on the network script in use, see <a href="../man8/gnt-cluster.8.html"><strong>gnt-cluster</strong>(8)</a> for more details)</p>
  </dd>

</dl>
<p>Of these mode and link are NIC parameters, and inherit their default at cluster level.</p><p>If no network is desired for the instance, you should create a single empty NIC and delete it afterwards via <strong>gnt-instance modify --net</strong> delete.</p><p>The -B option specifies the backend parameters for the instance. If no such parameters are specified, the values are inherited from the export. Possible parameters are:</p>
<dl class='dl-vertical'>
  <dt>
    <p><strong>maxmem</strong></p>
  </dt>
  <dd>
    <p>the maximum memory size of the instance; as usual, suffixes can be used to denote the unit, otherwise the value is taken in mebibytes</p>
  </dd>
  <dt>
    <p><strong>minmem</strong></p>
  </dt>
  <dd>
    <p>the minimum memory size of the instance; as usual, suffixes can be used to denote the unit, otherwise the value is taken in mebibytes</p>
  </dd>
  <dt>
    <p><strong>vcpus</strong></p>
  </dt>
  <dd>
    <p>the number of VCPUs to assign to the instance (if this value makes sense for the hypervisor)</p>
  </dd>
  <dt>
    <p><strong>auto_balance</strong></p>
  </dt>
  <dd>
    <p>whether the instance is considered in the N+1 cluster checks (enough redundancy in the cluster to survive a node failure)</p>
  </dd>
  <dt>
    <p><strong>always_failover</strong></p>
  </dt>
  <dd>
    <p>True or False, whether the instance must be failed over (shut down and rebooted) always or it may be migrated (briefly suspended)</p>
  </dd>

</dl>
<p>The -t options specifies the disk layout type for the instance. If not passed, the configuration of the original instance is used. The available choices are:</p>
<dl class='dl-vertical'>
  <dt>
    <p><strong>diskless</strong></p>
  </dt>
  <dd>
    <p>This creates an instance with no disks. Its useful for testing only (or other special cases).</p>
  </dd>
  <dt>
    <p><strong>plain</strong></p>
  </dt>
  <dd>
    <p>Disk devices will be logical volumes.</p>
  </dd>
  <dt>
    <p><strong>drbd</strong></p>
  </dt>
  <dd>
    <p>Disk devices will be drbd (version 8.x) on top of lvm volumes.</p>
  </dd>
  <dt>
    <p><strong>file</strong></p>
  </dt>
  <dd>
    <p>Disk devices will be backed up by files, under the cluster\[aq]s default file storage directory. By default, each instance will get a directory (as its own name) under this path, and each disk is stored as individual files in this (instance-specific) directory.</p>
  </dd>

</dl>
<p>The --iallocator option specifies the instance allocator plugin to use. If you pass in this option the allocator will select nodes for this instance automatically, so you don\[aq]t need to pass them with the -n option. For more information please refer to the instance allocator documentation.</p><p>The optional second value of the --node is used for the drbd template and specifies the remote node.</p><p>The --compress option is used to specify which compression mode is used for moves during the import. Valid values are \[aq]none\[aq] (the default) and \[aq]gzip\[aq].</p><p>The --src-dir option allows importing instances from a directory below /var/lib/ganeti/export.</p><p>If --ignore-ipolicy is given any instance policy violations occuring during this operation are ignored.</p><p>Since many of the parameters are by default read from the exported instance information and used as such, the new instance will have all parameters explicitly specified, the opposite of a newly added instance which has most parameters specified via cluster defaults. To change the import behaviour to recognize parameters whose saved value matches the current cluster default and mark it as such (default value), pass the --identify-defaults option. This will affect the hypervisor, backend and NIC parameters, both read from the export file and passed in via the command line.</p><p>See <a href="../man7/ganeti.7.html"><strong>ganeti</strong>(7)</a> for a description of --submit and other common options.</p><p>Example for identical instance import:</p><ul>
<li>
<pre>
#&nbsp;gnt-backup&nbsp;import&nbsp;-n&nbsp;node1.example.com&nbsp;instance3.example.com

</pre>
</li>
</ul><p>Explicit configuration example:</p><ul>
<li>
<pre>
#&nbsp;gnt-backup&nbsp;import&nbsp;-t&nbsp;plain&nbsp;--disk&nbsp;0:size=1G&nbsp;-B&nbsp;memory=512&nbsp;&#92;
&gt;&nbsp;-n&nbsp;node1.example.com&nbsp;&#92;
&gt;&nbsp;instance3.example.com

</pre>
</li>
</ul>
<h3>LIST</h3>
<p><strong>list</strong> [--node=<em>NODE</em>] [--no-headers] [--separator=<em>SEPARATOR</em>]</p><p>[-o <em>[+]FIELD,...</em>]</p><p>Lists the exports currently available in the default directory in all the nodes of the current cluster, or optionally only a subset of them specified using the --node option (which can be used multiple times)</p><p>The --no-headers option will skip the initial header line. The --separator option takes an argument which denotes what will be used between the output fields. Both these options are to help scripting.</p><p>The -o option takes a comma-separated list of output fields. The available fields and their meaning are:</p>
<dl class='dl-vertical'>
  <dt>
    <p><strong>export</strong></p>
  </dt>
  <dd>
    <p>Export name</p>
  </dd>
  <dt>
    <p><strong>node</strong></p>
  </dt>
  <dd>
    <p>Node name</p>
  </dd>

</dl>
<p>If the value of the option starts with the character +, the new fields will be added to the default list. This allows one to quickly see the default list plus a few other fields, instead of retyping the entire list of fields.</p><p>Example:</p><ul>
<li>
<pre>
#&nbsp;gnt-backup&nbsp;list&nbsp;--node&nbsp;node1&nbsp;--node&nbsp;node2

</pre>
</li>
</ul>
<h3>LIST-FIELDS</h3>
<p><strong>list-fields</strong> [field...]</p><p>Lists available fields for exports.</p>
<h3>REMOVE</h3>
<p><strong>remove</strong> {instance_name}</p><p>Removes the backup for the given instance name, if any. If the backup was for a deleted instance, it is needed to pass the FQDN of the instance, and not only the short hostname.</p>

        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">REPORTING BUGS</h2>
        <div class="sectioncontent">
<p>Report bugs to project website (http://code.google.com/p/ganeti/) or contact the developers using the Ganeti mailing list (ganeti@googlegroups.com).</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">RELATED TO gnt-backup&hellip;</h2>
        <div class="sectioncontent">
<p>Ganeti overview and specifications: <a href="../man7/ganeti.7.html"><strong>ganeti</strong>(7)</a> (general overview), <a href="../man7/ganeti-os-interface.7.html"><strong>ganeti-os-interface</strong>(7)</a> (guest OS definitions), <a href="../man7/ganeti-extstorage-interface.7.html"><strong>ganeti-extstorage-interface</strong>(7)</a> (external storage providers).</p><p>Ganeti commands: <a href="../man8/gnt-cluster.8.html"><strong>gnt-cluster</strong>(8)</a> (cluster-wide commands), <a href="../man8/gnt-job.8.html"><strong>gnt-job</strong>(8)</a> (job-related commands), <a href="../man8/gnt-node.8.html"><strong>gnt-node</strong>(8)</a> (node-related commands), <a href="../man8/gnt-instance.8.html"><strong>gnt-instance</strong>(8)</a> (instance commands), <a href="../man8/gnt-os.8.html"><strong>gnt-os</strong>(8)</a> (guest OS commands), <a href="../man8/gnt-storage.8.html"><strong>gnt-storage</strong>(8)</a> (storage commands), <a href="../man8/gnt-group.8.html"><strong>gnt-group</strong>(8)</a> (node group commands), <a href="../man8/gnt-backup.8.html"><strong>gnt-backup</strong>(8)</a> (instance import/export commands), <a href="../man8/gnt-debug.8.html"><strong>gnt-debug</strong>(8)</a> (debug commands).</p><p>Ganeti daemons: <a href="../man8/ganeti-watcher.8.html"><strong>ganeti-watcher</strong>(8)</a> (automatic instance restarter), <a href="../man8/ganeti-cleaner.8.html"><strong>ganeti-cleaner</strong>(8)</a> (job queue cleaner), <a href="../man8/ganeti-noded.8.html"><strong>ganeti-noded</strong>(8)</a> (node daemon), <strong>ganeti-masterd</strong>(8) (master daemon), <a href="../man8/ganeti-rapi.8.html"><strong>ganeti-rapi</strong>(8)</a> (remote API daemon).</p><p>Ganeti htools: <a href="../man1/htools.1.html"><strong>htools</strong>(1)</a> (generic binary), <a href="../man1/hbal.1.html"><strong>hbal</strong>(1)</a> (cluster balancer), <a href="../man1/hspace.1.html"><strong>hspace</strong>(1)</a> (capacity calculation), <a href="../man1/hail.1.html"><strong>hail</strong>(1)</a> (IAllocator plugin), <a href="../man1/hscan.1.html"><strong>hscan</strong>(1)</a> (data gatherer from remote clusters), <a href="../man1/hinfo.1.html"><strong>hinfo</strong>(1)</a> (cluster information printer), <a href="../man7/mon-collector.7.html"><strong>mon-collector</strong>(7)</a> (data collectors interface).</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">COPYRIGHT</h2>
        <div class="sectioncontent">
<p>Copyright (C) 2006-2014 Google Inc. All rights reserved.</p><p>Redistribution and use in source and binary forms, with or without modification, are permitted provided that the following conditions are met:</p><p>1. Redistributions of source code must retain the above copyright notice, this list of conditions and the following disclaimer.</p><p>2. Redistributions in binary form must reproduce the above copyright notice, this list of conditions and the following disclaimer in the documentation and/or other materials provided with the distribution.</p><p>THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS "AS IS" AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT HOLDER OR CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.</p>
        </div>
      </section>
<nav>
  <ul class="pager">
   <li class="previous"><a href="gnokiid.8.html"><span aria-hidden="true">&larr;</span> gnokiid.8: Create a virtual modem for old nokia mobile phones</a></li>
   <li class="next"><a href="gnt-cluster.8.html">gnt-cluster.8: None <span aria-hidden="true">&rarr;</span></a></li>
  </ul>
</nav>

  </div>
  <!-- jQuery (necessary for Bootstrap's JavaScript plugins) -->
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.2/jquery.min.js"></script>
  <!-- Include all compiled plugins (below), or include individual files as needed -->
  <script src="/js/bootstrap.min.js"></script>
  <script>
    (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
      (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
      m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
    })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

    ga('create', 'UA-60781387-1', 'auto');
    ga('send', 'pageview');

  </script>
</body>
</html>
