<!DOCTYPE html>
<html lang="en">
<head>
  <link href="https://fonts.googleapis.com/css?family=Fira+Mono:400,700&effect=destruction%7Cshadow-multiple" rel="stylesheet" type="text/css">
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>tc-police: Policing action</title>
  <link href="/css/bootstrap.min.css" rel="stylesheet">
  <link href="/css/manpage.css" rel="stylesheet">
  <link rel="apple-touch-icon" sizes="57x57" href="/icons/apple-icon-57x57.png">
  <link rel="apple-touch-icon" sizes="60x60" href="/icons/apple-icon-60x60.png">
  <link rel="apple-touch-icon" sizes="72x72" href="/icons/apple-icon-72x72.png">
  <link rel="apple-touch-icon" sizes="76x76" href="/icons/apple-icon-76x76.png">
  <link rel="apple-touch-icon" sizes="114x114" href="/icons/apple-icon-114x114.png">
  <link rel="apple-touch-icon" sizes="120x120" href="/icons/apple-icon-120x120.png">
  <link rel="apple-touch-icon" sizes="144x144" href="/icons/apple-icon-144x144.png">
  <link rel="apple-touch-icon" sizes="152x152" href="/icons/apple-icon-152x152.png">
  <link rel="apple-touch-icon" sizes="180x180" href="/icons/apple-icon-180x180.png">
  <link rel="icon" type="image/png" sizes="192x192" href="/icons/android-icon-192x192.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/icons/favicon-32x32.png">
  <link rel="icon" type="image/png" sizes="96x96" href="/icons/favicon-96x96.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/icons/favicon-16x16.png">
  <link rel="manifest" href="/icons/manifest.json">
  <meta name="msapplication-TileColor" content="#ffffff">
  <meta name="msapplication-TileImage" content="/icons/ms-icon-144x144.png">
  <meta name="theme-color" content="#ffffff">
  <meta name="description" content="Policing action">
  <meta name="twitter:card" content="summary_large_image">
  <meta name="twitter:site" content="@CartaTech">
  <meta name="twitter:creator" content="@CartaTech">
  <meta name="twitter:title" content="tc-police (8) manual">
  <meta name="twitter:description" content="Policing action">
  <meta name="twitter:image" content="https://www.carta.tech/images/iproute2-tc-police-8.png">
  <meta property="og:url" content="https://www.carta.tech/man-pages/man8/tc-police.8.html" />
  <meta property="og:type" content="website" />
  <meta property="og:title" content="tc-police (8) manual" />
  <meta property="og:description" content="Policing action" />
  <meta property="fb:app_id" content="1241677679199500" />
  <meta property="og:image" content="https://www.carta.tech/images/iproute2-tc-police-8.png" />

</head>
<body>
  <div class="container final">
          <div class="page-header">
        <h1 class="font-effect-destruction">tc-police<small> (8)</small></h1>
        <p class="lead">Policing action</p>
      </div>

    <ol class="breadcrumb" itemscope itemtype="http://schema.org/BreadcrumbList">
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/">
      <span itemprop="name">Carta.tech</span>
    </a>
    <meta itemprop="position" content="1" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/">
      <span itemprop="name">Man Pages</span>
    </a>
    <meta itemprop="position" content="2" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/man8/">
      <span itemprop="name">System administration commands</span>
    </a>
    <meta itemprop="position" content="3" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/man8/tc-police.8.html">
      <span itemprop="name">tc-police: Policing action</span>
    </a>
    <meta itemprop="position" content="4" />
  </li>
</ol>
<ol class="breadcrumb" itemscope itemtype="http://schema.org/BreadcrumbList">
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/">
      <span itemprop="name">Carta.tech</span>
    </a>
    <meta itemprop="position" content="1" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/packages/">
      <span itemprop="name">Packages</span>
    </a>
    <meta itemprop="position" content="2" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/packages/iproute2/">
      <span itemprop="name">iproute2</span>
    </a>
    <meta itemprop="position" content="3" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/man8/tc-police.8.html">
      <span itemprop="name">tc-police: Policing action</span>
    </a>
    <meta itemprop="position" content="4" />
  </li>
</ol>
    
      <section>
        <h2 class="font-effect-shadow-multiple">SYNOPSIS</h2>
        <div class="sectioncontent">
<p><strong>tc</strong> ... <strong>action police</strong> <strong>rate</strong><em> RATE </em><strong>burst</strong> <em>BYTES</em>[<strong>/</strong><em>BYTES</em>] [ <strong>mtu</strong> <em>BYTES</em>[<strong>/</strong><em>BYTES</em>] ] [ <strong>peakrate</strong><em> RATE</em> ] [ <strong>overhead</strong><em> BYTES</em> ] [ <strong>linklayer</strong><em> TYPE</em> ] [ <em>CONTROL</em> ]</p><p><strong>tc</strong> ... <strong>filter</strong> ... [ <strong>estimator</strong> <em>SAMPLE AVERAGE </em>] <strong>action police avrate</strong> <em>RATE</em> [ <em>CONTROL</em> ]</p><p><em>CONTROL</em> := <strong>conform-exceed</strong><em> EXCEEDACT</em>[<strong>/</strong><em>EXCEEDACT</em></p><p><em>EXCEEDACT</em> := {  <strong>pipe</strong> | <strong>ok</strong> | <strong>reclassify</strong> | <strong>drop</strong> | <strong>continue</strong> }</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">DESCRIPTION</h2>
        <div class="sectioncontent">
<p>The <strong>police</strong> action allows to limit bandwidth of traffic matched by the filter it is attached to. Basically there are two different algorithms available to measure the packet rate: The first one uses an internal dual token bucket and is configured using the <strong>rate</strong>, <strong>burst</strong>, <strong>mtu</strong>, <strong>peakrate</strong>, <strong>overhead</strong> and <strong>linklayer</strong> parameters. The second one uses an in-kernel sampling mechanism. It can be fine-tuned using the <strong>estimator</strong> filter parameter.</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">OPTIONS</h2>
        <div class="sectioncontent">

<dl class='dl-vertical'>
  <dt>
    <p><strong>rate</strong><em> RATE</em></p>
  </dt>
  <dd>
    <p>The maximum traffic rate of packets passing this action. Those exceeding it will be treated as defined by the <strong>conform-exceed</strong> option.</p>
  </dd>
  <dt>
    <p><strong>burst</strong><em> BYTES</em>[<strong>/</strong><em>BYTES</em>]</p>
  </dt>
  <dd>
    <p>Set the maximum allowed burst in bytes, optionally followed by a slash ('/') sign and cell size which must be a power of 2.</p>
  </dd>
  <dt>
    <p><strong>mtu</strong><em> BYTES</em>[<strong>/</strong><em>BYTES</em>]</p>
  </dt>
  <dd>
    <p>This is the maximum packet size handled by the policer (larger ones will be handled like they exceeded the configured rate). Setting this value correctly will improve the scheduler's precision. Value formatting is identical to <strong>burst</strong> above. Defaults to unlimited.</p>
  </dd>
  <dt>
    <p><strong>peakrate</strong><em> RATE</em></p>
  </dt>
  <dd>
    <p>Set the maximum bucket depletion rate, exceeding <strong>rate</strong>.</p>
  </dd>
  <dt>
    <p><strong>avrate</strong><em> RATE</em></p>
  </dt>
  <dd>
    <p>Make use of an in-kernel bandwidth rate estimator and match the given <em>RATE</em> against it.</p>
  </dd>
  <dt>
    <p><strong>overhead</strong><em> BYTES</em></p>
  </dt>
  <dd>
    <p>Account for protocol overhead of encapsulating output devices when computing <strong>rate</strong> and <strong>peakrate</strong>.</p>
  </dd>
  <dt>
    <p><strong>linklayer</strong><em> TYPE</em></p>
  </dt>
  <dd>
    <p>Specify the link layer type. <em>TYPE</em> may be one of <strong>ethernet</strong> (the default), <strong>atm</strong> or <strong>adsl</strong> (which are synonyms). It is used to align the precomputed rate tables to ATM cell sizes, for <strong>ethernet</strong> no action is taken.</p>
  </dd>
  <dt>
    <p><strong>estimator</strong><em> SAMPLE AVERAGE</em></p>
  </dt>
  <dd>
    <p>Fine-tune the in-kernel packet rate estimator. <em>SAMPLE</em> and <em>AVERAGE</em> are time values and control the frequency in which samples are taken and over what timespan an average is built.</p>
  </dd>
  <dt>
    <p><strong>conform-exceed</strong><em> EXCEEDACT</em>[<strong>/</strong><em>EXCEEDACT</em>]</p>
  </dt>
  <dd>
    <p>Define how to handle packets which exceed (and, if the second <em>EXCEEDACT</em> is given, also those who don't), the configured bandwidth limit. Possible values are:</p>
<dl class='dl-vertical'>
  <dt>
    continue
  </dt>
  <dd>
    <p>Don't do anything, just continue with the next action in line.</p>
  </dd>
  <dt>
    drop
  </dt>
  <dd>
    <p>Drop the packet immediately.</p>
  </dd>
  <dt>
    shot
  </dt>
  <dd>
    <p>This is a synonym to <strong>drop</strong>.</p>
  </dd>
  <dt>
    ok
  </dt>
  <dd>
    <p>Accept the packet. This is the default for conforming packets.</p>
  </dd>
  <dt>
    pass
  </dt>
  <dd>
    <p>This is a synonym to <strong>ok</strong>.</p>
  </dd>
  <dt>
    reclassify
  </dt>
  <dd>
    <p>Treat the packet as non-matching to the filter this action is attached to and continue with the next filter in line (if any). This is the default for exceeding packets.</p>
  </dd>
  <dt>
    pipe
  </dt>
  <dd>
    <p>Pass the packet to the next action in line.</p>
  </dd>

</dl>

  </dd>

</dl>

        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">EXAMPLES</h2>
        <div class="sectioncontent">
<p>A typical application of the police action is to enforce ingress traffic rate by dropping exceeding packets. Although better done on the sender's side, especially in scenarios with lack of peer control (e.g. with dial-up providers) this is often the best one can do in order to keep latencies low under high load. The following establishes input bandwidth policing to 1mbit/s using the <strong>ingress</strong> qdisc and <strong>u32</strong> filter:</p>
<pre>
# tc qdisc add dev eth0 handle ffff: ingress
# tc filter add dev eth0 parent ffff: u32 &#92;
	match u32 0 0 &#92;
	police rate 1mbit burst 100k
</pre>
<p>As an action can not live on it's own, there always has to be a filter involved as link between qdisc and action. The example above uses <strong>u32</strong> for that, which is configured to effectively match any packet (passing it to the <strong>police</strong> action thereby).</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">RELATED TO tc-police&hellip;</h2>
        <div class="sectioncontent">
<p><strong>tc</strong>(8)</p>
        </div>
      </section>
<nav>
  <ul class="pager">
   <li class="previous"><a href="tc-pie.8.html"><span aria-hidden="true">&larr;</span> tc-pie.8: Proportional integral controller-enhanced aqm algorithm</a></li>
   <li class="next"><a href="tc-prio.8.html">tc-prio.8: Priority qdisc <span aria-hidden="true">&rarr;</span></a></li>
  </ul>
</nav>

  </div>
  <!-- jQuery (necessary for Bootstrap's JavaScript plugins) -->
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.2/jquery.min.js"></script>
  <!-- Include all compiled plugins (below), or include individual files as needed -->
  <script src="/js/bootstrap.min.js"></script>
  <script>
    (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
      (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
      m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
    })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

    ga('create', 'UA-60781387-1', 'auto');
    ga('send', 'pageview');

  </script>
</body>
</html>
