<!DOCTYPE html>
<html lang="en">
<head>
  <link href="https://fonts.googleapis.com/css?family=Fira+Mono:400,700&effect=destruction%7Cshadow-multiple" rel="stylesheet" type="text/css">
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>xringd: The linux extended modem ring server</title>
  <link href="/css/bootstrap.min.css" rel="stylesheet">
  <link href="/css/manpage.css" rel="stylesheet">
  <link rel="apple-touch-icon" sizes="57x57" href="/icons/apple-icon-57x57.png">
  <link rel="apple-touch-icon" sizes="60x60" href="/icons/apple-icon-60x60.png">
  <link rel="apple-touch-icon" sizes="72x72" href="/icons/apple-icon-72x72.png">
  <link rel="apple-touch-icon" sizes="76x76" href="/icons/apple-icon-76x76.png">
  <link rel="apple-touch-icon" sizes="114x114" href="/icons/apple-icon-114x114.png">
  <link rel="apple-touch-icon" sizes="120x120" href="/icons/apple-icon-120x120.png">
  <link rel="apple-touch-icon" sizes="144x144" href="/icons/apple-icon-144x144.png">
  <link rel="apple-touch-icon" sizes="152x152" href="/icons/apple-icon-152x152.png">
  <link rel="apple-touch-icon" sizes="180x180" href="/icons/apple-icon-180x180.png">
  <link rel="icon" type="image/png" sizes="192x192" href="/icons/android-icon-192x192.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/icons/favicon-32x32.png">
  <link rel="icon" type="image/png" sizes="96x96" href="/icons/favicon-96x96.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/icons/favicon-16x16.png">
  <link rel="manifest" href="/icons/manifest.json">
  <meta name="msapplication-TileColor" content="#ffffff">
  <meta name="msapplication-TileImage" content="/icons/ms-icon-144x144.png">
  <meta name="theme-color" content="#ffffff">
  <meta name="description" content="The linux extended modem ring server">
  <meta name="twitter:card" content="summary_large_image">
  <meta name="twitter:site" content="@CartaTech">
  <meta name="twitter:creator" content="@CartaTech">
  <meta name="twitter:title" content="xringd (8) manual">
  <meta name="twitter:description" content="The linux extended modem ring server">
  <meta name="twitter:image" content="https://www.carta.tech/images/xringd-xringd-8.png">
  <meta property="og:url" content="https://www.carta.tech/man-pages/man8/xringd.8.html" />
  <meta property="og:type" content="website" />
  <meta property="og:title" content="xringd (8) manual" />
  <meta property="og:description" content="The linux extended modem ring server" />
  <meta property="fb:app_id" content="1241677679199500" />
  <meta property="og:image" content="https://www.carta.tech/images/xringd-xringd-8.png" />
  <meta property="og:image:width" content="600" />
  <meta property="og:image:height" content="315" />
</head>
<body>
  <div class="container final">
          <div class="page-header">
        <h1 class="font-effect-destruction">xringd<small> (8)</small></h1>
        <p class="lead">The linux extended modem ring server</p>
      </div>

    <ol class="breadcrumb" itemscope itemtype="http://schema.org/BreadcrumbList">
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/">
      <span itemprop="name">Carta.tech</span>
    </a>
    <meta itemprop="position" content="1" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/">
      <span itemprop="name">Man Pages</span>
    </a>
    <meta itemprop="position" content="2" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/man8/">
      <span itemprop="name">System administration commands</span>
    </a>
    <meta itemprop="position" content="3" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/man8/xringd.8.html">
      <span itemprop="name">xringd: The linux extended modem ring server</span>
    </a>
    <meta itemprop="position" content="4" />
  </li>
</ol>
<ol class="breadcrumb" itemscope itemtype="http://schema.org/BreadcrumbList">
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/">
      <span itemprop="name">Carta.tech</span>
    </a>
    <meta itemprop="position" content="1" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/packages/">
      <span itemprop="name">Packages</span>
    </a>
    <meta itemprop="position" content="2" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/packages/xringd/">
      <span itemprop="name">xringd</span>
    </a>
    <meta itemprop="position" content="3" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/man8/xringd.8.html">
      <span itemprop="name">xringd: The linux extended modem ring server</span>
    </a>
    <meta itemprop="position" content="4" />
  </li>
</ol>
    
      <section>
        <h2 class="font-effect-shadow-multiple">SYNOPSIS</h2>
        <div class="sectioncontent">
<p><strong>xringd</strong> [ <em>options</em> ] [ <em>modem_device_file</em> ]</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">DESCRIPTION</h2>
        <div class="sectioncontent">
<p>The xringd Linux extended Ring server will listen on a modem device for specific ring-delay patterns (sequences). Each sequence, when fully recognised, will execute a command you have chosen (subject to usual unix permissions). Delays are in fact delay ranges. Sequences and commands are read from a a configuration file. <em>xringd</em> does not disturb your other modem programs, not even your getty. It coexists with them. <em>xringd</em> probes (asynchronously) for the actual RING signal on the serial line.</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">OPTIONS</h2>
        <div class="sectioncontent">

<dl class='dl-vertical'>
  <dt>
    <p><strong>-a </strong><em> command_on_each_ring</em></p>
  </dt>
  <dd>
    <p>Run this command on every ring. Use perhaps to replace your boring phone ring.</p>
  </dd>
  <dt>
    <p><strong>-c </strong><em> config_file</em></p>
  </dt>
  <dd>
    <p>Use an alternate configuration file. The default is <strong>/etc/xringd.conf</strong></p>
  </dd>
  <dt>
    <p><strong>-d</strong></p>
  </dt>
  <dd>
    <p>Run in debug mode (no daemon - logging = 100). <em>xringd</em> does not run as a daemon and produces log messages on standard error.</p>
  </dd>
  <dt>
    <p><strong>-h | -?</strong></p>
  </dt>
  <dd>
    <p>See a mini usage info</p>
  </dd>
  <dt>
    <p><strong>-i msecs-ignored</strong></p>
  </dt>
  <dd>
    <p>If consecutive rings have a time (in msec) distance less than this one, they are taken as one. For countries where a ring creates two sounds and modems that subsequently cause two changes on the serial RI line. Use this option to make two near RIs look as one to xringd. A value of 100-800 will most likely be the most appropriate.</p>
  </dd>
  <dt>
    <p><strong>-l loglevel</strong></p>
  </dt>
  <dd>
    <p>Logging level. Default=1. Use 10+ for more info. When running as daemon you can use -l 10 or 100 to get debug messages via syslog(LOG_DEBUG, ...).  0 means NO logging at all.</p>
  </dd>
  <dt>
    <p><strong>-m </strong><em> modem_device_file</em></p>
  </dt>
  <dd>
    <p>The modem device file (can also be given as the final argument).</p>
  </dd>
  <dt>
    <p><strong>-e</strong></p>
  </dt>
  <dd>
    <p>Disables ECHO on modem device upon opening. This will avoid echo races reported with some modems.</p>
  </dd>
  <dt>
    <p><strong>-n</strong></p>
  </dt>
  <dd>
    <p>Performs only a syntax check of its configuration file. It implies -d. Try this first when you write a new configuration file. <em>xringd</em> does not become a daemon and produces log messages on standard error.</p>
  </dd>
  <dt>
    <p><strong>-t </strong><em> init_time</em></p>
  </dt>
  <dd>
    <p>After a reset (or the first time it is run), the time (in seconds) to wait until rings are accepted. Default: 15</p>
  </dd>

</dl>

        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">CONFIGURATION FILE</h2>
        <div class="sectioncontent">
<p>The configuration file consists of lines of the following format:</p><p><strong>R secs[-secs] [ R secs[-secs] ] ... : command</strong></p><p>Each line is related to a sequence(pattern) that can be potentially matched. The <em>command</em> at the end gets executed if the sequence was fully matched. A full match is found if the delays between the rings are within the delay ranges given in the configuration line of a sequence. A full match will also reset the state machine. It will start accepting new rings as when run the first time. <em>R</em> means ring and it should <strong>always</strong> be the first symbol in a sequence.</p><p>Comment lines start with a ``#'' symbol at the beginning of the line. Empty lines are ignored.</p><p>Note that command lines options can also be included in the config file. A line should start with the '-' of an option. See example below. Options -c and -n are ignored in the config file. Options in the configuration file take precedence over the ones in the command line.</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">EXAMPLE CONFIGURATION</h2>
        <div class="sectioncontent">

<pre>
# xringd configuration file -- sample
#
-a /usr/local/audio/bin/play /usr/local/lib/sounds/ring.au
-l 100
#
# 2 rings 10-16 sec apart followed by 30 secs silence
R 10-16 R 30 : /etc/ppp/ppp.start office1
# 3 rings 10-20 sec apart followed by 20 secs silence
R 10-20 R 10-20 R 20 : /etc/ppp/ppp.start office2
# 2 nearish rings then 1 ring after 20-26 secs, silence for 30 secs
R 1-5 R 20-26 R 30 : /usr/local/bin/turn-heater on

</pre>

        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">FILES</h2>
        <div class="sectioncontent">

<dl class='dl-vertical'>
  <dt>
    <p><strong>/etc/xringd.conf</strong></p>
  </dt>
  <dd>
    <p>The default configuration file.</p>
  </dd>
  <dt>
    <p><strong>/dev/modem</strong></p>
  </dt>
  <dd>
    <p>The default modem device used.</p>
  </dd>

</dl>

        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">SIGNALS</h2>
        <div class="sectioncontent">
<p>The following signals have the specified effect when sent to the <em>xringd</em> process.</p>
<dl class='dl-vertical'>
  <dt>
    <p><strong>SIGINT, SIGTERM</strong></p>
  </dt>
  <dd>
    <p>Clean exit the server.</p>
  </dd>
  <dt>
    <p><strong>SIGUSR1</strong></p>
  </dt>
  <dd>
    <p>"Simulates" a RING as if it came from the modem.</p>
  </dd>
  <dt>
    <p><strong>SIGHUP</strong></p>
  </dt>
  <dd>
    <p>Restart the internal machine ignoring any current state. Reread the config file. Close and reopen the modem device.  If a syntax error is found in a line all the following lines are ignored. So when you restart, make sure you look at the log for any reported errors. A better way is to always "parse" your config file with "xringd -n" to check its syntax first.</p>
  </dd>

</dl>

        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">NOTES</h2>
        <div class="sectioncontent">
<p>At the moment, <em>xringd</em> is device dependent on Linux kernel 1.3.48+ and serial devices that support the TIOCMIWAIT, TIOCGICOUNT <a href="../man2/ioctl.2.html"><strong>ioctl</strong>(2)</a> calls. These were added by the same author to the Linux kernel so that a process can wait on a modem DCD,RI,DSR,CTS change on a serial port and can also read a kernel count of the interrupts on each one of these 4 lines. RI was used for this program. (Other possibilities exist in using this ioctl for instrumentation projects.) Note that these ioctls are only implemented for 16xx0 uarts now (Jan96).</p><p>You <strong>have</strong> to use a proper serial cable for this to work. A cable with all pins properly connected to your modem (especially the RI line for this program!) and serial port will save you any trouble. Internal modems should normally work.</p><p>If you activate a program which uses the modem after ringd it should normally <strong></strong> flush the input buffer. In many cases you will have a few "RING" strings in your serial tty buffer that will most likely confuse a dialup script (eg. chat).</p><p>The richness of the ring-delay pattern "language" is not great. However, you certainly have many possibilities. Beware of overlaps though, and always have something that will "unlock" any current sequence (eq. 4 consecutive rings that safely exit from any current state).</p><p>If someone calls in while you are on the delay phase of your "pattern" then you are obviously out of luck.</p><p>Only tone dialing phones allow quick dial that can meet short timing restrictions possibly imposed by your configuration file. Make sure you use the redial button on the calling phone if there is one - you will be able to "dial" in about a second. Pulse dialers may introduce unexpected delays. If they are your only choice, use longer delays and wider delay ranges.</p><p>It was reported by a user that the "rings" you hear on the calling handset do not directly correspond to the ones actually heard on the receiving end. In the tests done with xringd in a few countries, the number of rings remained the same on calling and called set. Just leave each one of the rings you hear on the calling end to "settle" (do not break them before they finish). A delay between a ring heard on the caller set and the equivalent one on the called one was noticed but causes no problem for xringd. Feel free to send me your comments on this.</p><p>Many getty-like programs may be configured to pick up the phone on the first ring. Obviously, this will make xringd minimally useful. Make your getty to reply after 2-4 rings so that you have many possibilities open for xringd.</p><p>pppd (and probably some other programs) like to hold a tty in exclusive mode. Make sure you start xringd <strong></strong> before such programs, otherwise it won't be allowed to open the modem device. Also, when such a program closes it may leave the line hung up. You need to restart (kill -HUP) xringd in such a case. It does not make sense to run xringd on a line which is permanently used for PPP/SLIP - such a line never "rings"!</p><p>Spurious interrupts (and thus pseudo-RINGs) may occur during modem switch on/off; run xringd <strong></strong> after your modem is switched on.</p><p>It is highly recommended - for security reasons -  to make the configuration file inaccessible (even for read) to anything but xringd. Treat it as a shadow-password-like file. It is very easy for anyone to call your number and activate a command, if they know a RING-delay sequence "password". So try not to disarm your home-alarm via it. You have been warned!</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">AUTHOR</h2>
        <div class="sectioncontent">
<p>Angelo Haritsis (ah@doc.ic.ac.uk).</p>
        </div>
      </section>
<nav>
  <ul class="pager">
   <li class="previous"><a href="xrdp-sesrun.8.html"><span aria-hidden="true">&larr;</span> xrdp-sesrun.8: Sesman(8) session launcher</a></li>
   <li class="next"><a href="xtables-multi.8.html">xtables-multi.8: Xtables multi-link binary for netfilter's iptables and ip6tables <span aria-hidden="true">&rarr;</span></a></li>
  </ul>
</nav>

  </div>
  <!-- jQuery (necessary for Bootstrap's JavaScript plugins) -->
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.2/jquery.min.js"></script>
  <!-- Include all compiled plugins (below), or include individual files as needed -->
  <script src="/js/bootstrap.min.js"></script>
  <script>
    (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
      (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
      m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
    })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

    ga('create', 'UA-60781387-1', 'auto');
    ga('send', 'pageview');

  </script>
</body>
</html>
