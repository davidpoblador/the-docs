<!DOCTYPE html>
<html lang="en">
<head>
  <link href="https://fonts.googleapis.com/css?family=Fira+Mono:400,700&effect=destruction%7Cshadow-multiple" rel="stylesheet" type="text/css">
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>ip-tcp_metrics - management for TCP Metrics</title>
  <link href="/css/bootstrap.min.css" rel="stylesheet">
  <link href="/css/manpage.css" rel="stylesheet">
  <link rel="apple-touch-icon" sizes="57x57" href="/icons/apple-icon-57x57.png">
  <link rel="apple-touch-icon" sizes="60x60" href="/icons/apple-icon-60x60.png">
  <link rel="apple-touch-icon" sizes="72x72" href="/icons/apple-icon-72x72.png">
  <link rel="apple-touch-icon" sizes="76x76" href="/icons/apple-icon-76x76.png">
  <link rel="apple-touch-icon" sizes="114x114" href="/icons/apple-icon-114x114.png">
  <link rel="apple-touch-icon" sizes="120x120" href="/icons/apple-icon-120x120.png">
  <link rel="apple-touch-icon" sizes="144x144" href="/icons/apple-icon-144x144.png">
  <link rel="apple-touch-icon" sizes="152x152" href="/icons/apple-icon-152x152.png">
  <link rel="apple-touch-icon" sizes="180x180" href="/icons/apple-icon-180x180.png">
  <link rel="icon" type="image/png" sizes="192x192" href="/icons/android-icon-192x192.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/icons/favicon-32x32.png">
  <link rel="icon" type="image/png" sizes="96x96" href="/icons/favicon-96x96.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/icons/favicon-16x16.png">
  <link rel="manifest" href="/icons/manifest.json">
  <meta name="msapplication-TileColor" content="#ffffff">
  <meta name="msapplication-TileImage" content="/icons/ms-icon-144x144.png">
  <meta name="theme-color" content="#ffffff">
  <meta name="description" content="Management for tcp metrics">
</head>
<body>
  <div class="container final">
          <div class="page-header">
        <h1 class="font-effect-destruction">ip-tcp_metrics<small> (8)</small></h1>
        <p class="lead">Management for tcp metrics</p>
      </div>

    <ol class="breadcrumb" itemscope itemtype="http://schema.org/BreadcrumbList">
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/">
      <span itemprop="name">Carta.tech</span>
    </a>
    <meta itemprop="position" content="1" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/">
      <span itemprop="name">Man Pages</span>
    </a>
    <meta itemprop="position" content="2" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/man8/">
      <span itemprop="name">System administration commands</span>
    </a>
    <meta itemprop="position" content="3" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/man8/ip-tcp_metrics.8.html">
      <span itemprop="name">ip-tcp_metrics</span>
    </a>
    <meta itemprop="position" content="4" />
  </li>
</ol>
<ol class="breadcrumb" itemscope itemtype="http://schema.org/BreadcrumbList">
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/">
      <span itemprop="name">Carta.tech</span>
    </a>
    <meta itemprop="position" content="1" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/packages/">
      <span itemprop="name">Packages</span>
    </a>
    <meta itemprop="position" content="2" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/packages/iproute2/">
      <span itemprop="name">iproute2</span>
    </a>
    <meta itemprop="position" content="3" />
  </li>
</ol>
    
      <section>
        <h2 class="font-effect-shadow-multiple">SYNOPSIS</h2>
        <div class="sectioncontent">

<p class='spacer'>

<p><strong>ip</strong> [ <em>OPTIONS</em> ] <strong>tcp_metrics</strong> { <em>COMMAND</em> |  <strong>help</strong> }</p>
<p class='spacer'>

<p><strong>ip tcp_metrics</strong> { <strong>show</strong> | <strong>flush</strong> } <em>SELECTOR</em></p>
<p class='spacer'>

<p><strong>ip tcp_metrics delete </strong>[<strong> address </strong>] <em>ADDRESS</em></p>
<p class='spacer'>

<p><em>SELECTOR</em> :=  [ [ <strong>address</strong> ]  <em>PREFIX</em> ]</p>
<p class='spacer'>

        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">DESCRIPTION</h2>
        <div class="sectioncontent">

<p><strong>ip tcp_metrics</strong> is used to manipulate entries in the kernel that keep TCP information for IPv4 and IPv6 destinations. The entries are created when TCP sockets want to share information for destinations and are stored in a cache keyed by the destination address. The saved information may include values for metrics (initially obtained from routes), recent TSVAL for TIME-WAIT recycling purposes, state for the Fast Open feature, etc. For performance reasons the cache can not grow above configured limit and the older entries are replaced with fresh information, sometimes reclaimed and used for new destinations. The kernel never removes entries, they can be flushed only with this tool.</p>
<p class='spacer'>

  <h3>ip tcp_metrics show - show cached entries</h3>
<p class='spacer'>

  <dl class='dl-vertical'>
    <dt><strong>address</strong><em> PREFIX </em><strong>(default)</strong></dt>
    <dd>
  <p>IPv4/IPv6 prefix or address. If no prefix is provided all entries are shown.</p>
<p class='spacer'>

    </dd>
  </dl>
<p class='spacer'>

<p>The output may contain the following information:</p>
<p class='spacer'>

<p><strong>age</strong><em> &lt;S.MMM&gt;</em><strong>sec</strong> - time after the entry was created, reset or updated with metrics from sockets. The entry is reset and refreshed on use with metrics from route if the metrics are not updated in last hour. Not all cached values reset the age on update.</p>
<p class='spacer'>

<p><strong>cwnd</strong><em> &lt;N&gt;</em> - CWND metric value</p>
<p class='spacer'>

<p><strong>fo_cookie</strong><em> &lt;HEX-STRING&gt;</em> - Cookie value received in SYN-ACK to be used by Fast Open for next SYNs</p>
<p class='spacer'>

<p><strong>fo_mss</strong><em> &lt;N&gt;</em> - MSS value received in SYN-ACK to be used by Fast Open for next SYNs</p>
<p class='spacer'>

<p><strong>fo_syn_drops</strong><em> &lt;N&gt;/&lt;S.MMM&gt;</em><strong>sec ago</strong> - Number of drops of initial outgoing Fast Open SYNs with data detected by monitoring the received SYN-ACK after SYN retransmission. The seconds show the time after last SYN drop and together with the drop count can be used to disable Fast Open for some time.</p>
<p class='spacer'>

<p><strong>reordering</strong><em> &lt;N&gt;</em> - Reordering metric value</p>
<p class='spacer'>

<p><strong>rtt</strong><em> &lt;N&gt;</em><strong>us</strong> - RTT metric value</p>
<p class='spacer'>

<p><strong>rttvar</strong><em> &lt;N&gt;</em><strong>us</strong> - RTTVAR metric value</p>
<p class='spacer'>

<p><strong>ssthresh</strong><em> &lt;SSTHRESH&gt;</em> - SSTHRESH metric value</p>
<p class='spacer'>

<p><strong>tw_ts</strong><em> &lt;TSVAL&gt;/&lt;SEC&gt;</em><strong>sec ago</strong> - recent TSVAL and the seconds after saving it into TIME-WAIT socket</p>
<p class='spacer'>

  <h3>ip tcp_metrics delete - delete single entry</h3>
<p class='spacer'>

  <dl class='dl-vertical'>
    <dt><strong>address</strong><em> ADDRESS </em><strong>(default)</strong></dt>
    <dd>
  <p>IPv4/IPv6 address. The address is a required argument.</p>
<p class='spacer'>

    </dd>
  </dl>
  <h3>ip tcp_metrics flush - flush entries</h3>
<p>This command flushes the entries selected by some criteria.</p>
<p class='spacer'>

<p class='spacer'>

<p>This command has the same arguments as <strong>show.</strong></p>
<p class='spacer'>

        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">EXAMPLES</h2>
        <div class="sectioncontent">

<p class='spacer'>

<p>ip tcp_metrics show address 192.168.0.0/24 Shows the entries for destinations from subnet</p>
<p class='spacer'>

<p>ip tcp_metrics show 192.168.0.0/24 The same but address keyword is optional</p>
<p class='spacer'>

<p>ip tcp_metrics Show all is the default action</p>
<p class='spacer'>

<p>ip tcp_metrics delete 192.168.0.1 Removes the entry for 192.168.0.1 from cache.</p>
<p class='spacer'>

<p>ip tcp_metrics flush 192.168.0.0/24 Removes entries for destinations from subnet</p>
<p class='spacer'>

<p>ip tcp_metrics flush all Removes all entries from cache</p>
<p class='spacer'>

<p>ip -6 tcp_metrics flush all Removes all IPv6 entries from cache keeping the IPv4 entries.</p>
<p class='spacer'>

        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">SEE ALSO</h2>
        <div class="sectioncontent">

<p class='spacer'>

<p><strong>ip</strong>(8)</p>
<p class='spacer'>

        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">AUTHOR</h2>
        <div class="sectioncontent">

<p>Original Manpage by Julian Anastasov &lt;ja@ssi.bg&gt;</p>
        </div>
      </section>
<nav>
  <ul class="pager">
   <li class="previous"><a href="ip-rule.8.html"><span aria-hidden="true">&larr;</span> ip-rule.8: routing policy database management</a></li>
   <li class="next"><a href="ip-token.8.html">ip-token.8: tokenized interface identifier support <span aria-hidden="true">&rarr;</span></a></li>
  </ul>
</nav>

  </div>
  <!-- jQuery (necessary for Bootstrap's JavaScript plugins) -->
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.2/jquery.min.js"></script>
  <!-- Include all compiled plugins (below), or include individual files as needed -->
  <script src="/js/bootstrap.min.js"></script>
  <script>
    (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
      (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
      m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
    })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

    ga('create', 'UA-60781387-1', 'auto');
    ga('send', 'pageview');

  </script>
</body>
</html>
