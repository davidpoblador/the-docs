<!DOCTYPE html>
<html lang="en">
<head>
  <link href="https://fonts.googleapis.com/css?family=Fira+Mono:400,700&effect=destruction%7Cshadow-multiple" rel="stylesheet" type="text/css">
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>mosquitto: An mqtt broker</title>
  <link href="/css/bootstrap.min.css" rel="stylesheet">
  <link href="/css/manpage.css" rel="stylesheet">
  <link rel="apple-touch-icon" sizes="57x57" href="/icons/apple-icon-57x57.png">
  <link rel="apple-touch-icon" sizes="60x60" href="/icons/apple-icon-60x60.png">
  <link rel="apple-touch-icon" sizes="72x72" href="/icons/apple-icon-72x72.png">
  <link rel="apple-touch-icon" sizes="76x76" href="/icons/apple-icon-76x76.png">
  <link rel="apple-touch-icon" sizes="114x114" href="/icons/apple-icon-114x114.png">
  <link rel="apple-touch-icon" sizes="120x120" href="/icons/apple-icon-120x120.png">
  <link rel="apple-touch-icon" sizes="144x144" href="/icons/apple-icon-144x144.png">
  <link rel="apple-touch-icon" sizes="152x152" href="/icons/apple-icon-152x152.png">
  <link rel="apple-touch-icon" sizes="180x180" href="/icons/apple-icon-180x180.png">
  <link rel="icon" type="image/png" sizes="192x192" href="/icons/android-icon-192x192.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/icons/favicon-32x32.png">
  <link rel="icon" type="image/png" sizes="96x96" href="/icons/favicon-96x96.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/icons/favicon-16x16.png">
  <link rel="manifest" href="/icons/manifest.json">
  <meta name="msapplication-TileColor" content="#ffffff">
  <meta name="msapplication-TileImage" content="/icons/ms-icon-144x144.png">
  <meta name="theme-color" content="#ffffff">
  <meta name="description" content="An mqtt broker">
  <meta name="twitter:card" content="summary_large_image">
  <meta name="twitter:site" content="@CartaTech">
  <meta name="twitter:creator" content="@CartaTech">
  <meta name="twitter:title" content="mosquitto (8) manual">
  <meta name="twitter:description" content="An mqtt broker">
  <meta name="twitter:image" content="https://www.carta.tech/images/mosquitto-mosquitto-8.png">
  <meta property="og:url" content="https://www.carta.tech/man-pages/man8/mosquitto.8.html" />
  <meta property="og:type" content="website" />
  <meta property="og:title" content="mosquitto (8) manual" />
  <meta property="og:description" content="An mqtt broker" />
  <meta property="fb:app_id" content="1241677679199500" />
  <meta property="og:image" content="https://www.carta.tech/images/mosquitto-mosquitto-8.png" />
  <meta property="og:image:width" content="600" />
  <meta property="og:image:height" content="315" />
</head>
<body>
  <div class="container final">
          <div class="page-header">
        <h1 class="font-effect-destruction">mosquitto<small> (8)</small></h1>
        <p class="lead">An mqtt broker</p>
      </div>

    <ol class="breadcrumb" itemscope itemtype="http://schema.org/BreadcrumbList">
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/">
      <span itemprop="name">Carta.tech</span>
    </a>
    <meta itemprop="position" content="1" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/">
      <span itemprop="name">Man Pages</span>
    </a>
    <meta itemprop="position" content="2" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/man8/">
      <span itemprop="name">System administration commands</span>
    </a>
    <meta itemprop="position" content="3" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/man8/mosquitto.8.html">
      <span itemprop="name">mosquitto: An mqtt broker</span>
    </a>
    <meta itemprop="position" content="4" />
  </li>
</ol>
<ol class="breadcrumb" itemscope itemtype="http://schema.org/BreadcrumbList">
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/">
      <span itemprop="name">Carta.tech</span>
    </a>
    <meta itemprop="position" content="1" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/packages/">
      <span itemprop="name">Packages</span>
    </a>
    <meta itemprop="position" content="2" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/packages/mosquitto/">
      <span itemprop="name">mosquitto</span>
    </a>
    <meta itemprop="position" content="3" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/man8/mosquitto.8.html">
      <span itemprop="name">mosquitto: An mqtt broker</span>
    </a>
    <meta itemprop="position" content="4" />
  </li>
</ol>
    
      <section>
        <h2 class="font-effect-shadow-multiple">SYNOPSIS</h2>
        <div class="sectioncontent">
<p><strong>mosquitto</strong> [-c&nbsp;<em>config&nbsp;file</em>] [-d | --daemon] [-p&nbsp;<em>port&nbsp;number</em>] [-v]</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">DESCRIPTION</h2>
        <div class="sectioncontent">
<p><strong>mosquitto</strong> is a broker for the MQTT protocol version 3.1.</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">OPTIONS</h2>
        <div class="sectioncontent">
<p><strong>-c</strong>, <strong>--config-file</strong></p><p>Load configuration from a file. If not given, the default values as described in <strong>mosquitto.conf</strong>(5) are used.</p><p><strong>-d</strong>, <strong>--daemon</strong></p><p>Run <strong>mosquitto</strong> in the background as a daemon. All other behaviour remains the same.</p><p><strong>-p</strong>, <strong>--port</strong></p><p>Listen on the port specified instead of the default 1883. This acts in addition to the port setting in the config file. May be specified multiple times to open multiple sockets listening on different ports. This socket will be bound to all network interfaces.</p><p><strong>-v</strong>, <strong>--verbose</strong></p><p>Use verbose logging. This is equivalent to setting <strong>log_type</strong> to <strong>all</strong> in the configuration file. This overrides and logging options given in the configuration file.</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">CONFIGURATION</h2>
        <div class="sectioncontent">
<p>The broker can be configured using a configuration file as described in <strong>mosquitto.conf</strong>(5) and this is the main point of information for mosquitto. The files required for SSL/TLS support are described in <a href="../man7/mosquitto-tls.7.html"><strong>mosquitto-tls</strong>(7)</a>.</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">BROKER STATUS</h2>
        <div class="sectioncontent">
<p>Clients can find information about the broker by subscribing to topics in the $SYS hierarchy as follows. Topics marked as static are only sent once per client on subscription. All other topics are updated every <strong>sys_interval</strong> seconds. If <strong>sys_interval</strong> is 0, then updates are not sent.</p><p><strong>$SYS/broker/bytes/received</strong></p><p>The total number of bytes received since the broker started.</p><p><strong>$SYS/broker/bytes/sent</strong></p><p>The total number of bytes sent since the broker started.</p><p><strong>$SYS/broker/changeset</strong></p><p>The repository changeset (revision) associated with this build. Static.</p><p><strong>$SYS/broker/clients/active</strong></p><p>The number of currently connected clients</p><p><strong>$SYS/broker/clients/expired</strong></p><p>The number of disconnected persistent clients that have been expired and removed through the persistent_client_expiration option.</p><p><strong>$SYS/broker/clients/inactive</strong></p><p>The total number of persistent clients (with clean session disabled) that are registered at the broker but are currently disconnected.</p><p><strong>$SYS/broker/clients/maximum</strong></p><p>The maximum number of active clients that have been connected to the broker. This is only calculated when the $SYS topic tree is updated, so short lived client connections may not be counted.</p><p><strong>$SYS/broker/clients/total</strong></p><p>The total number of active and inactive clients currently connected and registered on the broker.</p><p><strong>$SYS/broker/connection/#</strong></p><p>When bridges are configured to/from the broker, common practice is to provide a status topic that indicates the state of the connection. This is provided within $SYS/broker/connection/ by default. If the value of the topic is 1 the connection is active, if 0 then it is not active. See the Bridges section below for more information on bridges.</p><p><strong>$SYS/broker/heap/current size</strong></p><p>The current size of the heap memory in use by mosquitto. Note that this topic may be unavailable depending on compile time options.</p><p><strong>$SYS/broker/heap/maximum size</strong></p><p>The largest amount of heap memory used by mosquitto. Note that this topic may be unavailable depending on compile time options.</p><p><strong>$SYS/broker/load/connections/+</strong></p><p>The moving average of the number of CONNECT packets received by the broker over different time intervals. The final "+" of the hierarchy can be 1min, 5min or 15min. The value returned represents the number of connections received in 1 minute, averaged over 1, 5 or 15 minutes.</p><p><strong>$SYS/broker/load/bytes/received/+</strong></p><p>The moving average of the number of bytes received by the broker over different time intervals. The final "+" of the hierarchy can be 1min, 5min or 15min. The value returned represents the number of bytes received in 1 minute, averaged over 1, 5 or 15 minutes.</p><p><strong>$SYS/broker/load/bytes/sent/+</strong></p><p>The moving average of the number of bytes sent by the broker over different time intervals. The final "+" of the hierarchy can be 1min, 5min or 15min. The value returned represents the number of bytes sent in 1 minute, averaged over 1, 5 or 15 minutes.</p><p><strong>$SYS/broker/load/messages/received/+</strong></p><p>The moving average of the number of all types of MQTT messages received by the broker over different time intervals. The final "+" of the hierarchy can be 1min, 5min or 15min. The value returned represents the number of messages received in 1 minute, averaged over 1, 5 or 15 minutes.</p><p><strong>$SYS/broker/load/messages/sent/+</strong></p><p>The moving average of the number of all types of MQTT messages sent by the broker over different time intervals. The final "+" of the hierarchy can be 1min, 5min or 15min. The value returned represents the number of messages send in 1 minute, averaged over 1, 5 or 15 minutes.</p><p><strong>$SYS/broker/load/publish/dropped/+</strong></p><p>The moving average of the number of publish messages dropped by the broker over different time intervals. This shows the rate at which durable clients that are disconnected are losing messages. The final "+" of the hierarchy can be 1min, 5min or 15min. The value returned represents the number of messages dropped in 1 minute, averaged over 1, 5 or 15 minutes.</p><p><strong>$SYS/broker/load/publish/received/+</strong></p><p>The moving average of the number of publish messages received by the broker over different time intervals. The final "+" of the hierarchy can be 1min, 5min or 15min. The value returned represents the number of publish messages received in 1 minute, averaged over 1, 5 or 15 minutes.</p><p><strong>$SYS/broker/load/publish/sent/+</strong></p><p>The moving average of the number of publish messages sent by the broker over different time intervals. The final "+" of the hierarchy can be 1min, 5min or 15min. The value returned represents the number of publish messages sent in 1 minute, averaged over 1, 5 or 15 minutes.</p><p><strong>$SYS/broker/load/sockets/+</strong></p><p>The moving average of the number of socket connections opened to the broker over different time intervals. The final "+" of the hierarchy can be 1min, 5min or 15min. The value returned represents the number of socket connections in 1 minute, averaged over 1, 5 or 15 minutes.</p><p><strong>$SYS/broker/messages/inflight</strong></p><p>The number of messages with QoS&gt;0 that are awaiting acknowledgments.</p><p><strong>$SYS/broker/messages/received</strong></p><p>The total number of messages of any type received since the broker started.</p><p><strong>$SYS/broker/messages/sent</strong></p><p>The total number of messages of any type sent since the broker started.</p><p><strong>$SYS/broker/messages/stored</strong></p><p>The number of messages currently held in the message store. This includes retained messages and messages queued for durable clients.</p><p><strong>$SYS/broker/publish/messages/dropped</strong></p><p>The total number of publish messages that have been dropped due to inflight/queuing limits. See the max_inflight_messages and max_queued_messages options in <strong>mosquitto.conf</strong>(5) for more information.</p><p><strong>$SYS/broker/publish/messages/received</strong></p><p>The total number of PUBLISH messages received since the broker started.</p><p><strong>$SYS/broker/publish/messages/sent</strong></p><p>The total number of PUBLISH messages sent since the broker started.</p><p><strong>$SYS/broker/retained messages/count</strong></p><p>The total number of retained messages active on the broker.</p><p><strong>$SYS/broker/subscriptions/count</strong></p><p>The total number of subscriptions active on the broker.</p><p><strong>$SYS/broker/timestamp</strong></p><p>The timestamp at which this particular build of the broker was made. Static.</p><p><strong>$SYS/broker/uptime</strong></p><p>The amount of time in seconds the broker has been online.</p><p><strong>$SYS/broker/version</strong></p><p>The version of the broker. Static.</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">WILDCARD TOPIC SUBSCRIPTIONS</h2>
        <div class="sectioncontent">
<p>In addition to allowing clients to subscribe to specific topics, mosquitto also allows the use of two wildcards in subscriptions. <strong>+</strong> is the wildcard used to match a single level of hierarchy. For example, for a topic of "a/b/c/d", the following example subscriptions will match:</p><p>a/b/c/d</p><p>+/b/c/d</p><p>a/+/c/d</p><p>a/+/+/d</p><p>+/+/+/+</p><p>The following subscriptions will not match:</p><p>a/b/c</p><p>b/+/c/d</p><p>+/+/+</p><p>The second wildcard is <strong>#</strong> and is used to match all subsequent levels of hierarchy. With a topic of "a/b/c/d", the following example subscriptions will match:</p><p>a/b/c/d</p><p>#</p><p>a/#</p><p>a/b/#</p><p>a/b/c/#</p><p>+/b/c/#</p><p>The $SYS hierarchy does not match a subscription of "#". If you want to observe the entire $SYS hierarchy, subscribe to $SYS/#.</p><p>Note that the wildcards must be only ever used on their own, so a subscription of "a/b+/c" is not valid use of a wildcard. The <strong>#</strong> wildcard must only ever be used as the final character of a subscription.</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">BRIDGES</h2>
        <div class="sectioncontent">
<p>Multiple brokers can be connected together with the bridging functionality. This is useful where it is desirable to share information between locations, but where not all of the information needs to be shared. An example could be where a number of users are running a broker to help record power usage and for a number of other reasons. The power usage could be shared through bridging all of the user brokers to a common broker, allowing the power usage of all users to be collected and compared. The other information would remain local to each broker.</p><p>For information on configuring bridges, see <strong>mosquitto.conf</strong>(5).</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">SIGNALS</h2>
        <div class="sectioncontent">
<p>SIGHUP</p><p>Upon receiving the SIGHUP signal, mosquitto will attempt to reload configuration file data, assuming that the <strong>-c</strong> argument was provided when mosquitto was started. Not all configuration parameters can be reloaded without restarting. See <strong>mosquitto.conf</strong>(5) for details.</p><p>SIGUSR1</p><p>Upon receiving the SIGUSR1 signal, mosquitto will write the persistence database to disk. This signal is only acted upon if persistence is enabled.</p><p>SIGUSR2</p><p>The SIGUSR2 signal causes mosquitto to print out the current subscription tree, along with information about where retained messages exist. This is intended as a testing feature only and may be removed at any time.</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">FILES</h2>
        <div class="sectioncontent">
<p>/etc/mosquitto/mosquitto.conf</p><p>Configuration file. See <strong>mosquitto.conf</strong>(5).</p><p>/var/lib/mosquitto/mosquitto.db</p><p>Persistent message data storage location if persist enabled.</p><p>/etc/hosts.allow, /etc/hosts.deny</p><p>Host access control via tcp-wrappers as described in <a href="../man5/hosts_access.5.html"><strong>hosts_access</strong>(5)</a>.</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">BUGS</h2>
        <div class="sectioncontent">
<p><strong>mosquitto</strong> bug information can be found at http://launchpad.net/mosquitto</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">RELATED TO mosquitto&hellip;</h2>
        <div class="sectioncontent">
<p><a href="../man7/mqtt.7.html"><strong>mqtt</strong>(7)</a>, <a href="../man7/mosquitto-tls.7.html"><strong>mosquitto-tls</strong>(7)</a>, <strong>mosquitto.conf</strong>(5), <a href="../man5/hosts_access.5.html"><strong>hosts_access</strong>(5)</a>, <a href="../man1/mosquitto_passwd.1.html"><strong>mosquitto_passwd</strong>(1)</a>, <a href="../man1/mosquitto_pub.1.html"><strong>mosquitto_pub</strong>(1)</a>, <a href="../man1/mosquitto_sub.1.html"><strong>mosquitto_sub</strong>(1)</a>, <a href="../man3/libmosquitto.3.html"><strong>libmosquitto</strong>(3)</a></p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">THANKS</h2>
        <div class="sectioncontent">
<p>Thanks to Andy Stanford-Clark for being one of the people who came up with MQTT in the first place. Thanks to Andy and Nicholas O&apos;Leary for providing clarifications of the protocol.</p><p>Thanks also to everybody at the Ubuntu UK Podcast and Linux Outlaws for organising OggCamp, where Andy gave a talk that inspired mosquitto.</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">ACKNOWLEDGEMENTS</h2>
        <div class="sectioncontent">
<p>This product includes software developed by the OpenSSL Project for use in the OpenSSL Toolkit. (http://www.openssl.org/)</p><p>This product includes cryptographic software written by Eric Young (eay@cryptsoft.com)</p><p>This product includes software written by Tim Hudson (tjh@cryptsoft.com)</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">AUTHOR</h2>
        <div class="sectioncontent">
<p>Roger Light &lt;roger@atchoo.org&gt;</p>
        </div>
      </section>
<nav>
  <ul class="pager">
   <li class="previous"><a href="moprc.8.html"><span aria-hidden="true">&larr;</span> moprc.8: Mop remote console requestor</a></li>
   <li class="next"><a href="mount.8.html">mount.8: Mount a filesystem <span aria-hidden="true">&rarr;</span></a></li>
  </ul>
</nav>

  </div>
  <!-- jQuery (necessary for Bootstrap's JavaScript plugins) -->
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.2/jquery.min.js"></script>
  <!-- Include all compiled plugins (below), or include individual files as needed -->
  <script src="/js/bootstrap.min.js"></script>
  <script>
    (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
      (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
      m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
    })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

    ga('create', 'UA-60781387-1', 'auto');
    ga('send', 'pageview');

  </script>
</body>
</html>
