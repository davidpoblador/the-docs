<!DOCTYPE html>
<html lang="en">
<head>
  <link href="https://fonts.googleapis.com/css?family=Fira+Mono:400,700&effect=destruction%7Cshadow-multiple" rel="stylesheet" type="text/css">
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>fxload: Firmware download to ez-usb devices</title>
  <link href="/css/bootstrap.min.css" rel="stylesheet">
  <link href="/css/manpage.css" rel="stylesheet">
  <link rel="apple-touch-icon" sizes="57x57" href="/icons/apple-icon-57x57.png">
  <link rel="apple-touch-icon" sizes="60x60" href="/icons/apple-icon-60x60.png">
  <link rel="apple-touch-icon" sizes="72x72" href="/icons/apple-icon-72x72.png">
  <link rel="apple-touch-icon" sizes="76x76" href="/icons/apple-icon-76x76.png">
  <link rel="apple-touch-icon" sizes="114x114" href="/icons/apple-icon-114x114.png">
  <link rel="apple-touch-icon" sizes="120x120" href="/icons/apple-icon-120x120.png">
  <link rel="apple-touch-icon" sizes="144x144" href="/icons/apple-icon-144x144.png">
  <link rel="apple-touch-icon" sizes="152x152" href="/icons/apple-icon-152x152.png">
  <link rel="apple-touch-icon" sizes="180x180" href="/icons/apple-icon-180x180.png">
  <link rel="icon" type="image/png" sizes="192x192" href="/icons/android-icon-192x192.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/icons/favicon-32x32.png">
  <link rel="icon" type="image/png" sizes="96x96" href="/icons/favicon-96x96.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/icons/favicon-16x16.png">
  <link rel="manifest" href="/icons/manifest.json">
  <meta name="msapplication-TileColor" content="#ffffff">
  <meta name="msapplication-TileImage" content="/icons/ms-icon-144x144.png">
  <meta name="theme-color" content="#ffffff">
  <meta name="description" content="Firmware download to ez-usb devices">
  <meta name="twitter:card" content="summary_large_image">
  <meta name="twitter:site" content="@CartaTech">
  <meta name="twitter:creator" content="@CartaTech">
  <meta name="twitter:title" content="fxload (8) manual">
  <meta name="twitter:description" content="Firmware download to ez-usb devices">
  <meta name="twitter:image" content="https://www.carta.tech/images/fxload-fxload-8.png">
  <meta property="og:url" content="https://www.carta.tech/man-pages/man8/fxload.8.html" />
  <meta property="og:type" content="website" />
  <meta property="og:title" content="fxload (8) manual" />
  <meta property="og:description" content="Firmware download to ez-usb devices" />
  <meta property="fb:app_id" content="1241677679199500" />
  <meta property="og:image" content="https://www.carta.tech/images/fxload-fxload-8.png" />
  <meta property="og:image:width" content="600" />
  <meta property="og:image:height" content="315" />
</head>
<body>
  <div class="container final">
          <div class="page-header">
        <h1 class="font-effect-destruction">fxload<small> (8)</small></h1>
        <p class="lead">Firmware download to ez-usb devices</p>
      </div>

    <ol class="breadcrumb" itemscope itemtype="http://schema.org/BreadcrumbList">
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/">
      <span itemprop="name">Carta.tech</span>
    </a>
    <meta itemprop="position" content="1" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/">
      <span itemprop="name">Man Pages</span>
    </a>
    <meta itemprop="position" content="2" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/man8/">
      <span itemprop="name">System administration commands</span>
    </a>
    <meta itemprop="position" content="3" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/man8/fxload.8.html">
      <span itemprop="name">fxload: Firmware download to ez-usb devices</span>
    </a>
    <meta itemprop="position" content="4" />
  </li>
</ol>
<ol class="breadcrumb" itemscope itemtype="http://schema.org/BreadcrumbList">
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/">
      <span itemprop="name">Carta.tech</span>
    </a>
    <meta itemprop="position" content="1" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/packages/">
      <span itemprop="name">Packages</span>
    </a>
    <meta itemprop="position" content="2" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/packages/fxload/">
      <span itemprop="name">fxload</span>
    </a>
    <meta itemprop="position" content="3" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/man8/fxload.8.html">
      <span itemprop="name">fxload: Firmware download to ez-usb devices</span>
    </a>
    <meta itemprop="position" content="4" />
  </li>
</ol>
    
      <section>
        <h2 class="font-effect-shadow-multiple">SYNOPSIS</h2>
        <div class="sectioncontent">
<p><strong>fxload</strong> <strong>[ -v ]</strong> <strong>[ -l ]</strong> <strong>[ -D </strong><em>devpath</em><strong> ]</strong> <strong>[ -I </strong><em>hexfile</em><strong> ]</strong> <strong>[ -t </strong><em>type</em><strong> ]</strong> <strong>[ -c </strong><em>config</em><strong> ]</strong> <strong>[ -s </strong><em>loader</em><strong> ]</strong></p><p><strong>fxload</strong> <strong>[ -D </strong><em>devpath</em><strong> ]</strong> <strong>[ -L </strong><em>link</em><strong> ]</strong> <strong>[ -m </strong><em>mode</em><strong> ]</strong></p><p><strong>fxload</strong> <strong>[ -V ]</strong></p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">DESCRIPTION</h2>
        <div class="sectioncontent">
<p><strong>fxload</strong> is a program which downloads firmware to USB devices based on AnchorChips EZ-USB, Cypress EZ-USB FX, or Cypress EZ-USB FX2/FX2LP microcontrollers. These have 8-bit 8051 cores with special extensions for USB I/O. The FX2 supports high speed USB 2.0 transfers (480 Mbit/sec) as well as full speed USB 1.1 transfers (12 Mbit/sec), while the earlier parts supports only full speed transfers. These controllers have several package options, and can be set up with external memory (on-chip memory is usually 8K or 16K), EEPROMs, and ROMs when device costs allow.</p><p>This uses "usbfs" (older name:  "usbdevfs") to access devices, and issues vendor specific control requests to download and reset the EZ-USB devices. Normally, firmware will then "renumerate" by disconnecting from USB and then reconnecting as a new device. It then appears with new device descriptors and functionality, as provided by the firmware which has been downloaded.</p><p>To support some non-firmware applications, this can also set up symbolic links for those usbfs names. It can also change their access modes. Both of these can help simplify software applications that need to talk to USB devices using user mode drivers, don't want to run with privileges or to examine all of the existing USB devices, and which don't need more kernel drivers.</p><p>See the <em>Linux-Hotplug</em> web site for information about how to use <strong>fxload</strong> to download device firmware when hotplugging USB devices, using driver-specific scripts stored in the <em>/etc/hotplug/usb</em> directory.</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">FUNCTION LETTERS</h2>
        <div class="sectioncontent">
<p>At least one of the following options must be specified. Note that as usual with UNIX and Linux commands, the order of command option flags does not matter. You may use these in any order.</p>
<dl class='dl-vertical'>
  <dt>
    <p><strong>-I </strong><em>hexfile</em></p>
  </dt>
  <dd>
    <p>Downloads the specified firmware file. This firmware is provided in standard Intel hexfile format. (Common naming conventions include <em>*.hex</em> and <em>*.ihx</em>.) Depending on the device and firmware in use, the <strong>-s</strong> option may also be necessary to specify a second stage loader. Firmware is normally downloaded to RAM and executed, but there is also an option for downloading into bootable I2C EEPROMs.</p>
  </dd>
  <dt>
    <p><strong>-L </strong><em>link</em></p>
  </dt>
  <dd>
    <p>Creates the specified symbolic link to the usbfs device path. This would typically be used to create a name in a directory that would be searched by an application. The symlink would be removed by some other component on device unplug.</p>
  </dd>
  <dt>
    <p><strong>-m </strong><em>mode</em></p>
  </dt>
  <dd>
    <p>Changes permissions on the "usbfs" device node. By default, those nodes are only accessible by privileged users, which doesn't help when the user mode device driver needs to run without root privileges. Note that usbfs mount options like <em>devmode=0666</em> are also available.</p>
  </dd>
  <dt>
    <p><strong>-V</strong></p>
  </dt>
  <dd>
    <p>Identifies the version of fxload being invoked, and exits without performing other actions.</p>
  </dd>

</dl>
<p>Note that when downloading firmware that renumerates, there's no point in changing the device permissions or creating a symbolic link.</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">OPTIONS</h2>
        <div class="sectioncontent">
<p>By default, <strong>fxload</strong> assumes the device uses an EZ-USB or EZ-USB FX. It also assumes that the device in question has been specified by USB kernel hotplugging conventions, using the <em>DEVICE</em> environment variable to name a "usbfs" file that can be used to talk to the device.</p>
<dl class='dl-vertical'>
  <dt>
    <p><strong>-c </strong><em>config</em></p>
  </dt>
  <dd>
    <p>Indicates the specified firmware should be downloaded to an I2C boot EEPROM rather than to RAM. The parameter is the EZ-USB FX or FX2 configuration byte, and for AnchorChips devices the value should be zero. This requires a second stage loader (e.g. vend_ax.hex) that knows how to write to I2C EEPROMs specified using the <strong>-s</strong> option, as well as a device that's provided with an EEPROM large enough to store the boot firmware. After downloading to a device's EEPROM, you should retest it starting from power off.</p>
  </dd>
  <dt>
    <p><strong>-s </strong><em>loader</em></p>
  </dt>
  <dd>
    <p>This identifies the hex file holding a second stage loader (in the same hex file format as the firmware itself), which is loaded into internal memory. This loader understands additional vendor control requests, beyond the one built into all EZ-USB hardware, which are needed to write external RAM or EEPROM. As a last step when loading firmware, <strong>fxload</strong> normally overwrites this second stage loader with parts of the firmware residing on-chip.</p>
  </dd>
  <dt>
    <p><strong>-t </strong><em>type</em></p>
  </dt>
  <dd>
    <p>Indicates which type of microcontroller is used in the device; type may be one of <em>an21</em> (the original AnchorChips devices), <em>fx</em> (Cypress' updated version, the EZ-USB FX), or <em>fx2</em> (the Cypress EZ-USB FX2, supporting high speed transfers), or <em>fx2lp</em> (the Cypress EZ-USB FX2LP, with 16KB internal RAM). Except when writing to EEPROM, all that normally matters when downloading firmware is whether or not the device uses an FX2.</p>
  </dd>
  <dt>
    <p><strong>-v</strong></p>
  </dt>
  <dd>
    <p>Prints some diagnostics, such as download addresses and sizes, to standard error.  Repeat the flag (<strong>-vv</strong>, <strong>-vvv</strong>) to get more diagnostics.</p>
  </dd>
  <dt>
    <p><strong>-l</strong></p>
  </dt>
  <dd>
    <p>print error and verbose messages to syslog.</p>
  </dd>
  <dt>
    <p><strong>-D </strong><em>devpath</em></p>
  </dt>
  <dd>
    <p>Specifies the "usbfs" path name for the device in question, such as <em>/proc/bus/usb/004/080</em>. This takes precedence over any <em>DEVICE</em> environment variable that may be set.</p>
  </dd>

</dl>

        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">NOTES</h2>
        <div class="sectioncontent">
<p>This program implements one extension to the standard "hex file" format. Lines beginning with a "#" character are ignored, and may be used to hold copyright statements and other information. Other tools may not handle hexfiles using this extension.</p><p>At this writing, "usbfs" is a kernel configuration option. That means that device drivers relying on user mode firmware downloading may need to depend on that kernel configuration option. A less preferable alternative involves compiling the firmware into the kernel and managing downloads and renumeration there. This is less preferable in part because much device firmware is provided with GPL-incompatible licensing, and in part because storing such firmware firmware wastes kernel memory.</p><p>For EZ-USB family devices, the hardware's first stage loader (supporting the 0xA0 vendor request) can't write into external memory. Configurations that put firmware into external memory thus need a second stage loader. For typical "flat" memory architectures, a loader supporting the 0xA3 vendor request is used to write into that memory. Similarly, a second stage loader that supports the 0xA2 vendor request is needed when writing boot firmware into an I2C EEPROM. These 0xA2 and 0xA3 vendor commands are conventions defined by Cypress. Devices that use bank switching or similar mechanisms to stretch the 64KByte address space may need different approach to loading firmware.</p><p>Not all devices support EEPROM updates. Some EZ-USB based devices don't have an I2C EEPROM; many such EEPROMs are too small to store firmware; and some firmware can't be placed in bootable I2C EEPROMs.</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">ENVIRONMENT VARIABLES</h2>
        <div class="sectioncontent">

<dl class='dl-vertical'>
  <dt>
    <p><strong>DEVICE</strong></p>
  </dt>
  <dd>
    <p>normally names a "usbfs" file that will be used to talk to the device. This is provided by the Linux kernel as part of USB hotplugging.</p>
  </dd>

</dl>

        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">FILES</h2>
        <div class="sectioncontent">

<dl class='dl-vertical'>
  <dt>
    <p><em>/usr/share/usb/a3load.hex</em></p>
  </dt>
  <dd>
    <p>Second stage loader that works with AnchorChips EZ-USB, Cypress EZ-USB FX, and Cypress EZ-USB FX2. Note that this only supports the 0xA3 vendor command, to write external memory. A loader that also supports the 0xA2 command, to write boot EEPROMs, is included with Cypress developer kits.</p>
  </dd>

</dl>

        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">RELATED TO fxload&hellip;</h2>
        <div class="sectioncontent">
<p><strong>hotplug</strong>(8) </p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">AUTHORS</h2>
        <div class="sectioncontent">
<p>Linux Hotplugging Project <em>http://linux-hotplug.sourceforge.net/</em></p>
        </div>
      </section>
<nav>
  <ul class="pager">
   <li class="previous"><a href="fwsnort.8.html"><span aria-hidden="true">&larr;</span> fwsnort.8: Firewall snort</a></li>
   <li class="next"><a href="fxotune.8.html">fxotune.8: Automatically tune dahdi fxo channels <span aria-hidden="true">&rarr;</span></a></li>
  </ul>
</nav>

  </div>
  <!-- jQuery (necessary for Bootstrap's JavaScript plugins) -->
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.2/jquery.min.js"></script>
  <!-- Include all compiled plugins (below), or include individual files as needed -->
  <script src="/js/bootstrap.min.js"></script>
  <script>
    (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
      (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
      m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
    })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

    ga('create', 'UA-60781387-1', 'auto');
    ga('send', 'pageview');

  </script>
</body>
</html>
