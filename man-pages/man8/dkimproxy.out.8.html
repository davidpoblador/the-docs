<!DOCTYPE html>
<html lang="en">
<head>
  <link href="https://fonts.googleapis.com/css?family=Fira+Mono:400,700&effect=destruction%7Cshadow-multiple" rel="stylesheet" type="text/css">
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>dkimproxy.out: Smtp proxy for adding dkim signatures to email</title>
  <link href="/css/bootstrap.min.css" rel="stylesheet">
  <link href="/css/manpage.css" rel="stylesheet">
  <link rel="apple-touch-icon" sizes="57x57" href="/icons/apple-icon-57x57.png">
  <link rel="apple-touch-icon" sizes="60x60" href="/icons/apple-icon-60x60.png">
  <link rel="apple-touch-icon" sizes="72x72" href="/icons/apple-icon-72x72.png">
  <link rel="apple-touch-icon" sizes="76x76" href="/icons/apple-icon-76x76.png">
  <link rel="apple-touch-icon" sizes="114x114" href="/icons/apple-icon-114x114.png">
  <link rel="apple-touch-icon" sizes="120x120" href="/icons/apple-icon-120x120.png">
  <link rel="apple-touch-icon" sizes="144x144" href="/icons/apple-icon-144x144.png">
  <link rel="apple-touch-icon" sizes="152x152" href="/icons/apple-icon-152x152.png">
  <link rel="apple-touch-icon" sizes="180x180" href="/icons/apple-icon-180x180.png">
  <link rel="icon" type="image/png" sizes="192x192" href="/icons/android-icon-192x192.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/icons/favicon-32x32.png">
  <link rel="icon" type="image/png" sizes="96x96" href="/icons/favicon-96x96.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/icons/favicon-16x16.png">
  <link rel="manifest" href="/icons/manifest.json">
  <meta name="msapplication-TileColor" content="#ffffff">
  <meta name="msapplication-TileImage" content="/icons/ms-icon-144x144.png">
  <meta name="theme-color" content="#ffffff">
  <meta name="description" content="Smtp proxy for adding dkim signatures to email">
  <meta name="twitter:card" content="summary_large_image">
  <meta name="twitter:site" content="@CartaTech">
  <meta name="twitter:creator" content="@CartaTech">
  <meta name="twitter:title" content="dkimproxy.out (8) manual">
  <meta name="twitter:description" content="Smtp proxy for adding dkim signatures to email">
  <meta name="twitter:image" content="https://www.carta.tech/images/dkimproxy-dkimproxy.out-8.png">
  <meta property="og:url" content="https://www.carta.tech/man-pages/man8/dkimproxy.out.8.html" />
  <meta property="og:type" content="website" />
  <meta property="og:title" content="dkimproxy.out (8) manual" />
  <meta property="og:description" content="Smtp proxy for adding dkim signatures to email" />
  <meta property="fb:app_id" content="1241677679199500" />
  <meta property="og:image" content="https://www.carta.tech/images/dkimproxy-dkimproxy.out-8.png" />
  <meta property="og:image:width" content="600" />
  <meta property="og:image:height" content="315" />
</head>
<body>
  <div class="container final">
          <div class="page-header">
        <h1 class="font-effect-destruction">dkimproxy.out<small> (8)</small></h1>
        <p class="lead">Smtp proxy for adding dkim signatures to email</p>
      </div>

    <ol class="breadcrumb" itemscope itemtype="http://schema.org/BreadcrumbList">
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/">
      <span itemprop="name">Carta.tech</span>
    </a>
    <meta itemprop="position" content="1" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/">
      <span itemprop="name">Man Pages</span>
    </a>
    <meta itemprop="position" content="2" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/man8/">
      <span itemprop="name">System administration commands</span>
    </a>
    <meta itemprop="position" content="3" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/man8/dkimproxy.out.8.html">
      <span itemprop="name">dkimproxy.out: Smtp proxy for adding dkim signatures to email</span>
    </a>
    <meta itemprop="position" content="4" />
  </li>
</ol>
<ol class="breadcrumb" itemscope itemtype="http://schema.org/BreadcrumbList">
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/">
      <span itemprop="name">Carta.tech</span>
    </a>
    <meta itemprop="position" content="1" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/packages/">
      <span itemprop="name">Packages</span>
    </a>
    <meta itemprop="position" content="2" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/packages/dkimproxy/">
      <span itemprop="name">dkimproxy</span>
    </a>
    <meta itemprop="position" content="3" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/man8/dkimproxy.out.8.html">
      <span itemprop="name">dkimproxy.out: Smtp proxy for adding dkim signatures to email</span>
    </a>
    <meta itemprop="position" content="4" />
  </li>
</ol>
    
      <section>
        <h2 class="font-effect-shadow-multiple">DESCRIPTION</h2>
        <div class="sectioncontent">
<p>dkimproxy.out listens on the IP address and TCP port specified by its first argument (the "listen" port), and sends the traffic it receives onto the second argument (the "relay" port), with messages getting modified to have a DKIM or DomainKeys signature.</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">SYNOPSIS</h2>
        <div class="sectioncontent">

<pre>
  dkimproxy.out [options] --keyfile=FILENAME --selector=SELECTOR                   --domain=DOMAIN LISTENADDR:PORT RELAYADDR:PORT
    smtp options:
      --conf_file=FILENAME
      --listen=LISTENADDR:PORT
      --relay=RELAYADDR:PORT
      --reject-error
</pre>

<pre>
    signing options:
      --signature=dkim|domainkeys
      --keyfile=FILENAME
      --selector=SELECTOR
      --method=simple|nowsp|relaxed|nofws
      --domain=DOMAIN
</pre>

<pre>
    daemon options:
      --daemonize
      --user=USER
      --group=GROUP
      --pidfile=PIDFILE
      --min_servers=NUM
</pre>

<pre>
  dkimproxy.out --help
    to see a full description of the various options
</pre>

        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">OPTIONS</h2>
        <div class="sectioncontent">
<p><strong>--daemonize</strong></p><p>If specified, the server will run in the background.</p><p><strong>--domain=DOMAIN</strong></p><p>Use this argument to specify what domain(s) you can sign for. You may specify multiple domains by separating them with commas. If a single domain is specified, DKIMproxy will always use that domain to sign, if it can. If multiple domains are specified, DKIMproxy will try to match the domain to the message's sender, and only generate a signature that will match the sender's domain.</p><p><strong>--group=GROUP</strong></p><p>If specified, the daemonized process will setgid() to the specified GROUP.</p><p><strong>--keyfile=FILENAME</strong></p><p>This is a required argument. Use it to specify the filename containing the private key used in signing outgoing messages. For messages to verify, you will need to publish the corresponding public key in DNS, using the selector name specified by C&lt;--selector&gt;, under the domain(s) specified in C&lt;--domain&gt;.</p><p><strong>--method=simple|nowsp|relaxed|nofws</strong></p><p>This option specifies the canonicalization algorithm to use for signing messages. For DKIM signatures, the options are C&lt;simple&gt;, C&lt;nowsp&gt;, or C&lt;relaxed&gt;; the default is C&lt;relaxed&gt;. For DomainKeys signatures, the options are C&lt;simple&gt; and C&lt;nofws&gt;; the default is C&lt;nofws&gt;.</p><p><strong>--pidfile=PIDFILE</strong></p><p>Creates a PID file (a file containing the PID of the process) for the daemonized process. This makes it possible to check the status of the process, and to cleanly shut it down.</p><p><strong>--reject-error</strong></p><p>This option specifies what to do if an error occurs during signing of a message. If this option is specified, the message will be rejected with an SMTP error code. This will result in the MTA sending the message to try again later, or bounce it back to the sender (depending on the exact error code used). If this option is not specified, the message will be allowed to pass through without having a signature added.</p><p><strong>--selector=SELECTOR</strong></p><p>This is a required argument. Use it to specify the name of the key selector.</p><p><strong>--sender_map=FILENAME</strong></p><p>If specified, the named file provides signature parameters depending on what sender is found in the message. See the section below titled L&lt;/"SENDER MAP FILE"&gt;.</p><p><strong>--signature=dkim|domainkeys</strong></p><p>This specifies what type of signature to add. Use C&lt;dkim&gt; to sign with IETF standardized DKIM signatures. Use C&lt;domainkeys&gt; to sign with the older, but more common, Yahoo! DomainKeys signatures. The default is C&lt;dkim&gt;.</p><p>This parameter can be specified more than once to add more than one signature to the message. In addition, per signature parameters can be specified by enclosing the comma separated options in parenthesis after the signature type, e.g.</p>
<pre>
  --signature=dkim(c=relaxed,key=private.key)
</pre>
<p>The syntax for specifying per signature options is described in more detail in the section below titled L&lt;/"SENDER MAP FILE"&gt;.</p><p><strong>--user=USER</strong></p><p>If specified, the daemonized process will setuid() to USER after completing any necessary privileged operations, but before accepting connections.</p><p><strong>--min_servers=NUM</strong></p><p>Number of process that DKIMproxy shall spawn and get ready for signing.</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">EXAMPLE</h2>
        <div class="sectioncontent">
<p>For example, if dkimproxy.out is started with:</p>
<pre>
  dkimproxy.out --keyfile=private.key --selector=postfix            --domain=example.org 127.0.0.1:10027 127.0.0.1:10028
</pre>
<p>the proxy will listen on port 10027 and send the signed messages to some other SMTP service on port 10028.</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">CONFIGURATION FILE</h2>
        <div class="sectioncontent">
<p>Parameters can be stored in a separate file instead of specifying them all on the command line. Use the C&lt;conf_file&gt; option to specify the path to the configuration file, e.g.</p>
<pre>
  dkimproxy.out --conf_file=/etc/dkimproxy_out.conf
</pre>
<p>The format of the configuration file is one option per line: name of the option, space, then the value of the option. E.g.</p>
<pre>
  # this is an example config file
  domain example.org,example.com
  keyfile private.key
  selector postfix
  signature dkim
</pre>
<p>is equivalent to</p>
<pre>
  dkimproxy.out --domain=example.org,example.com --keyfile=private.key                  --selector=postfix --signature=dkim
</pre>

        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">SENDER MAP FILE</h2>
        <div class="sectioncontent">
<p>If you want to use different signature properties depending on the sender of the message being signed, use a "sender map file". This is a lookup file containing sender email addresses on the left and signature properties on the right. E.g.</p>
<pre>
  # sign my mail with a EXAMPLE.COM dkim signature
  jason@long.name  dkim(d=example.com)
</pre>

<pre>
  # sign WIDGET.EXAMPLE mail with a default domainkeys signature
  widget.example   domainkeys
</pre>

<pre>
  # sign EXAMPLE.ORG mail with both a domainkeys and dkim signature
  example.org      dkim(c=relaxed,a=rsa-sha256), domainkeys(c=nofws)
</pre>
<p>Right hand values in a sender map file is a comma separated list of signature types. Each signature type may have a comma separated list of parameters enclosed in parenthesis. The following signature parameters are recognized:</p><p><strong>key</strong></p><p>the private key file to use</p><p><strong>a</strong></p><p>the algorithm to use</p><p><strong>c</strong></p><p>the canonicalization method to use</p><p><strong>d</strong></p><p>the domain to use, default is to use the domain matched</p><p><strong>s</strong></p><p>the selector to use</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">RELATED TO dkimproxy.out&hellip;</h2>
        <div class="sectioncontent">
<p><a href="../man8/dkimproxy.in.8.html"><strong>dkimproxy.in</strong>(8)</a>, <strong>dkim_responder</strong>(8), <strong>dkimsign</strong>(8),  <strong>dkimverify</strong>(8)</p>
        </div>
      </section>
<nav>
  <ul class="pager">
   <li class="previous"><a href="dkimproxy.in.8.html"><span aria-hidden="true">&larr;</span> dkimproxy.in.8: Smtp proxy for verifying dkim signatures</a></li>
   <li class="next"><a href="dl10k1.8.html">dl10k1.8: Emu10k1(emu10k2) dump loader <span aria-hidden="true">&rarr;</span></a></li>
  </ul>
</nav>

  </div>
  <!-- jQuery (necessary for Bootstrap's JavaScript plugins) -->
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.2/jquery.min.js"></script>
  <!-- Include all compiled plugins (below), or include individual files as needed -->
  <script src="/js/bootstrap.min.js"></script>
  <script>
    (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
      (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
      m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
    })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

    ga('create', 'UA-60781387-1', 'auto');
    ga('send', 'pageview');

  </script>
</body>
</html>
