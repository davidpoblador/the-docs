<!DOCTYPE html>
<html lang="en">
<head>
  <link href="https://fonts.googleapis.com/css?family=Fira+Mono:400,700&effect=destruction%7Cshadow-multiple" rel="stylesheet" type="text/css">
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>amrestore: Low-level data-extraction from amanda volumes</title>
  <link href="/css/bootstrap.min.css" rel="stylesheet">
  <link href="/css/manpage.css" rel="stylesheet">
  <link rel="apple-touch-icon" sizes="57x57" href="/icons/apple-icon-57x57.png">
  <link rel="apple-touch-icon" sizes="60x60" href="/icons/apple-icon-60x60.png">
  <link rel="apple-touch-icon" sizes="72x72" href="/icons/apple-icon-72x72.png">
  <link rel="apple-touch-icon" sizes="76x76" href="/icons/apple-icon-76x76.png">
  <link rel="apple-touch-icon" sizes="114x114" href="/icons/apple-icon-114x114.png">
  <link rel="apple-touch-icon" sizes="120x120" href="/icons/apple-icon-120x120.png">
  <link rel="apple-touch-icon" sizes="144x144" href="/icons/apple-icon-144x144.png">
  <link rel="apple-touch-icon" sizes="152x152" href="/icons/apple-icon-152x152.png">
  <link rel="apple-touch-icon" sizes="180x180" href="/icons/apple-icon-180x180.png">
  <link rel="icon" type="image/png" sizes="192x192" href="/icons/android-icon-192x192.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/icons/favicon-32x32.png">
  <link rel="icon" type="image/png" sizes="96x96" href="/icons/favicon-96x96.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/icons/favicon-16x16.png">
  <link rel="manifest" href="/icons/manifest.json">
  <meta name="msapplication-TileColor" content="#ffffff">
  <meta name="msapplication-TileImage" content="/icons/ms-icon-144x144.png">
  <meta name="theme-color" content="#ffffff">
  <meta name="description" content="Low-level data-extraction from amanda volumes">
  <meta name="twitter:card" content="summary_large_image">
  <meta name="twitter:site" content="@CartaTech">
  <meta name="twitter:creator" content="@CartaTech">
  <meta name="twitter:title" content="amrestore (8) manual">
  <meta name="twitter:description" content="Low-level data-extraction from amanda volumes">
  <meta name="twitter:image" content="https://www.carta.tech/images/amanda-client-amrestore-8.png">
  <meta property="og:url" content="https://www.carta.tech/man-pages/man8/amrestore.8.html" />
  <meta property="og:type" content="website" />
  <meta property="og:title" content="amrestore (8) manual" />
  <meta property="og:description" content="Low-level data-extraction from amanda volumes" />
  <meta property="fb:app_id" content="1241677679199500" />
  <meta property="og:image" content="https://www.carta.tech/images/amanda-client-amrestore-8.png" />
  <meta property="og:image:width" content="600" />
  <meta property="og:image:height" content="315" />
</head>
<body>
  <div class="container final">
          <div class="page-header">
        <h1 class="font-effect-destruction">amrestore<small> (8)</small></h1>
        <p class="lead">Low-level data-extraction from amanda volumes</p>
      </div>

    <ol class="breadcrumb" itemscope itemtype="http://schema.org/BreadcrumbList">
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/">
      <span itemprop="name">Carta.tech</span>
    </a>
    <meta itemprop="position" content="1" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/">
      <span itemprop="name">Man Pages</span>
    </a>
    <meta itemprop="position" content="2" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/man8/">
      <span itemprop="name">System administration commands</span>
    </a>
    <meta itemprop="position" content="3" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/man8/amrestore.8.html">
      <span itemprop="name">amrestore: Low-level data-extraction from amanda volumes</span>
    </a>
    <meta itemprop="position" content="4" />
  </li>
</ol>
<ol class="breadcrumb" itemscope itemtype="http://schema.org/BreadcrumbList">
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/">
      <span itemprop="name">Carta.tech</span>
    </a>
    <meta itemprop="position" content="1" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/packages/">
      <span itemprop="name">Packages</span>
    </a>
    <meta itemprop="position" content="2" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/packages/amanda-client/">
      <span itemprop="name">amanda-client</span>
    </a>
    <meta itemprop="position" content="3" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/man8/amrestore.8.html">
      <span itemprop="name">amrestore: Low-level data-extraction from amanda volumes</span>
    </a>
    <meta itemprop="position" content="4" />
  </li>
</ol>
    
      <section>
        <h2 class="font-effect-shadow-multiple">SYNOPSIS</h2>
        <div class="sectioncontent">
<p><strong>amrestore</strong> [--config&nbsp;<em>config</em>] [-r | -c | -C] [-b&nbsp;<em>blocksize</em>] [-f&nbsp;<em>filenum</em>] [-l&nbsp;<em>label</em>] [-p] [-h] [--exact-match] [<strong>-o</strong>&nbsp;<em>configoption</em>...] [{<em>changerspec</em>} | {[--holding]&nbsp;<em>holdingfile</em>}] [<em>hostname</em>&nbsp;[&nbsp;<em>diskname</em>&nbsp;[&nbsp;<em>datestamp</em> &nbsp;[&nbsp;<em>hostname</em>&nbsp;[&nbsp;<em>diskname</em>&nbsp;[&nbsp;<em>datestamp</em>&nbsp;...&nbsp;]&nbsp;]&nbsp;]&nbsp;]&nbsp;]]</p><p>Note that this is the only Amanda command which does not take a configuration name as its first argument.</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">DESCRIPTION</h2>
        <div class="sectioncontent">
<p><em>Amrestore</em> is a very low-level tool for extracting data from Amanda volumes. It does not consult any catalog information or other metadata, basing its operations only on the headers found on the volume. This makes it an appropriate tool for bare-metal restores of an Amanda server, or other situations where the catalog is not available.</p><p>See <a href="../man8/amfetchdump.8.html"><strong>amfetchdump</strong>(8)</a> and <a href="../man8/amrecover.8.html"><strong>amrecover</strong>(8)</a> for higher-level recoveries.</p><p>The tool does not reassemble split dumps, but can uncompress compressed dumps. Note that decompression may fail for split parts after the first. If this occurs, extract the parts without decompressing, concatenate them, and decompress the result.</p><p>Data is restored from the current volume in <em>changerspec</em>, or from the holding file <em>holdingfile</em>. In most cases, <em>changerspec</em> will name a particular device, e.g., tape:/dev/nst0 or s3:mybucket/tape-1.</p><p>Only dumps matching the dump specification beginning with <em>hostname</em> are extracted. If no specification is given, every file on the volume (or the entire holdingfile) is restored. See the "DUMP SPECIFICATIONS" section of <a href="../man7/amanda-match.7.html"><strong>amanda-match</strong>(7)</a> for more information.</p><p>Unless <strong>-p</strong> is used, candidate backup images are extracted to files in the current directory named: hostname.diskname.datestamp.dumplevel</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">OPTIONS</h2>
        <div class="sectioncontent">
<p><strong>-b </strong><strong></strong><em>blocksize</em></p><p>Use the given blocksize to read the volume. The default is defined by the device.</p><p><strong>-f </strong><strong></strong><em>filenum</em></p><p>Seek to file <em>filenum</em> before beginning the restore operation.</p><p><strong>-l </strong><strong></strong><em>label</em></p><p>Check that the volume has label <em>label</em>.</p><p><strong>-p</strong></p><p>Pipe the first matching file to standard output. This is typically used in a shell pipeline to send the data to a process like <strong>tar</strong> for extraction.</p><p><strong>-c</strong>, <strong>-C</strong></p><p>If the file is not already compressed, compress it using the fastest (<strong>-c</strong>) or best (<strong>-C</strong>) compression algorithm. Note that <strong>amrestore</strong> will not re-compress an already-compressed file. Without either of these options, <strong>amrestore</strong> will automatically uncompress any compressed files. This option is useful when the destination disk is small.</p><p><strong>-h</strong></p><p>Include 32k headers on all output files, similar to a holding file. This header can be read by another application or utility (see <strong>Amanda::Header</strong>) during the next phase of processing.</p><p><strong>-r</strong></p><p>Output raw files. This is similar to <strong>-h</strong>, but also disables any automatic decompression. Output file names will have a .RAW extension.</p><p><strong>--exact-match</strong></p><p>The host and disk are parsed as exact values</p><p><strong>-o </strong><strong></strong><em>configoption</em></p><p>See the "CONFIGURATION OVERRIDE" section in <a href="../man8/amanda.8.html"><strong>amanda</strong>(8)</a>.</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">EXAMPLES</h2>
        <div class="sectioncontent">
<p>The following does an interactive restore of disk <em>rz3g</em> from host <em>seine</em>, to restore particular files. Note the use of the <em>b</em> option to <em>restore</em>, which causes it to read in units of two 512-byte blocks (1 Kbyte) at a time. This helps keep it from complaining about short reads.</p>
<pre>
  amrestore -p /dev/nrmt9 seine rz3g | tar -xv
</pre>
<p>The next example extracts all backup images for host <em>seine</em>. This is a typical way to extract all data for a host after a disk crash.</p>
<pre>
  amrestore /dev/nrmt9 seine
</pre>
<p>If the backup datestamp in the above example is 20070125 and <em>seine</em> has level 0 backups of disks <em>rz1a</em> and <em>rz1g</em> on the tape, these files will be created in the current directory:</p>
<pre>
  seine.rz1a.19910125.0
  seine.rz1g.19910125.0
</pre>
<p>You may also use <strong>amrestore</strong> to extract a backup image from a holding disk file that has not yet been flushed to tape:</p>
<pre>
  amrestore -p /amanda/20001119/seine.rz1a.2 | tar -xv
</pre>

        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">CAVEATS</h2>
        <div class="sectioncontent">
<p><strong>GNU-tar</strong> must be used to restore files from backup images created with the GNUTAR dumptype. Vendor tar programs sometimes fail to read GNU Tar images.</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">RELATED TO amrestore&hellip;</h2>
        <div class="sectioncontent">
<p><a href="../man8/amanda.8.html"><strong>amanda</strong>(8)</a>, <a href="../man7/amanda-match.7.html"><strong>amanda-match</strong>(7)</a>, <a href="../man8/amfetchdump.8.html"><strong>amfetchdump</strong>(8)</a>, <a href="../man8/amrecover.8.html"><strong>amrecover</strong>(8)</a></p><p>The Amanda Wiki: : http://wiki.zmanda.com/</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">AUTHORS</h2>
        <div class="sectioncontent">
<p><strong>James da Silva</strong> &lt;jds@amanda.org&gt;</p><p><strong>Stefan G. Weichinger</strong> &lt;sgw@amanda.org&gt;</p><p><strong>Dustin J. Mitchell</strong> &lt;dustin@zmanda.com&gt;</p><p>Zmanda, Inc. (http://www.zmanda.com)</p>
        </div>
      </section>
<nav>
  <ul class="pager">
   <li class="previous"><a href="amreport.8.html"><span aria-hidden="true">&larr;</span> amreport.8: Generate a formatted output of statistics for an amanda run</a></li>
   <li class="next"><a href="amrmtape.8.html">amrmtape.8: Remove a tape from the amanda database <span aria-hidden="true">&rarr;</span></a></li>
  </ul>
</nav>

  </div>
  <!-- jQuery (necessary for Bootstrap's JavaScript plugins) -->
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.2/jquery.min.js"></script>
  <!-- Include all compiled plugins (below), or include individual files as needed -->
  <script src="/js/bootstrap.min.js"></script>
  <script>
    (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
      (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
      m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
    })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

    ga('create', 'UA-60781387-1', 'auto');
    ga('send', 'pageview');

  </script>
</body>
</html>
