<!DOCTYPE html>
<html lang="en">
<head>
  <link href="https://fonts.googleapis.com/css?family=Fira+Mono:400,700&effect=destruction%7Cshadow-multiple" rel="stylesheet" type="text/css">
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>torsocks: Torsocks  library for intercepting outgoing network connections and redirecting them through the tor socks proxy.</title>
  <link href="/css/bootstrap.min.css" rel="stylesheet">
  <link href="/css/manpage.css" rel="stylesheet">
  <link rel="apple-touch-icon" sizes="57x57" href="/icons/apple-icon-57x57.png">
  <link rel="apple-touch-icon" sizes="60x60" href="/icons/apple-icon-60x60.png">
  <link rel="apple-touch-icon" sizes="72x72" href="/icons/apple-icon-72x72.png">
  <link rel="apple-touch-icon" sizes="76x76" href="/icons/apple-icon-76x76.png">
  <link rel="apple-touch-icon" sizes="114x114" href="/icons/apple-icon-114x114.png">
  <link rel="apple-touch-icon" sizes="120x120" href="/icons/apple-icon-120x120.png">
  <link rel="apple-touch-icon" sizes="144x144" href="/icons/apple-icon-144x144.png">
  <link rel="apple-touch-icon" sizes="152x152" href="/icons/apple-icon-152x152.png">
  <link rel="apple-touch-icon" sizes="180x180" href="/icons/apple-icon-180x180.png">
  <link rel="icon" type="image/png" sizes="192x192" href="/icons/android-icon-192x192.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/icons/favicon-32x32.png">
  <link rel="icon" type="image/png" sizes="96x96" href="/icons/favicon-96x96.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/icons/favicon-16x16.png">
  <link rel="manifest" href="/icons/manifest.json">
  <meta name="msapplication-TileColor" content="#ffffff">
  <meta name="msapplication-TileImage" content="/icons/ms-icon-144x144.png">
  <meta name="theme-color" content="#ffffff">
  <meta name="description" content="Torsocks  library for intercepting outgoing network connections and redirecting them through the tor socks proxy.">
  <meta name="twitter:card" content="summary_large_image">
  <meta name="twitter:site" content="@CartaTech">
  <meta name="twitter:creator" content="@CartaTech">
  <meta name="twitter:title" content="torsocks (8) manual">
  <meta name="twitter:description" content="Torsocks  library for intercepting outgoing network connections and redirecting them through the tor socks proxy.">
  <meta name="twitter:image" content="https://www.carta.tech/images/torsocks-torsocks-8.png">
  <meta property="og:url" content="https://www.carta.tech/man-pages/man8/torsocks.8.html" />
  <meta property="og:type" content="website" />
  <meta property="og:title" content="torsocks (8) manual" />
  <meta property="og:description" content="Torsocks  library for intercepting outgoing network connections and redirecting them through the tor socks proxy." />
  <meta property="fb:app_id" content="1241677679199500" />
  <meta property="og:image" content="https://www.carta.tech/images/torsocks-torsocks-8.png" />
  <meta property="og:image:width" content="600" />
  <meta property="og:image:height" content="315" />
</head>
<body>
  <div class="container final">
          <div class="page-header">
        <h1 class="font-effect-destruction">torsocks<small> (8)</small></h1>
        <p class="lead">Torsocks  library for intercepting outgoing network connections and redirecting them through the tor socks proxy.</p>
      </div>

    <ol class="breadcrumb" itemscope itemtype="http://schema.org/BreadcrumbList">
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/">
      <span itemprop="name">Carta.tech</span>
    </a>
    <meta itemprop="position" content="1" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/">
      <span itemprop="name">Man Pages</span>
    </a>
    <meta itemprop="position" content="2" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/man8/">
      <span itemprop="name">System administration commands</span>
    </a>
    <meta itemprop="position" content="3" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/man8/torsocks.8.html">
      <span itemprop="name">torsocks: Torsocks  library for intercepting outgoing network connections and redirecting them through the tor socks proxy.</span>
    </a>
    <meta itemprop="position" content="4" />
  </li>
</ol>
<ol class="breadcrumb" itemscope itemtype="http://schema.org/BreadcrumbList">
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/">
      <span itemprop="name">Carta.tech</span>
    </a>
    <meta itemprop="position" content="1" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/packages/">
      <span itemprop="name">Packages</span>
    </a>
    <meta itemprop="position" content="2" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/packages/torsocks/">
      <span itemprop="name">torsocks</span>
    </a>
    <meta itemprop="position" content="3" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/man8/torsocks.8.html">
      <span itemprop="name">torsocks: Torsocks  library for intercepting outgoing network connections and redirecting them through the tor socks proxy.</span>
    </a>
    <meta itemprop="position" content="4" />
  </li>
</ol>
    
      <section>
        <h2 class="font-effect-shadow-multiple">DESCRIPTION</h2>
        <div class="sectioncontent">
<p>Torsocks library overloads the libc symbols use for Internet communication such as <a href="../man2/connect.2.html"><strong>connect</strong>(2)</a></strong> system call. Using that technique, the library sends everything through the Tor network including DNS resolution done by the application.</p><p>For DNS, <a href="../man3/gethostbyname.3.html"><strong>gethostbyname</strong>(3)</a></strong> family functions are rerouted through Tor. Please note that the ISC res_* API is currently not supported.</p><p>Here is an example on how to use torsocks library with <strong>ssh</strong>(1)</strong>:</p><p>$ LD_PRELOAD=/path/to/libtorsocks.so ssh -l kalexander -p 1234 prism.nsa.gov [...]</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">SHELL USAGE</h2>
        <div class="sectioncontent">
<p>Set LD_PRELOAD to load the library then use applications as normal. The syntax to force preload of the library for different shells is specified below:</p><p>Bash, Ksh and Bourne shell:</p><p>$ export LD_PRELOAD=/path/to/libtorsocks.so</p><p>C Shell:</p><p>$ setenv LD_PRELOAD=/path/to/libtorsocks.so</p><p>This process can be automated (for Bash, Bourne and Korn shell users) for a single command or for all commands in a shell session by using the <a href="../man1/torsocks.1.html"><strong>torsocks</strong>(1)</a></strong> script.</p><p>You can also setup <a href="../man1/torsocks.1.html"><strong>torsocks</strong>(1)</a></strong> in such a way that all processes automatically use it, a very useful configuration. Please refer to the torsocks script documentation for more information.</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">ENVIRONMENT VARIABLES</h2>
        <div class="sectioncontent">

<dl class='dl-vertical'>
  <dt>
    TORSOCKS_CONF_FILE
  </dt>
  <dd>
    <p>This environment variable overrides the default location of the torsocks configuration file. This variable is not honored if the program torsocks is embedded in is setuid.</p>
  </dd>

</dl>

<dl class='dl-vertical'>
  <dt>
    TORSOCKS_LOG_LEVEL
  </dt>
  <dd>
    <p>Enable logging level of torsocks library. By default, warnings and errors are printed (level 3). Note that each level includes the lower ones except the 1 which disables any possible logging. (default: 3)</p><table class="table table-striped">
<tr>
<th>1@T{</th>
<th>No log at all.</th></tr>

<tr>
<td></td>
<td>T}</td></tr>

<tr>
<td>2@T{</td>
<td>Error messages.</td></tr>

<tr>
<td></td>
<td>T}</td></tr>

<tr>
<td>3@T{</td>
<td>Warning messages.</td></tr>

<tr>
<td></td>
<td>T}</td></tr>

<tr>
<td>4@T{</td>
<td>Notice messages.</td></tr>

<tr>
<td></td>
<td>T}</td></tr>

<tr>
<td>5@T{</td>
<td>Debug messages.</td></tr>

<tr>
<td></td>
<td>T}</td></tr>
</table>
  </dd>

</dl>

<dl class='dl-vertical'>
  <dt>
    TORSOCKS_LOG_TIME
  </dt>
  <dd>
    <p>Control whether or not the time is added to each logging line. (default: 1)</p>
  </dd>

</dl>

<dl class='dl-vertical'>
  <dt>
    TORSOCKS_LOG_FILE_PATH
  </dt>
  <dd>
    <p>If set, torsocks will log in the file set by this variable. (default: stderr)</p>
  </dd>

</dl>

<dl class='dl-vertical'>
  <dt>
    TORSOCKS_USERNAME
  </dt>
  <dd>
    <p>Set the username for the SOCKS5 authentication method. Password MUST be set also with the variable below.</p>
  </dd>

</dl>

<dl class='dl-vertical'>
  <dt>
    TORSOCKS_PASSWORD
  </dt>
  <dd>
    <p>Set the password for the SOCKS5 authentication method. Username MUST be set also with the variable above.</p>
  </dd>

</dl>

<dl class='dl-vertical'>
  <dt>
    TORSOCKS_ALLOW_INBOUND
  </dt>
  <dd>
    <p>Allow inbound connections so the application can accept and listen for connections.</p>
  </dd>

</dl>

        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">KNOWN ISSUES</h2>
        <div class="sectioncontent">
<h3>DNS</h3>
<p>Torsocks is not able to send DNS queries through Tor since UDP is not supported. Thus, any UDP socket is denied. However, DNS queries that can be intercept are sent to Tor and sent back to the caller.</p>
<h3>ERRORS</h3>
<p>Torsocks might generate error messages and print them to stderr when there are problems with the configuration file or the SOCKS negotiation with the Tor daemon. The TORSOCKS_LOG_LEVEL environment variable controls that behavior as well as the log file option. Keep in mind that this library can output on the stderr of the application.</p>

        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">LIMITATIONS</h2>
        <div class="sectioncontent">
<p>Outgoing TCP connections can only be proxified through the Tor network.</p><p>Torsocks forces the libc resolver to use TCP for name queries, if it does this it does it regardless of whether or not the DNS to be queried is local or not. This introduces overhead and should only be used when needed.</p><p>Torsocks uses ELF dynamic loader features to intercept dynamic function calls from programs in which it is embedded. As a result, non-ELF executables, or executables that make system calls directly with the system call trap (int 0x80).</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">FILES</h2>
        <div class="sectioncontent">
<p>/etc/tor/torsocks.conf - default torsocks configuration file</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">RELATED TO torsocks&hellip;</h2>
        <div class="sectioncontent">
<p><a href="../man5/torsocks.conf.5.html"><strong>torsocks.conf</strong>(5)</a>,</strong> <a href="../man1/torsocks.1.html"><strong>torsocks</strong>(1)</a></strong></p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">AUTHOR</h2>
        <div class="sectioncontent">
<p>David Goulet &lt;dgoulet@ev0ke.net&gt;</p>
        </div>
      </section>
<nav>
  <ul class="pager">
   <li class="previous"><a href="torchat.8.html"><span aria-hidden="true">&larr;</span> torchat.8: Torchat dummy launcher</a></li>
   <li class="next"><a href="torus-2QoS.8.html">torus-2QoS.8: Routing engine for opensm subnet manager <span aria-hidden="true">&rarr;</span></a></li>
  </ul>
</nav>

  </div>
  <!-- jQuery (necessary for Bootstrap's JavaScript plugins) -->
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.2/jquery.min.js"></script>
  <!-- Include all compiled plugins (below), or include individual files as needed -->
  <script src="/js/bootstrap.min.js"></script>
  <script>
    (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
      (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
      m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
    })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

    ga('create', 'UA-60781387-1', 'auto');
    ga('send', 'pageview');

  </script>
</body>
</html>
