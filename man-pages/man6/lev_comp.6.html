<!DOCTYPE html>
<html lang="en">
<head>
  <link href="https://fonts.googleapis.com/css?family=Fira+Mono:400,700&effect=destruction%7Cshadow-multiple" rel="stylesheet" type="text/css">
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>lev_comp: Nethack special levels compiler</title>
  <link href="/css/bootstrap.min.css" rel="stylesheet">
  <link href="/css/manpage.css" rel="stylesheet">
  <link rel="apple-touch-icon" sizes="57x57" href="/icons/apple-icon-57x57.png">
  <link rel="apple-touch-icon" sizes="60x60" href="/icons/apple-icon-60x60.png">
  <link rel="apple-touch-icon" sizes="72x72" href="/icons/apple-icon-72x72.png">
  <link rel="apple-touch-icon" sizes="76x76" href="/icons/apple-icon-76x76.png">
  <link rel="apple-touch-icon" sizes="114x114" href="/icons/apple-icon-114x114.png">
  <link rel="apple-touch-icon" sizes="120x120" href="/icons/apple-icon-120x120.png">
  <link rel="apple-touch-icon" sizes="144x144" href="/icons/apple-icon-144x144.png">
  <link rel="apple-touch-icon" sizes="152x152" href="/icons/apple-icon-152x152.png">
  <link rel="apple-touch-icon" sizes="180x180" href="/icons/apple-icon-180x180.png">
  <link rel="icon" type="image/png" sizes="192x192" href="/icons/android-icon-192x192.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/icons/favicon-32x32.png">
  <link rel="icon" type="image/png" sizes="96x96" href="/icons/favicon-96x96.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/icons/favicon-16x16.png">
  <link rel="manifest" href="/icons/manifest.json">
  <meta name="msapplication-TileColor" content="#ffffff">
  <meta name="msapplication-TileImage" content="/icons/ms-icon-144x144.png">
  <meta name="theme-color" content="#ffffff">
  <meta name="description" content="Nethack special levels compiler">
  <meta name="twitter:card" content="summary_large_image">
  <meta name="twitter:site" content="@CartaTech">
  <meta name="twitter:creator" content="@CartaTech">
  <meta name="twitter:title" content="lev_comp (6) manual">
  <meta name="twitter:description" content="Nethack special levels compiler">
  <meta name="twitter:image" content="https://www.carta.tech/images/nethack-common-lev_comp-6.png">
  <meta property="og:url" content="https://www.carta.tech/man-pages/man6/lev_comp.6.html" />
  <meta property="og:type" content="website" />
  <meta property="og:title" content="lev_comp (6) manual" />
  <meta property="og:description" content="Nethack special levels compiler" />
  <meta property="fb:app_id" content="1241677679199500" />
  <meta property="og:image" content="https://www.carta.tech/images/nethack-common-lev_comp-6.png" />
  <meta property="og:image:width" content="600" />
  <meta property="og:image:height" content="315" />
</head>
<body>
  <div class="container final">
          <div class="page-header">
        <h1 class="font-effect-destruction">lev_comp<small> (6)</small></h1>
        <p class="lead">Nethack special levels compiler</p>
      </div>

    <ol class="breadcrumb" itemscope itemtype="http://schema.org/BreadcrumbList">
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/">
      <span itemprop="name">Carta.tech</span>
    </a>
    <meta itemprop="position" content="1" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/">
      <span itemprop="name">Man Pages</span>
    </a>
    <meta itemprop="position" content="2" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/man6/">
      <span itemprop="name">Games</span>
    </a>
    <meta itemprop="position" content="3" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/man6/lev_comp.6.html">
      <span itemprop="name">lev_comp: Nethack special levels compiler</span>
    </a>
    <meta itemprop="position" content="4" />
  </li>
</ol>
<ol class="breadcrumb" itemscope itemtype="http://schema.org/BreadcrumbList">
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/">
      <span itemprop="name">Carta.tech</span>
    </a>
    <meta itemprop="position" content="1" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/packages/">
      <span itemprop="name">Packages</span>
    </a>
    <meta itemprop="position" content="2" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/packages/nethack-common/">
      <span itemprop="name">nethack-common</span>
    </a>
    <meta itemprop="position" content="3" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/man6/lev_comp.6.html">
      <span itemprop="name">lev_comp: Nethack special levels compiler</span>
    </a>
    <meta itemprop="position" content="4" />
  </li>
</ol>
    
      <section>
        <h2 class="font-effect-shadow-multiple">SYNOPSIS</h2>
        <div class="sectioncontent">
<p><strong>lev_comp</strong> [ <strong>-w</strong> ] [ <em>files</em> ]</p><p>If no arguments are given, it reads standard input.</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">DESCRIPTION</h2>
        <div class="sectioncontent">
<p><em>Lev_comp</em> is a special level compiler for NetHack version 3.2 and higher.  It takes description files as arguments and produces level files that can be loaded by NetHack at runtime.</p><p>The purpose of this tool is to provide NetHack administrators and implementors with a convenient way for adding special levels to the game, or modifying existing ones, without having to recompile the entire world.</p><p>The <strong>-w</strong> option causes <em>lev_comp</em> to perform extra checks on the level and display extra warnings, however these warnings are sometimes superfluous, so they are not normally displayed.</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">GRAMMAR</h2>
        <div class="sectioncontent">

<pre>
file		: /* nothing */
		| levels
		;

levels		: level
		| level levels
		;

level		: maze_level
		| room_level
		;

maze_level	: maze_def flags lev_init messages regions
		;

room_level	: level_def flags lev_init messages rreg_init rooms corridors_def
		;

level_def	: LEVEL_ID ':' string
		;

lev_init	: /* nothing */
		| LEV_INIT_ID ':' CHAR ',' CHAR ',' BOOLEAN ',' BOOLEAN ',' light_state ',' walled
		;

walled		: BOOLEAN
		| RANDOM_TYPE
		;

flags		: /* nothing */
		| FLAGS_ID ':' flag_list
		;

flag_list	: FLAG_TYPE ',' flag_list
		| FLAG_TYPE
		;

messages	: /* nothing */
		| message messages
		;

message		: MESSAGE_ID ':' STRING
		;

rreg_init	: /* nothing */
		| rreg_init init_rreg
		;

init_rreg	: RANDOM_OBJECTS_ID ':' object_list
		| RANDOM_MONSTERS_ID ':' monster_list
		;

rooms		: /* Nothing  -  dummy room for use with INIT_MAP */
		| roomlist
		;

roomlist	: aroom
		| aroom roomlist
		;

corridors_def	: random_corridors
		| corridors
		;

random_corridors: RAND_CORRIDOR_ID
		;

corridors	: /* nothing */
		| corridors corridor
		;

corridor	: CORRIDOR_ID ':' corr_spec ',' corr_spec
		| CORRIDOR_ID ':' corr_spec ',' INTEGER
		;

corr_spec	: '(' INTEGER ',' DIRECTION ',' door_pos ')'
		;

aroom		: room_def room_details
		| subroom_def room_details
		;

subroom_def	: SUBROOM_ID ':' room_type ',' light_state ',' subroom_pos ',' room_size ',' string roomfill
		;

room_def	: ROOM_ID ':' room_type ',' light_state ',' room_pos ',' room_align ',' room_size roomfill
		;

roomfill	: /* nothing */
		| ',' BOOLEAN
		;

room_pos	: '(' INTEGER ',' INTEGER ')'
		| RANDOM_TYPE
		;

subroom_pos	: '(' INTEGER ',' INTEGER ')'
		| RANDOM_TYPE
		;

room_align	: '(' h_justif ',' v_justif ')'
		| RANDOM_TYPE
		;

room_size	: '(' INTEGER ',' INTEGER ')'
		| RANDOM_TYPE
		;

room_details	: /* nothing */
		| room_details room_detail
		;

room_detail	: room_name
		| room_chance
		| room_door
		| monster_detail
		| object_detail
		| trap_detail
		| altar_detail
		| fountain_detail
		| sink_detail
		| pool_detail
		| gold_detail
		| engraving_detail
		| stair_detail
		;

room_name	: NAME_ID ':' string
		;

room_chance	: CHANCE_ID ':' INTEGER
		;

room_door	: DOOR_ID ':' secret ',' door_state ',' door_wall ',' door_pos
		;

secret		: BOOLEAN
		| RANDOM_TYPE
		;

door_wall	: DIRECTION
		| RANDOM_TYPE
		;

door_pos	: INTEGER
		| RANDOM_TYPE
		;

maze_def	: MAZE_ID ':' string ',' filling
		;

filling		: CHAR
		| RANDOM_TYPE
		;

regions		: aregion
		| aregion regions
		;

aregion		: map_definition reg_init map_details
		;

map_definition	: NOMAP_ID
		| map_geometry MAP_ID
		;

map_geometry	: GEOMETRY_ID ':' h_justif ',' v_justif
		;

h_justif	: LEFT_OR_RIGHT
		| CENTER
		;

v_justif	: TOP_OR_BOT
		| CENTER
		;

reg_init	: /* nothing */
		| reg_init init_reg
		;

init_reg	: RANDOM_OBJECTS_ID ':' object_list
		| RANDOM_PLACES_ID ':' place_list
		| RANDOM_MONSTERS_ID ':' monster_list
		;

object_list	: object
		| object ',' object_list
		;

monster_list	: monster
		| monster ',' monster_list
		;

place_list	: place
		| place ',' place_list
		;

map_details	: /* nothing */
		| map_details map_detail
		;

map_detail	: monster_detail
		| object_detail
		| door_detail
		| trap_detail
		| drawbridge_detail
		| region_detail
		| stair_region
		| portal_region
		| teleprt_region
		| branch_region
		| altar_detail
		| fountain_detail
		| mazewalk_detail
		| wallify_detail
		| ladder_detail
		| stair_detail
		| gold_detail
		| engraving_detail
		| diggable_detail
		| passwall_detail
		;

monster_detail	: MONSTER_ID chance ':' monster_c ',' m_name ',' coordinate
		 monster_infos
		;

monster_infos	: /* nothing */
		| monster_infos monster_info
		;

monster_info	: ',' string
		| ',' MON_ATTITUDE
		| ',' MON_ALERTNESS
		| ',' alignment
		| ',' MON_APPEARANCE string
		;

object_detail	: OBJECT_ID object_desc
		| COBJECT_ID object_desc
		;

object_desc	: chance ':' object_c ',' o_name ',' object_where object_infos
		;

object_where	: coordinate
		| CONTAINED
		;

object_infos	: /* nothing */
		| ',' curse_state ',' monster_id ',' enchantment optional_name
		| ',' curse_state ',' enchantment optional_name
		| ',' monster_id ',' enchantment optional_name
		;

curse_state	: RANDOM_TYPE
		| CURSE_TYPE
		;

monster_id	: STRING
		;

enchantment	: RANDOM_TYPE
		| INTEGER
		;

optional_name	: /* nothing */
		| ',' NONE
		| ',' STRING
		;

door_detail	: DOOR_ID ':' door_state ',' coordinate
		;

trap_detail	: TRAP_ID chance ':' trap_name ',' coordinate
		;

drawbridge_detail: DRAWBRIDGE_ID ':' coordinate ',' DIRECTION ',' door_state
		;

mazewalk_detail : MAZEWALK_ID ':' coordinate ',' DIRECTION
		;

wallify_detail	: WALLIFY_ID
		;

ladder_detail	: LADDER_ID ':' coordinate ',' UP_OR_DOWN
		;

stair_detail	: STAIR_ID ':' coordinate ',' UP_OR_DOWN
		;

stair_region	: STAIR_ID ':' lev_region ',' lev_region ',' UP_OR_DOWN
		;

portal_region	: PORTAL_ID ':' lev_region ',' lev_region ',' string
		;

teleprt_region	: TELEPRT_ID ':' lev_region ',' lev_region teleprt_detail
		;

branch_region	: BRANCH_ID ':' lev_region ',' lev_region
		;

teleprt_detail	: /* empty */
		| ',' UP_OR_DOWN
		;

lev_region	: region
		| LEV '(' INTEGER ',' INTEGER ',' INTEGER ',' INTEGER ')'
		;

fountain_detail : FOUNTAIN_ID ':' coordinate
		;

sink_detail : SINK_ID ':' coordinate
		;

pool_detail : POOL_ID ':' coordinate
		;

diggable_detail : NON_DIGGABLE_ID ':' region
		;

passwall_detail : NON_PASSWALL_ID ':' region
		;

region_detail	: REGION_ID ':' region ',' light_state ',' room_type prefilled
		;

altar_detail	: ALTAR_ID ':' coordinate ',' alignment ',' altar_type
		;

gold_detail	: GOLD_ID ':' amount ',' coordinate
		;

engraving_detail: ENGRAVING_ID ':' coordinate ',' engraving_type ',' string
		;

monster_c	: monster
		| RANDOM_TYPE
		| m_register
		;

object_c	: object
		| RANDOM_TYPE
		| o_register
		;

m_name		: string
		| RANDOM_TYPE
		;

o_name		: string
		| RANDOM_TYPE
		;

trap_name	: string
		| RANDOM_TYPE
		;

room_type	: string
		| RANDOM_TYPE
		;

prefilled	: /* empty */
		| ',' FILLING
		| ',' FILLING ',' BOOLEAN
		;

coordinate	: coord
		| p_register
		| RANDOM_TYPE
		;

door_state	: DOOR_STATE
		| RANDOM_TYPE
		;

light_state	: LIGHT_STATE
		| RANDOM_TYPE
		;

alignment	: ALIGNMENT
		| a_register
		| RANDOM_TYPE
		;

altar_type	: ALTAR_TYPE
		| RANDOM_TYPE
		;

p_register	: P_REGISTER '[' INTEGER ']'
		;

o_register	: O_REGISTER '[' INTEGER ']'
		;

m_register	: M_REGISTER '[' INTEGER ']'
		;

a_register	: A_REGISTER '[' INTEGER ']'
		;

place		: coord
		;

monster		: CHAR
		;

object		: CHAR
		;

string		: STRING
		;

amount		: INTEGER
		| RANDOM_TYPE
		;

chance		: /* empty */
		| PERCENT
		;

engraving_type	: ENGRAVING_TYPE
		| RANDOM_TYPE
		;

coord		: '(' INTEGER ',' INTEGER ')'
		;

region		: '(' INTEGER ',' INTEGER ',' INTEGER ',' INTEGER ')'
		;
</pre>
<p><em>NOTE:</em></p><p>Lines beginning with '#' are considered comments.</p><p>The contents of a "MAP" description of a maze is a rectangle showing the exact level map that should be used for the given part of a maze. Each character in the map corresponds to a location on the screen. Different location types are denoted using different ASCII characters. The following characters are recognized. To give an idea of how these are used, see the EXAMPLE, below. The maximum size of a map is normally 76 columns by 21 rows.</p>
<pre>
'-'	horizontal wall
'|'	vertical wall
'+'	a doorway (state is specified in a DOOR declaration)
'A'	open air
'B'	boundary room location (for bounding unwalled irregular regions)
'C'	cloudy air
'I'	ice
'S'	a secret door
'H'	a secret corridor
'{'	a fountain
'&#92;'	a throne
'K'	a sink (if SINKS is defined, else a room location)
'}'	a part of a moat or other deep water
'P'	a pool
'L'	lava
'W'	water (yes, different from a pool)
'T'	a tree
'F'	iron bars
'#'	a corridor
'.'	a normal room location (unlit unless lit in a REGION declaration)
' '	stone
</pre>

        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">EXAMPLE</h2>
        <div class="sectioncontent">
<p>Here is an example of a description file (a very simple one):</p>
<pre>
MAZE : "fortress", random
GEOMETRY : center , center
MAP
}}}}}}}}}
}}}|-|}}}
}}|-.-|}}
}|-...-|}
}|.....|}
}|-...-|}
}}|-.-|}}
}}}|-|}}}
}}}}}}}}}
ENDMAP
MONSTER: '@', "Wizard of Yendor", (4,4)
OBJECT: '"', "Amulet of Yendor", (4,4)
# a hell hound flanking the Wiz on a random side
RANDOM_PLACES: (4,3), (4,5), (3,4), (5,4)
MONSTER: 'd', "hell hound", place[0]
# a chest on another random side
OBJECT: '(', "chest", place[1]
# a sack on a random side, with a diamond and maybe a ruby in it
CONTAINER: '(', "sack", place[2]
OBJECT: '*', "diamond", contained
OBJECT[50%]: '*', "ruby", contained
# a random dragon somewhere
MONSTER: 'D', random, random
# 3 out of 4 chance for a random trap in the EAST end
TRAP[75%]: random, (6,4)
# an electric eel below the SOUTH end
MONSTER: ';', "electric eel", (4,8)
# make the walls non-diggable
NON_DIGGABLE: (0,0,8,8)
TELEPORT_REGION: levregion(0,0,79,20), (0,0,8,8)
</pre>
<p>This example will produce a file named "fortress" that can be integrated into one of the numerous mazes of the game.</p><p>Note especially the final, TELEPORT_REGION specification.  This says that level teleports or other non-stairway arrivals on this level can land anywhere on the level except the area of the map.  This shows the use of the ``levregion'' prefix allowed in certain region specifications. Normally, regions apply only to the most recent MAP specification, but when prefixed with ``levregion'', one can refer to any area of the level, regardless of the placement of the current MAP in the level.</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">AUTHOR</h2>
        <div class="sectioncontent">
<p>Jean-Christophe Collet, David Cohrs.</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">RELATED TO lev_comp&hellip;</h2>
        <div class="sectioncontent">
<p><a href="../man6/dgn_comp.6.html"><strong>dgn_comp</strong>(6)</a>, <a href="../man6/nethack.6.html"><strong>nethack</strong>(6)</a></p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">BUGS</h2>
        <div class="sectioncontent">
<p>Probably infinite. Most importantly, still needs additional bounds checking.</p>
        </div>
      </section>
<nav>
  <ul class="pager">
   <li class="previous"><a href="lbreakout2server.6.html"><span aria-hidden="true">&larr;</span> lbreakout2server.6: Lbreakout2 multi-player server</a></li>
   <li class="next"><a href="lgeneral.6.html">lgeneral.6: A turn-based strategy game engine. <span aria-hidden="true">&rarr;</span></a></li>
  </ul>
</nav>

  </div>
  <!-- jQuery (necessary for Bootstrap's JavaScript plugins) -->
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.2/jquery.min.js"></script>
  <!-- Include all compiled plugins (below), or include individual files as needed -->
  <script src="/js/bootstrap.min.js"></script>
  <script>
    (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
      (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
      m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
    })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

    ga('create', 'UA-60781387-1', 'auto');
    ga('send', 'pageview');

  </script>
</body>
</html>
