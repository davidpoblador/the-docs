<!DOCTYPE html>
<html lang="en">
<head>
  <link href="https://fonts.googleapis.com/css?family=Fira+Mono:400,700&effect=destruction%7Cshadow-multiple" rel="stylesheet" type="text/css">
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>dgn_comp: Nethack dungeon compiler</title>
  <link href="/css/bootstrap.min.css" rel="stylesheet">
  <link href="/css/manpage.css" rel="stylesheet">
  <link rel="apple-touch-icon" sizes="57x57" href="/icons/apple-icon-57x57.png">
  <link rel="apple-touch-icon" sizes="60x60" href="/icons/apple-icon-60x60.png">
  <link rel="apple-touch-icon" sizes="72x72" href="/icons/apple-icon-72x72.png">
  <link rel="apple-touch-icon" sizes="76x76" href="/icons/apple-icon-76x76.png">
  <link rel="apple-touch-icon" sizes="114x114" href="/icons/apple-icon-114x114.png">
  <link rel="apple-touch-icon" sizes="120x120" href="/icons/apple-icon-120x120.png">
  <link rel="apple-touch-icon" sizes="144x144" href="/icons/apple-icon-144x144.png">
  <link rel="apple-touch-icon" sizes="152x152" href="/icons/apple-icon-152x152.png">
  <link rel="apple-touch-icon" sizes="180x180" href="/icons/apple-icon-180x180.png">
  <link rel="icon" type="image/png" sizes="192x192" href="/icons/android-icon-192x192.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/icons/favicon-32x32.png">
  <link rel="icon" type="image/png" sizes="96x96" href="/icons/favicon-96x96.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/icons/favicon-16x16.png">
  <link rel="manifest" href="/icons/manifest.json">
  <meta name="msapplication-TileColor" content="#ffffff">
  <meta name="msapplication-TileImage" content="/icons/ms-icon-144x144.png">
  <meta name="theme-color" content="#ffffff">
  <meta name="description" content="Nethack dungeon compiler">
  <meta name="twitter:card" content="summary_large_image">
  <meta name="twitter:site" content="@CartaTech">
  <meta name="twitter:creator" content="@CartaTech">
  <meta name="twitter:title" content="dgn_comp (6) manual">
  <meta name="twitter:description" content="Nethack dungeon compiler">
  <meta name="twitter:image" content="https://www.carta.tech/images/nethack-common-dgn_comp-6.png">
  <meta property="og:url" content="https://www.carta.tech/man-pages/man6/dgn_comp.6.html" />
  <meta property="og:type" content="website" />
  <meta property="og:title" content="dgn_comp (6) manual" />
  <meta property="og:description" content="Nethack dungeon compiler" />
  <meta property="fb:app_id" content="1241677679199500" />
  <meta property="og:image" content="https://www.carta.tech/images/nethack-common-dgn_comp-6.png" />
  <meta property="og:image:width" content="600" />
  <meta property="og:image:height" content="315" />
</head>
<body>
  <div class="container final">
          <div class="page-header">
        <h1 class="font-effect-destruction">dgn_comp<small> (6)</small></h1>
        <p class="lead">Nethack dungeon compiler</p>
      </div>

    <ol class="breadcrumb" itemscope itemtype="http://schema.org/BreadcrumbList">
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/">
      <span itemprop="name">Carta.tech</span>
    </a>
    <meta itemprop="position" content="1" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/">
      <span itemprop="name">Man Pages</span>
    </a>
    <meta itemprop="position" content="2" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/man6/">
      <span itemprop="name">Games</span>
    </a>
    <meta itemprop="position" content="3" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/man6/dgn_comp.6.html">
      <span itemprop="name">dgn_comp: Nethack dungeon compiler</span>
    </a>
    <meta itemprop="position" content="4" />
  </li>
</ol>
<ol class="breadcrumb" itemscope itemtype="http://schema.org/BreadcrumbList">
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/">
      <span itemprop="name">Carta.tech</span>
    </a>
    <meta itemprop="position" content="1" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/packages/">
      <span itemprop="name">Packages</span>
    </a>
    <meta itemprop="position" content="2" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/packages/nethack-common/">
      <span itemprop="name">nethack-common</span>
    </a>
    <meta itemprop="position" content="3" />
  </li>
  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemscope itemtype="http://schema.org/Thing" itemprop="item" href="/man-pages/man6/dgn_comp.6.html">
      <span itemprop="name">dgn_comp: Nethack dungeon compiler</span>
    </a>
    <meta itemprop="position" content="4" />
  </li>
</ol>
    
      <section>
        <h2 class="font-effect-shadow-multiple">SYNOPSIS</h2>
        <div class="sectioncontent">
<p><strong>dgn_comp</strong> [ <em>file</em> ]</p><p>If no arguments are given, it reads standard input.</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">DESCRIPTION</h2>
        <div class="sectioncontent">
<p><em>Dgn_comp</em> is a dungeon compiler for NetHack version 3.2 and higher.  It takes a description file as an argument and produces a dungeon "script" that is to be loaded by NetHack at runtime.</p><p>The purpose of this tool is to provide NetHack administrators and implementors with a convenient way to create a custom dungeon for the game, without having to recompile the entire world.</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">GRAMMAR</h2>
        <div class="sectioncontent">
<p>DUNGEON: <strong>name</strong> <strong>bonesmarker</strong> ( <strong>base</strong> , <strong>rand</strong> ) [ <strong>%age</strong> ]</p><p>where <strong>name</strong> is the dungeon name, <strong>bonesmarker</strong> is a letter for marking bones files, ( <strong>base</strong> , <strong>rand</strong> ) is the number of levels, and <strong>%age</strong> is its percentage chance of being generated (if absent, 100% chance).</p><p>DESCRIPTION: <strong>tag</strong></p><p>where <strong>tag</strong> is currently one of <strong>HELLISH</strong>, <strong>MAZELIKE</strong>, or <strong>ROGUELIKE</strong>.</p><p>ALIGNMENT | LEVALIGN: [ <strong>lawful</strong> | <strong>neutral</strong> | <strong>chaotic</strong> | <strong>unaligned</strong> ]</p><p>gives the alignment of the dungeon/level (default is unaligned).</p><p>ENTRY: <strong>level</strong></p><p>the dungeon entry point.  The dungeon connection attaches at this level of the given dungeon. If the value of <strong>level</strong> is negative, the entry level is calculated from the bottom of the dungeon, with -1 being the last level. If this line is not present in a dungeon description, the entry level defaults to 1.</p><p>PROTOFILE: <strong>name</strong></p><p>the prototypical name for dungeon level files in this dungeon. For example, the PROTOFILE name for the dungeon <em>Vlad's Tower</em> is <em>tower</em>.</p><p>LEVEL: <strong>name</strong> <strong>bonesmarker</strong> @ ( <strong>base</strong> , <strong>rand</strong> ) [ <strong>%age</strong> ]</p><p>where <strong>name</strong> is the level name, <strong>bonesmarker</strong> is a letter for marking bones files, ( <strong>base</strong> , <strong>rand</strong> ) is the location and <strong>%age</strong> is the generation percentage, as above.</p><p>RNDLEVEL: <strong>name</strong> <strong>bonesmarker</strong> @ ( <strong>base</strong> , <strong>rand</strong> ) [ <strong>%age</strong> ] <strong>rndlevs</strong></p><p>where <strong>name</strong> is the level name, <strong>bonesmarker</strong> is a letter for marking bones files, ( <strong>base</strong> , <strong>rand</strong> ) is the location, <strong>%age</strong> is the generation percentage, as above, and <strong>rndlevs</strong> is the number of similar levels available to choose from.</p><p>CHAINLEVEL: <strong>name</strong> <strong>bonesmarker</strong> <strong>prev_name</strong> + ( <strong>base</strong> , <strong>rand</strong> ) [ <strong>%age</strong> ]</p><p>where <strong>name</strong> is the level name, <strong>bonesmarker</strong> is a letter for marking bones files, <strong>prev_name</strong> is the name of a level defined previously, ( <strong>base</strong> , <strong>rand</strong> ) is the <em>offset</em> from the level being chained from, and <strong>%age</strong> is the generation percentage.</p><p>RNDCHAINLEVEL: <strong>name</strong> <strong>bonesmarker</strong> <strong>prev_name</strong> + ( <strong>base</strong> , <strong>rand</strong> ) [ <strong>%age</strong> ] <strong>rndlevs</strong></p><p>where <strong>name</strong> is the level name, <strong>bonesmarker</strong> is a letter for marking bones files, <strong>prev_name</strong> is the name of a level defined previously, ( <strong>base</strong> , <strong>rand</strong> ) is the <em>offset</em> from the level being chained from, <strong>%age</strong> is the generation percentage, and <strong>rndlevs</strong> is the number of similar levels available to choose from.</p><p>LEVELDESC: <strong>type</strong></p><p>where <strong>type</strong> is the level type, (see DESCRIPTION, above). The <strong>type</strong> is used to override any pre-set value used to describe the entire dungeon, for this level only.</p><p>BRANCH: <strong>name</strong> @ ( <strong>base</strong> , <strong>rand</strong> ) [ <strong>stair</strong> | <strong>no_up</strong> | <strong>no_down</strong> | <strong>portal</strong> ] [ <strong>up</strong> | <strong>down</strong> ]</p><p>where <strong>name</strong> is the name of the dungeon to branch to, and ( <strong>base</strong> , <strong>rand</strong> ) is the location of the branch. The last two optional arguments are the branch type and branch direction. The type of a branch can be a two-way stair connection, a one-way stair connection, or a magic portal. A one-way stair is described by the types <strong>no_up</strong> and <strong>no_down</strong> which specify which stair direction is missing. The default branch type is <strong>stair</strong>. The direction for a stair can be either up or down; direction is not applicable to portals.  The default direction is <strong>down</strong>.</p><p>CHAINBRANCH: <strong>name</strong> <strong>prev_name</strong> + ( <strong>base</strong> , <strong>rand</strong> ) [ <strong>stair</strong> | <strong>no_up</strong> | <strong>no_down</strong> | <strong>portal</strong> ] [ <strong>up</strong> | <strong>down</strong> ]</p><p>where <strong>name</strong> is the name of the dungeon to branch to, <strong>prev_name</strong> is the name of a previously defined <strong>level</strong> and ( <strong>base</strong> , <strong>rand</strong> ) is the <em>offset</em> from the level being chained from. The optional branch type and direction are the same as described above.</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">GENERIC RULES</h2>
        <div class="sectioncontent">
<p>Each dungeon must have a unique <strong>bonesmarker ,</strong> and each special level must have a <strong>bonesmarker</strong> unique within its dungeon (letters may be reused in different dungeons). If the <strong>bonesmarker</strong> has the special value "none", no bones files will be created for that level or dungeon.</p><p>The value <strong>base</strong> may be in the range of 1 to <strong>MAXLEVEL</strong> (as defined in <em>global.h</em> ).</p><p>The value <strong>rand</strong> may be in the range of -1 to <strong>MAXLEVEL</strong>.</p><p>If <strong>rand</strong> is -1 it will be replaced with the value (num_dunlevs(dungeon) - base) during the load process (ie. from here to the end of the dungeon).</p><p>If <strong>rand</strong> is 0 the level is located absolutely at <strong>base</strong>.</p><p>Branches don't have a probability.  Dungeons do.  If a dungeon fails to be generated during load, all its levels and branches are skipped.</p><p>No level or branch may be chained from a level with a percentage generation probability.  This is to prevent non-resolution during the load. In addition, no branch may be made from a dungeon with a percentage generation probability for the same reason.</p><p>As a general rule using the dungeon compiler:</p><p>If a dungeon has a <strong>protofile</strong> name associated with it (<em>eg.</em> <strong>tower</strong>) that file will be used.</p><p>If a special level is present, it will override the above rule and the appropriate file will be loaded.</p><p>If neither of the above are present, the standard generator will take over and make a "normal" level.</p><p>A level alignment, if present, will override the alignment of the dungeon that it exists within.</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">EXAMPLE</h2>
        <div class="sectioncontent">
<p>Here is the current syntax of the dungeon compiler's "language":</p>
<pre>
#
#	The dungeon description file for the "standard" original
#	3.0 NetHack.
#
DUNGEON:	"The Dungeons of Doom" "D" (25, 5)
LEVEL:		"rogue" "none" @ (15, 4)
LEVEL:		"oracle" "none" @ (5, 7)
LEVEL:		"bigroom" "B" @ (12, 3) 15
LEVEL:		"medusa" "none" @ (20, 5)
CHAINLEVEL:	"castle" "medusa" + (1, 4)
CHAINBRANCH:	"Hell" "castle" + (0, 0) no_down
BRANCH:		"The Astral Plane" @ (1, 0) no_down up

DUNGEON:	"Hell" "H" (25, 5)
DESCRIPTION:	mazelike
DESCRIPTION:	hellish
BRANCH:		"Vlad's Tower" @ (13, 5) up
LEVEL:		"wizard" "none" @ (15, 10)
LEVEL:		"fakewiz" "A" @ (5, 5)
LEVEL:		"fakewiz" "B" @ (10, 5)
LEVEL:		"fakewiz" "C" @ (15, 5)
LEVEL:		"fakewiz" "D" @ (20, 5)
LEVEL:		"fakewiz" "E" @ (25, 5)

DUNGEON:	"Vlad's Tower" "T" (3, 0)
PROTOFILE:	"tower"
DESCRIPTION:	mazelike
ENTRY:		-1

DUNGEON:	"The Astral Plane" "A" (1, 0)
DESCRIPTION:	mazelike
PROTOFILE:	"endgame"
</pre>
<p><em>NOTES:</em></p><p>Lines beginning with '#' are considered comments.</p><p>A special level must be explicitly aligned.  The alignment of the dungeon it is in only applies to non-special levels within that dungeon.</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">AUTHOR</h2>
        <div class="sectioncontent">
<p>M. Stephenson (from the level compiler by Jean-Christophe Collet).</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">RELATED TO dgn_comp&hellip;</h2>
        <div class="sectioncontent">
<p><a href="../man6/lev_comp.6.html"><strong>lev_comp</strong>(6)</a>, <a href="../man6/nethack.6.html"><strong>nethack</strong>(6)</a></p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">BUGS</h2>
        <div class="sectioncontent">
<p>Probably infinite.</p>
        </div>
      </section>
<nav>
  <ul class="pager">
   <li class="previous"><a href="dessert.6.html"><span aria-hidden="true">&larr;</span> dessert.6: Print a random german adage  regeln - print a random german peasant's maxim</a></li>
   <li class="next"><a href="dink.6.html">dink.6: Adventure and role-playing game (engine) <span aria-hidden="true">&rarr;</span></a></li>
  </ul>
</nav>

  </div>
  <!-- jQuery (necessary for Bootstrap's JavaScript plugins) -->
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.2/jquery.min.js"></script>
  <!-- Include all compiled plugins (below), or include individual files as needed -->
  <script src="/js/bootstrap.min.js"></script>
  <script>
    (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
      (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
      m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
    })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

    ga('create', 'UA-60781387-1', 'auto');
    ga('send', 'pageview');

  </script>
</body>
</html>
