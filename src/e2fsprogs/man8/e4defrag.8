<!DOCTYPE html>
<html lang="en">
<head>
  <link href="https://fonts.googleapis.com/css?family=Fira+Mono:400,700&effect=destruction%7Cshadow-multiple" rel="stylesheet" type="text/css">
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>e4defrag - online defragmenter for ext4 filesystem</title>
  <link href="/css/bootstrap.min.css" rel="stylesheet">
  <link href="/css/manpage.css" rel="stylesheet">
  <link rel="apple-touch-icon" sizes="57x57" href="/icons/apple-icon-57x57.png">
  <link rel="apple-touch-icon" sizes="60x60" href="/icons/apple-icon-60x60.png">
  <link rel="apple-touch-icon" sizes="72x72" href="/icons/apple-icon-72x72.png">
  <link rel="apple-touch-icon" sizes="76x76" href="/icons/apple-icon-76x76.png">
  <link rel="apple-touch-icon" sizes="114x114" href="/icons/apple-icon-114x114.png">
  <link rel="apple-touch-icon" sizes="120x120" href="/icons/apple-icon-120x120.png">
  <link rel="apple-touch-icon" sizes="144x144" href="/icons/apple-icon-144x144.png">
  <link rel="apple-touch-icon" sizes="152x152" href="/icons/apple-icon-152x152.png">
  <link rel="apple-touch-icon" sizes="180x180" href="/icons/apple-icon-180x180.png">
  <link rel="icon" type="image/png" sizes="192x192" href="/icons/android-icon-192x192.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/icons/favicon-32x32.png">
  <link rel="icon" type="image/png" sizes="96x96" href="/icons/favicon-96x96.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/icons/favicon-16x16.png">
  <link rel="manifest" href="/icons/manifest.json">
  <meta name="msapplication-TileColor" content="#ffffff">
  <meta name="msapplication-TileImage" content="/icons/ms-icon-144x144.png">
  <meta name="theme-color" content="#ffffff">
  <meta name="description" content="${metadescription}">
  
</head>
<body>
  <div class="container final">
          <div class="page-header">
        <h1 class="font-effect-destruction">e4defrag<small> (8)</small></h1>
        <p class="lead">online defragmenter for ext4 filesystem</p>
      </div>

    <ol class="breadcrumb">
	<li itemscope itemtype="http://data-vocabulary.org/Breadcrumb" itemref="breadcrumb_section">
		<a itemprop="url" href="https://www.carta.tech/man-pages/"><span itemprop="title">Linux Man Pages</span></a>
	</li>
	<li id="breadcrumb_section" itemscope itemtype="http://data-vocabulary.org/Breadcrumb" itemref="breadcrumb_page" itemprop="child">
		<a itemprop="url" href="https://www.carta.tech/man-pages/man8/"><span itemprop="title">System administration commands</span></a>
	</li>
	<li id="breadcrumb_page" itemscope itemtype="http://data-vocabulary.org/Breadcrumb" itemprop="child" class="active">
		<a itemprop="url" href="https://www.carta.tech/man-pages/man8/e4defrag.8.html"><span itemprop="title">e4defrag</span></a>
	</li>
</ol>
    
      <section>
        <h2 class="font-effect-shadow-multiple">SYNOPSIS</h2>
        <div class="sectioncontent">

<p><strong>e4defrag</strong> [ <strong>-c</strong> ] [ <strong>-v</strong> ] <em>target</em> ...</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">DESCRIPTION</h2>
        <div class="sectioncontent">

<p><strong>e4defrag</strong> reduces fragmentation of extent based file. The file targeted by <strong>e4defrag</strong> is created on ext4 filesystem made with "-O extent" option (see <a href="../man8/mke2fs.8.html"><strong>mke2fs</strong>(8)</a>). The targeted file gets more contiguous blocks and improves the file access speed.</p>
<p class='spacer'>

<p><em>target</em> is a regular file, a directory, or a device that is mounted as ext4 filesystem. If <em>target</em> is a directory, <strong>e4defrag</strong> reduces fragmentation of all files in it. If <em>target</em> is a device, <strong>e4defrag</strong> gets the mount point of it and reduces fragmentation of all files in this mount point.</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">OPTIONS</h2>
        <div class="sectioncontent">

  <dl class='dl-vertical'>
    <dt><strong>-c</strong></dt>
    <dd>
  <p>Get a current fragmentation count and an ideal fragmentation count, and calculate fragmentation score based on them. By seeing this score, we can determine whether we should execute <strong>e4defrag</strong> to <em>target</em>. When used with <strong>-v</strong> option, the current fragmentation count and the ideal fragmentation count are printed for each file.</p>
<p class='spacer'>

  <p>Also this option outputs the average data size in one extent. If you see it, you'll find the file has ideal extents or not. Note that the maximum extent size is 131072KB in ext4 filesystem (if block size is 4KB).</p>
<p class='spacer'>

  <p>If this option is specified, <em>target</em> is never defragmented.</p>
    </dd>
    <dt><strong>-v</strong></dt>
    <dd>
  <p>Print error messages and the fragmentation count before and after defrag for each file.</p>
    </dd>
  </dl>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">NOTES</h2>
        <div class="sectioncontent">

<p><strong>e4defrag</strong> does not support swap file, files in lost+found directory, and files allocated in indirect blocks. When <em>target</em> is a device or a mount point, <strong>e4defrag</strong> doesn't defragment files in mount point of other device.</p>
<p class='spacer'>

<p>Non-privileged users can execute <strong>e4defrag</strong> to their own file, but the score is not printed if <strong>-c</strong> option is specified. Therefore, it is desirable to be executed by root user.</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">AUTHOR</h2>
        <div class="sectioncontent">

<p>Written by Akira Fujita &lt;a-fujita@rs.jp.nec.com&gt; and Takashi Sato &lt;t-sato@yk.jp.nec.com&gt;.</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">SEE ALSO</h2>
        <div class="sectioncontent">

<p><a href="../man8/mke2fs.8.html"><strong>mke2fs</strong>(8)</a>, <a href="../man8/mount.8.html"><strong>mount</strong>(8)</a>.</p>
<p class='spacer'>

        </div>
      </section>
<nav>
  <ul class="pager">
  <li class="previous"><a href="e2undo.8.html"><span aria-hidden="true">&larr;</span> e2undo.8: Replay an undo log for an ext2/ext3/ext4 filesystem</a></li><li class="next"><a href="faillog.8.html">faillog.8: display faillog records or set login failure limits <span aria-hidden="true">&rarr;</span></a></li>
  </ul>
</nav>
  </div>
  <!-- jQuery (necessary for Bootstrap's JavaScript plugins) -->
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.2/jquery.min.js"></script>
  <!-- Include all compiled plugins (below), or include individual files as needed -->
  <script src="/js/bootstrap.min.js"></script>
  <script>
    (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
      (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
      m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
    })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

    ga('create', 'UA-60781387-1', 'auto');
    ga('send', 'pageview');

  </script>
</body>
</html>
