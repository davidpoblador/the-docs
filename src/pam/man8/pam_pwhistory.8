<!DOCTYPE html>
<html lang="en">
<head>
  <link href="https://fonts.googleapis.com/css?family=Fira+Mono:400,700&effect=destruction%7Cshadow-multiple" rel="stylesheet" type="text/css">
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>pam_pwhistory - PAM module to remember last passwords</title>
  <link href="/css/bootstrap.min.css" rel="stylesheet">
  <link href="/css/manpage.css" rel="stylesheet">
  <link rel="apple-touch-icon" sizes="57x57" href="/icons/apple-icon-57x57.png">
  <link rel="apple-touch-icon" sizes="60x60" href="/icons/apple-icon-60x60.png">
  <link rel="apple-touch-icon" sizes="72x72" href="/icons/apple-icon-72x72.png">
  <link rel="apple-touch-icon" sizes="76x76" href="/icons/apple-icon-76x76.png">
  <link rel="apple-touch-icon" sizes="114x114" href="/icons/apple-icon-114x114.png">
  <link rel="apple-touch-icon" sizes="120x120" href="/icons/apple-icon-120x120.png">
  <link rel="apple-touch-icon" sizes="144x144" href="/icons/apple-icon-144x144.png">
  <link rel="apple-touch-icon" sizes="152x152" href="/icons/apple-icon-152x152.png">
  <link rel="apple-touch-icon" sizes="180x180" href="/icons/apple-icon-180x180.png">
  <link rel="icon" type="image/png" sizes="192x192" href="/icons/android-icon-192x192.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/icons/favicon-32x32.png">
  <link rel="icon" type="image/png" sizes="96x96" href="/icons/favicon-96x96.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/icons/favicon-16x16.png">
  <link rel="manifest" href="/icons/manifest.json">
  <meta name="msapplication-TileColor" content="#ffffff">
  <meta name="msapplication-TileImage" content="/icons/ms-icon-144x144.png">
  <meta name="theme-color" content="#ffffff">
  <meta name="description" content="${metadescription}">
  
</head>
<body>
  <div class="container final">
          <div class="page-header">
        <h1 class="font-effect-destruction">pam_pwhistory<small> (8)</small></h1>
        <p class="lead">PAM module to remember last passwords</p>
      </div>

    <ol class="breadcrumb">
	<li itemscope itemtype="http://data-vocabulary.org/Breadcrumb" itemref="breadcrumb_section">
		<a itemprop="url" href="https://www.carta.tech/man-pages/"><span itemprop="title">Linux Man Pages</span></a>
	</li>
	<li id="breadcrumb_section" itemscope itemtype="http://data-vocabulary.org/Breadcrumb" itemref="breadcrumb_page" itemprop="child">
		<a itemprop="url" href="https://www.carta.tech/man-pages/man8/"><span itemprop="title">System administration commands</span></a>
	</li>
	<li id="breadcrumb_page" itemscope itemtype="http://data-vocabulary.org/Breadcrumb" itemprop="child" class="active">
		<a itemprop="url" href="https://www.carta.tech/man-pages/man8/pam_pwhistory.8.html"><span itemprop="title">pam_pwhistory</span></a>
	</li>
</ol>
    
      <section>
        <h2 class="font-effect-shadow-multiple">SYNOPSIS</h2>
        <div class="sectioncontent">

<p><strong>pam_pwhistory.so</strong> [debug] [use_authtok] [enforce_for_root] [remember=<em>N</em>] [retry=<em>N</em>] [authtok_type=<em>STRING</em>]</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">DESCRIPTION</h2>
        <div class="sectioncontent">

<p class='spacer'>

<p>This module saves the last passwords for each user in order to force password change history and keep the user from alternating between the same password too frequently.</p>
<p class='spacer'>

<p>This module does not work together with kerberos. In general, it does not make much sense to use this module in conjunction with NIS or LDAP, since the old passwords are stored on the local machine and are not available on another machine for password history checking.</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">OPTIONS</h2>
        <div class="sectioncontent">

<p class='spacer'>

<p><strong>debug</strong> Turns on debugging via <a href="../man3/syslog.3.html"><strong>syslog</strong>(3)</a>.</p>
<p class='spacer'>

<p><strong>use_authtok</strong> When password changing enforce the module to use the new password provided by a previously stacked <strong>password</strong> module (this is used in the example of the stacking of the <strong>pam_cracklib</strong> module documented below).</p>
<p class='spacer'>

<p><strong>enforce_for_root</strong> If this option is set, the check is enforced for root, too.</p>
<p class='spacer'>

<p><strong>remember=</strong><strong><em>N</em></strong> The last <em>N</em> passwords for each user are saved in /etc/security/opasswd. The default is <em>10</em>. Value of <em>0</em> makes the module to keep the existing contents of the opasswd file unchanged.</p>
<p class='spacer'>

<p><strong>retry=</strong><strong><em>N</em></strong> Prompt user at most <em>N</em> times before returning with error. The default is <em>1</em>.</p>
<p class='spacer'>

<p><strong>authtok_type=</strong><strong><em>STRING</em></strong> See <strong>pam_get_authtok</strong>(3) for more details.</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">MODULE TYPES PROVIDED</h2>
        <div class="sectioncontent">

<p class='spacer'>

<p>Only the <strong>password</strong> module type is provided.</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">RETURN VALUES</h2>
        <div class="sectioncontent">

<p class='spacer'>

<p>PAM_AUTHTOK_ERR No new password was entered, the user aborted password change or new password couldn&apos;t be set.</p>
<p class='spacer'>

<p>PAM_IGNORE Password history was disabled.</p>
<p class='spacer'>

<p>PAM_MAXTRIES Password was rejected too often.</p>
<p class='spacer'>

<p>PAM_USER_UNKNOWN User is not known to system.</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">EXAMPLES</h2>
        <div class="sectioncontent">

<p class='spacer'>

<p>An example password section would be:</p>
<p class='spacer'>

<pre>#%PAM-1.0
password     required       pam_pwhistory.so
password     required       pam_unix.so        use_authtok
</pre>

<p class='spacer'>

<p>In combination with <strong>pam_cracklib</strong>:</p>
<p class='spacer'>

<pre>#%PAM-1.0
password     required       pam_cracklib.so    retry=3
password     required       pam_pwhistory.so   use_authtok
password     required       pam_unix.so        use_authtok
</pre>

<p class='spacer'>

        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">FILES</h2>
        <div class="sectioncontent">

<p class='spacer'>

<p>/etc/security/opasswd File with password history</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">SEE ALSO</h2>
        <div class="sectioncontent">

<p class='spacer'>

<p><a href="../man5/pam.conf.5.html"><strong>pam.conf</strong>(5)</a>, <a href="../man5/pam.d.5.html"><strong>pam.d</strong>(5)</a>, <strong>pam</strong>(8)<strong>pam_get_authtok</strong>(3)</p>
        </div>
      </section>

      <section>
        <h2 class="font-effect-shadow-multiple">AUTHOR</h2>
        <div class="sectioncontent">

<p class='spacer'>

<p>pam_pwhistory was written by Thorsten Kukuk &lt;kukuk@thkukuk.de&gt;</p>
        </div>
      </section>
<nav>
  <ul class="pager">
  <li class="previous"><a href="pam_permit.8.html"><span aria-hidden="true">&larr;</span> pam_permit.8: The promiscuous module</a></li><li class="next"><a href="pam_rhosts.8.html">pam_rhosts.8: The rhosts PAM module <span aria-hidden="true">&rarr;</span></a></li>
  </ul>
</nav>
  </div>
  <!-- jQuery (necessary for Bootstrap's JavaScript plugins) -->
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.2/jquery.min.js"></script>
  <!-- Include all compiled plugins (below), or include individual files as needed -->
  <script src="/js/bootstrap.min.js"></script>
  <script>
    (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
      (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
      m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
    })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

    ga('create', 'UA-60781387-1', 'auto');
    ga('send', 'pageview');

  </script>
</body>
</html>
